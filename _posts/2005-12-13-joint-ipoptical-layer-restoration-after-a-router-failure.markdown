---

title: Joint IP/optical layer restoration after a router failure
abstract: A method and system for providing joint IP/Optical Layer restoration mechanisms for the IP over Optical Layer architecture, particularly for protecting against router failure within such architecture, includes any one of plural node elements participating in the detection and restoration of the joint IP/Optical Layer architecture upon the failure of a router in one of the nodes. The plural node elements may include, but are not limited to, one of plural routers and an optical cross-connect.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09042720&OS=09042720&RS=09042720
owner: AT&T Intellectual Property II, L.P.
number: 09042720
owner_city: Atlanta
owner_country: US
publication_date: 20051213
---
This application is a continuation of application Ser. No. 09 908 752 filed Jul. 20 2001 now abandoned which claims the benefit of U.S Provisional Patent Application Ser. No. 60 219 777 filed Jul. 20 2000.

The invention generally relates to optical communications and particularly a method for the restoration of a joint IP optical layer after failure of a router therein.

With the Internet rapidly replacing traditional telephone networks as the ubiquitous network infrastructure there is ever increasing consumer demand for greater bandwidth which translates to a need for increased system performance. Coping with the continuing high growth rate of Internet traffic volume is a significantly challenging scalability problem. Fiber optics using Wavelength Division Multiplexing WDM offers the enormous capacity that the Internet requires to continue to grow at its present and projected future rates. In addition the increasing agility of the latest Optical Layer Cross Connects OLXCs offers the ability to dynamically change the optical layer connectivity on small time scales. OLXCs have the ability to convert the wavelength of any incoming channel to any outgoing wavelength i.e. have wavelength conversion .

Internet Protocol IP network connectivity is more often being provided by optical circuits including OC 48 192 for example. Thus is a schematic diagram showing the connectivity of IP layer to an optical layer . shows a more specific schematic diagram in which IP router may be either hard wired to Dense Wave Division Multiplexer DWDM for transport or it may be connected to OLXC .

There is an underlying conflict however between the typical datagram connectionless service that supports the best effort data delivery of the Internet and virtual circuit connection based service. This conflict is exacerbated in the world of optical networks due to the fixed nature of the wavelengths available and the restoration of service in optical networks.

Optical networks are connection oriented and designed for fixed rate bit streaming with very low error rates. Whereas the Internet employs soft state where possible the state of the optical infrastructure that is encoded in its OLXCs is hard and must be explicitly removed. The key elements in the success of the Internet have been its simplicity and the flexibility of the Internet service model and therefore a significant challenge in leveraging the new optical capabilities to enhance the Internet and other services is to manage the optical resources efficiently without sacrificing the simplicity and flexibility of the Internet.

In spite of most traffic and media types becoming internet protocol IP based multiple hop high bandwidth optical connections referred to as lightpaths will continue to be of value. Aggregate loads between major metropolitan areas are rather stable with most of the achievable statistical multiplexing already attained in the regional and collection distribution portion of the network. With electronic switching systems coping with substantial regional network volumes this load can conveniently be assigned to point to point lightpaths that bypass intermediate backbone routers reducing their load and reducing end to end delay and delay variation. Traffic engineering i.e. load and quality management is increasingly performed by adjusting connectivity and capacity between major backbone gateways on a relatively large time scale still small compared to the time scale of provisioning.

This is both a primary function of and a significant reason that ATM or Multi Protocol Label Switching MPLS is employed below the IP layer by most network operators. Agile dynamically configurable OLXCs allow the use of the optical layer directly to implement these functions avoiding having ATM or MPLS as intermediate layers in future networks. Lightpaths carrying transit traffic or non IP traffic may remain a significant source of revenue for network operators for the foreseeable future. Whereas much of the transit capacity may carry IP traffic operators leasing optical capacity may choose not to disclose this.

There are issues involving networks in general as they relate to where particular service and intelligence are provided. Functions previously provided by a SONET SDH layer.

SONET Synchronous Optical NETwork SDH Synchronous Digital Hierachy is an industry standard for broadband optical fiber communications. It provides universal optical interfaces at OC N STM M rate. It also provides integrated OAM P capabilities within each network element which enables fast protection restoration. A good reference book is Understanding SONET SDH Standards and Applications by Ming Chwan Chow Andan Publisher 1995. interposed not shown above optical layer must be distributed between IP layer and Optical Layer in the architecture of and including the recovery of service after equipment failure.

Restoration may be provided by either the IP layer or the optical layer . The optical layer is able to independently provide sub second protection and or restoration for link failures that is when a fiber is cut and is the most cost effective solution therefore. However when a router in the IP Optical Layer architecture fails the optical layer has no independent awareness of the router failure.

Thus presently it is the IP layer that includes the necessary functionality for protecting against router failure. In addition the IP layer may include extra link capacity so that the quality of service may be preserved in the event of a router failure. As a result it is then more cost effective to use the extra link capacity to protect against link failure and thus there is no incentive to utilize the protection restoration function provided by the optical layer . Accordingly IP network operators may choose a restoration strategy that depends solely upon the IP layer .

However IP layer restoration systems have some disadvantages. For instance the failure of an unprotected link may result in a mean time to repair in the range of four to ten hours although mean time to repair for a router failure may be less than one hour. Still the excessive amount of down time due to a link failure may result in further router failures which has the potential for significant network congestion.

Accordingly the present invention includes a method and system for providing joint IP Optical Layer restoration mechanisms for the IP over Optical Layer architecture particularly for protecting against router failure within such architecture.

According to an example embodiment of the present invention any one of plural node elements may participate in the detection and restoration of the joint IP Optical Layer architecture upon the failure of a router in one of the nodes. The plural node elements may include but are not limited to one of plural routers and an optical cross connect OXLC .

For example a node element may detect a failure in a lightpath to a node transmit a request to an optical network to re establish the lightpath and reestablish the lightpath using a backup or redundant router in place of a failed router at the same node thereof.

All routers at the nodes are used during normal operations though for the purposes of this description one router may be deemed to be redundant since it backs up traffic for another router that has failed at the same node. The node element that detects the failed router may include a router disposed at another node whereby the lightpath runs between the detecting router and the failed router a redundant router at the same node as the failed router or an OXC at the same node as the failed router.

If the router failure is detected by a router at either a remote node or at the same node as the failed router the detecting router transmits a request to an OXC at the respective node that the lightpath be re established using the redundant router in place of the failed router. If the detecting router is at the remote node the OXC at the remote node transmits the request to the OXC at the same node as the failed router.

Upon receiving the request for re establishing the failed lightpath by using the redundant router in place of the failed router the OXC at the same node as the failed router coordinates the re establishment of all links using the redundant router in place of the failed router. Also the OXC at the same node as the failed router may also detect the failed router and re establish links using the redundant router in place of the failed router.

As set forth above illustrates a joint IP Optical Layer network node with the optical layer cross connect OLXC connected to DWDM to thereby be connected to other OLXCs. The network node may further include IP router along with dynamically reconfigurable OLXC . Optical lightpaths may be established between network elements via OLXCs and the lightpaths serve as a virtual circuit.

In order to facilitate the description of the present invention the following network objects are defined.

A Wavelength Division Multiplexer WDM is a system that converts multiple optical inputs into narrowly spaced wavelength optical signals within an optical amplification band and couples them onto a single fiber. At the receiving end the amplified signal may be de multiplexed and converted to multiple channels of standard wavelength to interface with other equipment. It may also be possible to take the wavelength specific signals directly as the inputs. In that case no wavelength conversion may be necessary at the WDM system. The WDM system may or may not be integrated with an OLXC.

A channel is a unidirectional optical tributary connecting two OLXCs. Multiple channels may be multiplexed optically at the WDM system. One direction of an OC 48 192 connecting two immediately neighboring OLXCs is an example of a channel. A single direction of an Optical channel Och as defined in ITU T G.872 between two OLXCs over a WDM system is another example of a channel. A channel may generally be associated with a specific wavelength in the WDM system. However in a WDM system with transponders the interfaces to the OLXC may be a standard single color 1310 or 1550 nm . Further a single wavelength may transport multiple channels multiplexed in the time domain. For example an OC 192 signal on a fiber may carry four STS 48 channels. For these reasons a channel may be defined separately from wavelength although in most applications there is a one to one correspondence.

An optical layer cross connect OLXC is a switching element that connects an optical channel from an input port to an output port. An OLXC may also be referred to as an optical cross connect OXC and therefore shall be referred to as OXC hereafter.

A drop port is an OXC port that connects to the end client network element NE . The drop interface may connect the client port to the OXC drop port. The OXC drop port is essentially a User Network Interface UNI that connects end devices to the optical layer. The drop port terminates the user network interface between the client NE and the optical network. It is necessary to distinguish this type of interface from others to identify network requests originating from a client NE.

A network port is an OXC port that does not directly interface with an end client NE. A Network Port in an OXC interfaces with another Network Port via a WDM system or directly via optical fibers.

A lightpath is an abstraction of optical layer connectivity between two end points. A lightpath is a fixed bandwidth connection e.g. one direction of a STM N OC M payload or an Och payload between two network elements NEs established via OXCs. A bidirectional lightpath includes two associated lightpaths in opposite directions routed over a same set of nodes.

A source may be a client router physically connected to an OXC by one or more OC 48 192 interfaces. A source may also be a non IP NE connected to the OLXC via an OC 48 192 interface. In the case of an IP router source the router may have an IP address and the physical interfaces to the OXC are identified with some set of addresses potentially a single IP address or a unique address per port . In the case of a non IP NE either the NE may be assigned an IP address or the OLXC port connecting the NE may have an IP address. For non IP aware equipment interfacing the OLXC any connection request must be originated externally via a proxy or external OS interfaces. The destination is essentially the same as the source from the physical interface perspective. When a request is generated from one end the other end client or end OXC interface may become the destination.

A prominent feature of joint IP Optical Layer network architecture according to an example embodiment of the present invention is that every office or node A F in the network includes multiple or redundant IP routers . and a dynamically reconfigurable OXC as shown in although the present invention is in no way limited thereto. In however only office node B is shown as having multiple routers though the present invention is not limited thereto. Rather it is intended in the present example embodiment of the invention that all offices nodes have multiple or redundant IP routers .

Each IP office node may be connected to other offices nodes by one or more lightpaths. On each link within the network one channel wavelength is assigned as the default routed one hop lightpath. The routed lightpath may provide router to router connectivity over this link. These routed lightpaths may reflect and are thus identical to the physical topology. The assignment of this default lightpath is by convention e.g. the first channel wavelength. All traffic using this lightpath is IP traffic and is forwarded by the router.

As shown in IP routers at the respective offices nodes may communicate with their respective OXCs through a logical interface not shown . The logical interface defines a set of basic primitives to configure the respective OXC and to enable the respective OXC to convey information to the respective router . The mediation device translates the logical primitives to and from the proprietary controls of the OXC. A further embodiment may integrate the routers and their respective OXC into a single box or component and use a proprietary interface implementation while still providing equivalent functionality to the interface described herein.

Beyond the node local mechanisms signaling mechanisms may be required to construct optical lightpaths. An Application Programming Interface API call to create a path may require at least five parameters including destination wavelength bandwidth restoration flag and a transparency flag. If the restoration flag is set the lightpath will be protected. Lightpaths without the transparency flag are assumed to carry IP services and may be rerouted if needed. On completion an explicit tear down message is sent to remove the path.

Lightpath services may include lightpath requests between a source and destination such as an API call with the following attributes 

As set forth above restoration could be done at the IP layer and or the Optical Layer as shown in . The present invention will be explained in the exemplary context of an ISP central office using the schematic diagrams of . The IP network of includes at each node therein at least 2 backbone routers for redundancy though the detailed office architecture is shown for office B only. These routers aggregate all traffic to or from routers that connect to the customers of the IP network.

Under current IP routing systems for example when router at office node B fails IP traffic from office to would go around offices and to reach office via router the backup router for . Similarly traffic from office to which originally went through office would need to go around offices and to reach . Additional capacity may therefore be needed on all the inter office links.

Under current IP rerouting systems for example when router at office node B fails IP traffic from office to would go around offices and to reach office via router the backup router for . Similarly traffic from office to office which originally went through office would need to go around offices and to reach office . Additional capacity may therefore be needed on all the inter office links.

With the new IP over Optical Layer architecture shown in according to an embodiment of the present invention each office node may be equipped with one OXC which connects to the two backbone routers and at the same office node. Then all the OXCs may be connected by a mesh topology. Links between routers are provided by direct lightpaths through the Optical Layer which includes OXC s . In solid lines represent physical layer connectivity and the dotted lines show the OC 48 links that may be used for the transport of packets between the routers at offices and to the neighboring offices.

In the restoration scheme according to an embodiment of the present invention when router at office B fails bringing down both inter office lightpath link between routers and and the lightpath link between routers and router may detect that router has failed and may request a new connection to be set up to the backup router R. Further OXCthat connects to failed router directly may detect the failure and coordinate the setup of the new lightpath link between routers and . This new link may use the same port for the failed link between routers and on router and either the same port for the failed lightpath link between routers and on router or a spare port on router . In addition the bandwidth originally used for the lightpath link between routers and may be reused as may the intra office cabling from router to OXCand the cabling from OXCto . The restoration for router failures described above is implemented in a time period of a couple of seconds.

More specifically as shown in the failure of router at office node B step may be detected by router at office node A as in step . In step router may send a request to OXC also at node A to restore the link between routers and by setting up a new link i.e. lightpath between router and . The signaling mechanism in the optical layer coordinates the lightpath establishment. The request may be transmitted from OXCto other OXC s that are on the new lightpath i.e. OXCin this case in step and may complete all necessary switching in OXCto OXCto establish the new lightpath. Then in step upon restoration of the lightpath links to office node B routing in the IP layer will automatically discover the new link between and and router may be replaced by router for all IP traffic through office node B and restoration may be complete at step .

The failure of router at step may also be detected by the redundant router which is at the same node as the failed router at step as depicted in the flowchart in . In step router sends a request to OXCthat it connects to directly also at node B to restore the connection to office A by setting up a new lightpath link to routers . In step the signaling mechanism may forward the request from OXCto OXCto complete all necessary switching to establish the new lightpath. Then in step upon restoration of the lightpath link to office node A routing in the IP layer will may automatically discover the new link between and and router will be replaced by router for all IP traffic through office node B and restoration may be complete at step .

Further as shown in the flowchart of the failure of router at step may be detected by the cross connect OXC which is disposed at the same office node B as the failed router as in step . Since OXCcontrols connections for all routers at node B in step OXCmay restore all inter office links associated with failed router with router via the signaling mechanisms thus ending restoration at step .

The IP layer topology resulting from the restoration described in accordance with the example method embodiments of above is shown in . As a result of the restoration implementation described above lightpath traffic as shown in may utilize lightpath link from router to router using the same number of hops with no additional backbone capacity required.

As set forth above intra office capacity from cross connect OXCto router for example that was formerly used for the intra office link between routers and may be reused. Both intra office lightpath links may require the same amount of additional intra office capacity from the backup router to all provider edge routers. With the restoration scheme described above lightpath traffic between router and router via router now may use the new link between router and router with one intra office hop less than an original path to go across office B and with no additional backbone capacity required. In comparison IP rerouting would send the traffic via another route thus potentially requiring additional backbone link capacity and very likely increasing the hop count.

Thus in this example restoration against the failure of router has been achieved with no requirement for additional backbone bandwidth OXC ports or router ports.

In other cases with different topology additional ports may be required on the backup router. For example if one more backbone link is added to router in the original network shown in for example a lightpath link between routers and in addition to restoring the lightpath link between routers and using the new lightpath link between routers and the lightpath link between routers and may be replaced by new lightpath link between routers and . Since there is only one port on router e.g. the port used by the failed intra office lightpath link between routers and reusable taken by the lightpath link between routers and an port may be required on router for the further required lightpath link between routers and . In general the minimum number of additional ports needed on the backup router equals the total number of inter office links on the failed router reduced by the number of re usable ports i.e. same type of ports on the backup router that can be used by the failed intra office links between the failed router and its backup router.

After a router failure is repaired it is desirable to revert back to the normal connections. We describe the details in the following three cases 

When a neighbor of the failed router detects that the failure has been repaired it may first request the replaced lightpath to be re established using the original wavelength s and port s . After the original lightpath has been restored it may then request the recovery lightpath to be torn down. This case results in minimum interruption of the traffic.

When a neighbor of the failed router detects that the failure has been repaired it may first request the replaced lightpath to be re established using the original port s and new wavelength s if feasible. After the replaced lightpath has been restored it may then request the recovery lightpath to be torn down. However if additional wavelength s are not available or if it is required to revert back to the same wavelength s as the one s used in the normal condition the recovery lightpath may need to be torn down first before the original one gets restored using the original port s and wavelength s . This may result in some traffic loss during the reversion process.

When a neighbor of the failed router detects that the failure has been repaired it may first request the replaced lightpath to be re established using new port s and wavelength s if feasible. After the replaced lightpath has been restored it may then request the recovery lightpath to be torn down. However if additional wavelength s or port s is not available or if it is required to revert back to the same port s and wavelength s as the ones used in the normal condition the recovery lightpath needs to be torn down first before the original one gets restored using the original port s and wavelength s . This may result in some traffic loss during the reversion process.

Note that the restoration mechanisms proposed here are applicable to failure restoration for router interfaces. It is also applicable to cases without backup routers in the same office. Instead a router in a neighboring office can be used as the backup router.

While the invention has been described with respect to specific examples including presently preferred modes of carrying out the invention those skilled in the art will appreciate that there are numerous variations and permutations of the above described systems and techniques that fall within the spirit and scope of the invention as set forth in the appended claims.

