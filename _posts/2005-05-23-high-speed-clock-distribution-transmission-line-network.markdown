---

title: High speed clock distribution transmission line network
abstract: The invention is directed to a method for clock distribution and VLSI circuits include a clock distribution network. In a method of the invention, a transmission lines are patterned as to connect a clock tree and a periodic waveform clock, preferably a sine waveform, is used to control clock skew, even at frequencies extending into the gigahertz range. In an exemplary embodiment of the invention, an overlay includes differential pairs of transmission lines that connect the drivers of a clock distribution tree. In preferred embodiments of the invention, an H-tree clock distribution scheme is overlayed with a spiral of transmission lines, each realized by a differential conductors and driven using a sinusoidal standing wave to distribute global clock signals into local regions of the chip. Each transmission line connects drivers in the H-tree that are at the same level of the H-tree. In a VLSI chip according to an embodiment of the invention, the transmission line overlay delivers sinusoidal clock signals to local areas that are locally converted into digital clock signals. The invention thus presents a passive technique for clock distribution.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07679416&OS=07679416&RS=07679416
owner: The Regents of the University of California
number: 07679416
owner_city: Oakland
owner_country: US
publication_date: 20050523
---
Applicants claim priority benefits under 35 U.S.C. 119 on the basis of Patent Application No. 60 573 922 filed May 24 2004.

This invention was made with Government assistance under NSF Grant No. CCR9987678. The Government has certain rights in this invention.

Commercial microprocessors currently operate on clock signals in the gigahertz range. The scale of today s VLSI designs requires the designs to account for clock skew. Clock skew is the relative difference in time that the clock signal reaches different parts of the integrated circuit. In a microprocessor for example a global clock signal must be distributed to different parts of the chip. This internal clock signal must be distributed to a large number of clock pins. As clock frequencies increase the skew can be a limiting factor. With increasing clock frequency the clock skew caused by many nondeterministic factors such as process variations supply voltage fluctuation and temperature gradient consumes a significant portion of clock period. For high performance synchronous circuitry the design of a robust global clock distribution system which can sustain various parameter variations becomes an increasingly difficult and time consuming task.

As a result reducing clock skew is a goal in the art. RC shunted networks have been successfully used to reduce the clock skew under process variations. Three wide spine shunts have been proposed to reduce the skew between the leaf nodes of a very deep driver tree. See e.g. N. A. Kurd et al A Multigigahertz Clocking Scheme for the Pentium 4 Microprocessor IEEE Journal of Solid State Circuits Vol. 36 No. 11 November 2001 pp. 1647 53. Others have proposed a clock mesh driven by balanced H tree for global clock distribution. See e.g. M. Orshansky L. Milor P. Chen K. Keutzer and C. Hu Impact of Spatial Intrachip Gate Length Variability on the Performance of High Speed Digital Circuit IEEE trans. on CAD p. 544 553 vol. 21 No. 5 May 2002.

However when the clock frequency increases to multi giga hertz range the inductance effect of the shunt wires becomes significant. Clock meshes are used in the industry to reduce skew. Clock meshes form an RC wire network. The inductance effect of the RC network is ignored at clock frequencies of present commercial chips e.g. the 4 GHz Pentium 4. However the trend is toward higher clock frequencies at which the inductance effect can no longer be ignored. Additionally for example at a 10 GHz clock rate the time of flight between two corners of a chip is comparable to the clock cycle. The RC model of the shunt effect is not valid at such frequencies. The inductance of the shunt can even cause worse skew.

Active circuits have been proposed to address clock skew. Particular examples include the following. Phase detectors and coupled oscillators have been proposed with shunts of less than a quarter wavelength to lock the oscillators together. See Galton et al Clock Distribution Using Coupled Oscillators Proc. of ISCAS 1996 vol. 3 pp. 217 220. Active feedback with phase detectors and distributed phase locked loops have also been proposed. Gutnik and Chandraksan Active GHz Clock Network Using Distributed PLLs IEEE Journal of Solid State Circuits pp. 1553 1560 vol. 35 No. 11 November 2000. Combined clock generation and distribution using standing wave oscillators has been proposed. O Mahony et al. Design of a 10 GHz Clock Distribution Network Using Coupled Standing Wave Oscillators Proc. of DAC pp. 682 687 June 2003. This work distributes sine waves as opposed to the conventional approach of distributing square waves. However the distribution scheme of O Mahony et al. does not use a global clock source. Instead clocks are generating locally and distributed. Wood et al. Rotary Traveling Wave Oscillator Arrays A New Clock Technology IEEE JSSC pp. 1654 1665 November 2001. The use of active components may be successful to overcome clock skew at high clock frequencies. Compared to a passive scheme though the active component approach raises stability issues and in some cases may be more sensitive to process variations during fabrication.

The invention is directed to a method for clock distribution and VLSI circuits include a clock distribution network. In a method of the invention a transmission lines are patterned as to connect a clock tree and a periodic waveform clock preferably a sine waveform is used to control clock skew even at frequencies extending into the gigahertz range. In an exemplary embodiment of the invention an overlay includes differential pairs of transmission lines that connect the drivers of a clock distribution tree. In preferred embodiments of the invention an H tree clock distribution scheme is overlayed with a spiral of transmission lines each realized by a differential conductors and driven using a sinusoidal standing wave to distribute global clock signals into local regions of the chip. Each transmission line connects drivers in the H tree that are at the same level of the H tree. In a VLSI chip according to an embodiment of the invention the transmission line overlay delivers sinusoidal clock signals to local areas that are locally converted into digital clock signals. The invention thus presents a passive technique for clock distribution. The technique is robust as the differential transmission lines are relatively insensitive to process variations. For example when the lines are further apart capacitance increases while inductance decreases providing a form of self compensation responsive to process variations.

In a preferred H tree embodiment overlayed with a spiral set of transmission lines each level in the H tree is connected a transmission line. In the overlay shorter spiral transmission lines may be made wider and become gradually thinner in the longer sets of transmission lines in the spiral. The geometry of the network of transmission lines will be dictated by the nature of the clock network that is interconnected by the transmission lines and the H tree spiral transmission line embodiment presents an example that will be appreciated by artisans to vary consistently with a clock tree having a different shape.

Embodiments of the invention also include optimized clock distribution networks. The invention presents a method to identify optimal total transmission line areas for single level and multiple level transmission line clock distribution networks.

The invention provides clock distribution methods and circuits a hybrid structure of a clock distribution tree e.g. an H tree and a differential transmission line shunt to shunt a level of the clock distribution tree or more preferably multiple differential transmission line shunts to shunt multiple levels of the clock distribution tree. The clock is distributed as differential signals of periodic waves e.g. sinusoidal waves. Even at high frequencies e.g. 10 GHz and higher the clock distribution method of the invention provides an output to levels of the clock distribution tree that exhibits very small skew. In a VLSI circuit of the invention a square wave clock signal is recovered locally and provided to registers all over the circuit.

In a preferred embodiment an H tree clock distribution circuit is shunted by transmission lines. The transmission lines are driven at discrete points and bent into spiral pattern in order to link the clock drivers of the H tree clock distribution network. The clock drivers of the H tree are shunted level by level. The shunt lengths between the clock drivers are an integral multiple of wavelength. For an ideal case that the line is lossless a standing wave can lock the clock drivers to zero skew. For lossy shunts embodiments of the invention provided an optimized wire width for the transmission lines to produce the smallest skew for the multi level network based on the analytical skew function.

Clock distribution methods and circuits in accordance with preferred embodiments of the invention can provide several advantages. There is no direct feedback path from the transmission line network to the clock source. The transmission lines are a linear network and thus the design and optimization involve no active components. Another advantage is that the energy storage capability of the locked standing wave in the transmission line can mitigate the clock jitter. Additionally power consumption the network is low as a result of the resonance effect of the transmission line.

Preferred embodiments of the invention will now be discussed with respect to the drawings while artisans will appreciate broader aspects of the invention from the discussion of the preferred embodiments. Schematic drawings are used and will be understood by artisans. In the preferred embodiments differential sinusoidal waves are used for global clock distribution. The sinusoidal waveform simplifies the analysis of resonance phenomena of the transmission line permitting implementation of optimization methods of the invention. In addition the differential signals provide a well controlled current return loop to thus improve the predictability of inductance value.

In a VLSI implementation the distributed sine wave clock signals will have to be converted locally to square wave signals. A clock driver may be used for this conversion. Such an exemplary driver has two stages. An exemplary clock driver for conversion is described for example in O Mahony et al. Design of a 10 GHz Clock Distribution Network Using Coupled Standing Wave Oscillators DAC 2003 pp. 682 687 June 2003.

In the following discussion of preferred embodiments and particularly the discussion of optimized transmission line wire widths in preferred embodiments a simple linear variation model is used to represent the systematic spatial variations on wire widths and transistor lengths. For any location x y on the chip the actual geometrical parameter d d kx ky where dis the nominal parameter and k kare the horizontal vertical variation coefficient respectively. The maximum variations across the chip are assumed to be 10 of the ideal value. This pseudo deterministic linear variation model can be regarded as a worst case scenario of the probabilistic variations. This simple model can be replaced with more sophisticated variation models when implementing wire width optimizations in accordance with the invention as will be appreciated by artisans. When analyzing clock skew levels for preferred embodiments and optimizations the supply voltage fluctuation is taken into account. Specifically it is assumed that the supply voltages are a set of independent random variables within 10 of a nominal Vvalue.

The natural frequency shunt wires in the differential transmission lines and shunts are sized to reduce the skew between clock drivers . The transmission lines and are arranged in hierarchical transmission line spirals. Each spiral consists of a pair of multiple wavelength long coplanar differential pair including separate conductors clock and clock disposed relative a ground plane as shown in . The spiral shape of the transmission lines and results from the layout of the clock distribution network. Other networks can produce different shapes. Arbitrary shaped transmission line shunt networks may be utilized however if a necessary condition is met. The necessary condition to meet is that the distance of transmission lines between clock drivers is an integral multiple of the wavelength of the clock signal being distributed.

Clock drivers are evenly distributed on every spiral and the separation between two neighboring clock drivers is one wavelength. The H tree network distributes sinusoidal clock signals from a central clock source at its center which would be for example the center of a VLSI chip to all the clock drivers . The signal arriving time of all the clock drivers on a common differential transmission line of the shunt network . In a VLSI implementation each of the lowest level clock drivers would connect to a local distribution tree or mesh as shown in to send clock signals from the clock drivers on the lowest level spiral to innumerous clocking elements in the VLSI circuit.

The transmission lines and in the transmission line shunt network may be optimized. Variations in the sizes relative distances etc. of the differential pairs that make up the transmission lines and in can be set to achieve various levels of skew. Minimized skew is produced in preferred embodiments while designers may implement less than optimal shunt line networks in accordance with the invention while still achieving significant advantages.

Outlining the design approach for transmission line shunt networks of the invention will provide artisans with the ability to account for trade offs in particular VLSI implementations. For example for the same amount of routing area assigning clock drivers to spirals at different levels can have a different impact on clock skew. In the following an optimal way to distribute the routing resources to the spirals at different levels of the shunt network such that the minimum skew is achieved on the lowest level spiral with given routing area budget will be discussed.

The optimization problem is addressed as a transmission lines and spirals sizing problem. It is assumed that there is a spiral network applied to an H tree as in the embodiment of . It is assume that the total routing area is constrained. The goal is to minimize the skew on the lowest level of the clock distribution network namely at the drivers . The optimum wire width wof spirals at level i for i 1 to n will be determined so that clock skew is minimized.

A simplified circuit model for the transmission lines and is shown in to study the skew reduction mechanism of a one wavelength long transmission line shunt. In two clock drivers with driving resistance Rand input phase shift skew are connected by an RLGC resistance inductance conductance capacitance transmission line of exactly one wave length long. The output at two separated terminals Vand Vare synchronized by the shunt transmission line .

Spice simulations have been used to validate equation 1 . From the skew equation 1 it is apparent that when resistance R approaches zero the transmission line becomes lossless. As a result the phase shift between voltages Vand V also approaches zero. Two clock drivers get fully synchronized. When R approaches infinity nodes and are open at which point there is no shunt effect and the phase shift between nodes and remains the input skew .

An equation to model the skew expression to characterize the shunt effect of multiple clock drivers connected to a transmission line may also be derived under following assumptions i the transmission line is infinitely long and the clock drivers are spaced evenly on the transmission line with separation of one wavelength ii the input phase of each voltage source to be a random number uniformly distributed in 0 . Because it is an infinitely long line it can be assumed that there are two nodes a b having exact phase 0 and respectively. Then it is possible to compute the expected phase of these two points and take the difference of the expectations as the skew.

Assume the driving resistance is much larger than the characteristic impedance of the transmission line and the input skew is small. Using a similar technique in the derivation of equation 1 the following skew equation is obtained.

An optimum area for transmission lines may now be determined. To provide an example it is assumed that a pair of coplanar copper transmission lines is used to construct a spiral shunt. The two parallel differential wires have height 240 nm and the same width w. The separation between them is 2 um and the wires are 3.5 um above a ground plane. Typical value of w ranges from 0.5 to 40 um.

The fast field solver was used to get the frequency dependant resistance R and inductance L. Linear regression is used to get the relation between resistance inductance ratio R L and wire width w. The R L 1 w relation displays excellent linearity.

The skew function of each level of the spiral shunt network modeling the network of may be rewritten as

The above lemma suggests that when the wire of the transmission line is wide enough the skew wire width relation is convex. In order to make the programming convex a set of minimal wire width constraints may be imposed upon each level spiral.

In experiments that were conducted the minimal wire widths of each level mesh were set as 0.6 um 1.3 um 1.3 um lowest to highest level . With the minimal wire width constraints for each level spiral the following convex program is obtained.

According to the above theorem many numerical methods such as gradient descendant and line search methods can be adopted to solve this class of programming. In example experiments the programs were solved using the optimization package of MATLAB. The example experimental results are presented.

In the experiments the chip size was set to be 2 cm by 2 cm and a three level spiral like that shown in was used to shunt clock signals . The clock frequency is 10.336 GHz. The wave length is exactly 1 cm. Each of the spirals had 4 9 and 17 clock drivers respectively. A balanced H tree was synthesized to distribute clock signal from the center of the chip to the clock drivers. The designed arriving time of all drivers on the same level spiral is equal. With given process variations model simulations obtained the worst skew of the signal propagation from one level to the next level based on SPICE simulation. These skews were used as the values of in the convex programming. Routing area was normalized to the area of bottom level spiral with 1 um wire width.

Table 1 lists the optimized wire width of each level spiral for different total routing area. W W and W are optimal wire widths of level level and level spirals respectively. For the comparison reason we also simulate the skew on a single level spiral network which only uses bottom level spiral to shunt all the leaf nodes of the H tree. We let the single level spiral network has same total routing area of the multi level spirals network. Column and are the skews of multi level spirals and single level spiral. Column shows the skew improvement of multi level spirals over single level spiral. When total routing area is small the optimal configurations prefer to allocate routing resources to the higher level mesh. With gradually increasing of the routing area more resources are allocated to the bottom level mesh. Comparing with the single level spiral optimized multi level spiral can reduce the skew by 40 .

Simulations also compared power consumption of an optimized multilevel spiral network and that of single level spiral. In Table 2 the first row are the total routing areas of the multi level spirals the second row and the third row list the power consumption of the multilevel spiral and single level spiral with given amount of total routing area. The simulated results show that multilevel spiral can reduce the power consumption by 81 .

The robustness of optimized spirals network against supply voltage fluctuations was also tested in simulations. For the test the supply voltage of every clock driver was perturbed independently by a random number within 10 of its nominal value. 5 experiments were performed on each network. The worst case skew and average case skew are shown in Table 3. The skew of optimized multilevel spiral and single level spiral networks is compared. The last column of Table 3 lists the improvement of the average case skew. Multilevel spiral network improves the skew by up to 55 .

When the clock frequency deviates from its nominal value or the electrical length of transmission lines varies from integral multiple of the wavelength the resonance phenomena of the transmission line shunts diminishes. As a result the synchronization capabilities of transmission line shunts degrade accordingly. The frequency response properties of the multilevel clock network of was also tested by simulation. The wire width of the lowest level transmission line was set to be 5 um wide and the clock rate to be 10.33 GHz. The 3 db bandwidth of the output voltages was 0.42 GHz. At 10.33 GHz a minimal skew of 1.38 degrees is achieved. In the frequency range of 10.2 GHz to 10.5 GHz the skew lies between 2.5 degrees and 1.38 degrees.

While specific embodiments of the present invention have been shown and described it should be understood that other modifications substitutions and alternatives are apparent to one of ordinary skill in the art. Such modifications substitutions and alternatives can be made without departing from the spirit and scope of the invention which should be determined from the appended claims.

