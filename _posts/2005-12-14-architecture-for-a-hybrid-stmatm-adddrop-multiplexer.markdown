---

title: Architecture for a hybrid STM/ATM add-drop multiplexer
abstract: Architecture for a SONET network element. The architecture includes an interconnection system for a network element, including a line unit slot, a switch fabric slot, and service unit slots. The line unit slot is connected as a hub to the switch fabric slot and the service unit slots in a first star interconnection configuration. The switch fabric slot is connected as a hub to the line unit slot and the service unit slots in a second star interconnection configuration. The star interconnection configurations provide fault isolation between different units, and allow for replacement of failed units without interfering with the links of other units to the hub. A service unit is provided including a first backplane interface for connecting with an ATM star interconnect configuration within the network element, and a second backplane interface for connecting to an STM star interconnect configuration within the network element.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07428236&OS=07428236&RS=07428236
owner: Fujitsu Limited
number: 07428236
owner_city: Kanagawa-ken
owner_country: JP
publication_date: 20051214
---
This application is a continuation of U.S. patent application Ser. No. 10 100 208 filed Mar. 18 2002 now U.S. Pat. No. 7 012 917 entitled SERVICE UNIT FOR A HUB HAVING MULTIPLE STAR INTERCONNECT CONFIGURATIONS which is a divisional of U.S. patent application Ser. No. 09 325 187 filed Jun. 3 1999 now U.S. Pat. No. 6 359 859 entitled ARCHITECTURE FOR A HYBRID STM ATM ADD DROP MULTIPLEXER issued as U.S. Pat. No. 6 359 859.

The invention relates generally to communication systems and more specifically to an architecture for a hybrid STM ATM add drop multiplexer.

As it is generally known SONET Synchronous Optical Network defines a set of standards for a synchronous optical hierarchy that has the flexibility to transport many digital signals having different capacities. A corresponding international synchronous digital hierarchy SDH standard provides a set of definitions analogous to those of SONET. The synchronous nature of SONET is provided by a receive side and a transmit side clock in each network element NE . In order to synchronize the receive and transmit clocks a SONET network element such as an add drop multiplexer includes circuitry to recover clock signals from various sources that may be available and to distribute highly accurate clocks internally based on such recovery.

A central timing source provides a Building Integrated Time Source also referred to as a BITS clock that may be provided out of band to each network element in a SONET ring. If a network element is for some reason not able to receive the BITS clock directly an embedded clock may be recovered by that device from an incoming line that should reflect the centrally provided BITS clock.

The basic building block in SONET is a synchronous transport signal level 1 STS 1 which is transported as a 51.840 Mb s serial transmission using an optical carrier level 1 OC 1 optical signal. Higher data rates are transported using SONET by multiplexing N lower level signals together. To this end SONET defines optical and electrical signals designated as OC N Optical Carrier level N and STS N Synchronous transport signal level N where OC N and STS N have the same data rate for a given value of N. Accordingly just as STS 1 and OC 1 share a common data rate of 51.84 Mb s OC 3 STS 3 both have a data rate of 155.52 Mb s.

Information transported via an STS 1 signal is organized as frames each having 6480 bits 810 bytes . An STS 1 frame includes transport overhead and a Synchronous Payload Envelope SPE . The SPE includes a payload which is typically mapped into the SPE by what is referred to as path terminating equipment at what is known as the path layer of the SONET architecture. Line terminating equipment such as an OC N to OC M multiplexer is used to place an SPE into a frame along with certain line overhead LOH bytes. The LOH bytes provide information for line protection and maintenance purposes. The section layer in SONET transports the STS N frame over a physical medium such as optical fiber and is associated with a number of section overhead SOH bytes. The SOH bytes are used for framing section monitoring and section level equipment communication. Finally a physical layer in SONET transports the bits serially as either electrical or optical entities.

The SPE portion of an STS 1 frame is contained within an area of an STS 1 frame that is typically viewed as a matrix of bytes having 87 columns and 9 rows. Two columns of the matrix 30 and 59 contain fixed stuff bytes. Another column contains STS 1 POH. The payload of an SPE may have its first byte anywhere inside the SPE matrix and in fact may move around in this area between frames. The method by which the starting payload location is determined is responsive to the contents of transport overhead bytes in the frame referred to as H and H. H and H store an offset value referred to as a pointer indicating a location in the STS 1 frame in which the first payload byte is located.

The pointer value enables a SONET network element to operate in the face of certain conditions which may for example cause the STS 1 frame rate to become faster or slower than the SPE insertion rate. This situation may arise when the clock of the NE must be derived from a relatively less accurate clock source in order to continue operation when a more accurate source such as the BITS clock itself has been lost. In such a case an extra byte may need to be transmitted in what is known as a negative justification opportunity byte or one less byte may be transmitted in a given STS 1 frame so as to accommodate the SPE thus causing the location of the beginning of the payload to vary.

Various digital signals such as those defined in the well known Digital Multiplex Hierarchy DMH may be included in the SPE payload. The DMH defines signals including DS 0 referred to as a 64 kb s time slot DS 1 1.544 Mb s and DS 3 44.736 Mb s . The SONET standard is sufficiently flexible to allow new data rates to be supported as services require them. In a common implementation DS 1s are mapped into virtual tributaries VTs which are in turn multiplexed into an STS 1 SPE and are then multiplexed into an optical carrier N OC N optical line rate.

The payload of a particular SPE may be associated with one of four different sizes of virtual tributaries VTs . The VTs are VT1.5 having a data rate of 1.728 Mb s VT2 at 2.304 Mb s VT3 at 3.456 Mb s and VT6 at 6.912 Mb s. A superframe consists of four STS 1 frames and is used to transmit a VT. The alignment of a VT within the bytes of the payload allocated for that VT is indicated by a pointer contained within two VT pointer bytes which contain a pointer offset similar to the STS 1 pointer described above.

Existing add drop multiplexers ADMs are SONET multiplexers that allow DS 1 and other DMH signals to be added into or dropped from an STS 1 signal. Traditional ADMs have two bi directional ports and may be used in self healing ring SHR network architectures. An SHR uses a collection of network elements including ADMs in a physical closed loop so that each network element is connected with a duplex connection through its ports to two adjacent nodes. Any loss of connection due to a single failure of a network element or a connection between network elements may be automatically restored in this topology. Existing ADMs have additionally included a cross connect matrix for directing STM signals from one interface to another. Such a cross connect matrix is referred to as an STM switch fabric. The manner in which specific STM signals are directed between interfaces of the STM switch fabric depends on how the network bandwidth has been provisioned to the various customers using the network. The path of a signal through a given cross connect matrix is statically defined based on provisioning information provided from a central office or craft technician.

As mentioned above SONET provides substantial overhead information. SONET overhead information is accessed generated and processed by the equipment which terminates the particular overhead layer. More specifically section terminating equipment operates on nine bytes of section overhead which are used for communications between adjacent network elements. Section overhead supports functions such as performance monitoring STS N signal local orderwire data communication channels DCC to carry information for OAM P and framing. The section overhead is found in the first three rows of columns 1 through 9 of the SPE.

Line terminating equipment operates on line overhead which is used for the STS N signal between STS N multiplexers. Line overhead consists of 18 overhead bytes and supports functions such as locating the SPE in the frame multiplexing or concatenating signals performance monitoring automatic protection switching and line maintenance. The line overhead is found in rows 4 to 9 of columns 1 through 9 of the SPE.

Path overhead bytes POH are associated with the path layer and are included in the SPE. Path level overhead in the form of either VT path overhead or STS path overhead is carried from end to end it is added to DS1 signals when they are mapped into virtual tributaries and for STS 1 payloads that travel end to end. VT path overhead VT POH terminating equipment operates on four evenly distributed VT path overhead bytes starting at the first byte of the VT payload as indicated by the VT payload pointer. VT POH provides communication between the point of creation of an VT SPE and its point of disassembly.

STS path terminating equipment terminates STS path overhead STS POH consisting of nine evenly distributed bytes starting at the first byte of the STS SPE. STS POH provides for communication between the point of creation of an STS SPE and its point of disassembly. STS path overhead supports functions such as performance monitoring of the STS SPE signal labels the content of the STS SPE including status of mapped payloads path status and path trace. The path overhead is found in rows 1 to 9 of the first column of the SPE.

Asynchronous Transfer Mode ATM is a cell based transport and switching technology. ATM provides high capacity transmission of voice data and video within telecommunications and computing environments. ATM supports a variety of traffic types including constant bit rate CBR traffic like full motion video and voice where delays and cell loss cannot be tolerated. ATM also supports variable bit rate VBR applications like LAN traffic and large file transfers where delay can be tolerated.

ATM establishes virtual connections which may be shared by multiple users. Each ATM virtual connection is identified by a combination of a Virtual Channel Identifier and a Virtual Path Identifier referred to as a VCI VPI value. ATM is a transport technology that formats all information content carried by the network into 53 byte cells. Since these cells are short in length and standard in size they can be switched through network elements known as ATM switches with little delay using what is referred to as an ATM switch fabric. Since various types of traffic can be carried on the same network bandwidth utilization can be very high. These characteristics make the network very flexible and cost effective.

An ATM switch fabric operates to direct ATM cells from one interface to another. For a given received cell the specific output interface of the ATM switch fabric is determined in response to a VCI VPI value contained within the cell. Virtual channel and virtual path routing information is dynamically modified in the switch fabric as connections are established and torn down in the network. In this way the ATM switch fabric operates in response to dynamically changeable virtual connection information.

ATM cells may be encapsulated and transmitted over SONET for example using STS 1 or STS 3c which is a concatenation of three STS 1 signals. STS 1 transports may generally be concatenated and the combination then referred to as STS Nc where N is the number of STS 1 signals that are combined. In the case of STS 3c the SPE of the resultant STS 3c frame consists of 3 783 bytes together with POH. The concatenated STS 1s are multiplexed switched and transported as a single unit. An overhead byte of the STS 3c frame transport overhead referred to as the H4 byte contains an offset indicating the number of bytes between the H4 byte and the first ATM cell that is contained in the SPE.

In many cases customers require support for both ATM switching and STM switching in their communications systems. However devices provided by vendors to support SONET have typically lacked the capability to also support ATM. In particular typical existing ADMs have supported only SONET rings while existing ATM switches have generally supported only ATM. Accordingly if a customer has needed both SONET and ATM networks they have necessarily had to purchase dedicated SONET equipment ADMs in addition to ATM switches. This is costly in terms of necessitating multiple devices. In addition most customers cannot predict what their future communications requirements will be when they buy one piece of equipment. Because existing systems have been restricted to supporting only one of either SONET or ATM switching they have not been flexible or scalable with regard to adding support for the other protocol. As a result of such inflexibility changes in customer requirements may require the purchase of completely new devices to support a previously unsupported protocol.

Accordingly there is a need for a communication device which combines the functions of a SONET add drop multiplexer with the functions of an ATM switch. The device should be capable of multiple configurations to support STM only ATM only or hybrid STM ATM operation. Moreover the device should be scalable such that additional functionality may be conveniently added as the needs of the customer change over time.

An architecture for a hybrid STM ATM add drop multiplexer is disclosed. The disclosed architecture includes an interconnection system for a network element having at least one line unit slot a switch fabric slot and two or more service unit slots. The line unit slot is connected as a hub to the switch fabric slot and the service unit slots in a first star interconnection configuration. The switch fabric slot is connected as a hub to the line unit slot and the service unit slots in a second star interconnection configuration. In a preferred embodiment the switch fabric slot and one of the service unit slots comprise the same slot thus permitting flexible configuration of the device. To support a configuration providing non STM switching the switch fabric slot is operable to receive a switch fabric unit that includes a non STM switch fabric.

In an illustrative embodiment a control unit slot is provided in the interconnection system and connected as a hub to the line unit slot the switch fabric slot and the service unit slots to form a third star interconnection configuration. Each star interconnection configuration for example consists of dedicated point to point connections between the hub and each other slot in the configuration. The point to point connections employ a low voltage complementary signaling mechanism such as Low Voltage Differential Signaling LVDS in order to achieve high speeds while controlling electromagnetic interference EMI . Redundant line unit and switch fabric slots are provided as well as respective redundant star configurations to permit line units and switch fabric units to be configured in active standby pairs thus supporting greater system availability and robustness.

A line unit is also disclosed which may be disposed within the line unit slot. The disclosed line unit includes an STM switch fabric as well as an optical interface to a SONET ring. The line unit module further includes two or more service unit interfaces for coupling the STM switch fabric to point to point interfaces within the first star interconnection configuration so as to permit communication of information contained within the SONET frames between the line unit and service units disposed in the service unit slots. The disclosed line unit further includes at least one ATM interface for communicating ATM cells between the line unit and an ATM switch fabric unit disposed in the switch fabric slot. The disclosed line unit provides what are referred to herein as the service affecting functions of the device with regard to STM. STM service affecting functions are those functions necessary to maintain continued operation of STM communication through the device. Accordingly to provide fault recovery and avoid STM service interruptions the device may be advantageously configured with an active standby pair of line units.

An ATM switch fabric unit is disclosed which may be installed within the switch fabric slot. The disclosed ATM switch fabric unit includes two or more service unit interfaces which are coupled to point to point connections within the second star interconnection configuration. During operation of the device ATM cells are communicated in ATM cell stream format between service units in the service unit slots and the switch fabric unit over the second star interconnection configuration. The disclosed ATM switch fabric unit provides what are referred to herein as the service affecting functions of the device with regard to ATM. ATM service affecting functions are those functions necessary to maintain continued operation of ATM communication through the device. Accordingly to provide fault recovery and avoid ATM service interruptions the device may be advantageously configured with an active standby pair of ATM switch fabric units.

A management and control unit MCU is disclosed which may be installed in the control unit slot. The disclosed MCU communicates SONET overhead information over the third star interconnection configuration. The MCU further operates to download executable software images to service units installed in the network element over the third star interconnection configuration. The MCU provides what are referred to herein as the non service affecting functions of the device.

A service unit for a network element is also disclosed which includes a first backplane interface for connecting with the first star interconnection configuration within the network element. The first backplane interface to the first star interconnection configuration permits transport of STM frames to an STM switch fabric. The service units include a second backplane interface for connecting to the second star interconnection configuration. The second backplane interface to the second star interconnection configuration permits transport of ATM cells to the ATM switch fabric. In a preferred embodiment the service unit further includes a third backplane interface to connect with the third star interconnect configuration for communication with the MCU within the network element.

Thus there is provided a communication device which combines the functions of a SONET add drop multiplexer with the functions of an ATM switch. The disclosed device supports multiple configurations including STM only ATM only or hybrid STM ATM operation. Moreover the disclosed device is flexible and scalable such that functionality may be added or modified as the needs of the customer change over time. The disclosed system advantageously applies low voltage complementary signaling techniques such as Low Voltage Differential Signaling LVDS to provide high speed serial point to point links in star configurations. The use of serial point to point links supports failure isolation since failure of a single non hub unit will not affect the connections of other units to the hub of the star. Accordingly replacement of a non hub unit is possible without disturbing the operation of the other units in the star. The disclosed system supports failure protection in hub units such as the line units and ATM switch fabric units by providing connectivity for active standby unit pairs of the line unit and ATM switch fabric unit. In addition by use of multi function service unit slots which can also serve as ATM switch fabric unit slots the disclosed system supports a wide variety of configurations in a minimum amount of space.

A network element NE architecture is disclosed which conveniently and efficiently combines the functions of a SONET add drop multiplexer ADM with the functions of an ATM switch. As shown in the disclosed network element may be physically embodied as a set of hardware units interconnected across an interconnection system also referred to as a backplane. The units for example include line units LU a management and control unit MCU ATM switch fabric units ATMU and service units SU . The ATMU provides ATM cell relay related functionality such as VP and VC switching segmentation and reassembly signaling routing call control traffic management and Operations Administration Management and Provisioning OAMP . In this regard the ATMU may specifically provide address translation an application programming interface API for user to network interface UNI signaling an interim local management interface ILMI server full ILMI and user network interface network to network interface UNI NNI signaling stacks a private node to node interface PNNI server for routing and connection admission. In an alternative embodiment such ATM functionality may be split across two separate unit types ATM Switch units ATMSU containing primarily the ATM switch fabric and ATM Processing units ATMPRU providing other ATM functions.

In another alternative embodiment an internet protocol IP switch fabric unit may be substituted for one of the ATM switch fabric units. The IP switch fabric unit performs switching also known as routing at the IP layer of the TCP IP protocol stack using what is referred to herein as an IP switch fabric. The IP switch fabric unit may also provide an ATM switch fabric together with such ATM functionality as described above.

The network element provides 1 a SONET line interface on a line side 2 connection of ATM traffic from either the line side or a service side to an ATM switch fabric unit 3 connection of STM traffic from either the line side or the service side to STS VT switch fabrics within the line units 4 various service interfaces on the service side through the specific service units . The ATM switch fabric unit performs activities associated with ATM cell relay. These for example include VP and VC switching signaling routing call control and traffic management.

The line units may support various SONET optical media line interfaces such as OC 3 OC 12 or any other suitable optical interface. The line unit provides interfaces to the ATM switch fabric unit from a SONET ring on the line side as well as to the various service units . The line unit also includes an STM switch fabric capable of performing STM switching at both the STS and VT levels. Examples of ATM switch fabric unit include modules providing connectivity to the line units as well as to the service units and which also include an ATM switch fabric .

Service units include modules supporting various telecommunication or data communication interfaces to the service side including for example DS 1 DS 3 Token Ring FDDI fiber distributed data interface 10BaseT 100BaseT 10BaseF or 100BaseF Ethernet EC 1 electrical carrier 1 also referred to as STS 1 electrical or STS 1 EC 1 OC 3 OC 12 or any other suitable service. The service units may communicate with the ATM switch fabric installed in the ATM switch fabric unit of the network element as well as with the STM switch fabrics contained within the line units . Accordingly service units for the network element contain interfaces within the network element which may be considered to fall within three categories STM ATM and STM ATM. For example STM service unit formats data received from the service side into STS frames to be forwarded to the line units while ATM service unit formats data received from the service side into ATM cell streams to be forwarded to the ATM switch fabric unit . Since each service unit is connected to both ATM and STM services a single STM ATM service unit may simultaneously use ATM and STM switching services by selectively communicating the data it receives to the line units and or the ATM switch fabric unit .

Management and control unit includes a subsystem employing a microprocessor coupled to microprocessor bus . The illustrative MCU provides a basic control infrastructure for the network element using what is referred to herein as a serialized hardbus . During operation of the network element the components of the serialized hardbus convert a parallel bus communication protocol into a master slave serialized communication between the MCU and the other units in the network element . A serialized hardbus master logic unit is coupled to microprocessor bus of the MCU and maps control and status registers and or memory locations of other units in the network element onto the microprocessor memory map. Units within the device which are managed by the MCU include serialized hardbus termination logic. The serialized hardbus also provides notification of certain autonomous events and or alarms occurring on or detected by other units by interrupting the microprocessor .

In addition to the serialized hardbus the MCU uses a SONET overhead link from each line unit and service unit to support maintenance communications such as Data Communications Channel DCC and OrderWire information. The MCU further includes various management and control capabilities such as DCC and Orderwire processing functionality which may include a combination of hardware and software and which are used to process the received maintenance information.

In the depiction of and as shown in two of the service unit slots are the same as ATM switch fabric slots . Accordingly when ATM switch fabric slots are used to connect ATM switch fabric units these same slots may not simultaneously be used to install service units. However as shown in those two multifunction slots may alternatively be used to connect service units to the device in configurations where the ATM switch fabric units are not needed.

More specifically in a preferred embodiment each line unit slot has two star configurations emanating from it. An STM datapath star communicates STM type data with each of the service unit slots . The second star emanating from each line unit slot is a synchronization star for conveying a frequency reference and a frame alignment pulse FP to the service unit slots in order to synchronize STM communication between each service unit and the STM switch fabrics within the line units. An extended synchronization module ESM may be provided to accept and distribute an extracted clock from the service unit slots or alternatively a BITS clock from further interconnections within the device. The ESM is for example implemented on a sub board module which is electrically and mechanically coupled to an alternative enhanced version of the illustrative line unit.

In addition to the STM datapath and synchronization interconnection stars a private datapath is provided for communicating STM data between active and standby line units installed in respective ones of the line unit slots . The private datapath facilitates a pass through path between the line units which may be required under certain conditions.

Further in the illustrative embodiment of the line unit slots each have a datapath connection to each of the ATM switch fabric slots . This interface supports ATM cell stream traffic between the ATM switch fabric slots and the line unit slots . During operation of the device ATM traffic from both line unit slots active and standby is forwarded to each of the ATM switch fabric slots . Accordingly per unit fault protection of the units in the line unit slots and ATM switch fabric slots may be provided independently on a unit by unit basis.

Further in the illustrative embodiment of the MCU slot has two star interconnect configurations emanating from it. First an MCU control star is provided to support the serialized hardbus between the MCU and each other unit in the device. Second a SONET overhead star supports communication of SONET overhead information such as DCC and Orderwire data as well as other information in the section line or path overhead portions of a SONET signal between the MCU and other units in the device. The SONET overhead star connects the MCU slot to each other slot in the device via respective ones of the point to point connections thus enabling communication of SONET overhead between the MCU and any other unit in the device including service units installed in the service unit slots . The MCU slot is further provided with a software image download interconnection with the ATM switch fabric slots to facilitate communication of software executable image data between an ATM switch fabric unit installed in the ATM switch fabric slots and the MCU for example using the High Level Data Link Control HDLC protocol. Such software executable image data may further be communicated from the MCU to individual ones of the services units installed in the service unit slots over the serialized hardbus.

The ATM switch fabric slots each have a datapath star emanating from them to all other service unit slots . Because these ATM datapath stars are routed to the other service unit slots independently from any other star configuration the cost of adding ATM features is independent of the costs associated with other functionality provided by the device.

The disclosed interconnection system supports ATM VP Path Switching within an active ATM switch fabric unit coupled to one of the ATM switch fabric slots through the datapath connection . The datapath connection between each of the ATM switch fabric slots and both line unit slots enables maintenance of a current switch state in both of the ATM switch fabrics within ATM switch fabric units in the switch fabric slots . Unlike support provided in the device for the SONET Unidirectional Path Switched Ring UPSR in which the pass through path is independently carried between the line units over the private datapath the VP pass through path is internal to an active ATM switch fabric unit. Accordingly each ATM switch fabric slot supports full ATM bandwidth to and from each line unit slot simultaneously.

Additionally the ATM switch fabric slots connect with an ATM Control Bus which extends to two of the service unit slots which are adjacent to the ATM switch fabric slots such as the service unit slots labeled SU and SU in . This bus enables division of the ATM switch fabric unit functionality into separate ATM Switching Unit and ATM Processing Unit modules. Such a division permits the number of modules and power allocation for the ATM function to be doubled by occupying 4 slots with ATM switch fabric units instead of 2.

For protected services service unit slots are allocated in pairs to support operation of redundant service units. However each one of the service unit slots has independent connections to both the ATM switch fabric units in the ATM switch fabric slots and to both the STM switch fabrics in the line units in the line unit slots . This allows for a configuration of up to 12 different unprotected service units to be supported simultaneously in an STM configuration and 10 different unprotected service units in an STM STM configuration. Configurable backplane private connections between selected pairs of service unit slots are also provided to support active standby service unit pairs as well as active standby pairs of ATM switch fabric units in ATM switch fabric slots .

1 line units LUs and which operate as an active standby pair each of which terminates a SONET ring for example through an OC 12 connection.

3 ATM switch fabric units ATMUs and which form an active standby pair and which handle ATM VP VC switching and other activities associated with ATM cell relay such as signaling routing call control and traffic management.

4 A Management and Control Unit MCU which manages and controls the units within the network element . This unit provides all the administrative interfaces to the device and processes all the SONET overhead bytes.

The STM system of includes the two LUs and the MCU and some number of STM service units . Service units and are an active standby pair supporting a SONET DS 1 service interface service units and are an active standby pair supporting a SONET DS 3 service interface and service unit supports a SONET OC 3 service interface. The line units and attach via OC 12 to a SONET ring . During operation of the embodiment shown in STM signals are routed by the STM switch fabric in the active one of the line units between the ring and active ones of the service units over individual ones of point to point STS 3 serial links .

During operation of the embodiment shown in ATM cells carried over STS signals within the SONET ring are routed by the line units over STS 12 datapath connections to each of the ATM switch fabrics within the ATM switch fabric units and The ATM switch fabric units and in turn direct the ATM cells based on VPI VCI values within the cell headers to the appropriate destination service units as indicated by ATM virtual connections established through the ATM switch fabric.

A hybrid STM ATM configuration of the disclosed network element is shown in . In the STS signals from the ring which contain encapsulated ATM cells are routed by the line units to the ATM switch fabric units STS signals from the ring that are provisioned to pass through service interfaces of the device are routed by the line units to the appropriate service units using the STM switch fabrics contained within the line units The service units communicate STM frames with the line units while the service units communicate ATM cells with the ATM switch fabric units The service units communicate ATM cells with the ATM switch fabric units and also communicate STM frames with the line units 

During operation of the line unit the optical receiver receives for example a SONET formatted OC 12 or OC 3 optical signal carrying an STS 12 or STS 3 signal respectively or any suitably formatted signal. The optical receiver passes electrical clock signals and data signals that reflect the received SONET signal to the signal routing ASIC . The signal routing ASIC extracts STS frames from the STS signal performs pointer interpretation to locate the beginnings of payloads and virtual tributaries within the received frames and also extracts line section and path overhead data. The extracted overhead data is sent by the signal routing ASIC to a management and control unit MCU for further processing.

According to provisioning information provided to the line unit by the MCU the signals in the received STS signal are interpreted by the line unit as carrying either ATM or STM traffic. The STS 1 signals provisioned as ATM traffic are processed by the line unit to perform the ATM Transmission Convergence TC layer functions of cell delineation and STS channel identification. The resulting ATM cells are then formatted into a cell stream and sent to the active and standby ATM switch fabric units via transmitters .

The STS signals received by the line unit that carry STM traffic are sent by the signal routing ASIC via connections to the STM switch fabric ASIC where STS VT grooming and cross connection takes place. The switch fabric ASIC is further coupled via connection to receive STM traffic from a signal routing ASIC of a partner line unit in an active standby pair. Similarly the output connection of the signal routing ASIC is used to pass STM traffic to the switch fabric of the partner line unit.

The switch fabric ASIC receives STM traffic from the line side of the device through one of the two connections and each of which for example provides full STS 12 bandwidth and from the service side through service unit receive interfaces each of which for example provides STS 3 bandwidth. The switch fabric ASIC outputs STM signals through the output STS 12 or any of the service unit transmit interfaces STS 3 .

Further during operation of the line unit as shown in the switch fabric ASIC performs Unidirectional Path Switched Ring UPSR path selection responsive to path performance information provided by the signal routing ASIC and passed to the switch fabric ASIC within some number of over written overhead bytes in order to determine which of the connections or should be the path for individual STS or VT signals that are dropped at the service side of the device. The switch fabric ASIC performs this selection in response to path performance criteria in order to determine the path of highest quality from the two available paths. The switch fabric ASIC performs this selection at either the STS 1 or VT 1.5 level for each path dropped to the service side of the device.

The line unit also includes a back up memory which stores configuration information that may be used in the event of a failure of the MCU. The contents of the back up memory may also be used by a new MCU that is installed to replace the failed unit. The physical inventory EEPROM is used to store information such as the serial number of the unit a hardware revision number and a software revision number. A serial bus terminator SBT operates to connect the unit to the serial hardbus for communication with the MCU and LEDS provide a visual indication of the unit s status.

The line unit further includes various clock related elements including an extended synchronization module ESM which in combination provide STM synchronization clocks to the line unit and other units within the device. Specifically a timing reference switch is controlled by the output of synchronization switch controller logic . A number of inputs to the synchronization switch controller logic provide indication of whether the ESM is present whether the active standby partner line unit is present and whether the SONET signal on the line side is present on either the local or partner line unit.

The inputs to the timing reference switch include a SONET minimum clock SMC generated by a clock source on the line unit and a local line reference clock from the signal routing ASIC that is derived from the line side SONET ring. SMC and line reference signals are also provided to the timing reference switch from the partner line unit as well. When the ESM daughter board is present the reference signal from the ESM is always selected to pass through the timing reference switch .

The output of the timing reference switch is passed to distribution phase locked loop which smoothes out any switching transients and converts the selected timing reference to a higher distribution frequency that is passed to the other units in the device as well as to frame pulse generation logic . The frame pulse generation logic derives a frame pulse from the distribution frequency and passes that frame pulse to the other units in the device as well as to the frame pulse generator of the partner line unit. The distribution frequency is also received by the board clock logic and passed to phase locked loops and for further frequency conversion to obtain frequencies needed to support the ATM and STM protocols within the logic of the signal routing ASIC and switch fabric ASIC .

The signal routing ASIC further provides path selection control information to the switch fabric ASIC as well as to the ATM switch fabric units. Such information reflects monitoring of incoming path performance by the signal routing ASIC for example through bit error monitoring AIS Alarm Indication Signal monitoring alarm detection and or path label monitoring. The path selection information provided to the switch fabric ASIC may be at the STS signal or VT level. Path selection information at the STS level is provided by writing a path status value over an STS line overhead byte within the STS signal. The status value reflects which of the input paths to the switch fabric ASIC is to be used to receive the particular STS signal associated with the line overhead byte. The line overhead byte may be overwritten by the signal routing ASIC because it has previously extracted the line overhead and sent it to the MCU prior to forwarding of the signal to the switch fabric ASIC . For VT specific path selection information the signal routing ASIC overwrites one of the VT pointer bytes for the corresponding VT with path status information. The VT pointer byte may be overwritten by the signal routing ASIC because it has previously performed VT as well as STM frame pointer processing. In this way STM traffic carries path selection information to the STM switch fabrics of both the local and partner line units. The signal routing ASIC must align the STM traffic with the STM traffic received from the signal routing ASIC of the partner line unit prior to reception by the switch fabric ASIC . Such alignment must ensure that STS signals received by the switch fabric ASIC are frame aligned for STS signals and frame and SPE aligned for VTs.

The path selection control information provided by the signal routing ASIC to the active and standby ATM switch fabric units is similarly reflective of incoming path performance and availability monitoring as described above. The path selection control information for the ATM switch fabric unit is output from the signal routing ASIC and transmitted as part of a serial data stream including an ATM cell stream to each of the ATM switch fabric units. The path selection information so provided is used by the ATM switch fabric units to perform ATM VP path selection.

The second functional block in the signal routing ASIC formats the ATM traffic into an ATM cell stream. The resulting cell stream is stored in the output buffer for transmission to the active and standby ATM switch fabric units. While the output buffer is shown for example within the signal routing ASIC in they may also be implemented externally to the signal routing ASIC .

The STM traffic from the signal routing ASIC is received by the switch fabric ASIC where the STS 1 signals it contains are groomed for the type of traffic they are carrying. For example a VT mapped STS 1 signal in the STM traffic from the signal routing ASIC is broken up into 28 VTs 162 which are organized into two sets of 14 VTs. Each set of 14 VTs is received from both the local STS switch fabric and the partner STM switch fabric by the path selector logic for subsequent broadcast to an active standby service unit pair. In addition an STS 1 signal in the STM traffic from the local and partner signal routing ASICs is shown for purposes of example being passed to the path selector logic also for subsequent broadcast to an active standby service unit pair.

The path selector logic selects the best receive path between the path from the local STM switch fabric and the path from the STM switch fabric in the partner line unit in response to in band path selection information provided by the signal routing ASICs of both the active and standby line units. The path selection information is contained within overwritten overhead bytes in each particular STS or VT signal. The outputs of path selector logic are then combined by multiplexers for STS 3 transmission to the appropriate service units.

The 28 VTs from service units and pass through STS switch fabric to path selector logic where selection between active or standby service unit sources is performed in response to path selection information contained within the respective VT and STS signals received from the service units. In an illustrative embodiment each one of the service units includes a signal routing ASIC such as signal routing ASIC which embeds path selection information within each VT or STS signal in response to path performance and availability monitoring.

The 28 VTs are then multiplexed onto a single STS 1 signal by multiplexers and passed to the signal routing ASIC . The DS 3 mapped STS 1 also goes through the STS switch fabric to path selectors within path selector logic also for selection between active or standby service unit sources. The DS 3 mapped STS 1 is then passed as STS 1 signal to the signal routing ASIC .

Receive buffers within the signal routing ASIC receive the two ATM cell streams from the active and standby ATM switch fabric units ATMU A and ATMU S . While the receive buffers are shown within the signal routing ASIC in they may also be provided externally to the signal routing ASIC . A parity bit is included with each cell stream and is used by the signal routing ASIC to monitor the quality of the paths carrying the cell streams to the signal routing ASIC . One of the cell streams is selected responsive to path quality information to pass from receive buffering to a first logic block . Within the logic block ATM Transmission Convergence layer functions are performed the cell stream is delineated and the STS routing tags are stripped off. The resulting ATM mapped STS 1 signal is then processed by functional block and multiplexed onto the line side SONET ring with the other STS 1 s and . Section line and path overhead information are inserted as necessary and the combined traffic is sent to the electrical to optical conversion circuit for optical transmission onto the SONET ring. For example STM traffic and includes path overhead information carried through the STM switch fabric and requires line and section overhead to be inserted by the signal routing ASIC . ATM traffic requires path line and signal overhead bytes to be inserted by the signal routing ASIC .

An illustrative control architecture for a line unit is shown in . shows a serial hardbus terminator coupled to an address data bus . A number of general purpose I O registers are further coupled to the address data bus and made accessible to the MCU over the serial hardbus via the serial hardbus terminator logic . A memory map consisting of accessible registers in the switch fabric ASIC and a memory map consisting of accessible registers in the signal routing ASIC are also made accessible to the MCU via the serial hardbus terminator logic . During operation of the line unit the MCU provides provisioning information through the serial hardbus to the line unit. The provisioning information determines the operation of the signal routing ASIC and switch fabric ASIC . For example provisioning information from the MCU controls how the switch fabric ASIC routes STS signals it receives and determines which of the STS signals on the line side SONET ring are treated as containing ATM cells. In addition the MCU detects failures and error conditions through interrupts received over the serial hardbus. In response to detection of such failures and error conditions the MCU provides path selection information to the line unit over the serial hardbus for example determining which one of an active standby pair of service units is to be the source for a particular VT at any given time.

The signal path for data received by the signal routing ASIC from the SONET ring is first described. Data received from the SONET ring is converted from an optical signal to an electrical signal by an optical receiver outboard of the signal routing ASIC and is serially coupled to one input of a line selector within the signal routing ASIC . In a preferred embodiment the serial input to the line selector comprises a 155 megabit per second unidirectional path. The signal at the serial input to the line selector may for example be 1 STS 3c signal 3 STS 1 signals 84 VTs or any combination of STS 1 and VT signals within the specified signaling bandwidth.

The signals received from the SONET ring are passed from the output of the line selector to both a synchronous payload envelope SPE splitter and an overhead bit drop OHB recovery circuit . Overhead bits carried on the received STM signal are segregated by the OHB recovery circuit and coupled to a RX OHB Serial Link interface . In a preferred embodiment the RX OHB Serial Link interface transmits the overhead bits of the signals on the SONET ring over a 9.72 mbps serial link to the MCU for processing.

The SPE splitter in response to previously received provisioning information from the MCU extracts STM VT and or ATM traffic streams from the STS signals on the SONET ring and passes each one of these traffic streams into a respective one of three elastic stores. In the case of ATM traffic the ATM cells are unencapsulated prior to being stored in the ATM cell FIFO .

More specifically the output of the synchronized payload envelope splitter is coupled to three elastic stores. The elastic stores are fabricated as first in first out storage FIFOs and serve a rate decoupling function. In the preferred embodiment the first elastic store receives STS 1 and STS 3c traffic and is used to perform rate decoupling for such traffic. The second elastic store receives VT traffic. The third elastic store is an ATM cell FIFO and is employed to provide rate decoupling for ATM cell traffic. Outputs of the of the first and second elastic stores and are coupled to a synchronized payload envelope multiplexer SPE MUX which is employed to multiplex the various STS signals to the STM switch fabrics on each of the active standby line unit pair. The output of the SPE MUX is broadcast to the STM switch fabrics on both active and standby line units in the event two such cards are provided for purposes of redundancy.

The output of the ATM cell FIFO is coupled to the ATM receive link interface ATM Rx Link . The output of the ATM receive link interface is coupled to the ATM switch fabric unit via a four bit wide parallel data bus which is clocked at 39 Mhz to a 156 Mb s bandwidth between the signal routing ASIC and the ATM switch fabric. Since in the illustrative embodiment of the bandwidth between the signal routing ASIC and the ATM switch fabric unit exceeds the ingress bandwidth of 155 Mb s the ATM cell FIFO cannot overflow. In the foregoing manner ingress SONET traffic carrying STS 1 STS 3c VT or encapsulated ATM cells is forwarded to either an STM or ATM switch fabric as applicable.

Data destined for the line side SONET interface is received by the signal routing ASIC from either the STM switch fabric or the ATM switch fabric. More specifically an active standby switch receives STM data from both a first STM switch fabric for example which is co resident on the local line card as well as from a second STM switch fabric for example located on a separate line card in the event the separate line card is present and configured with the first line card as a redundant pair. The active standby switch is controlled by provisioning information received from the MCU to select STM data from one of two STM switch fabrics to which is it coupled. The selected STM data is passed to an SPE multiplexer .

Similarly ATM cells destined for a SONET interface of the device are received at an ATM Transmit Link interface either from a single ATM switch fabric or from two ATM switch fabrics active and standby in the event that two ATM switch fabrics are provided in a redundant configuration. In a preferred embodiment ATM data is received from the respective active standby ATM switch fabrics over a 4 bit wide parallel interface running at approximately 39 mbps. The ATM data received from one of the active standby pair of ATM switch fabric units is selected and passed to the ATM cell FIFO which performs rate decoupling. The ATM data is then passed on to the SPE MUX . The SPE MUX multiplexes the ATM cell data from the ATM cell FIFO together with the STM data from the active standby switch for subsequent STM transmission.

The output of the SPE MUX is then coupled to an overhead byte multiplexer OHB MUX . The OHB MUX also receives as an input management and control information generated by the MCU via a transmit OHB serial link interface to the MCU. The OHB MUX inserts the received overhead information in the appropriate overhead channels of the resulting SONET signal.

In a preferred embodiment the output of the OHB MUX is provided both in the form of an 8 bit parallel interface as well as to a parallel to serial converter which provides a serial output interface . The parallel interface to the signal routing ASIC may be coupled to a parallel bus for example in an alternative embodiment in which the signal routing ASIC is included within a service unit. The parallel data would then be processed as required by the particular service unit. The serial output is illustratively coupled to an electrical to optical converter as in the preferred embodiment in which the signal routing ASIC is employed within the line units of the device. The optical converter then passes the serial data to the line side SONET interface. In the foregoing manner the signal routing ASIC is capable of routing STM and ATM formatted traffic between a line side SONET interface ATM switch unit interface and STM switch fabric interface.

In an alternative embodiment of the signal routing ASIC shown in which is designed to support a line side interface to an OC 12 SONET signal the second elastic store is provided between the first elastic store and the SPE multiplexer . Such a configuration allows the second elastic store to utilize the same clock domain as the output of the first elastic store and the input of the SPE multiplexer in order to eliminate the clock jitter effect and reduce the number of gates needed to fabricate the signal routing ASIC .

The ASIC selects one of the input clocks it receives at each of multiplexers and detects which of the input clocks are not present in loss of signal LOS circuit and informs the digital phase locked loop of any such loss. The selected clock is passed to frequency measuring logic fractional divider and fractional divider within the ASIC . Frequency measuring logic compares the selected clock with a target clock based on its own internal time base. The results of this comparison are passed to the digital phase locked loop . The ASIC may select a new clock source using multiplexers in response to feedback control signals from the digital phase locked loop .

The fractional divider circuit derives an 8 Khz reference clock from the selected clock source which is passed to the digital phase locked loop . The fractional divider derives a 1.544 Mhz clock from the selected clock source which is passed to the T receiver in order to provide an alternative 1.544 Mhz source to the T receiver .

The digital phase locked loop generates a 3.24 Mhz clock that is passed to phase locked loop which converts the signal to 12.96 Mhz. The converted signal is passed to protection switch logic and to any ESM on the partner line unit. The protection switching logic selects between either the 12.96 Mhz clock from phase locked loop or the 12.96 Mhz clock from the ESM of the partner line unit. The selected 12.96 Mhz signal is passed through phase locked loop for smoothing and into clock distribution buffer for distribution to the other units in the device.

An Open Systems Interconnect OSI protocol stack operates in conjunction with a file transfer access method FTAM functional unit to support file transfer between the RAM disk and the OSS network element on a second communications network . A download agent operates to maintain a software download management information base MIB as well as to process software download commands received by the MCU. A software management agent maintains version control over software images stored in either the RAM disk or the FLASH disk . Software image files received by the MCU are copied from the RAM disk to the FLASH disk and then loaded into appropriate ones of service units over serial hardbus connections . The service units each receive a respective software image initially into a standby RAM and subsequently copy it to an active FLASH RAM . The image is then copied into storage referred to as the executable RAM from which the image may be executed on a microprocessor . As the active FLASH RAM and FLASH disk are non volatile stores the software images stored within them persist following removal of power from the device.

A software image for the intelligent service unit is copied from the FLASH disk over the serial hardbus to the standby RAM of the intelligent service unit and then to the active FLASH RAM and executable RAM . During operation the software image within the executable RAM is executed on the CPU .

During operation of the MCU software image files may be communicated to and from the MCU using an FTP functional unit in conjunction with a TCP IP functional unit via the ATM VC Ethernet or LCN . In addition software image files may be communicated with the MCU using the OSI stack functional unit and FTAM functional unit via SDCC over the SONET overhead connection or via the X.25 LCN or Ethernet interfaces. A command interpreter operates to process Transaction Language 1 TL1 commands received from a craft terminal over the RS232 connection .

The cells are eventually received by the line unit of the remote network element . The line unit forwards the received cells to the switch fabric within the ATM switch fabric unit . The switch fabric recognizes that the PVC identified by the VCI VPI value contained within the cells is terminated in the remote network element and accordingly forwards the received cells to an IP termination forwarding function . The IP termination forwarding function then employs a segmentation and reassembly unit to reassemble the IP packets from the ATM cells and forms a number of HDLC frames in which to forward the IP packets to the MCU . The MCU then examines the IP destination address in the IP packets and determines that the IP destination address is an IP address of the MCU . The FTP function then loads the software image file within the IP packets into a memory associated with the MCU .

The download command is processed by software executing in the MCU of the gateway network element which issues an FTP Request to an FTP functional unit also within the MCU. The FTP functional unit uses a TCP IP functional unit to form a number of IP packets having IP destination addresses equal to an IP address of an MCU within the remote network element and containing the software image file indicated in the download command received at step . In an alternative embodiment the IP destination address is a multicast address recognized by each device which uses a common executable software image and which is being provided a new executable software image by the download being performed.

Software within the MCU of the gateway network element then determines a VCI VPI value of a permanent virtual circuit PVC . In a first embodiment the PVC is between the gateway network element and the remote network element. In an alternative embodiment the PVC is between the gateway network element and an adjacent network element which may or may not be the remote network element in which the software image is to be loaded and executed . The MCU software then forms a number of HDLC frames containing the IP packets as well as the VCI VPI value of the PVC and forwards these HDLC frames at step over a serial point to point connection to an ATM switch fabric unit within the local network element.

Upon receipt of the HDLC frames from the MCU as illustrated at step software within the ATM switch fabric unit employs a SAR unit also within the ATM switch fabric unit to form a number of ATM cells having the VCI VPI value provided from the MCU in their header. The cells are then passed to an ATM switch fabric within the ATM switch fabric unit which forwards the cells to an output interface of the ATM switch fabric unit associated with the PVC. The selected output interface of the ATM switch fabric unit is for example coupled to a line unit within the local network element which receives the cells encapsulates them into an STS signal and transmits them onto a SONET ring.

As depicted at step the remote network element which is for example also coupled to the SONET ring receives the STS signal containing the ATM cells storing the software image. The remote network element determines that the STS signal contains ATM cells. The remote network element further determines that the STS signal is provisioned such that the ATM cells it contains are extracted and forwarded to an ATM switch fabric unit within the remote network element.

The switch fabric within the ATM switch fabric unit responsive to the VCI VPI value in the received cells forwards the received cells to an IP termination and forwarding functional unit within the ATM switch fabric unit. The IP termination forwarding unit uses a SAR unit within the ATM switch fabric unit to reassemble the IP packets from the ATM cells. At step the IP packets are then encapsulated into a number of HDLC frames which are forwarded to the MCU of the remote network element.

At step the MCU of the remote network element receives the HDLC frames containing the IP packets and compares the destination IP address of those packets with an IP address of the MCU of the remote network element. In response to a match the MCU software extracts the software image file within the IP packets and loads it into a memory within the MCU at step . In the alternative embodiment in which the PVC from the gateway network unit is with an adjacent network element and where that adjacent network element is not the remote network element for which the software image is destined there would not be a match between the IP destination address of the packets and the IP address of the MCU of that adjacent network element. In that case the MCU software of the adjacent network element would look up a VCI VPI value associated with a PVC to an adjacent network element and forward the packets back to the ATM switch fabric unit along with the new VCI VPI value. The ATM switch fabric unit would then form cells having the new VCI VPI value in their headers and forward the cells to an output interface associated with that PVC. The IP packets would then be received by the next adjacent network element which would again determine if the destination IP address of the packets is the IP address of an MCU within that network element. In this way the IP packets continue to be forwarded from network element to network element until they reach the target network element into which the software image is downloaded.

The functions herein described can be implemented in many forms including one or more Application Specific Integrated Circuits or any other suitable hardware implementation or some combination of hardware components and software. Where a portion of the functionality is provided using software that software may be provided to the computer in many ways including but not limited to a information permanently stored on non writable storage media e.g. read only memory devices within a computer such as ROM or CD ROM disks readable by a computer I O attachment b information alterably stored on writable storage media e.g. floppy disks and hard drives or c information conveyed to a computer through communication media such as computer or telephone networks via a modem.

While the invention is described through the above exemplary embodiments it will be understood by those of ordinary skill in the art that modification to and variation of the illustrated embodiments may be made without departing from the inventive concepts herein disclosed. Accordingly the invention should not be viewed as limited except by the scope and spirit of the appended claims.

