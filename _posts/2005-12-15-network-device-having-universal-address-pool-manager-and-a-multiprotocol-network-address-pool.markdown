---

title: Network device having universal address pool manager and a multi-protocol network address pool
abstract: The invention relates to a universal Address Pool Manager (APM) for processing network access address requests from clients operating at one of many access protocols. The APM, located within a network device, such as a router, manages an aggregated pool of network addresses and assigns addresses to the clients from the pool in accordance with the multiple access protocols. The aggregated address pool may be co-located within the network device with the APM, or alternatively, the address pool may be located within an off-box network device, such as an off-box authentication server or an off-box DHCP server. Utilization of an APM that manages an aggregated address pool for processing requests from multiple access protocols may reduce operational costs for network service providers that support multiple access networks.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07836182&OS=07836182&RS=07836182
owner: Juniper Networks, Inc.
number: 07836182
owner_city: Sunnyvale
owner_country: US
publication_date: 20051215
---
This application claims the benefit of U.S. provisional application Ser. No. 60 734 809 filed Nov. 9 2005 the entire content of which is incorporated herein by reference.

The invention relates to computer networks and more particularly to address assignments to devices within computer network access.

Service provider networks provide network access to subscriber devices located within the network. Subscriber devices may include personal computers laptops workstations personal digital assistants PDAs wireless devices network ready appliances print servers or other devices. During the network access process the subscriber devices issue requests for addresses via any of numerous network protocols such as Point to Point Protocol PPP Dynamic Host Configuration Protocol DHCP Dynamic Host Configuration Protocol version 6 DHCPv6 Internet Protocol version 6 IPv6 or other network access protocol.

In response the service provider allocates network addresses and assigns the addresses to the subscriber devices. Often the address configuration is unique for each protocol and the network service provider maintains and manages multiple independent pools of network addresses from which to assign addresses. For example a service provider often maintains and manages separate addresses pools for the DHCP protocol and the PPP protocol.

Coordinating use of separate address pools includes the cumbersome task of ensuring that the address pools do not overlap which is especially challenging given the fact that the volume of requests for the different protocols varies greatly. This often forces the network service provider to use oversized address pools for each protocol potentially resulting in many unused addresses in one pool or the other at any given moment.

In general the invention relates to a network device that incorporates a universal Address Pool Manager APM for processing network address requests from many different network access protocols. Examples of different protocols supported by the APM may include Point to Point Protocol PPP Dynamic Host Configuration Protocol DHCP Dynamic Host Configuration Protocol version 6 DHCPv6 Internet Protocol version 4 IPv4 and Internet Protocol version 6 IPv6 .

The APM located within a network device such as a router manages an aggregated pool of network addresses and assigns addresses to the clients in accordance with the multiple access protocols. The aggregated address pool may be co located within the network device comprising the APM or alternatively the address pool may be located within an off box network device such as an off box authentication server or an off box DHCP server. Utilization of an APM that manages an aggregated address pool for processing requests from multiple access protocols may reduce operational costs for network service providers that support multiple access networks.

In one embodiment a method comprises receiving within a network device network address requests from a plurality of clients in accordance with a plurality of different protocols. The method further comprises processing the requests with an address manager executing within the network device to select network addresses from an aggregated pool of network addresses and assigning the network addresses to the clients.

In another embodiment a network device includes one or more interface cards that receive network address requests from a plurality of clients in accordance with a plurality of different protocols. The network device further includes an address manager executing within a control unit that processes the requests and an aggregated pool of network addresses. In response to the network address requests the address manager selects network addresses from the aggregated pool of network addresses.

In another embodiment a network system includes a plurality of subscriber devices and a router. The router includes an address manager and an aggregated pool of network addresses. The address manager presents a single interface by which to receive network address requests for a plurality of different network protocols and assigns the network addresses to the plurality of subscriber devices from the single aggregated pool of network addresses.

In another embodiment the invention is directed to a computer readable medium containing instructions. The instructions cause a programmable processor to receive network address requests from a plurality of clients in accordance with a plurality of different protocols. The instructions further cause the processor to process the requests with an address manager to select network addresses from an aggregated pool of network addresses and assign the network addresses to the clients.

The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. Other features objects and advantages of the invention will be apparent from the description and drawings and from the claims.

For exemplary purposes the techniques are described with respect to edge router . However the techniques may be applied to any network device that dynamically allocates network addresses to subscriber devices. For example the techniques may be applied to dedicated servers for managing network addresses gateways virtual private network VPN appliances network caches network acceleration devices intelligent switches or other devices.

Moreover service provider network may include additional components not shown in that provide network connectivity and delivery of services to subscriber devices . For example in some embodiments service provider network may include one or more digital subscriber line access multiplexers DSLAMs that connect directly to subscriber devices . Edge router may incorporate a Broadband Remote Access Server BRAS to aggregate outputs from the DSLAMs into a higher speed uplink to service provider network .

Subscriber devices may operate according to any of numerous protocols such as Point to Point Protocol PPP Dynamic Host Configuration Protocol DHCP Internet Protocol version 4 IPv4 or Internet Protocol version 6 IPv6 . Edge router processes requests from the various subscriber devices with a universal Address Pool Manager APM that manages an aggregated pool of network addresses. As discussed in further detail below APM is a software module executing within an operating environment provided by edge router . APM provides a universal interface by which other software modules within edge router may request and receive a network address from the aggregated address pool regardless of the protocol for which the address is needed.

APM provides a user interface by which an administrator manages the address pool and defines rules that govern the assignment of addresses to subscriber devices . For example by interacting with the user interface administrator may define ranges of addresses from which to select and allocate addresses. In addition administrator may designate one or more addresses ranges for exclusion from the selection process. Administrator may define one or more rules that designate certain address ranges based on protocol rules for controlling lease expiration default parameters for various types of requested addresses e.g. IPv4 or IPv6 addresses or other rules. Once configured APM presents a universal interface to other software modules executing within edge router so that the various software modules need not substantially modify addresses based on the particular protocol.

Further administrator may configure the aggregated address pool to be co located with APM within edge router . Alternatively administrator may configure APM of edge router to provide seamless universal allocation of addresses from one or more address pools located within one or more off box network devices such as an off box authentication server an off box DHCP server or an off box DHCP server proxy. Off box authentication server may be a Remote Authentication Dial In User Service RADIUS server. Once configured APM processes requests from numerous access protocols by assigning each requesting subscriber device A N with an address from the aggregated address pool.

In this manner APM provides generalized management and seamless access to an aggregated address pool for servicing requests from multiple access protocols. The address pool is referred to as an aggregated address pool in that from the view perspective of peer software modules APM uses a single address pool that aggregates network addresses allocated to different protocols and that may vary in format based on the type of protocol.

Utilization of APM may provide certain advantages such as potential reduction of operational costs for network service providers that support multiple access networks. Furthermore utilization of APM may simplify a transition process for a network service provider from one version of a protocol e.g. IPv4 to another protocol IPv6 . As another example APM may allow service providers to more easily transition from PPP to DHCP. APM may allow the service providers to provide gradual transition between the protocols. Additionally use of an aggregated address pool may reduce the number of unused addresses and therefore may allow the service provider to allocate fewer overall network addresses to the aggregate address pool.

In the illustrated embodiment router includes a plurality of interface cards IFCs A N IFCs that receive data packets from subscriber devices e.g. subscriber devices A N of on inbound links A N inbound links and send data packets to the subscriber devices on outbound links A N outbound links . A high speed switch couples IFCs to a control unit . In general control unit uses a routing module to maintain routing data that reflects the current topology of the network in which router is deployed.

IFCs each maintain one of forwarding data A N forwarding data that may be viewed as a subset of route data . In particular IFCs utilize forwarding data to identify next hops and select output links A for packets. For example when router receives a packet via one of inbound links the particular IFC that received the inbound packet analyzes the packet to identify a key stored within a header of the packet. The IFC then maps the key to a corresponding next hop and then outputs the packet on one of outbound links to direct the packet to the selected next hop.

In some situations router receives data packets destined for control unit . For example router may receive requests for network access. For example IFC A may receive a new subscriber device access request via inbound link A. In this situation an interface controller A of IFC A may dynamically create one or more software interface layers to support the subscriber device request. In this example the subscriber device communicates the request with PPP therefore interface controller A creates a PPP interface layer within interface controller A. Alternatively the subscriber device may communicate a request via DHCP resulting in the creation of a DHCP layer within interface controller A. Any combination of interface layers from any number of access protocols may exist within interface controllers of IFCs . Accordingly the invention is not limited to the protocols described above.

IFCs redirect access requests to appropriate software client applications within an address pool manager APM of control unit . Examples of software clients include but are not limited to DHCP A PPP B IPv4 C and IPv6 N. Software clients are referred to as clients in that the software modules service protocol specific network access requests by interacting with APM or other software modules executing within control unit . Clients receive network address requests from IFC interface layers and then invoke a universal interface provided by APM . For example PPP client B receives address requests from a PPP layer created within interface controller A and IPv6 client N receives address requests from an IPv6 layer created within interface controller A. Clients then proceed to request an address from APM by invoking an Application Programming Interface API that provide one or more interface methods. The interface methods may be generic in nature and overloaded to accept and provide protocol specific address related data. Additionally a more centralized intermediate client such as Address Assignment Authentication and Accounting AAA client may invoke API to interact with APM on behalf of other software modules.

APM responds to each client s address request by assigning an address from aggregated address pool . APM assigns addresses in accordance with any rules specified by the service provider administrator shown in . Examples configuration rules include the definition of the network address default servers network basic input output system NetBIOS servers domain name service servers and the like. In addition APM automatically handles format differences of addresses used by different protocols such as IPv4 that requires a 32 bit address and IPv6 that requires a 64 bit address. APM communicates the address assignment to the requesting client via API . The requesting client one of clients or AAA client communicates the assigned address to the corresponding interface layer within IFCs which in turn creates any required subscriber device interfaces and forwards the allocated network address in an access offer to the requesting subscriber device via one of outbound links .

In another embodiment address pool may be located within an off box device such as an off box authentication server an off box DHCP server or an off box policy server that can allocate addresses. In this embodiment APM communicates an address request to the aggregated address pool within the off box device not shown in . The off box aggregated address pool then responds with an address assignment . As described above APM then communicates the address assignment to the requesting client via API .

An administrator such as Administrator of or automated software agent configures APM via a user interface not shown . The user interface provides a common view of all aspects of APM such that the administrator can easily define the address pool and rules governing the assignment of addresses even though the pool supports multiple protocols. Furthermore as described above the administrator may configure address pool to be co located with APM within edge router or alternatively may configure address pool to be located within an off box network device such as an off box authentication server or an off box DHCP server . Moreover having a user interface affiliated with APM provides the administrator with a unified view such that addresses from multiple protocols may be managed in a manner that is transparent to the administrator.

The following example shows a command line interface CLI that in response to a show command lists combined statistics and configuration parameters for the aggregated address pool 

The architecture of router illustrated in is shown for exemplary purposes only. The invention is not limited to this architecture. In other embodiments router may be configured in a variety of ways. In one embodiment for example the functionality of control unit may be distributed within IFCs . In another embodiment forwarding data may be maintained within control unit .

While described in reference to control unit router may comprise any device having a programmable processor or other hardware capable of executing instructions to carry out the functions described above. The programmable processor may replace control unit or control unit may include the programmable processor. Router may store the instructions in a memory or other computer readable medium not shown in or internally to control unit in the event that control unit includes the programmable processor.

Next DHCP interface layer issues an address request to DHCP client within control unit . DHCP client invokes API of APM to request a network address. In one embodiment APM is designed with object oriented software technologies such that addresses within an aggregated address pool are represented as objects. For example a base network address object data type may be defined and protocol specific network address objects may be dynamically instantiated within address pool and inherit attributes from the base network object type. Examples of attributes for the address objects include base attributes DHCP attributes IPv6 attributes PPP attributes and other attributes. Base attributes may be associated with base network address data types and used to define or store generic attributes needed for any type of network address assignment regardless of the type of access protocol whereas the other attributes contain attributes specific to the particular protocols. For example attributes supported by DHCP object data type may include but are not limited to a default router dns server domain name lease time netbios name server and netbios node type. As another example attributes supported by PPP include but are not limited to startIPaddr endIPAddr dns address keepalive and authentication.

In one embodiment DHCP client invokes API with a generic address request that need not specify the type of access protocol. In this case APM may assigns an address from address pool that includes all attributes contained within address pool . API forwards the assigned address to DHCP client which in turn forwards address information with only base attributes and DHCP attributes since these attributes form the set of attributes needed by the DHCP protocol. In other words in this example embodiment APM assigns an address that includes all attributes contained within address pool to all requesting clients regardless of the client type. Each of the clients and recognize which attributes are needed and which attributes may be discarded for the protocol utilized by IFC for the particular subscriber device .

In another embodiment DHCP client invokes API with a protocol specific address request that identifies the request as a DHCP address request. APM assigns an address from address pool that includes base attributes and DHCP attributes . For example APM may instantiate a network address within address pool based on a data type associated with DHCP attributes which in turn inherits attributes from base attributes . API forwards the assigned address to DHCP client which in turn creates address information . In this embodiment each client invokes API with an address request specifying the client s protocol such that APM instantiates a client specific address object for each client request.

After DHCP client creates the object and forwards address information DHCP client forwards address information to DHCP interface layer which creates address and forwards address to subscriber device to complete the DHCP address request process.

Initially router receives an access request from a subscriber device at one of IFC for example IFC A. . IFC A creates the protocol specific interface layer such as PPP interface layer to support the subscriber device request . PPP interface layer issues an address request to the appropriate protocol specific client for example PPP client B within control unit . PPP client B invokes universal API of APM to request an address . APM assigns an address from aggregated address pool and instantiates an address object with the aggregated address pool and forwards the address information to PPP Client B via API . PPP Client B issues the address to PPP interface layer within IFC A . PPP Interface layer creates the subscriber device address and forwards the address to the subscriber device for use when connecting to router .

Various embodiments of the invention have been described. These and other embodiments are within the scope of the following claims.

