---

title: Upstream bandwidth management methods and apparatus
abstract: A system and method for managing bandwidth of an upstream communications channel in a communications system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08201205&OS=08201205&RS=08201205
owner: TVWorks, LLC
number: 08201205
owner_city: Philadelphia
owner_country: US
publication_date: 20050316
---
The present invention relates to communication systems and more particularly to the management of upstream i.e. client to server communication channel utilization levels within an asymmetric communications system such as a cable television system.

Asymmetric communications systems such as cable television system satellite television systems and the like are characterized by very high bandwidth downstream communication channels for communicating from a server head end or other upstream node to one or more client devices such as set top boxes STBs and relatively low bandwidth upstream communication channels.

The deployment of new applications such as interactive television iTV applications on cable television CATV networks increases the amount of upstream traffic. Additionally the increased upstream traffic tends to be bursty rather than constant or predictable. Thus where multiple client devices such as set top boxes are contending for upstream bandwidth in an increased and unpredictable manner sufficient upstream bandwidth may at times be unavailable.

Various deficiencies of the prior art are addressed by the present invention of a system and method for managing bandwidth of an upstream communications channel in a communications system.

The upstream bandwidth utilization of a set top box STB or a group of set top boxes is monitored and adapted in response to indicium of utilization level via propagated downstream control signaling or generated at the STB. The STB or group of STBs responsively prioritizes upstream communication of applications cancels or postpones such upstream communications and otherwise modifies upstream channel signaling in a manner adapted to maximize application satisfaction of a user community. In one embodiment a centralized monitoring and processing technique is utilized while in other embodiments each STB or group of STBs performs its own respective monitoring and adaptation.

To facilitate understanding identical reference numerals have been used where possible to designate identical elements that are common to the figures.

The present invention will be generally described within the context of an asymmetric communications system in which upstream bandwidth utilization is monitored by a centralized element within the system or by a set top box. In the case of centralized monitoring bandwidth utilization information is propagated from the monitoring element to the set top box via a downstream communications channel. The set top box in response to the monitoring information received by the downstream communications channel and or locally derived monitoring information adapts the transmission of data via the upstream channel. It will be appreciated by those skilled in the art that while the invention has specific utility within the context of an asymmetric communications system having a relatively low bandwidth upstream communications channel the invention may also be utilized within the context of a symmetric communications system in which upstream and downstream bandwidth are comparable.

The server is used to store and provide various assets such as audio visual content music data and the like to the head ends . The server may be associated with individual or multiple content suppliers and or application providers. The server communicates with the various head ends via a provisioning network . The provisioning network may comprise any network topology supporting the conveyance of information to and from the server . Moreover while depicted as separate components the invention may be implemented within a system wherein the server and head end are implemented within the same functional element. Generally speaking the server operates in part to provide information to and receive information from the STBs via their respective head ends and network . The information propagated between the server and STBs is processed as appropriate by the head end and network .

Each of the head ends is associated with a neighborhood of STBs. For simplicity only those STBs associated with the second head end are shown and described herein. Each head end operates to communicate content and other data to its respective neighborhood of STBs by broadcast channels received by all STBs narrowcast channels received by some of the STBs or point cast channels received by individual STBs. The head ends also interact with their STBs to establish and tear down sessions with the STBs as necessary to enable the delivery of content information services applications and the like. Generally speaking the head ends operate to distribute content and other information provided by the server to the set top boxes as appropriate as well as return STB messages billing information and other data to the server.

Each head end communicates with the STBs within its neighborhood via a relatively high bandwidth forward or downstream communications channel DOWN and a relatively low bandwidth reverse or upstream communications UP. The downstream DOWN and upstream UP communications channels are supported by a network topology such as a hybrid fiber coax cable television distribution system a satellite distribution system e.g. using a telephone network or reverse satellite link for upstream communications and the like. While not shown in an out of band OOB forward communications channel may also be supported by the network topology . In such an implementation of the network topology control messages and other information may be supplied to the STBs via in band messaging using the downstream communications channel DOWN or via out of band messaging using the forward communications channel not shown . Of particular relevance to the present invention the upstream communication channel UP has a relatively limited amount of bandwidth.

Within the system of the client or STBs may comprise illustratively heavy set top boxes or thin set top boxes where a heavy STB or client has significant computational and or memory resources while a thin STB or client has constrained memory and or computational resources. The STBs operate to receive broadcast narrowcast or point cast information from the head ends via the network using the downstream communications channel DOWN or out of band forward channel . Additionally the downstream communications channel DOWN may also convey control or data messages including messages providing the utilization level of the upstream communications channel UP as measured by the monitor program in a head end the monitor node in the network or some other utilization level measurement source e.g. in the server .

Second STB within the neighborhood associated with second head end is depicted as including a plurality of application programs application programs a utilization monitoring program and a utilization adaptation program . The application programs may comprise any of the applications used within the context of an STB . Each application program may have associated with it a respective priority level. The priority level of messages provided by the application may be the same as the respective application or may differ depending upon the type of message provided by the application. Utilization monitoring program is used in those embodiments of the invention in which local monitoring of the upstream communications channel UP utilization level is provided. The utilization adaptation program is used to adapt the operation of the STB in a manner tending to reduce over utilization of the upstream communications channel UP. The utilization monitoring and adaptation programs functions will be discussed in more detail below.

At least some of the STBs are configured to execute several applications at one time. For example an STB may include an electronic program guide EPG application an interactive television iTV application a video on demand VOD application and the like. Each of these applications may require the propagation of user input back to a corresponding head end or server .

According to an embodiment of the invention these and other applications running on the STB are prioritized according to their specific requirements. For example in the case of a VOD application if a fast forward FF and or rewind REW function is provided for user control of requested content the user experience is substantially degraded if such controls are not effected in a substantially immediate manner. By contrast in the case of an iTV application in which a user is allowed to vote within a time period about some content or contestant selection on a television program the user vote simply needs to be propagated to a head end within a reasonable amount of time. Similarly in the case of a server centric EPG where an EPG data base requires updating control messages requesting such updating may be delayed without unduly affecting the user experience. Thus each application is assigned a priority level where messages associated with a higher priority application are preferentially transmitted using the upstream communications channel UP.

In another embodiment an application is given a priority level and all messages associated with that application are given the same priority level. In another embodiment each message has associated with it a respective priority level wherein one application may provide messages having different priority levels based on e.g. message type or urgency. Thus where a set top box has several applications contending for upstream transmission bandwidth prioritization of applications and or application messages is performed to determine which messages will be transmitted where bandwidth constraints prevent all of the message from being transmitted at one time.

In another embodiment the utilization of the upstream communication channel UP is monitored at a central location such as a head end or node within the network . Thus referring to in one embodiment a monitor program is executed within a head end . In another embodiment a monitor node within the network operates to monitor the upstream communications channel UP. It will be appreciated that the monitor node may be used to monitor a plurality of upstream communications channel UP if accessible.

With the context of the present invention the clients or STBs adapt their respective demands upon the upstream communications channel UP in response to various factors. Such factors include the amount of data or messages necessary to transmit towards a head end the priority of that data or message the priority of the application associated with that data or message the urgency or criticality of that message e.g. emergency message such as E911 and the like and so on.

The controller of comprises a processor as well as memory for storing various control programs and other programs and data . The memory may also store an operating system supporting the programs .

The processor cooperates with conventional support circuitry such as power supplies clock circuits cache memory and the like as well as circuits that assist in executing the software routines stored in the memory . As such it is contemplated that some of the steps discussed herein as software processes may be implemented within hardware for example as circuitry that cooperates with the processor to perform various steps. The controller also contains input output I O circuitry that forms an interface between the various functional elements communicating with the controller .

Although the controller is depicted as a general purpose computer that is programmed to perform various control functions in accordance with the present invention the invention can be implemented in hardware as for example an application specific integrated circuit ASIC or field programmable gate array FPGA . As such the process steps described herein are intended to be broadly interpreted as being equivalently performed by software hardware or a combination thereof.

Topologies such as depicted with respect to the controller of may be advantageously employed within the context of the server head end network and or STB . That is by utilizing appropriate operating systems programs and or data the topology depicted with respect to controller is used to realize the functional elements discussed herein with respect to the various figures. As noted in the IO circuitry communicates with network as part of a server function communicates with network and network as part of a head end function and communicates with input device display device and network as part of an STB function.

The invention may be implemented as a computer program product wherein computer instructions when processed by a computer adapt the operation of the computer such that the methods and or techniques of the present invention are invoked or otherwise provided. Instructions for invoking the inventive methods may be stored in fixed or removable media and or stored within a working memory within a computing device operating according to the instructions.

The method of is entered at step where the upstream communication path utilization is monitored. Referring to box a centralized monitoring method may be used a set top box monitoring method may be used or some other monitoring method may be used. Monitoring may occur at a centralized point such as a remote server e.g. server a head end a node within the network or some other centralized point. Alternatively monitoring may occur at a non centralized point such as a particular STB or group of STBs .

Referring to box the monitoring may comprise the counting of upstream packets the statistical sampling of traffic on the upstream communications channel UP predictive knowledge pertaining to expected upstream usage patterns and the like.

In the case of packet counting an upstream communications channel UP having a known bandwidth is capable of transmitting a known number of packets per second. Thus by counting the number of packets conveyed by the upstream communications channel UP during a predefined time interval e.g. a second the bandwidth utilization level of the upstream communications channel UP may be determined. Similarly rather than counting all the packets conveyed by the upstream communications channel UP a statistical sampling of the conveyed traffic may be performed to determine an approximate utilization level. The approximate utilization level will typically be of sufficient accuracy. Finally predictive knowledge may also be employed to determine future changes or likely changes in the utilization level of the upstream communications channel UP utilization level. For example in the case of an interactive television program requiring user input at a predetermined time increased utilization will occur proximate that time by STBs running the iTV application. Similarly at the end of a programming interval such as a half hour or one hour programming interval or at the end of a pay per view PPV program users will likely propagate upstream commands associated with electronic program guide applications and or VOD applications to select new content for viewing. Thus predictive knowledge may comprise knowledge of particular applications to be employed knowledge of particular user behaviors and the like. This knowledge may be determined at a head end and propagated to the set top boxes to assist in prioritizing applications and or upstream messages.

At step a determination is made if the threshold utilization level of the upstream communications channel UP has been reached e.g. via direct monitoring techniques or is projected to be reached e.g. via predictive techniques .

That is at step a determination is made using the packet counting statistical sampling and or predictive techniques discussed above to determine if a threshold level of utilization has been or will shortly be reached.

At step the upstream message sources are adapted to avoid over utilization of the upstream communications channel UP. Referring to box such adaptation may encompass the prioritization of applications the prioritization of transmission or message types the postponement or deletion of the transmission of upstream messages and other techniques. An adaptation routine will be discussed in more detail below with respect to .

In one embodiment of the invention upstream utilization monitoring is conducted at a head end . In t his embodiment of the invention any of the packet counting statistical counting statistical sampling and predictive monitoring techniques may be employed. Within the context of head end or server monitoring of upstream utilizing levels the predictive modeling of the upstream utilization may be influenced by global factors associated with multiple set top boxes or groups of set top boxes. For example if at 8 00 p.m. on a Tuesday evening an interactive broadcast of a television program such as Survivor is provided it can be safely predicted that significant upstream bandwidth utilization will occur as set top box users vote and or otherwise interact via the upstream communications channel UP.

The method is entered at step and proceeds to step where a message to be transmitted via the upstream communications channel UP is received from an application or from a transmit delay queue within the STB. That is within the context of the present invention a STB has operating therein one or more applications such as EPG VOD iTV and the like. Optionally a transmit delay queue or buffer is implemented within the STB to temporarily store messages prior to transmission.

At step a determination is made if the application or message has an appropriate priority level. That is at step a determination is made as to whether the priority level of the application and or message is above a threshold priority level. If the priority level is above the threshold level then the message is transmitted via the upstream communication channel UP at step and the method proceeds to to wait for the next message for transmission.

If the application or message priority level is insufficient then at optional step a determination is made if the upstream channel is likely to be busy at this time. Such determination may be made per box via prediction techniques known application or programming scheduling INFORMATION or other means. If the upstream channel is not likely to be busy then at step the message is transmitted and the method returns to step to await the next message. If the upstream channel is likely to be busy then the method proceeds to step .

At step a determination is made if the message can be delayed. Referring to box this determination is made with respect to the type of message e.g. VOD central function such as FF REW EPG select and the like message type the setting of a delay OK flag or other means. The delay OK flag is an optional attribute associated with a message by its application. Some message types may be delayed with little or no consequence while other message types require immediate transmission or they cannot achieve their intended result. If the message cannot be delayed then at step the transmission of the message is canceled and the method proceeds to step . If the message can be delayed then at optional step the message is optionally assigned a higher priority level prior to being moved to the delay queue at step . The method returns then to step .

The above described embodiments of the invention envision the adaptation of upstream communications channel usage by individual STBs in response to utilization level messages received from a downstream communications channel in band or out of band or by STB determined utilization levels. It will be appreciated by those skilled in the art that various modifications may be made to the above methods system and apparatus while practicing the present invention. As noted above in the various figures certain process steps are denoted as optional in which case such steps may be omitted. Furthermore the particular order of the process steps described herein may be rearranged. Thus referring to the determinations of priority level upstream channel availability message delay and the like may be executed in any other order.

The above described invention provides for adapting upstream communications channel transmissions within a set top box in response to a determination that a utilization level of the upstream communications channel exceeds a threshold level. This determination may be made at the set top box or at a centralized location using one or more of the various techniques described herein. The adaptation may comprise delaying canceling and or otherwise prioritizing the transmission of data messages via the upstream communications channel.

A transmit delay queue may be implemented wherein data messages associated with a delay in transmission are temporarily stored. The transmit delay queue is periodically accessed to retrieve messages for transmission during low utilization periods or optionally where increase in priority levels of stored messages have raised their corresponding priority levels to above a threshold level. Methodology according to the present invention may be implemented within the context of an application programming interface API associated with a set top box middleware environment such as the middleware products provided by Liberate Technologies Inc. of San Mateo Calif. In the case of the API implementation as well as other methods systems and implementations the present invention is optionally adapted to receive one or more parameters associated with either the utilization level determining function and utilization level adaptation function. Parameters associated with the utilization determination function comprise illustratively selection of a technique for determining utilization level selection of threshold utilization levels and the like. Utilization adaptation parameters comprise illustratively transmit delay buffer related parameters message delay parameters time to kill packet parameters setting or resetting of a delay OK flag associated with messages message type priority organization application priority organization and the like. Other parameters will be discernable to those skilled in the art and informed by the teachings of the present invention.

While the foregoing is directed to certain embodiments of the present invention these embodiments are meant to be illustrative not limiting. Other and further embodiments of the invention may be devised without departing from the basic scope thereof and the scope thereof is determined by the claims that follow.

