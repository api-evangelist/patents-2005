---

title: Method of time synchronization of multiple A/D sample data records
abstract: Multiple analog inputs are converted to respective multiple digital data records by analog to digital converters. A switch inserts a pseudorandom “alignment” code into each analog input at the beginning of conversion. After the analog to digital conversion, this pseudorandom code is detected by correlator filters to time align the plurality of digital data record with one another. The insertion of the pseudorandom code allows multiple analog inputs to be digitally converted in synchronization with one another. The disclosed logic controls its trigger timing and operation method.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07042382&OS=07042382&RS=07042382
owner: The United States of America as represented by the Secretary of the Navy
number: 07042382
owner_city: Washington
owner_country: US
publication_date: 20050519
---
The invention described herein was made in the performance of official duties by an employee of the Department of the Navy and may be manufactured used licensed by or for the Government for any governmental purpose without payment of any royalties thereon.

The present invention relates to analog to digital converters and more particularly relates to time alignment of the data record outputs of multiple analog to digital converters.

Many engineering applications use analog to digital A D converters to translate signals from analog form to digital form. Analog to digital converters typically employ sophisticated processing algorithms to improve performance. In many cases multiple analog to digital converters are employed to digitize multiple analog input channels. When multiple analog to digital converters are used the relative occurrence in time of the data between data streams is of utmost importance for achieving the desired processing performance in many applications. Most readily available analog to digital converter products make available to the user an external trigger for this purpose. It is difficult for each analog to digital converter to consistently begin acquisition in exact synchronism with the other analog to digital converters in the system. This requirement for consistent single clock trigger accuracy severely narrows the choice of available products and in some cases it cannot be done without custom hardware design specific to the particular brand of analog to digital converter.

Known analog to digital converter acquisition systems depend primarily on three external user supplied inputs. These are 

1 the external sampling clock which is piped directly to the analog to digital converter and is usually uninterruptible 

2 the external trigger which is usually clock qualified processed by onboard logic and eventually used to trigger other circuitry to begin storing successive analog to digital conversions usually for a programmable number of samples and

In the case of multiple analog channel conversions if one analog to digital converter produces an output before the others errors result. When multiple analog to digital converters are setup to acquire multiple parallel analog inputs synchronously problems can arise with high sample rates due to latency unknowns variation drift and meta stability with the externally supplied triggers. The resulting analog to digital sample records are then offset by some unknown and possibly random number of analog to digital clock cycles from both the common trigger instant and one another and this creates an apparent large jitter problem which severely degrades the performance of many kinds of phase sensitive data processing.

An analog to digital converter is needed less prone to this error condition. Such analog to digital converter accuracy is an absolute necessity in many digital signal processing applications such as radar and sonar.

The present invention may facilitate synchronization in time of sample records acquired from multiple analog to digital converters obviate the need for custom trigger synchronization hardware perform data record alignment in post processing perform data record alignment in software and analog to digital conversion in hardware use a commercially available brand of analog to digital converter use trigger lead cables that are not necessarily perfectly matched successfully implement coherent integration and other forms of phase sensitive processing by satisfying the critical requirement of multiple channel analog to digital conversions that are time aligned simplify system specifications use a single common trigger synchronization system can be used throughout complex acquisition systems and or meet any degree of trigger alignment certainty using pseudorandom code length and correlation adapted in software.

An exemplary synchronization circuit for analog to digital converters has multiple analog to digital converters a pseudorandom code generator a plurality of switches and a plurality of correlator filters to allow multiple analog inputs to be converted to digital in synchronization with one another. The multiple analog to digital converters convert a respective plurality of analog signals to a respective plurality of digital data records wherein the analog to digital converters are hardware converters of at least two different kinds of converters having different intrinsic propagation timing characteristics. The pseudorandom code generator generates a pseudorandom code. The plurality of switches connect between the plurality of analog signals and the plurality of analog to digital converters and connect between the pseudorandom code generator and the plurality of analog to digital converters to insert the pseudorandom code into the analog signals at a same time at a beginning of the conversion. The plurality of correlator filters receive respective digital data from the respective analog to digital converters recognize the pseudorandom code in each of the respective plurality of digital records and facilitate the exact location of autocorrelation maximum within the data record.

An exemplary method of synchronizing analog to digital converters converts a plurality of analog signals to a respective plurality of digital data records using a respective plurality of analog to digital converters generates a pseudorandom code and inserts the pseudorandom code into the respective analog signals at a same time prior to converting. The method correlation filters the respective digital data records from the respective analog to digital converters to recognize the pseudorandom code in each of the respective plurality of digital signals and outputs the respective digital signals time aligned with one another. The plurality of analog to digital converters are triggered to begin converting and clocked together.

The present invention synchronizes multiple analog to digital converter channels independent of the particular analog to digital converter model brand or number used and can easily be adapted to various clock rates or resolutions.

The details of the preferred embodiments of the inventions will be readily understood from the following detailed description when read in conjunction with the accompanying drawings.

After conversion in the analog to digital converters and this pseudorandom alignment code is detected by correlator filters and . The correlator filters and receive the plurality of digital outputs from the analog to digital converters and and receive the pseudorandom alignment code from the pseudorandom code generator . The correlator filters and time align the plurality of digital outputs with one another using the detected pseudorandom alignment code. The correlation filtering of the correlator filters and is best done by post processing the stored data record from the conversion using standard digital signal processing techniques.

Although the disclosed embodiments illustrate three parallel analog to digital converter stages two or four or more parallel analog to digital converter stages can be used. The insertion of a pseudorandom alignment code allows a plurality of analog inputs to be converted to digital in synchronization with one another.

Different intrinsic propagation timing characteristics of the different analog to digital converters and are compensated for by the pseudorandom alignment code of the present inventions. For example one of the analog to digital converters may be of a different make or brand than the other and have different characteristics. Even the same brands or makes of converters often have different propagation timing characteristics from one another because of the complex multiplexing layers used today within the analog to digital converters. Additionally cabling on an input side of the analog to digital converters sometimes have different line lengths and impedances from one another causing additional propagation time differences which can be compensated for by the present inventions when these test leads are placed between the switch and the analog to digital converters and .

The pseudorandom code PRC is preferably a serial maximal length digital code inserted upon receipt of a trigger EXT TRIG . Attenuation is recommended on the pseudorandom code output to accommodate the ever shrinking full scale analog to digital converter input voltage range.

The trigger and clock lines to the analog to digital converters and the lines from the switches to the analog to digital converters may be ECLinPS lines from ON Semiconductor. The analog to digital converters and receive a common sampling reference clock. The switches and delay application of the pseudorandom code to the analog inputs in accordance with a worst case trigger latency of the individual analog to digital converters and this worst case latency is easily established from A D specifications. This is a very simple specification which is easy to guarantee with high engineering confidence. Once the pseudorandom code transmission is complete the switches redirect so that the external analog channels are connected to the inputs to the analog to digital converters. The conversion begins after triggers are applied to respective analog to digital converter trigger inputs. The digital outputs and from the analog to digital converters and preferably connect to a software computing apparatus such as a microcontroller computer or digital signal processor.

The external trigger will require a stable reference frequency and high edge rate logic with well characterized propagation delay that can be guaranteed to remain within setup timing bounds of the emitter coupled logic ECL across all operating conditions. The actual implementation of the switches is more involved than illustrated in the appended drawings in that it may be necessary to provide sufficient isolation of the logic circuit clock and other interference from the analog channel as dictated by switch isolation characteristics and analog to digital converter resolution. The construction of this circuit for those applications employing very high conversion clock rates will have to use microstrip techniques in order to realize the full performance of these components. The end product can be embedded in existing 19 rack mount assemblies or standalone. It should usually be located as close as possible to the analog to digital converters.

The pseudorandom code may be a modest size of 8 bits to 16 bits in order to economize on digital converter record overhead and ensure sufficient signal to noise ratio for very reliable autocorrelation processing. As an example suppose the switch closure time is four times the sampling reference clock and the trigger latency uncertainty is two times the sampling clock period where the sampling clock period is the period of the analog to digital converter sampling reference clock . Then the pseudorandom code generator could be programmed to wait ten times the sampling clock period before transmission of an 8 bit code. This will mean that the resulting analog to digital converter records will appear as will be illustrated in the timing diagrams of . A quick look at the first 18 samples of each sample record and locating the start of the pseudorandom code by correlation will quickly reveal how each data record is to be indexed offset for subsequent combined processing alignment. The total triggering process results in a negligibly small 22 samples of storage overhead.

When the trigger occurs the following events happen the trigger is distributed to the trigger inputs to the analog to digital converters and the synchronization control logic goes into action the synchronization control logic commands the RF switches into the pseudorandom code input position the synchronization control logic also counts down a worst case latency time after which the control logic inserts the pseudorandom code into the analog to digital converter analog inputs and the synchronization control logic then switches the RF switches back into the default analog input position and is finished.

The present invention synchronizes multiple analog to digital converter channels independent of the particular analog to digital converter model brand or number used and can easily be adapted to various clock rates or resolutions. The present invention allows the successful implementation of coherent integration and other forms of phase sensitive processing by satisfying the critical requirement of multiple analog to digital conversions that are time aligned.

Although the invention has been described and illustrated in the above description and drawings it is understood that this description is by example only and that numerous changes and modifications can be made by those skilled in the art without departing from the true spirit and scope of the inventions. Although the examples in the drawings depict only exemplary constructions and embodiments alternate embodiments are available given the teachings of the present patent disclosure. The inventions are applicable to applications requiring coherency which is being synchronous with an internal timer. Examples of coherent applications are radar sonar radio and broadband communications.

