---

title: Method and system for providing service listings in electronic yellow pages
abstract: A method and system for allowing a regional service merchant that is outside of a given geographical boundary, but services inside the geographical boundary, to be included in a result set of a search directed to a location inside the geographical boundary. Text and/or glyphs are returned along with the regional service merchant's business listing so as to explain to a user why a business not physically residing in the search area has been included in the result set. An application programming interface ensures that, if a business is listed as a regional service merchant, then the text and/or glyph is stored in association with the business listing.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07437357&OS=07437357&RS=07437357
owner: Microsoft Corporation
number: 07437357
owner_city: Redmond
owner_country: US
publication_date: 20050812
---
This is a continuation of U.S. patent application Ser. No. 09 651 406 filed Aug. 30 2000 now U.S. Pat. No. 6 973 448.

The present invention generally relates to Internet directories and more specifically to a system for displaying merchants in an Internet yellow pages directory.

Internet yellow pages are a useful tool for finding a particular entity e.g. business or finding a type of entity in a selected region. Some contemporary Internet yellow pages permit a user to direct a search to a particular region such as a ZIP code defined region a city or a state a bounded query . The results of the search identify a business or a particular number of businesses if the query is numerically limited that have a physical presence e.g. office or a mailing address within that particular region.

Another search may be directed to businesses located closest to a particular proximity a proximity query for example all businesses within 10 miles of a selected location. A proximity query may be defined by a latitude and longitude on a map and may be limited by a defined radius or number of listings e.g. the ten closest businesses meeting the search criteria. A user may enter an address or ZIP code and business listings are returned usually listed in order of closest proximity to the entered location. If the user enters a ZIP code for the location search a single address may be used for the ZIP code such as a central location within the ZIP code the location of the post office within the ZIP code or a midpoint between multiple post offices.

One problem with these systems is that a merchant that services a particular area but does not reside in that area is not found in a bounded query directed to the area. In addition the service merchant does not have a physical address in the area that can meet the criteria for returning a listing in response to a proximity query. For example some mobile businesses e.g. plumbers service an area but do not have a physical office in the area. A bounded query directed to the area e.g. directed to a particular ZIP code does not return a listing for the mobile business. Likewise a mobile business listing most likely is not returned in response to a proximity query because there are likely other businesses that have a closer physical location than the business office for the mobile business. The listings for closer businesses are returned in response to the proximity query. In some circumstances the closer businesses may not serve the location upon which the proximity query was based but have their listings returned because their business offices or mailing addresses are closer than the business offices for some merchants that do serve the area.

As another example a delivery business e.g. pizza delivery may deliver items or services to a region in which the business does not have a physical presence. Still another example is a regional or territorial business that may have one office per a given region e.g. one office in a city but may service a much larger area e.g. the entire city . A final example is a business without any physical presence such as an online business. The online business may only service particular regions such as a grocery delivery service that only delivers to a particular city. None of these merchants would be found in a bounded query search directed to the region unless the business office for the merchant was in the region and would not be returned in response to a proximity query unless the business office happened to be located close enough to the location upon which the search was based.

The present invention provides a system for allowing merchants that are outside of a given geographical boundary but service inside the geographical boundary to be included in a result set of a bounded query directed to a location inside the geographical boundary. In addition the system permits the merchant to be included in a result set for a proximity query despite the merchant s place of business being located outside the boundaries of the proximity query. To this end a schema is defined for a requesting merchant regional service merchants that associates the regional service merchant with additional location bindings e.g. ZIP codes in which the regional service merchant provides services. For each business and each category to which a regional service merchant belongs an entry is written to a database for associating each location binding that the business services with the regional service merchant.

In practice to locate a business a user requests a business listing by subject or name and a particular geographical region either via a bounded query or a proximity query. An Internet information server extracts location and category or name information from the search and forwards a request to a SQL server for matches. For a bounded query e.g. directed to one or more ZIP codes the ZIP codes are retrieved for that region and used to query for merchants having categories and or names that meet the search requirements. In this manner a regional service merchant is included in a region search where one or more ZIP codes match. For a proximity search listings for regional service merchants may be returned in response to a request made within a ZIP code that corresponds to the starting point of the proximity search. Since distance from the starting point is not a factor for regional service merchants they may be added as desired to give meaningful results to the user e.g. to the top of the list of result set .

To provide such an enhanced result set regional service merchants are stored in a richer schema than ordinary businesses. This richer schema provides lines of text and or a descriptive glyph or glyphs for each regional service merchant. The text and or glyphs are returned along with the regional service merchant s business listing so as to explain to a user why a business that is not physically residing in the search area has been included in the result set. The text or glyph may indicate for example that a regional service merchant is mobile territorial or a delivery service. The text may also describe the business service area. An application programming interface ensures that if the business is listed as a regional service merchant then the text and or glyph is stored in association with the business listing.

Other advantages will become apparent from the following detailed description when taken in conjunction with the drawings in which 

Moreover those skilled in the art will appreciate that the invention may be practiced with other computer system configurations including hand held devices microprocessor based or programmable consumer electronics network PCs minicomputers mainframe computers and the like. The invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules may be located in both local and remote memory storage devices.

With reference to an exemplary system for implementing the invention includes a general purpose computing device in the form of a conventional personal computer or the like including a processing unit a system memory and a system bus that couples various system components including the system memory to the processing unit . The system bus may be any of several types of bus structures including a memory bus or memory controller a peripheral bus and a local bus using any of a variety of bus architectures. The system memory includes read only memory ROM and random access memory RAM . A basic input output system BIOS containing the basic routines that help to transfer information between elements within the personal computer such as during start up is stored in ROM . The personal computer may further include a hard disk drive for reading from and writing to a hard disk not shown a magnetic disk drive for reading from or writing to a removable magnetic disk and an optical disk drive for reading from or writing to a removable optical disk such as a CD ROM or other optical media. The hard disk drive magnetic disk drive and optical disk drive are connected to the system bus by a hard disk drive interface a magnetic disk drive interface and an optical drive interface respectively. The drives and their associated computer readable media provide non volatile storage of computer readable instructions data structures program modules and other data for the personal computer . Although the exemplary environment described herein employs a hard disk a removable magnetic disk and a removable optical disk it should be appreciated by those skilled in the art that other types of computer readable media which can store data that is accessible by a computer such as magnetic cassettes flash memory cards digital video disks Bernoulli cartridges random access memories RAMs read only memories ROMs and the like may also be used in the exemplary operating environment.

A number of program modules may be stored on the hard disk magnetic disk optical disk ROM or RAM including an operating system including a file system therein and or associated therewith one or more application programs other program modules and program data . A user may enter commands and information into the personal computer through input devices such as a keyboard and pointing device . Other input devices not shown may include a microphone joystick game pad satellite dish scanner or the like. These and other input devices are often connected to the processing unit through a serial port interface that is coupled to the system bus but may be connected by other interfaces such as a parallel port game port or universal serial bus USB . A monitor or other type of display device is also connected to the system bus via an interface such as a video adapter . In addition to the monitor personal computers typically include other peripheral output devices not shown such as speakers and printers.

The personal computer may operate in a networked environment using logical connections to one or more remote computers such as a remote computer . The remote computer may be another personal computer a server a router a network PC a peer device or other common network node and typically includes many or all of the elements described above relative to the personal computer although only a memory storage device has been illustrated in . The logical connections depicted in include a local area network LAN and a wide area network WAN . Such networking environments are commonplace in offices enterprise wide computer networks intranets and the Internet.

When used in a LAN networking environment the personal computer is connected to the local network through a network interface or adapter . When used in a WAN networking environment the personal computer typically includes a modem or other means for establishing communications over the wide area network such as the Internet. The modem which may be internal or external is connected to the system bus via the serial port interface . In a networked environment program modules depicted relative to the personal computer or portions thereof may be stored in the remote memory storage device. It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used.

Briefly described the present invention provides a method and system for allowing merchants that are outside of a given geographical boundary but provide service to the geographical boundary to be included in a result set e.g. of a bounded query despite the merchant s actual physical location being located outside the geographical boundary. In addition the system permits the merchant s listing to be included in a result set for a proximity query directed to a location in the area. To this end the present invention provides additional location bindings e.g. ZIP codes in which the regional service merchant provides services but in which the regional service merchant does not have a physical address. A binding is created between the regional service merchant and each business and each category to which the regional service merchant belongs.

A tool user machine is similarly coupled to the web server machine via the Internet a Local Area Network or the like. Alternatively the functions of the web server machine and the tool user machine may be provided on one machine or the functions of the client machine and the web server and tool user machines may be provided on one machine or may be distributed over multiple machines.

The client machine includes network access software such as a browser . The web server machine includes web server software for accessing and serving content to the browser upon request. The web server software may be for example Microsoft Corporation s Internet Information Server IIS software. As part of its features the web server software includes data access software . The data access software includes database query software such as structured query language SQL software for example as is provided with Microsoft Corporation s SQL server software. The web server machine also includes web files that provide web pages for requesting yellow pages listings. The web server machine includes or is associated with at least one database .

The tool user machine includes a special application programming interface API . As is described further below the data entry tool set accesses the database via the API and data access software . The API exists to automatically enforce various business rules that are required to maintain the logical consistency of the data in the database. These rules include restrictions on the type and nature of regional service merchants e.g. the regional service merchant must be exactly one of mobile territorial or delivery they must have glyphs and or text and so forth .

The database maintains a schema that includes at least one entry for each business listed with the yellow pages. The business information is grouped referenced and categorized according to a defined taxonomy. For a typical business the listing may include the category e.g. pizza delivery the location of the business i.e. address the ZIP code of the location a unique identification for the business and the name of the business. An example of such a business entry is shown in . For ease of explanation a field descriptor bar is shown above the corresponding columns of the business entry . The field descriptor bar provides a textual field description for each of the associated columns in the business entry and is not typically included in the business entry. For the entry shown in a pizza delivery business is listed as being located at 111 2nd Ave. in the ZIP code 98199 with a name Pizza Pronto and an identification of 00001 . The business may also be listed in other categories. For example Pizza Pronto may also be listed under the category restaurants . For each additional category a separate entry such as is shown in is entered in the database for the business. An Internet yellow pages provider may choose to require a business to pay extra to have multiple category entries. The multiple entries permit the business to be found utilizing a number of different search criteria.

To locate a business a user first navigates to a yellow page website such as the web page shown in . As one skilled in the art will appreciate remote files such as the web page may be accessed such as via the File Transfer Protocol FTP via the Internet or as a file copy over the optional Local Area Network but preferably via the standard Hypertext Transfer Protocol HTTP which is now most prevalent on the Internet. To access a remote web file a user may for example enter a uniform resource locator URL in the browser on the client machine . In one example the web page is one of the web files and is served to a user by the web server machine .

The web page includes a data entry field for entering search criteria such as a category or business name. The user may request either a boundary query such as by entering a ZIP code city or neighborhood or a proximity query by entering an address ZIP code coordinates or the like. Fields may be provided for selecting a particular type of search. Selecting a field may pop up a data entry field for entering the proper information such as an address that is to be used in a proximity query. Alternatively the user may be navigated to another page to enter the address or location information.

After the user enters the appropriate information a search is requested e.g. by clicking on a GO button . The data entered by the user is forwarded to the web server machine and is received by the web server software . The data access software removes the location information and extracts the appropriate business listings from the database .

It can be understood that the present invention is highly amenable to implementation on the web in a variety of configurations that are typical of existing business directories and a database or any other data store may be utilized for business listing retrievals. To this end retrieval can be accomplished via the most basic access to a computer file for small business sets or through something as complicated as an optimized SQL query for large business sets. An exemplary process that may be used by the data access software to retrieve appropriate businesses and or name information is described in U.S. application Ser. No. 09 629 275 filed Jul. 31 2000 entitled Business Directory Search Engine and incorporated herein by reference. Briefly described the data access software matches the location and name or category information entered by a user with entries in the database to return a business listings result set. The data access software may need to convert address information to a longitude and latitude point and may have to use an intelligent inquiry to obtain appropriate matches. The records are extracted by the data access software forwarded to the web server machine which in turn serves the records to the client machine so that the records may be displayed by the browser .

As described in the background section the entries described above do not permit a business that is servicing an area but is not listed in the area a regional service merchant to be returned in the result set for a search directed to the area. Using the previous example Pizza Pronto may deliver pizza to the ZIP codes 98197 and 98198 in addition to 98199. If only the listings above were available for the business then a bounded query search directed to 98197 or 98198 would not return Pizza Pronto. In addition a proximity search directed to a location in one of these ZIP codes would not return Pizza Pronto unless 111 2nd Ave. is coincidentally close enough to the location to be in the result set for the search.

In accordance with one aspect of the invention separate entries are provided for a regional service merchant that associate the regional service merchant with additional location bindings e.g. ZIP codes in which the regional service merchant provides services. For each business and each category to which a regional service merchant belongs an entry is written to the database for associating each location binding that the business services with the regional service merchant.

Again referencing the example above separate entries are entered in the database for each ZIP code and category to which Pizza Pronto belongs. shows four additional entries for Pizza Pronto that are used to indicate that the business services the 98197 and 98198 ZIP codes. Each entry additionally includes information that the entry is a regional service merchant entry RSM . In the example shown this information is an additional field filled with RSM but other information could be utilized such as writing the entry to a separate database or maintaining a separate data store that includes a list of all regional service merchant entries.

The regional service merchant entries permit regional service merchants to be returned in a search directed to the serviced region. For a bounded query e.g. directed to one or more ZIP codes the ZIP codes are retrieved for that region and queried against merchants and categories and or names that meet the search requirements. Because the regional service merchant entries include ZIP code matches for regions serviced by the regional service merchant the regional service merchant is included in a region search where one or more ZIP codes match. For a proximity search regional service merchants may be returned against a request made for a location within a ZIP code in which the regional service merchants are registered.

In accordance with another aspect of the present invention schema is maintained for the regional service merchants that includes lines of text and or a glyph or glyphs. The text and or a glyph may be maintained in a schema separate from the regional service merchant entries or may be maintained as a separate entry and accessed via the SQL software such as the data access software .

When a search is conducted the text and or glyphs are returned along with the regional service merchant s business listing so as to explain to a user why a business not physically residing in the search area has been included in the result set. The text or glyph may indicate for example that a regional service merchant is a mobile a territorial or a delivery service.

Entries in the database may be entered or amended via the data entry tool set . The application programming interface ensures that if the business is listed as a regional service merchant then text and or glyph indicating that the business is a regional service merchant is stored in association with the business listing. This process ensures that text and or a glyph is available so that the regional service merchant is properly portrayed as such to the user. To do this the application programming interface may for example ensure that information regarding the fact that the business is a regional service merchant is stored with the regional service merchant entries e.g. the entry RSM and that text and or glyph is stored in association with a regional service merchant entry.

Turning now to an explanation of the operation of the present invention show a general overview of a process for returning a regional service merchant in response to a search directed to a region in which the regional service merchant service does not have a physical address in accordance with one aspect of the present invention. Beginning at step a user enters a request for business listings by selecting or inputting location and category information. The user may for example enter a category and a zip code via the yellow pages web page .

At step the stored remote service merchant data about a business is retrieved. Retrieval can be accomplished via the most basic access to a computer file for small business sets or through something as complicated as an optimized SQL query for large business sets. The invention may be effectively practiced using any number of data stores.

At step the data access software accesses an entry and determines if it matches the entered ZIP code or codes step . If not then the data access software determines if all entries have been accessed step . If not then the process loops back to step and the data access software accesses the next entry. This process continues until the data access software accesses a match for the ZIP code s where step branches to step . The data access software then determines if the category of the entry having the correct zip code matches the category entered in the search and if not step branches to step where a determination is made whether all records have been accessed. If not then the process loops back to step and the data access software accesses the next record. This process continues until the data access software accesses a match for the ZIP code s and the category where step branches to step and step branches to step where the entry matching both the ZIP code s and category information is retrieved. Step then branches to step where a determination is made whether all relevant entries have been accessed. If not then the process loops back to step where the next entry is accessed.

The foregoing steps describe a simplified approach to retrieving relevant entries. It can be understood that a more sophisticated logic may be used to speed up the process. For example in a high performance implementation steps to may be simultaneously executed in one omnibus query to an optimizing SQL access layer. Use of SQL in this fashion is commonplace and providing as much information about the desired result set as possible to the SQL optimizer generally results in the best performance.

In any event after all entries have been accessed then step branches to where at step a determination is made whether a retrieved entry is a regional service merchant. If not then step branches to step where the retrieved entry s listing is forwarded to the client machine for viewing in the browser. If the entry is a regional service merchant then step branches to step where the RSM glyph and or text for the entry are retrieved. The regional service merchant entry and the RSM glyph and or text are then served to the client machine at step . In practice the RSM entries and non RSM entries may be sent to the client together and sorting and other formatting parameters may be applied before the entries are sent.

The present invention is advantageous in that it permits a regional service merchant to be displayed in the result set for a search directed to an area despite the regional service merchant not having a physical location in the area. In addition the use of the text and or glyph describes to the user why the regional service merchant is displayed so as to avoid confusion.

While the invention is susceptible to various modifications and alternative constructions a certain illustrated embodiment thereof is shown in the drawings and has been described above in detail. It should be understood however that there is no intention to limit the invention to the specific form or forms disclosed but on the contrary the intention is to cover all modifications alternative constructions and equivalents falling within the spirit and scope of the invention. It is especially noteworthy that this invention is amenable to deployment on a variety of network topologies and while the exemplary embodiment is described with reference to directory access happening over the Internet and tools use happening on a LAN based client machine other topologies such as the reverse of the exemplary embodiment or either hybrid are readily practicable.

