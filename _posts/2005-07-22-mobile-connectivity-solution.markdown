---

title: Mobile connectivity solution
abstract: A method and application for selecting a network from one or more candidate networks is disclosed. Information is gathered from one or more database relating to each of the one or more candidate networks and is harmonized in relation to an associated network type. The harmonized information is evaluated to allocate a weight to each of the candidate networks. The weight represents the desirability of each of the candidate networks. The required resources to connect to each of the candidate networks are determined from information contained within the service-provider database, from information obtained by the end-user, and by self-adaptive learning algorithms. At least one of the candidate networks is selected based on the allocated weight of the candidate network and the application attempts to connect to the candidate network. The method and application incorporates the ability to control and integrate a plurality of services on a user device via the candidate network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07620065&OS=07620065&RS=07620065
owner: Trellia Networks, Inc.
number: 07620065
owner_city: Montreal Quebec
owner_country: CA
publication_date: 20050722
---
The present invention relates generally to network connectivity by mobile devices and more particularly to a system and method for connecting devices to multiple network types via a unified access mechanism.

The ability to connect mobile devices such as laptop computers handheld devices or a cellular telephone to a computer network is a rapidly emerging technology. Although mobile connectivity has matured over the past few years it continues to be a segmented and fast changing industry with new technology constantly being developed. Mobile communication has made a significant impact on most organizations already and as the technologies continue to improve so will the demand for efficient and convenient connectivity.

The availability of laptop computers that rival the power of desktop computers has begun a mobile workforce revolution. Now an entire population of sales representatives consultants field technical specialists and other mobile workers carry computers as part of their jobs and use their computers to do work. The problem of course is that these mobile workers leverage only a small fraction of the power of their computers. Without a network connection these workers are cut off from the enterprise systems and data they need to be fully productive.

In today s wireless network environment networks are provided in a variety of types and flavors. For example at a particular location a user may have a choice of access points between Wi Fi wireless fidelity WiMax GPRS General Packet Radio Service CDMA Code Division Multiple Access 3G third generation wireless and or wireline access. Those various types of access points have unique media layer and link layer negotiations e.g. SIM serial number registrations 802.3 802.11 . Additionally the logon scheme is not necessarily identical or even similar between the same types of access point when offered by different providers. Thus a user is forced to remember numerous login procedures dependant upon the specific network location and type to obtain access to a network if they can gain access at all .

Wi Fi 3G cellular and Enterprise i.e. private Wireless Local Area Neworks or WLANs all represent islands of wireless connectivity. They are islands because users cannot typically roam among these access networks. Individually each of these islands is riddled with problems. For example the Wi Fi business problem is not simple too many different accounts with service providers are required to stay connected through Wi Fi with any reliability beyond the home or office. Additionally there is no seamless roaming among Wi Fi networks because of the wide variety and complexity of connectivity requirements. While there are a lot of Wi Fi users the majority of potential customers for public access cannot justify an investment in wireless service that connects them only at their favorite coffee shop or fast food counter but not at airports hotels or convention centers. Thus the lack of carrier class wireless roaming service is impeding the growth of Wi Fi.

As for cellular connectivity mobile operators worldwide are embarking for the first time on the deployment of wireless data services as part of the rollout of 2.5G 3G networks. The challenge for carriers will be to generate customer uptake of these services in the context of much faster wireless connectivity made possible by Wi Fi. While some mobile carriers are engaging in the deployment of discreet Wi Fi services i.e. a service that does not roam onto cellular networks most mobile operators view Wi Fi as a complement to future cellular data services. Specifically users would use cellular in the Wireless Wide Area Network WWAN and then Wi Fi in the Metropolitan Area Network MAN which has the added benefit of offloading high data traffic from congested MAN cellular switches.

Enterprises were the first to deploy Wi Fi in the form of WLANs. However wireless connectivity does not typically extend beyond the walls of the enterprise for reasons of security. Most enterprises continue to use Virtual Private Networks VPNs over dialup connections but discourage the use of Wi Fi hotspots to connect to corporate LANs for reasons of security. With the introduction of the new Wi Fi security standard 802.11i this might change although it mostly adds complexity to the user experience by introducing yet another type of authentication. But the fact remains that the solutions capable of supporting any third party VPN client over a wireless connection on the market today are very limited and typically involve additional servers that are deployed in an enterprise infrastructure.

It would be desirable to have a unified method local to the user device that addresses these and other issues.

According to one embodiment of the present invention a method for selecting a network from one or more candidate networks is disclosed. The method comprises gathering information relating to each of the one or more candidate networks. The information is gathered from a service provider database a user preferences database an accumulated experience database or any combination thereof. The method further comprises harmonizing the gathered information in relation to an associated network type. The method further comprises evaluating the harmonized information to allocate a weight to each of the candidate networks. The weight represents the desirability of each of the candidate networks. The method further comprises determining the required resources to connect to each of the candidate networks from information contained within the service provider database from information obtained by the end user and by self adaptive learning algorithms. The method further comprises selecting at least one of the candidate networks to attempt to connect to based on the allocated weight of the candidate network.

According to another embodiment of the present invention a method to control and integrate a plurality of services on a user device is disclosed. The method comprises determining a mobile device connectivity context. The plurality of services to integrate are dependent on the connectivity context. The method further comprises defining each of the plurality of services by a set of preconditions to be satisfied and by a set of resources to be launched. The method further comprises transforming each of the set of preconditions into a set of goals to be monitored. The method further comprises monitoring the goals utilizing specialized monitoring components. The method further comprises launching the appropriate resources once the goals have been satisfied.

According to yet another embodiment of the present invention a method for connecting to a network on a plurality of mobile devices is disclosed. The method comprises accumulating statistics and location information on a first mobile device. The statistics and location information relating to a plurality of networks accessible to the mobile device. The method further comprises communicating the accumulated information to a logically centralized database. The method further comprises distributing the accumulated information stored in the central database to the plurality of mobile devices to provide the plurality of mobile devices with up to date connection rules for connecting to the previously located plurality of networks. The method further comprises connecting one or more of the plurality of mobile devices to one of the plurality of networks utilizing the connection rules distributed from the logically centralized database.

The above summary of the present invention is not intended to represent each embodiment or every aspect of the present invention. This is the purpose of the Figures and the detailed description which follow.

While the invention is susceptible to various modifications and alternative forms specific embodiments have been shown by way of example in the drawings and will be described in detail herein. It should be understood however that the invention is not intended to be limited to the particular forms disclosed. Rather the invention is to cover all modifications equivalents and alternatives falling within the spirit and scope of the invention as defined by the appended claims.

The present invention is directed to a mobile connectivity solution providing a unified method of gaining access to multiple network types with function rich features that increase efficiency and revenues for wireless operators. Wireless communications are undergoing a convergence of access and transport technologies including cellular data wireless LAN Wi Fi and IP. The emerging landscape is a wireless broadband Internet accessible anywhere anytime. However to support this new demand for data roaming services a new class of connectivity solution is required. The mobile connectivity solution is a unified method that delivers seamless data roaming coverage over a variety of wireless and wireline access points. The mobile connectivity solution also automates the management of connectivity resources such as aircards dialers DSL etc. for greater user acceptance. Users will be able to move seamlessly across different technologies and network domains freely accessing mixed sets of voice data and multimedia services and utilizing applications that add value to the basic connectivity service such as presence and location information. The mobile connectivity solution can be the backbone of a bundled access solution to the wireless broadband Internet enabling a new class of revenue generating wireless data services at a low operational cost to the carrier.

The mobile connectivity solution is a nearly transparent application continuously working in the background to connect a user to a list of preferred networks that has been created by the carrier. The mobile connectivity solution can also connect the user to new networks not on the list and automatically store that information for future use. The mobile connectivity solution is capable of learning user preferences and selecting from the available access points based on the user s preferences and from patterns emerging from previous connections.

The mobile connectivity solution is an intelligent software connectivity and service management platform that resides on the end user s device e.g. laptop PDA smart phone etc. . The solution automates always on always connected transparent connectivity to Wi Fi cellular and wireline networks and provides seamless roaming between any network including Enterprise networks accessed through third party Virtual Private Networks VPNs . The mobile connectivity solution enables the bundling of Wi Fi and cellular data services into a single branded carrier grade offering thus facilitating the delivery of new revenue generating services e.g. content video games LBS VPN IMS Mobile IP Mobile Office etc. that increases usage and service penetration.

The mobile connectivity solution is a decision making software application. Rather than deploying the absolute rules of an algorithm the mobile connectivity solution deploys a heuristic approach with an ability to adapt and learn from experience. As will be detailed below the mobile connectivity solution applies itself to the full range of connectivity requirements identifying interface types Wi Fi cellular etc. establishing the correct level of security EAP 802.1x WEP WPA etc. compliance with roaming agreements employing user preferences dynamically adapting to network conditions previous failures economics less costly connections user interventions favoring networks requiring less prompts or for which the required information is already known signal strength and so forth.

Referring now to the drawings and initially to a mobile connectivity application is illustrated within a mobile networking system according to one embodiment of the present invention. The mobile connectivity application is located on a plurality of user devices such as for example a laptop computer a personal digital assistant PDA a smartphone a computer etc. The user devices may wirelessly communicate with a plurality of wireless networks such as a Wi Fi network a cellular network or other similar network. Additionally the user devices may be adapted to communicate over a wireline with a network. The wireless networks establish a Wireless Local Area Network WLAN that allows the user device to connect to a Local Area Network LAN via a wireless connection. The wireless networks provide a Point Of Presence POP from the wireless network to the rest of the Internet. The POP and thus each of the wireless networks necessarily has a unique Internet Protocol IP address and may have a plurality of unique IP addresses. The IP address may be a publicly routable IP address or may be translated using Network Address Translation NAT .

The wireless networks include at least one access point for transmitting and receiving data from one or more of the user devices . The Wi Fi network includes a transceiver as the access point while the cellular network includes a cellular tower to transmit and receive data. The wireless networks may also include one or more of a router digital analog call aggregator server and frame relays or Asynchronous Transfer Mode ATM switches. The wireless networks are typically maintained by one or more service provider such as Provider A in the Wi Fi network and Provider B in the cellular network . The access points connect user devices to other devices services and users by serving as the point of interconnection between the wireless networks and a network which may be a fixed wireline network. Alternatively the wireless networks may interconnect to one or more other wireless and or wireline network.

Once a user device has connected to the wireless network the user has access to the available devices services and users linked to the network . For example the user device may have access to the user s user network which may be for example the user s home or work network. The user network may include a server in communication with a database and a computer or other device. The user device is able to transmit and received data from the user network via the wireless connection.

A third party provider may also be in communication with the network . The third party provider may for example be the entity that provides individuals and other ISP companies access to the Internet such as an Internet Access Provider IAP . An IAP is a type of Internet Service Provider ISP that has the equipment and the telecommunication line access required to have one of more POP on the Internet for the geographic area served. The larger IAPs have their own high speed leased lines so that they are less dependent on the telecommunication providers and can provide better service to their customers. The third party provider typically has at least one server in communication with one or more database . The database may for example contain user information such as usernames passwords privileges etc.

Turning also to the mobile connectivity application illustrated in will be further detailed. The mobile connectivity application is located on a user device and is composed of a roaming client a connectivity manager and a service manager . The roaming client determines what networks are available such as wireless networks the location s for the available networks and the resources required to connect to the available networks. Additionally the roaming client analyses and applies roaming priorities and automatic hand offs based on such criteria as for example speed cost and user preferences. The connectivity manager allows the user to add new foreign networks and access links and applications if the user device is in a location not recognized by the roaming client . The connectivity manager helps to ensures smooth hand offs as the user device travels from wireless network to wireless network.

The connectivity manager acts as a routing watchdog to enforce proper traffic routing according to a user s preference. When changes in connectivity occur e.g. dial up change of SSID LAN connected etc. the user s operating system recreates routing entries to the best of its abilities. At the same time other software such as VPNs are also configuring and changing traffic redirection. The connectivity manager detects these changes and repairs the routing tables in a minimalist way.

The service manager is the layer in the mobile connectivity application that handles external applications that are connection sensitive. When a connection is first established the service manager will start all pertinent applications automatically. If roaming or any other connectivity changing event causes the user device to change local IP address the service manager can restart external systems such as VPNs . Restarting a service can be done either by stopping it and the starting it again or in the case of integrated services supporting that function directly by sending the appropriate restart command to the service e.g. process DLL ActiveX control etc. .

Furthermore a Service can be defined to be only available on a certain interface. A good example would be a supplier specific application running only on the GPRS network. When the user requires the Service the service manager will make sure the modem is up and that the service specific traffic goes through the GPRS link. A service can be accompanied by goals and priorities. For example if an application requires a specific server to be up and running goal then the service manager can sense the presence of the server before it launches the service. This is very useful for Intranet applications or applications limited to access from within the ISP network e.g. SMTP servers are frequently protected from access from the global Internet . If multiple services are in contention for specific resources priorities can be used to make sure devices are used for the most important services or the most pertinent at the given time. For example a Telnet session might be dropped if maintaining it requires shutting down an FTP transfer.

The roaming client and connectivity manager request and provide information to each other. Information as used herein is defined as data that has been processed into some context to yield a meaningful result to the receiver. The connectivity manager provides network information to the roaming client as well as providing service availability information to the service manager . The service manager provides goals and priorities information to the connectivity manager .

The mobile connectivity application is in communication with a plurality of databases and other components and applications. In the illustrated example the mobile connectivity application is in communication with a carrier network windows module that includes a windows IP stack and other user applications . The carrier network includes various databases and components that provide the mobile connectivity application with the required dialers e.g. PPPoE L2TP CDMA etc. network databases e.g. SSID network prefixes etc. integrated services customer branding etc. The carrier network provides dialers and network databases to the roaming client that utilizes this data to determine the resources required to connect to the available networks. The carrier network communicates the integrated services and customer branding to the service manager that utilizes this information to provide additional functionality offered by the carrier to the user.

The windows IP stack includes the various sockets routing tables network interfaces drivers etc. provided with the windows operating system and with third party hardware and software. The windows IP stack and the connectivity manager communicate Internet Protocol IP information to each other. The connectivity manager also communicates with the windows IP stack to adjust the routes used by windows to as will be detailed further below provide connectivity to third party protocol clients implemented in a way not recognizable directly by the operating system such as most VPNs . The windows IP stack also communicates and receives IP information from both the service manager and the user applications

Referring also to the mobile connectivity application described above will be further detailed. The roaming client includes a location inference engine for electing candidate networks that the user device may connect to. As illustrated the location inference engine receives data from a plurality of databases located on the user device though it should be understood that a single database containing all of the required data may be utilized. The location inference engine receives assembly rules for establishing a connection to an unknown network from a foreign networks database while connection information for recognized networks is provided by a networks database . The foreign networks database feeds the location inference engine with service blocks that can be utilized by the location inference engine to create the required login procedure for a foreign network. The service blocks can then be combined in a variety of ways until the proper login procedure for the foreign network is determined. Alternatively where a network is recognized from a prior connection on the user device or carrier provided information the data within the networks database associates the recognized network directly with the required login procedure for that network.

A foreign network is a combination of connectivity resources authentication resources and special instructions to enhance roaming. As such a foreign network can be thought of as a definition used by the location inference engine to assemble the appropriate resources dialers passwords etc. to connect to a specific network.

Both the foreign networks database and the networks database are populated with data from a Preconfigured Networks and Databases PND database located on the carrier network. The PND database provides connection information directly from the carrier to the databases on the user device . This information can then be utilized by the location inference engine to determine the connection information for the located network s .

A windows resources database provides the location inference engine with data as to what resources are available on the user device . This data provides the location inference engine with information as to the available resources that are necessary to connect to the located network. The windows resources database includes data that has been provided by a preconfigured dialers database provided on the carrier network .

Diallers can be very complex to program especially when they are using non default options e.g. LCP options security parameters etc. . Windows has no mechanisms to export import dialler definitions especially since they are based on locally installed devices. To further complicate matters each version and sub version of Windows have peculiarities so the process of exporting importing becomes more a question of retracing the pertinent information and then finding a way to remap it correctly on the destination machine. This includes finding out the right device to use e.g. CDMA GPRS Dial Up PPPoE etc. . The mobile connectivity application allows an operator to export a preconfigured definition of a dialler from one of their working computers and ship it utilizing the mobile connectivity application or through an update package to the end user s computer.

A user credentials database provides security info e.g. usernames passwords WEP keys certificates information etc. to the location inference engine . The user credentials database is populated with data by from a carrier which can be stored and transferred from a user credentials and authentication database located on the carrier network . The user credentials database provides a complex hierarchical means for remembering security information. A typical search is performed by determining the MAC address the SSID or the network prefix the network database and the preconfigured diallers. The credentials can be set to be always prompted wherein they are stored on and retrieved from a disk or database or can be set to be used only for the current session. A networks information database provides the location inference engine with information about the located network such as the SSID for the access point . The networks information database is also populated with data from the carrier. It should be noted that the information provided from the carrier can be provided from a database on the carrier network or may be provided to the mobile connectivity application from the carrier by other means.

The user credentials database provides convenient functionality to the user. For example take the case of a user that is roaming in a Wi Fi hotspot requiring Point to Point Protocol over Ethernet PPPoE authentication necessitating the user to enter username password credentials unique to that specific location. The mobile connectivity application allows the user s carrier to pre configure a foreign network for the user. Upon recognizing the location s SSID and referring to a locally stored database the location inference engine assembles the appropriate resources to dial and authenticate with the PPPoE server using the correct user name and password.

The database records are associated with MAC addresses and or SSIDs and can supply the type of additional resources required and potential overrides for phone numbers user names and passwords. The database records can be as general as defining a generic dialer that prompts the user for a username and password or as specific as to associate with a specific SSID or MAC address a username and password that is unique for the particular access point . One benefit of this system is that the carrier can guide their subscribers onto the networks of the carrier s choice by providing via databases the information the carrier desires.

In addition to storing user credentials the user credentials database also allows the operator to program the mobile connectivity application to prompt the user for a user name and password when a specific network is encountered. Returning to the above example it is possible that the PPPoE credentials for the subscriber is only available using a scratch card that the user receives at the particular hotspot. Fully aware of this the carrier may configure the mobile connectivity application to prompt the user for the PPPoE credentials when the user first enters this hotspot requiring their username and password. Once the user credentials are submitted according to the login credentials acquired at the hotspot the credentials can be stored in the user credentials database . Once this occurs the user should not be required to re enter their credentials information during each subsequent login.

Thus the mobile connectivity application removes the confusion and responsibility from end users and enables them to become truly mobile. The mobile connectivity application addresses this issue by allowing for carrier provided databases within the carrier network that provide the user with a listing of Hotspots based on different foreign network definitions.

Utilizing the data obtained from the various databases the location inference engine determines a list of candidate networks by associating the available networks with the networks connection information. The location inference engine then provides the determined candidate networks to a rule based candidate selector .

The rule based candidate selector receives the information for the location inference engine and applies rules provided by the carrier and the user. The carrier provided rules are provided via an operator preferences database maintained on the carrier network . The operator preferences database may provide the data to a local database not shown on the user device that may then feed to rules to the rule based candidate selector .

Initially the rules available to the rule based candidate selector are provided by the carrier and thus the initial configuration of the roaming client is made by the carrier. The user can then change the configuration via a plurality of user selectable options that can be prioritized to adjust the rules to the user s preferences. For example the user may prioritize the various options as ignore tie breaker medium important important very important and absolute. These priorities can be assigned to each of a plurality of user selectable options such as for example speed of network level of security of network interface type signal strength plan coverage user preference avoid switching punish failures punish prompts previous visits etc. These various options will be explained in greater detail below with respect to .

The rule based candidate selector is a trainable learning artificial intelligence that is capable of learning and adapting to user or carrier selections. The rule based candidate selector automatically adapts over time to the user s preferences as the user continues to configure the roaming client in various connectivity situations. To assist in training the rule based candidate selector hypothetical connection situations may be presented to the user. Additionally real time possibilities and selections may be utilized to train the rule based candidate selector . For example if a user decides to pick from a plurality of available networks and the rule based candidate selector would have selected a network different from the one the user selects the rule based candidate selector may query the user utilizing a plurality of objective questions as to why the user made their particular selection.

Once the rule based candidate selector has assigned a priority to the candidate networks this information is provided to an interface provider . The interface provider controls at least a portion of the roaming process. The interface provider receives requests from the lower layers of the mobile connectivity application feeds the information back inside the roaming client and then translates the results from the higher level functions e.g. rule based selection location inference engine etc. into low level information. For example if a network requires multiple dialling only the pertinent operating system resource s should be used by the drivers and the interface provider is responsible for determining and implementing the appropriate one s . The interface provider is in communication with a resources module that is adapted to setup and configure as well as dismantle the various resource s required by the interface provider . The resources module is designed to access the resources modules and similar functionality provided on the user device .

The interface provider is also configured to provide information to and obtain information from the connectivity manager . As discussed above the connectivity manager interacts with the roaming client the service manager and the windows IP stack to establish connections to the carrier networks utilizing service blocks to build the necessary connections. The connectivity manager continuously scans for additional networks available to the user device as well as determines whether previously located networks remain available to the device. In addition the connectivity manager monitors the interfaces provided by the interface provider by pinging them using various apparatus including but not limited to ICMP UDP and TCP messages to determine that the interface exists and can accept requests. The monitoring of the interfaces allows the mobile connectivity application to determine that a particular host is operational and also the time required to receive a response from the host.

The connectivity manager is also in direct communication with the service controller of the service manager . The service controller monitors the current networking conditions provided by the connectivity manager and ensures that they satisfy any pre conditions for a particular service. The service controller then determines which services should be running at any given time. The service controller also makes decisions based on switching availability of servers for intranet applications level of security and other service specific predicates. The service controller uses different technology for each service type such as simple program launching and monitoring window content analysis OLE Automation ActiveX etc.

The service controller is in communication with a controlled services database that includes all the services that were pre configured by a carrier or an IT department and that were tailored for the local computer. The preconfigured services stored in the controlled services database are often generic such as Automatic VPN and are tailored by utilizing the user device s actual configuration which then becomes Automatic VPN using profile Mine from Vendor XYZ VPN Client . The controlled services database also includes any additional service specified by the end user such as starting Outlook . The preconfigured services can be supplied by a carrier and or an IT department on installation and or through regular configuration updates.

Referring now to a method for connecting a user device to a wireless network will be illustrated according to one embodiment of the present invention. generally illustrates the procedure for logging into a network on a user device . At step a user attempts to log in to a network connection by initiating a log in procedure. The location inference engine of the mobile connectivity application determines the location of the user device at a step and the networks available to the user device . The roaming client then at step selects the appropriate resources for logging in to the available networks. Once the appropriate resources have been selected the connectivity manager attempts to connect at step to one of the located networks utilizing the selected resources. A determination is made at decision box as to whether a connection is maintained to the network. If the connection is maintained the connectivity manager continues to monitor the available connections and resources at step . If however a connection is not maintained the roaming client selects alternative resources and provides this information to the connection manager at step .

At step the connectivity manager attempts to connect to a second one of the located networks using the alternative resources provided. A determination is made at decision box as to whether a connection is maintained to the network. If the connection is maintained the connectivity manager continues to monitor the available connections and resources at step . If however a connection is not maintained the roaming client determines whether any fallback technologies e.g. dial up etc. are available to the user device at step .

At step the connectivity manager attempts to connect to one of the located fallback technologies. A determination is made at decision box as to whether a connection is maintained to the network. If the connection is maintained the connectivity manager continues to monitor the available connections and resources at step . If however a connection is not maintained the mobile connectivity application determines whether a an abort command has been received or a predetermined timeout has been surpassed at step . If so the mobile connectivity application exits at step . If not the location of the user device is redetermined at step .

As discussed above once a connection is maintained the connectivity manager monitors the alternative networks and resources available to the user device . This information is provided to the roaming client at step and the roaming client configures the necessary resources at step . The roaming client then determines at decision box whether the alternative networks are better than the current connection by analyzing the current and available connections by applying rules using the rule based candidate selector . If an alternative network would be better the connectivity manager performs a smooth handoff at step . If the alternative network s would not be better or after the smooth handoff is made a determination is made at decision box as to whether the connection is maintained. If the connection is not maintained the location of the user device is redetermined at step . If the connection is maintained the determination is made as to whether the session has ended at decision box . Where the session has ended the user device is disconnected from the network by the mobile connectivity application at step . Where the session remains active the connectivity manager monitors the alternative networks and resources available to the user device at step .

Referring now to the operation of the mobile connectivity system is illustrated according to one embodiment of the present invention. It should be noted that although are presented as sequential the implementation is asynchronous and follows the blackboard model. The basic design includes a blackboard knowledge sources KS and a control mechanism. The blackboard is usually a global database that is the working space for the KS to read and write information to. The KS specialize in a specific area and can be procedures sets of rules or logic assertions. The control mechanism monitors the KS and the actives of the blackboard. The flexibility of the blackboard model allows independent modules to be added updated or removed without recoding the whole model. Modules can perform independent task and can be tailored to needs upon execution.

As illustrated in the location inference engine is started at . The location inference engine gathers the available resources as well as the current status data at by collecting resources at from the various databases associated with the roaming client coming either from the carrier network or from accumulated information as the user moves from network to network and from live external information at such as devices sockets etc. The mobile connectivity application is equipped with small software agents that take charge of the specific technologies external to the mobile connectivity application . However these agents behave on the surface as if they are a single block and perform their various functions individually from the other agents.

For example these agents may extract relevant information from the operating system or other appropriate source of the information for the first time and publish this information for consuming agents. The agents may also install appropriate hooks for operating system notifications and unless prohibitive prepare for regular automatic polling and manual refreshing. A blocking interval is provided to avoid modules being unaware of each other and requesting polling too close together or simultaneously. These agents also perform configuration differential analysis and do not simply dump the new information. In addition specific type changes are identified the help prevent or inhibit small and irrelevant changes in the internal states of the operating system from causing a cascade or algorithms and heuristics to fire pointlessly.

The location inference engine also gathers networking information at from known MAC addresses and SSID s at contained within the networks information database within the roaming client . The location inference engine is provided a list of the connectivity capable elements from within the mobile connectivity application . Real time network information is also obtained at for example for visible SSID s per WiFi interface interface sates and IP information routing tables and other managed devices which may include the signal strength selected networks and available networks for the managed devices. Utilizing this data the location inference engine determines potential networks available to the user device at and attempts to match the potential networks with the user s account information at by searching the network database at and the user credentials database . With this information the location inference engine determines the usable candidate networks at and gathers all the required information to determine the quality preferences for roaming algorithms and auto switching heuristics at .

For each usable candidate network the mobile connectivity application gathers information at that will after be used by the connection selection heuristics and algorithms. Also certain factors are normalized across technology and equipment. For example Wi Fi signal strength cannot be directly compared or used alongside the values returned by for example a cellular data card. All values are therefore turned into a signal strength bars subjective system.

To obtain the desired information at the location inference engine communicates with the various databases within the roaming client at and to gather the necessary information. The one or more databases contain information regarding for example the subscription information user credentials WEP keys security level defined by database or inferred from technology utilized in connection user appreciation of the network previous visit information success failure rates from prior visits subscription plan repetitive failures user technology preferences programmed signal strength thresholds to avoid etc. The location inference engine also determines the currently used network at the resources and time required for the connection at and the current signal strength using real time information external to the mobile connectivity manager . Utilizing this information the location inference engine is able to determine the qualified candidate networks at and these networks are communicated to the rule based candidate selector . Once networks have been qualified the location inference engine supplies this information to the rule based candidate selector that can then start or react to changes in ratings or availability.

Referring also to the rule based candidate selector determines whether any of the qualified networks are newly available or whether the network rating s has changed at . Each of the newly available networks and qualified candidate networks are evaluated by the rule based candidate selector at based on a variety of priorities at that have been user assigned or learned by the mobile connectivity application . The rule based candidate selector looks at various evaluation factors contained in a normalization table or algorithm at and the importance given to each of these factors at . An example of the evaluation factors e.g. autoswitching rules that can be used to establish network priorities include but are not limited to interface type plan coverage security user preference avoid switching network speed punish failures and punish prompts. In addition a raw evaluation factor value is provided to the rule based candidate selector from the location inference engine that was generated while the information required to evaluate the quality of the candidate network was collected at .

According to one embodiment of the present invention the interface type and network speed is a preset factor that ranks the importance of one of the supported interface types e.g. wireline WiFi cellular etc. and the current or expected speed of the network. The plan coverage is assigned on a per network basis and ranks the type of roaming plan the user has with a specific foreign network. Security is a preconfigured definition that is based on the connectivity pattern used by the foreign network and that is ranked by the expected security provided by the network. User preference is a ranking of the importance of a user s input preferences in comparison with the other factors. The punish failures and punish prompts factors are used to raise or lower the priority for foreign networks that fail to connect or do not currently have the required user credentials respectively. The avoid switching factor ranks the importance to give to a foreign network that is currently providing service to the user device . The mobile connectivity application can assign a higher priority to the network that is currently in service to prevent switching from network to network too often as will be discussed below.

These autoswitching rules help to determine which of the candidate networks is the most favorable to connect with. Each of the above factors is provided an importance level as configured by the software provider service provider and or end user. In one embodiment the importance levels range from ignore to absolute with intermediate steps such as tie breaker important and very important. 

When a user chooses to allow the mobile connectivity application to autoswitch from network to network the mobile connectivity application will connect to the most favorable available network at any given moment unless other overriding conditions are met. When autoswitching is disabled the mobile connectivity application will still attempt to connect to the most favorable of the candidate networks but so as long as it maintains a connection the mobile connectivity application will not switch to another of the networks even if a better candidate network subsequently becomes available.

Referring still to the above evaluation factors and the importance associated therewith are utilized by the rule based candidate selector to supply the list of sorted prioritized candidate networks at . For each prioritized network the rule based candidate selector determines at whether the prioritized network has a higher rating computed at than the connected network by looking at the real time statistics associated with the connected network at .

If at a determination is made that the prioritized network is not higher rated the search ends since the remaining sorted prioritized networks are necessarily of lower rating until such time as there are changes in candidate networks availability candidate networks ratings or the periodic autoswitching timer is triggered.

If at a determination is made that the prioritized network is higher rated than the connected network the rule based candidate selector determines at whether switching is blocked by common sense rules at that are provided within the mobile connectivity application . The common sense rules are typically defined to avoid loss of service caused by switching within the same technology or by the fact that the current network is using devices also required for the potential candidate. If the switching is blocked at the search continues with the next prioritized candidate network at . If there are no more prioritized candidate networks left to evaluate the search stops until such time as there are changes in candidate networks availability candidate networks ratings or the periodic autoswitching timer is triggered.

If however the switching is not blocked the rule based candidate selector signals the mobile connectivity application to initiate a network switch at . The mobile connectivity application then begins the process of connecting with the selected network and or service at as will be explained in greater detail with respect to . Once the mobile connectivity application has attempted to bring up the new network and or service the determination is made at whether the switch was a success.

If the switch is successful the algorithm stops until triggered again. If the switch fails the algorithm resumes at the point when the candidate network was identified. The above described process can be triggered by two type of events 1 changes in network priorities at e.g. new interfaces status changes preferences changes user initiated switching etc. and 2 a periodic timer at that signals the rule based candidate selector to attempt an autoswitch again.

When a candidate network access point or a service is required the appropriate resources are assembled and connected via the mobile connectivity application . Referring now to the connection to a network or service using service blocks will be explained in greater detail. A candidate network is identified by the rule based candidate selector at and is supplied to the interface provider . The interface provider selects the necessary resources at from the resources module at as well as other necessary information at from the databases within the roaming client . A determination is made at that all of the necessary resources have been assembled. If the necessary resources have not been assembled a determination is made at as to whether a special route is needed and if so a temporary special route is established at .

Certain types of service blocks require dialogue with the external world. In order to avoid switching all the traffic to the candidate network for those negotiations the service blocks can request temporary special routes to support their authentication connection mechanisms. The exact process varies greatly from one type of service block to another from RAS dialing Wi Fi associations to execution of 3rd party software . As a general rule service blocks offer the following minimal asynchronous mechanisms 1 a means to determine if the resource is up or down 2 a means to request for the resource to be brought up 3 a means to tear down the connection unless the service block is said to be permanent and 4 a means to report on status change.

Once the special route has been established or if a special route is not required a determination is made at as to the type of resource that is still required. The resource can be for example a LAN RAS WiFi external application 802.1x expansion module web logon etc. Where a LAN is utilized a determination is made at as to whether the resources will result in a successful connection being established via LAN.

Remote Access Servers RAS is a component of a network infrastructure allowing the negotiation of a session as authorized by a service provider using the user s credentials typically a user name and a password When RAS is the resource a device is dialed at e.g. such as a cellular modem in the user device and the interface provider waits for the dialing to be completed at at which point a determination is made at as to whether the resources will result in a successful connection being established via RAS.

Where the type of resource is WiFi a Service Set Identifier SSID or a Basic SSID BSSID is selected at by Wired Equivalent Privacy WEP in some embodiments. The interface provider waits for the association of the SSID or BSSID to complete at at which point a determination is made at as to whether the resources will result in a successful connection being established via WiFi. It should be noted that if the WiFi resource requires Extensible Authentication Protocol EAP a 802.1x resource will be dialed after.

When the type of resource is a 802.1x connection the interface provider negotiates with an authentication server. The authentication server may use the Remote Authentication Dial In User Service RADIUS or the like. When a user device requests access to an access point via a wireless LAN with 802.1x the access point forces the user actually the user s client software into an unauthorized state that allows the mobile connectivity application to send only an EAP start message. The access point returns an EAP message requesting the user s identity. The mobile connectivity application returns the identity which is then forwarded by the access point to the authentication server which uses an algorithm to authenticate the user and then returns an accept or reject message back to the access point. Assuming an accept was received the access point changes the user device s state to authorized and normal traffic can now take place. At this point a determination is made at as to whether the resources will result in a successful connection being established via an 802.1x connection.

When the resource is an expansion module i.e. a module supplied by a third party vendor to extend the functionality of the mobile connectivity solution using the mobile connectivity solution s published Application Programming Interface API the interface provider then calls the expansion module s API at and waits for the expansion module to complete or timeout at . A determination is made at as to whether the resources will result in a successful connection being established via the expansion module.

When the resource is a web logon the interface provider determines the required logon sequence at by searching one of the databases on the roaming client at for prior visit information or other stored network information. The web logon sequence is then executed at and web access is tested at . Once web access has been tested a determination is made at as to whether the resources will result in a successful connection being established via a web logon.

When a determination is made at as to whether the resources will result in a connection being established a negative result causes the mobile connectivity application to rollback to the previously connected resources at and results in an autoswitch failure at . As such the mobile connectivity application will allow the user device to remain on the connected network until a higher rated network is available that the user device can be connected to smoothly. When a candidate network fails to provide full service the resources allocated by the intermediate steps described above are freed i.e. disconnected unless the involved service blocks are specifically instructed to be permanent. Once the resources are freed if required then the rule based candidate selector is notified of the failure to connect to the candidate network.

Once a service block reports a successful connection at certain types of service blocks also require proper IP connectivity to be established e.g. Dynamic Host Configuration Protocol DHCP information . Thus when a positive result is achieved the mobile connectivity application waits for the necessary networking information e.g. Dynamic Host Configuration Protocol etc. if required at . If the information is not received within the service block s natural standard based or programmed time out at the connection is deemed to have failed and the mobile connectivity application rolls back to the previously connected resources at . If the information is received the interface provider selects the appropriate resources at and determines at whether all the resources have been assembled.

Once a determination has been made at by the interface provider that all of the resources have been assembled a determination is made at whether the the service blocks were part of a service offering such as a VPN or a support network. If the host is a service as defined by the service manager the routing tables are updated if required and a successful connection is established at . The reconfiguration information is stored in the routing tables at in one of the databases within the roaming client . Alternatively if the service blocks formed a support network a determination is made at as to whether mobile Internet Protocol IP is required. If mobile IP is not required the internet is sensed at by the connectivity manager . The connectivity manager uses Internet Control Message Protocol ICMP User Data Protocol UDP and or Transmission Control Protocol TCP packets to test the connectivity to the internet. If mobile IP is required the connectivity manager negotiates the required protocol.

Once the internet has been sensed or the mobile IP has been negotiated a determination is made at by the connectivity manager whether the selected network is providing service. If the network is not providing service the mobile connectivity application rolls back to the previously connected resources at . If the network is providing service the mobile connectivity application notifies at the service manager of the connection.

The operation of putting the candidate network into operation depends on the nature of the network itself. For any service requiring routing tables adjustments e.g. VPN MIP Internet Traffic Management etc. the appropriate changes are made to the computer s IP stack . For protocols such as mobile IP tunnels are reconfigured to re route any mobile IP traffic through the newly available network. If the new network is not a service from the service manager the service manager is notified that the user device s connectivity has changed. Once the service manager has been notified if required then the rule based candidate selector that requested the connection to the candidate network is notified of the success.

Referring now to once the service manager has been started at for example by the notification at it monitors the state of the currently selected network and disconnection time outs at and is fed the real time networking information at . The service manager continuously runs in the background to monitor the situation of the currently selected network and determines what to do according to what has changed. Changes in the connection status are sent from the connectivity manager to the service manager at . In addition data regarding the defined services is fed to the service controller at from the controlled services database . The information regarding the connection state and the most recent IP address information is maintained by service controller at . A determination is made at as to what if anything has changed. If the connection remains a determination is made at as to whether any of the services to the user have been suspended. If not all of the services are started at and the service controller brings up the appropriate network or service at . If one or more of the services has been suspended the service controller resumes the services at and determines at whether the service is an integrated service and if so sends a resume message to the service provider at . Once a resume message has been sent or when the service is found not to be an integrated service this information in retained by the service manager which continues to monitor that network information at .

Alternatively if a determination is made at that the user device is connected to different IP or a first time connection a determination is made at whether the services have been suspended. If not the services are all started at . If so the services are all restarted at and a determination is made at as to whether the service is an integrated service. If the service is an integrated service a restart message is sent to the service at and this information is retained by the service manager as the current networking environment at and stored at which is then used to analyze connection state and IP address changes as discussed above. If however the determination is made at that the service is not an integrated service the service is stopped at and then a service startup sequence is initiated at . The service blocks forming the service are then supplied to the interface provider at .

Alternatively still if a determination is made at that the user device has disconnected from a network the services provided by that network are suspended at . Similarly if a determination is made at that the user device has timed out the services are stopped at and this information is retained by the service manager as the current networking environment at .

The mobile connectivity application is designed to deal with the complexity of roaming among cellular and Wi Fi networks for both mobile IP and non mobile IP modes. A software based solution that is network agnostic and resides on the user s device the mobile connectivity application is uniquely designed to enable quick deployment of carrier class data services that leverage the growing base of wireless access points without major changes in the network core. The mobile connectivity application is a carrier class universal connectivity platform that resolves conventional operating system limitations by intelligently and transparently managing connectivity regardless of the network technology e.g. WLAN DSL CDMA2000 GPRS EDGE etc .

As Wi Fi hotspots have become increasingly prevalent new difficulties and complexities have emerged. One issue is multiple SSIDs the more Wi Fi operators there are in a given area say an airport the more SSIDs there will be broadcast to the laptop user. Windows does not know which is the correct SSID and will connect the user to the strongest SSID signal even if it is not the correct or desired SSID. Another issue is security. Additionally carriers may use varying authentication schemes at their hotspots for reaching the internet including on location purchase of scratch cards. Thus while Carrier A may use PPPoE to create secure links from a user s laptop to the Wi Fi hotspot Operator B may deploy L2TP to accomplish this secure link and Operator C might be using web logon. Furthermore the hotspot may be owned by the establishment itself which would then resell the bandwidth from its ISP.

The end result of this is that for a user to be mobile they must obtain all the information regarding correct SSID dialling capabilities and authentication methods and credentials for each location they visit before they are able to connect. Unfortunately this is a very burdensome task that may overwhelm most users. The mobile connectivity application utilizes databases to store information from the provider and from the operation of the application itself as well as pushed from a carrier or other network operator. Thus the user is not required to obtain all of the information that would otherwise be necessary because the mobile connectivity application stores and retrieves this information transparently from the various databases. Further the mobile connectivity application is designed to make most of the decisions thereby reducing the possibility that the user has chosen a function by mistake.

Databases also present network operators with the opportunity to offer their customers network based services such as content delivery and multimedia services. These are services that operators supply to their subscribers that expand on the current network with which they are connecting. Once the mobile connectivity application detects on which network it is roaming the mobile connectivity application can associate with this network SSID a specific network image a link to a website and an HTML branding page.

To the user the mobile connectivity application is a nearly invisible application at work continuously in the background connecting the user to a list of preferred networks that has been created by the carrier. The mobile connectivity application will also connect the user to new networks not on the list and automatically store that information for future use. The mobile connectivity application platform is based on a robust software model that allows the mobile connectivity application to intelligently detect a wireless or wireline network and then assemble the many layers of access protocols and required security authentication mechanisms over any given network infrastructure. All this is done in a way that is completely transparent to the end user.

To the carrier however the mobile connectivity application is a powerful platform rich with service functionality. The mobile connectivity application can be configured in many ways to satisfy the connectivity requirements of its subscribers. From simple Wi Fi connectivity over web logon to complex roaming and connectivity over mobile IP the mobile connectivity application is the future proof solution that provides carriers with the tool to scale diverse wireless networks into a manageable whole without costly changes to the core carrier network.

With the mobile connectivity application carriers and other network operators will have the ability to offer their customers branded roaming data services over a wide range of access technologies. In short the mobile connectivity application is a carrier class service enabler for revenue generating wireless data services. Merging the convenience of wireless mobility with high speed access to the Internet and Intranets creates new business opportunities for wireless operators. The mobile connectivity application allows operators to offer innovative services not only to retain high end data subscribers but also to generate new revenue streams through differentiated services specific to market segments.

A carrier branded mobile connectivity application provides the end user with full access to the bundle of a carrier s wireless data services. For example an operator that offers GPRS EDGE 1xRTT 1xEVDO wireless services to a user can now offer a roaming service that allows the user to connect through a public Wi Fi hotspot owned or leased by the operator . Re authentication is performed in a behind the scenes manner by the mobile connectivity application removing this burden from subscribers. This is accomplished by having the service provider furnish the user with a downloadable database of Wi Fi connectivity patterns to adapt to their current location. Supplying this form of seamless roaming encourages users to connect along various networks. This spurs the bundling of an operator s services thereby creating customer loyalty to a carrier s service and away from competitor services thus reducing churn.

The mobile connectivity application combats the end user s reluctance for roaming on Wi Fi by offering a painless and simplified connectivity solution from an end user standpoint that will relax their fears of the perceived complexity and insecurity of using public access wireless connections. Consequently operators will benefit from a dramatic increase in the demand for Wi Fi hotspot access as well as temporary access pay per use to foreign networks. A principal benefit for operators who provide their subscribers with the mobile connectivity application is that the platform supports carrier grade connectivity management to all connections on the available access links. The mobile connectivity application automatically detects available networks verifies the network connection according to an operator provided database implements the connection configuration required and connects. By removing this task from users operators can dictate the order of which access links are tried to guide customers onto the operator s choice of network. The mobile connectivity application can be used to connect across all LAN Wi Fi GPRS EDGE 1xRTT 1xEV DO cards and Bluetooth interfaces.

Another key benefit of providing customers with a single mobile connectivity application is the bundling of all wireless data services. This provides users with easy access to all networks offered by the operator and permits the operator to offer customers one consolidated monthly statement that details which and how often services were utilized. By having the mobile connectivity application authenticate the user for each connection the operator can track each user s individual bandwidth usage per session and bill the customer accordingly. Providing a simplified billing structure can be the key to customer satisfaction and customer loyalty.

Carriers can also build customized subscriber CDs containing extractable download packages that can be accessed by user via the mobile connectivity application . These packages can include the foreign network connection patterns and customized branding and images e.g. icons logos etc. . Carriers would also be able to manage subscribers online with live updates.

The mobile connectivity application fully supports strong authentication mechanisms thus removing impersonation and denial of service security threats. This mechanism can also be used for non repudiation where a request for service can be traced back to a specific user. In addition all account information for dial up connections are fully encrypted.

With a single click the mobile connectivity application also provides continuous mobile IP connectivity supporting both co located modes or through an infrastructure Foreign Agent. Network connections based on the user s profile pre configured preferences provide seamless access session continuity hand off and security authentication mechanisms between active links as per the IETF mobile IP standards.

The mobile connectivity application provides numerous end user specific features allowing for seamless application roaming and including inherent security and authentication mechanisms as well as user friendly troubleshooting tools. The mobile connectivity application is designed to provide seamless connection and includes inherent security and authentication robustness to comply with carrier and corporate IT infrastructure requirements. The mobile connectivity application is a key enabler for the adoption of premium data services.

When required the mobile connectivity application keeps the user informed about what is going on through appropriate feedback within reasonable time. The system speaks the user s language with words phrases and concepts familiar to the user and follows real world conventions making information appear in a natural and logical order.

The mobile connectivity application features an aesthetic and minimalist design. The user can see instantly that he has connectivity. The GUI is color coded for ease of use and to attract user s attention and help users recognize diagnose and recover from errors quickly. Error messages are expressed in plain language no codes and precisely indicate the problem and suggest a solution. It also includes a battery of diagnostic tools such as integrated pings routing table analyzer TCP IP connections etc. If after all this it is still necessary for the user to contact customer support the mobile connectivity application features a full log history that the user can send to the support agent for analysis.

A log viewer can provide a current and historical view of the connection activities and status. All network or system type events will be logged including showing when different networks sessions have been initiated or terminated. Log information is critical when trying to troubleshoot various network problems especially if intermittent.

The mobile connectivity application runs in the background as an icon in the system tray and can be opened at will for additional information or user interventions. Once opened the mobile connectivity application shows all available network interfaces and all active access links. A user can access the full range of system set up screens and security parameters. The opened mobile connectivity application also provides the user with a link to log activity reports that are very useful for troubleshooting and keeping track of the ongoing changes activities of the mobile connectivity application .

As eluded to above the mobile connectivity application provides carrier grade troubleshooting. The troubleshooting window allows the user customer service engineers and IT departments to troubleshoot potential network problems quickly and effectively. As network configurations can be complex it is important that simple troubleshooting tools are available if connections do not work. Among many other services the mobile connectivity application provides basic test functions such as ping route tracing dial testing and spying on agent advertisement messages. Further a configuration differences window may appears when changes are made with respect to the current archived profile so the user can view the most recent modifications before saving them.

While the present invention has been described with reference to one or more particular embodiments those skilled in the art will recognize that many changes may be made thereto without departing from the spirit and scope of the present invention. Each of these embodiments and obvious variations thereof is contemplated as falling within the spirit and scope of the claimed invention which is set forth in the following claims.

