---

title: Method and system for establishing an adaptable offset for a receiver
abstract: A method and system of establishing an offset for a receiver. In one embodiment, a method includes receiving an input signal and generating a first signal. The method can further include integrating the input signal and the first signal at a reference node. In addition, the method can include comparing the input signal to a signal at the reference node and generating an output signal, analyzing the output signal to determine whether the output signal contains noise, and modifying the first signal based on the analysis of the output signal.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07864889&OS=07864889&RS=07864889
owner: Robert Bosch GmbH
number: 07864889
owner_city: Stuttgart
owner_country: DE
publication_date: 20050615
---
Embodiments of the invention relate to receivers configured to adapt to the magnitude of noise in input signals. Some embodiments of the invention may be used as receivers in remote control systems such as remote keyless entry RKE or similar systems used in vehicles.

When designing a high sensitivity receiver it is often desirable to set the data detection sensitivity of the receiver close to the level of the noise in the signals that one is interested in receiving. However even when the sensitivity is set at this level noise may still interfere with operation of the receiver.

Noise interference with receiver operation is particularly prevalent in environments with variable noise. Variable noise may be generated for example by microprocessors cycling on and off or by electric motors. Variable noise can cause a receiver to wake up even when a signal of interest is not present. In applications where low current receivers are used activity by a receiver in the absence of a signal of interest can cause the receiver to exceed the current consumption requirements that a user or manufacturer may specify. For example in vehicles the operation of remote door locks alarms and other accessories draws current from a battery or batteries with limited capabilities to supply current. Receivers that are unnecessarily active add to the current demands placed on vehicle batteries. In modern vehicles there are numerous control units accessories and other devices that may require a current voltage or power source. Thus even relatively small levels of unnecessary current usage can adversely impact a vehicle battery or electrical system.

In view of the above embodiments of the invention provide an adaptable receiver configured to adjust in a varying noise environment. Embodiments of the invention provide a reference input to a comparator controlled by a processor. The processor adjusts the reference input to adapt to variable noise. Embodiments of the invention inject a pulse controlled signal to a comparator to create an adaptable reference.

In one embodiment the invention provides a method of establishing an offset for a receiver. The method may include receiving an input signal generating a first signal directing the input signal and the first signal to a reference node coupling a capacitor to the reference node integrating the input signal and the first signal at the reference node comparing the input signal to a signal at the reference node and generating an output signal analyzing the output signal to determine whether the output signal contains noise or information that conforms to a predetermined information format and modifying the first signal based on the analysis of the output signal.

In another embodiment the invention provides a receiver having a comparator. The comparator is configured to receive an input signal to compare the input signal to a signal at a reference node and to generate an output signal. The receiver also includes a processor configured to generate a pulse controlled signal having a pulse width. The processor is coupled to the comparator so that the pulse controlled signal is delivered to the reference node and the output signal of the comparator is delivered to the processor. The processor analyzes the output signal to determine whether the output signal contains noise or information that conforms to a predetermined information format and modifies the pulse width of the pulse controlled signal based on the analysis of the output signal. A capacitor is coupled to the reference node. The pulse controlled signal provided to the reference node is integrated with the input signal to provide a stable reference.

Additional aspects of embodiments of the invention are illustrated in the drawings and provided in the subsequent description.

Before embodiments of the invention are explained in detail it is to be understood that the invention is not limited in its application to the details of the examples set forth in the following description or illustrated in the drawings. The invention is capable of other embodiments and of being practiced or carried out in a variety of applications and in various ways. Also it is to be understood that the phraseology and terminology used herein is for the purpose of description and should not be regarded as limiting. The use of including comprising or having and variations thereof herein is meant to encompass the items listed thereafter and equivalents thereof as well as additional items. The terms mounted connected and coupled are used broadly and encompass both direct and indirect mounting connecting and coupling. Further connected and coupled are not restricted to physical or mechanical connections or couplings.

An input signal may be received by a reception device or element . The reception element may be an antenna. Alternatively signals of interest may be fed from another source such as a cable or network. The input signal may be filtered or unfiltered. A filter may be used for example to remove signals outside a certain frequency band. Regardless of whether the input signal is filtered the input signal may still include noise. The input signal may be considered as having a desired signal or information portion and a noise portion.

The input signal received at the reception element is directed to an input node coupled to a comparator . Although a direct connection is shown between the element and the input node components such as resistors amplifiers or the like may be situated between the element and the input node . Thus the signal present at the input node may be the same as the input signal received at reception element or a version thereof. A number of components such as de multiplexers filters amplifiers delays or the like may process the input signal between the reception element and the input node to create a version of the input signal at the input node .

As should be understood by one of ordinary skill in the art a variety of signal conditioning elements could be connected between various components of the embodiments described herein. Strictly speaking the output of a signal conditioning circuit is not identical to its input for example an output signal differs in at least timing or phase from an input signal even in the simplest of components although the time or phase difference may be very small. In any event it should be understood that the use of additional circuitry is within the scope of embodiments of the invention. Thus unless the context indicates otherwise the term signal encompasses an original signal and versions of that signal that might be created through the use of conditioning circuitry placed between two components.

The comparator has a data input a reference input and an output . In some embodiments the comparator may be constructed using an integrated circuit such as integrated circuit model LMV manufactured by National Semiconductor. In some embodiments the data input is coupled to the input node and receives a signal from the input node . In some embodiments the comparator is configured to perform a selection of the signals at the data input and the reference input . More specifically the comparator may compare a signal received at the data input to a signal received at the reference input and generate an output signal at the output by performing a selection of the signal having the greatest amplitude. As a consequence the signal at the data input or the reference input having the greatest amplitude is output as the output signal on output .

The comparator may also be configured to generate one of two possible logic signals. The two possible output signals may correspond to one of two logic states. For example the comparator may generate a logic high output signal of 5 volts if the amplitude of the signal received at the data input is greater than the amplitude of the signal received at the reference input and may generate a logic low output signal of 0 volts if the amplitude of the signal received at the reference input is greater than the amplitude of the signal received at the data input . Other variations in the operation of the comparator should be apparent to those skilled in the art.

In the embodiment shown the receiver also includes a processor . The processor may be a microprocessor macroprocessor or other processing chip or unit. The processor may also be implemented using an application specific integrated circuit ASIC or other hardware circuit. The processor has a processor input and a processor output or port . In some embodiments the processor may be an 8 bit programmable microprocessor manufactured by Microchip. In some embodiments the processor is configured to generate an adaptive controlled signal. The processor may be configured to adaptively control the amplitude duration frequency or any combination thereof of the generated signal. In some embodiments the processor generates a pulse controlled signal and outputs or injects the signal on the processor output . In some embodiments the pulse controlled signal contains a number of pulses where each pulse has similar amplitude but a varying width. The processor may be configured to vary the pulse widths or pulse durations. The processor may also be configured to switch between a set of predetermined set of pulse widths. In some embodiments the input of the processor is coupled with the output of the comparator and the processor may be configured to vary the pulse widths based on the signal received from the comparator .

In the embodiment shown the pulse controlled signal generated by the processor is directed to a regulating resistor configured to limit the current of the pulse controlled signal. Specifically the regulating resistor may be used to protect the comparator from receiving a current at an amplitude or level above the comparator s rating. One benefit of the regulating resistor or similar conditioning circuitry is that it allows a generic or off the shelf processor to be used since the conditioning circuitry modifies the signal to be compatible with the comparator . Otherwise a specialized or specific processor capable of inherently generating a compatible signal would be required

The regulating resistor is coupled to a reference node . The reference input of the comparator is also coupled to the reference node . The reference input of the comparator may be configured to receive a reference signal from the reference node . As previously described in one embodiment the comparator compares the amplitudes of the signals at the data input and the reference input and outputs the signal with the greater amplitude.

In the embodiment shown a capacitor is coupled to the reference node and a reference resistor connects the input node and the reference node .

The output signal of the processor as limited by the regulating resistor injects charge into the reference input to set the signal level where a signal of interest is detected. For example in a keyless entry system the charge sets the level where RF data will be detected. The activity of the capacitor is also affected by this signal. Specifically the current provided to the capacitor sets the voltage at the reference node and therefor the voltage level at the reference input . The voltage on the capacitor is proportional to the magnitude of the injected current and the time duration that the current is injected as shown by the following equation. where V is the voltage measured across the reference node 40 and ground in FIG. 1 I is the current flowing through the regulating resistor 36 and C is the capacitance of the capacitor 42.

In the embodiment shown in the voltage level on the capacitor settles to the average voltage of the signal input to data input . The settling time is set by the RC time constant of the capacitance of the capacitor and the resistance value of the reference resistor . During some portion of the reference voltage settling time the voltage level at the reference node may exceed the voltage level at the input node . As a consequence only a positive excursion of the input signal delivered to the input node causes the comparator to output a high signal i.e. to output the signal input to the data input . The processor may also be configured to reject the artificial high pulse as noise when output by the comparator .

The magnitude of the reference voltage offset i.e. the voltage level at reference node is set by the value of the regulating resistor the capacitance value of the capacitor the differential voltage measured from the output of the processor to node i.e. the voltage of the capacitor and the duration of the time that the processor outputs a logic high signal i.e. the width of a pulse . In the embodiment shown it is the width of the pulse of the signal output by the processor that is varied to control the level of the reference voltage. Other elements or components could be varied. For example variable capacitors or resistors could be implemented. However generating a pulse width controlled signal may be accomplished relatively cheaply and easily using a relatively simple microprocessor. Adjusting other components is likely to be more expensive and complicated.

During a high amplitude pulse of the pulse controlled signal injected by the processor the capacitor receives a majority of the current contained in the signal injected by the processor in combination with an integrated version of the data signal received by the data input of the comparator . In some embodiments the reference input of the comparator has high resistance in comparison to the capacitor and while the capacitor is charging little current is received by the reference input of the comparator . Since little current or a low amplitude signal is received by the reference input the amplitude of the signal received by the data input of the comparator is likely to exceed the amplitude of the reference signal. If so the comparator outputs the signal present at the data input or a version thereof. For example the comparator may output an amplified and clipped version of the signal received from the data input .

During a low amplitude pulse of the pulse controlled signal the capacitor may discharge. As the stored charge on the capacitor decays the current received at the reference node increases as does the amplitude of the reference signal received by the reference input of the comparator . During the capacitor decay the amplitude of the reference signal received by the reference input may increase to a point where the amplitude of the reference signal matches or exceeds the average amplitude of the data signal. At this point the comparator no longer automatically outputs the data signal since the amplitude of the data signal may no longer always be greater than the amplitude of the reference signal. The reference signal may decay to a point where the amplitude of the reference signal is similar to the average amplitude of the data signal and only portions of the data signal having amplitudes greater than the average amplitude will have amplitudes greater than the amplitude of the reference signal and will be output by the comparator .

The processor may be configured to output a high voltage at output and when not injecting current the processor may be configured to set output into a high impedance state where it has no impact on the reference level. Setting the output into a high impedance state mimics disconnecting the input of the processor from the receiver .

As previously indicated the comparator output is coupled to the processor input . If the comparator outputs the data signal or a version thereof the processor may be configured to determine whether the data signal output by the comparator contains data of interest. The processor may determine if the data signal output by the comparator contains data of interest by determining if the information received conforms to a predetermined format. For example each pulse in the data signal may have a particular amplitude width or the like. In some embodiments if the data signal output by the comparator and received by the processor only contains noise the processor may increase the reference signal so that the data signal received at the data input is not output by the comparator . By increasing the amplitude of the reference signal a higher amplitude data signal is required to cause the comparator to output the data signal.

As indicated above in the embodiment shown the duration of the signal output on output of the processor sets the quantity of charge delivered to capacitor . If the processor detects excessive noise in the signal from the output of the comparator the pulse durations are increased. Increases in pulse durations increase the value of the offset or signal at the reference node and increases the amplitude of the noise required to trigger the comparator output . The processor continuously samples input information while turning the output of the processor from the 5 V output state logic high to the high impedance state.

If the comparator output is quiet for too long the charge pulse duration is reduced to lower the comparator reference voltage offset and increase the sensitivity of the receiver .

Alternatively if the pulse width has not already been increased to the maximum value the processor increases the pulse width at step . As previously indicated increasing the pulse width raises the offset to the comparator which raises the required amplitude of the data signal needed to be output by the comparator . In some embodiments the processor may increase the pulse width by 10 microseconds. After the processor increases the pulse width the processor delays a predetermined amount of time before determining if the adjusted offset value is sufficient to quiet the noise on the output of the comparator block .

If the processor determines that the output received from the comparator does not contain noise block the processor determines whether the pulse width has already been reduced to a minimum value at block . The processor may be configured with a minimum limit that regulates the smallest pulse width that should be used. For example the processor may be configured to prohibit the pulse width from being lower than 70 microseconds. If the processor determines that the pulse width is currently set at the lowest allowed value such as 70 microseconds the processor may leave the pulse width unmodified and wait or delay a predetermined amount of time as previously described before checking for noise again block .

If on the other hand the processor determines that the current pulse width is not set at the minimum value the processor decreases the pulse width at block . The processor may be configured to decrease the pulse with by a predetermined amount such as 10 microseconds. After decreasing the pulse width the processor then delays a given amount of time block before rechecking the received signal for noise block .

If the processor however determines that the output received from the comparator does not contain noise or otherwise possibly contains data the processor may be configured to forward the received signal to other processing components or may perform signal processing itself. The received signal may be processed to determine whether an action such as unlocking the doors of a vehicle should be taken in light of the data or information present in the received signal.

