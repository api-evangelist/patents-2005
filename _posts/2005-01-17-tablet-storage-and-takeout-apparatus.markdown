---

title: Tablet storage and take-out apparatus
abstract: A tablet storing/retrieving device which stores a plurality of kinds of medicines, and delivers as many tablets of such descriptions as designated by prescription data into a vial () and retrieves it. An imaging device () is provided for photographing the interior of the vial before a cap is applied to the vial () after tablets are dispensed into the vial (). Accordingly, a quick and easy auditing process is possible without removing the cap of a retrieved vial.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08041102&OS=08041102&RS=08041102
owner: Yuyama Mfg. Co., Ltd.
number: 08041102
owner_city: Osaka
owner_country: JP
publication_date: 20050117
---
The present invention relates to a tablet storage and take out apparatus which stores various kinds of tablets and which fills a vial with tablets in accordance with prescription data so that the vial can be taken out.

As a conventional apparatus for filling a vial with tablets Japanese Patent Application Laid open No. H10 33636 discloses a drug filler which has double inner and outer drums whose outer surfaces are fitted with many tablet feeders guides tablets discharged from these tablet feeders inside the inner and outer drums introduces the tablets through a drop guide path to a hopper provided below the inner and outer drums and then fills the tablets into vials supplied from a vial supply part.

In the apparatus of JP H10 33636 in order to conduct an auditing process to determine whether the vial has been filled as prescribed it has been necessary to open the cap of the vial taken out to check inside resulting in poor working efficiency of the auditing process.

In view of the problem described above the present invention has been made and it is an object of the invention to provide a tablet storage and take out apparatus capable of quickly and easily performing the auditing work without opening the cap of the removed vial.

In a tablet storage and take out apparatus for storing plural kinds of tablets and filling a vial with a particular type and number of tablets in accordance with prescription data and taking out the vial. The apparatus comprising photographing means for photographing the interior of the vial before attaching the cap on the vial after filling the vial with the tablets.

Here the tablet storage and take out apparatus include one in which the vial is filled with tablets and automatically capped and one in which the vial is manually capped. The photographing means includes a digital camera and another one with which it is possible to photograph a state after filling the vial with tablets irrespective of a still image or a moving image.

The apparatus may further comprise a focus control sensor for irradiating the surface of the filled tablets in the vial and a focus control means for focus controlling the photographing means according to the detection value of the focus control sensor. The photographing data of the photographing means after focus controlling by the focus control means is transferred to a control section of the tablet storage and take out apparatus. Here the focus control sensor includes one which irradiates an object with a light to measure a distance to the object.

The apparatus may further comprise an initializing means for initializing the photographing means in accordance with a command from the control section.

The apparatus may further comprise a contrast control means for controlling the contrast of the photographing means in accordance with a command from the control section.

The focus control sensor may be one which irradiates multiple times the surface of the tablets in the vial and wherein the focus control means adopts as the detection value the mean value of the multiple detection values of the focus control sensor.

The apparatus may further comprise a supporting member for supporting the photographing means on the body of the tablet storage and take out apparatus. The supporting means is movable horizontally in front and rear and left and light directions and also movable vertically.

According to the present invention as the photographing means for photographing the interior of the vial before attaching the cap on the vial after filling the vial with the tablets is provided it is possible to quickly and easily conduct auditing work without opening the cap of the vial that has been taken out.

First a description will be given on the overall arrangement and construction of the tablet storage and take out apparatus . As shown in at the upper center of a main body as viewed from the front an operation display panel is provided which provides displays required for operating the tablet storage and take out apparatus . To the lower right of the operation display panel three vial take out ports and are provided. To the lower left thereof are provided auxiliary tablet supply parts under which an auxiliary cap storage part is provided. The auxiliary tablet supply parts store two different kinds of pyrazolone tablets respectively and supply tablets in accordance with prescription data. The auxiliary cap storage part randomly stores a large number of caps and permits them to be manually taken out when necessary. At the upper right side of the tablet storage and take out apparatus as viewed from the front is provided a door for replacing a vial . At the left side thereof is provided a door for replacing and refilling tablets. At the bottom thereof are also provided doors and for maintenance.

Inside the tablet storage and take out apparatus as shown in and there are provided a vial supply part a labeling part a tablet supply part a photographing part a cap supply part a capping part and a storage part . The vial supply part is provided on the right side of the main body as viewed from the front as shown in and stores a large number of vials by size and supplies one by one vials of a size suitable for receiving a prescribed number of tablets in accordance with prescription data. The labeling part is provided at the lower center of the main body as viewed from the front and puts a label with printed prescription information on a vial supplied from the vial supply part . The tablet supply part is provided on the left side of the main body and stores a large number of tablets non pyrazolone by type and supplies tablets in accordance with prescription data. The photographing part is provided as shown in on the center back side of the main body and photographs a vial from above for audit of tablets filled into the vial . The cap supply part is provided as shown in on the right side of the main body and behind the vial supply part and stores caps for plugging the vials and supplies the caps one by one. The capping part is provided on the center back side of the main body and plugs a vial which is filled with tablets with a cap supplied from the cap supply part . The storage part as shown in stores vials filled with tablets and plugged with a cap so that they can be taken out by an operator through take out ports and

The tablet storage and take out apparatus is further provided as shown in with a first transfer robot a second transfer robot a third transfer robot and a fourth transfer robot . The first transfer robot is provided below the vial supply part and can hold a vial supplied from the vial supply part transfer it leftward from the vial supply part to the labeling part in the horizontal direction of the main body and transfer it upward from the labeling part to the second transfer robot or the third transfer robot . The second transfer robot is provided inside the tablet supply part and can hold a vial delivered from the first transfer robot transfer it to supply ports of the tablet supply part and transfer it from the supply ports to the third transfer robot . The third transfer robot is provided above the first transfer robot in the main body and can deliver between the capping part and the fourth transfer robot a vial delivered from the first transfer robot or the second transfer robot . The fourth transfer robot is provided above the third transfer robot and can transfer a vial delivered from the third transfer robot upward to the storage part .

In the tablet storage and take out apparatus as shown in a control part is provided on the right side of the main body . The control part is as shown in composed of a personal computer PC in which apparatus control applications are installed and a device controller composed of a micro computer and the like. The PC is connected to a host computer installed in a hospital or a drug store and receives inputted data such as prescription data and the like. The PC is also connected to the operation display panel and outputs display information required for the operation of the tablet storage and take out apparatus and also receives operation information inputted through the touch panel on the operation display panel . Furthermore the PC is connected to a digital camera provided in the photographing part . The device controller is connected to sensors and driving devices of the vial supply part the labeling part the tablet supply part the cap supply part the capping part and the storage part so as to drive and control these parts. Moreover the device controller is connected to sensors and driving devices of the first transfer robot the second transfer robot the third transfer robot and the fourth transfer robot so as to drive and control these parts.

Hereinafter a detailed description will be given on the tablet supply part the second transfer robot the third transfer robot and the photographing part of the tablet storage and take out apparatus provided with the overall arrangement and construction as described above. The other parts are not related to the present invention and thus are omitted from the description.

To the upper end of the fixed half drum a half top panel is fixed which has a substantially fan like shape as shown in . On the half top panel an upper ring is fitted with three spacers in between as shown in . In a space facing the inner circumference of the upper ring is integrally provided a stay for fitting the second transfer robot . To the outer circumference of the upper ring a plurality of support rollers are fitted which are respectively placed in a rollable manner on the upper surface of an upper support member provided in the main body . The outer circumferential end surface of the upper ring is guided by guide rollers fitted to the upper support member . As shown in to the lower end of the fixed half drum is fixed a half ring below which a lower ring is fitted. A gear is formed on the outer circumferential end surface of the lower ring . The bottom surface of the lower ring is supported by a plurality of support rollers that are fitted to a lower support member provided in the main body . The outer circumferential end surface of the lower ring is guided by a plurality of guide rollers fitted to the lower support member .

To the upper end of the movable half drum a half top panel is provided which has a substantially fan like shape as shown in and to the lower end thereof a half ring is fixed as shown in . Spindles provided at the top and bottom ends of one circumferential end portion of the movable half drum are as shown in rotatably fitted to ends of links whose other ends are rotatably fitted with spindles in between to the upper ring and the lower ring respectively. This permits the movable half drum to be rotatable between a working position where the movable half drum faces the fixed half drum so as to be formed together into a cylinder and an open position as shown in where the movable half drum separates from the fixed half drum thereby opening the inside of the drum . The other circumferential end of the movable half drum is disengageably coupled to a circumferential end portion of the fixed half drum . The link moves when the fixed half drum is opened from the working position to the open position thus permitting this opening operation at a wide angle while preventing the tablet feeders of the movable half drum from interfering with the tablet feeders of the fixed half drum

In the drum driving part described above pressing the control lever toward the drum as shown in causes the slide shaft to move through the link whereby the driving pin is pressed. This causes the slide plate to slide to engage with the gear of the drum as shown in thereby permitting rotation of the drum by the drum rotation driving motor . On the other hand pulling back the control lever away from the drum causes the driving gear to separate from the gear of the drum thereby permitting manual rotation of the drum . At this point the detected piece of the slide plate is detected by the sensor whereby the rotation of the drum is prohibited.

As shown in the lower ring of the drum is provided with a contact piece which is brought into contact with an origin detection sensor limit switch fitted on the base of the main body . The contact piece is fitted with a detected piece which is detected by a first and a second rotation limit detection sensors optical sensors and fitted to both sides of the origin detection sensor limit switch . When the first rotation limit detection sensor first detects an origin the position thereof is defined as a left rotation limit. When the second rotation limit detection sensor first detects the origin the position thereof is defined as a right rotation limit. The drum stops when the origin detection sensor detects the origin after these rotation limits have been detected the drum stops. The rotation position of the drum from the origin is configured to be detected by a rotary encoder which rotates through a gear engaging with the gear of the lower ring of the drum . Upon detection of an origin of the drum by the origin detection sensor the rotation position detected by the rotary encoder is reset. Note that as shown in the upper ring of the drum is fitted with a projecting piece which comes into contact with a stopper provided on the upper support member . This can prevent the drum from rotating through 360 degrees or more when the drum is rotated manually.

The tablet storage case is fitted inside the drum as shown in . The tablet storage case has an upper end opening facing the guide passage of the motor base and a lower end opening . Below the lower end outlet of the tablet storage case a shutter is provided as shown in . The shutter is slidably fitted to a pair of guide bars projecting from the inner surface of the drum so that the shutter is movable between a closed position where the lower end opening of the tablet storage case is closed and an open position where the lower end opening is open. On the bottom surface of the shutter a projecting part is formed and the projecting part is pressed by a guide member of the second transfer robot . Below the shutter a return lever is provided which is fitted to a projecting piece fitted to the inner surface of the drum so as to be rotatable through a pin with one end in contact with the projecting part of the shutter and with the other end connected through a spring to the projecting piece . This permits the shutter to be opened with its projecting piece being pressed by the guide member of the second transfer robot and to be closed by the return lever . The return lever is fitted with a detected piece to be detected by a sensor that detects the start position of shutter opening operation performed by the second transfer robot and a detected piece to be detected by a sensor that detects the end position of shutter opening operation performed by the second transfer robot .

In the embodiment described above the drum does not rotate through 360 degrees. However providing the overrun mechanism to be described below permits the drum and the second transfer robot to rotate through 360 degrees or more a range of approximately 400 degrees . Thus even when for example the rotation range of the drum is limited during a replenishment operation performed with the tablet cassette due to the ability to rotate through 360 degrees or more with reference to the origin the second transfer robot can fill a target tablet case from any direction thus achieving efficient tablet supply operation.

In order to prevent the drum from stopping at the overrun detection sensors and when the drum is rotated manually if a spring which presses back the projection the detected piece or the guide arm at least toward the rotation limit detection sensors and is provided no error occurs at the time of origin acquisition.

The rotary block is composed of a frame extending along the axis of the drum . An upper end shaft of the frame is rotatably supported through a bearing by the upper ring of the drum and a lower end shaft thereof is supported through by a support base provided in the main body . The lower end shaft of the frame is coupled through a gear to a rotation driving motor fitted to the main body . This permits the frame to rotate around the axis of the drum . The frame has two guide rods arranged in parallel to the line connecting the upper and lower end shafts and with a gear belt arranged between the guide rods . The gear belt is stretched over an upper gear provided at the upper end portion of the frame and a lower gear provided at the lower end portion thereof. The upper gear is coupled to a lifting driving motor fitted to the frame . This permits the gear belt to run vertically. To the upper and lower ends of the frame an origin position detection sensor and an end point position detection sensor are fitted respectively. To the lower end of the frame a detected piece is fitted which is detected by a delivery position sensor for detecting delivery from the first transfer robot and a delivery position detection sensor for detecting delivery from the third transfer robot both provided in the main body .

The lifting block is as shown in through composed of a lifting base a lifting table a boom an arm base and two pairs of arms and . The lifting base is slidably fitted to the guide rod of the rotary block and firmly fixed to part of the gear belt described above so that the lifting base can be lifted by running of the gear belt . The gear belt is fitted with a balance weight so as to be balanced with the lifting block . The lifting table is fitted to the side surface of the lifting base . The boom is fitted below the lifting table with guides and in between so as to be slidable horizontally. To the top surface of the boom a rack is fitted which engages with a pinion of an extension contraction driving motor fitted to the lifting table . This permits the boom to extend and contract horizontally. From the boom a detected piece is projected which is detected by three position detection sensors and provided on the lifting table .

The arm base is as shown in an inverted V shape as viewed horizontally and is swingably fitted to the lower ends of the boom with a swing shaft in between. To the middle of the swing shaft a bevel gear is fitted which engages with a gear of an oscillation driving motor fitted to the boom . This permits the arm base to swing between a horizontal position and a tilt position. The arm base is fitted with a detected piece which is detected by two position detection sensors and provided on the boom . To the ends of the arm base guide bars are fitted in pairs at the upper and the lower positions respectively with a ball screw stretched in between.

The base ends of the two pairs of arms to are slidably joined to the guide bars and are also screwed with the ball screw . One end of the ball screw is coupled with a gear in between to an arm driving motor fitted to the arm base with a gear in between. This permits the distance between the arms and to become wider or narrower when the arm driving motor is driven thereby permitting holding and releasing a vial . Support rollers are fitted to the end and middle of each of the arms to . This permits as shown in the two pairs of arms to to support a vial at the eight points with the eight support rollers .

The arm base is fitted with a funnel shaped guide member above the two pairs of the arms to . The guide member has an outlet thereof facing the opening of a vial held by one pair of the arm members and has an inlet thereof so shaped as to be tilted through substantially 45 degrees when the arm base is at the horizontal position and to be oriented horizontally when the arm base is at a tilt position. To both sides of the guide member sensors and are fitted which detect the detected pieces and respectively of the return lever of the shutter provided in the tablet supply part .

The operation of the second transfer robot constructed as described above will be described with reference to the flowchart diagram of . First the second transfer robot moves to the delivery position of the first transfer robot in step S. If the second transfer robot detects a vial in step S it extends the boom in step S. If the second transfer robot is located at the holding position in step S it stops the extension of the boom in step S and then holds the vial in step S. The second transfer robot contracts the boom and returns to the origin position in step S. If the second transfer robot receives take out coordinates from the PC in step S the second transfer robot rotates the rotary block and lifts the lifting block in step S and tilts the arm base to the tilt position in step S. If the second transfer robot reaches take out coordinates in step S the second transfer robot extends the boom in step S. If the boom reaches the take out coordinates in step S it stands by for a predetermined filling period in step S whereby tablets are dispensed into the vial . Subsequently the second transfer robot detects in step S whether or not the tablets are of a type that tends to remain. Here tablets of a type that tends to remain refer to those which tend to adhere to the guide passage due to the viscosity of its surface that is variable depending on ambient temperature and humidity. If the tablets are of a type that tends to remain the second transfer robot performs an operation of dropping off the remaining tablets by extending and contracting the boom two or three times in step S. If the tablets are not of a type that tends to remain the second transfer robot judges in step S whether or not the filled amount of tablets is 65 or more. Here the filled amount of tablets of 65 or more refers to the filled amount of tablets accounts for 65 or more of the capacity of a vial . If the filled amount is 65 or more since the tablets are filled beyond the opening edge of the tilted vial and thus are spilled over the guide member there is a possibility that the tablets will spill out when the vial is delivered to the third transfer robot . Thus the second transfer robot performs an oscillating operation by tilting the arm base through minus 5 degrees in step S. This oscillating operation permits the tablets that have spilled over the guide member to be filled back into the vial . If the filled amount is less than 65 the second transfer robot locates the arm base at the horizontal position in step S moves to the delivery position of the third transfer robot in step S and upon confirmation of the delivery in step S ends its operation.

If the filled amount is 65 or more instead of the oscillating operation performed in step S the vial may be returned to the horizontal position so that a member with a flat tip is pressed against the opening of the vial to provide an even surface for tablet filling.

The tablet filling position control performed when a vial grasped by the arms to of the second transfer robot is to be filled with tablets supplied from the tablet feeder of the drum includes mutual control drum control and robot arm control. These controls will be described below with reference to the flowchart diagrams of .

In when take out coordinates are received in step S the current coordinates of the tablet supply part are detected in step S the current arm rotational coordinates of the second transfer robot are detected in step S and based on these coordinates the rotation directions of both the drum and the second transfer robot within the rotation limits are determined in step S. Then the coordinates of the intersection of the drum coordinates and the arm coordinates are estimated in step S the drum is rotated in step S and the second transfer robot is rotated in step S. If both reach the intersection coordinates in step S both rotations are stopped in step S.

In when take out coordinates are received in step S the current drum coordinates are detected in step S and based on the coordinates the rotation direction of the drum within the rotation limit is determined in step S. Then the drum is rotated in step S and if it is detected that the drum has reached the take out coordinates in step S the rotation of the drum is stopped in step S.

In when take out coordinates are received in step S the current arm rotation coordinates of the second transfer robot are detected in step S and based on the coordinates the rotation direction of the second transfer robot within the rotation limit is determined in step S. Then the second transfer robot is rotated in step S and if it is detected that the second transfer robot has reached the take out coordinates in step S the rotation of the second transfer robot is stopped in step S.

In the embodiment described above one drum is provided. Doubling this drum increases the number of cassettes to be fitted thereby permitting a large number of tablets to be stored and taken out.

The drug filling position control performed in the double drum in the modified embodiments of will be described below with reference to the flowchart diagram of . When take out coordinates are received in step S it is judged whether or not the take out coordinates apply to the outer drum in step S. If the take out coordinates apply not to the outer drum but to the inner drum the flow of any one of the mutual control the drum control and the robot arm control according to the aforementioned embodiment shown in is performed. If the take out coordinates apply to the outer drum the current coordinates of the outer drum are detected in step S the current coordinates of the inner drum are detected in step S the rotation directions of the inner drum and the outer drum within their rotation limits are determined based on these coordinates in step S and the intersection coordinates of the outer drum and the inner drum are estimated in step S. The inner drum and the outer drum rotate in step S and if the intersection coordinates are reached in step S the inner and outer drums and stop in step S.

The drug filling position control performed in the double drum by the auxiliary transfer robot in the modified embodiment 3 of will be described below with reference to the flowchart diagram of . Upon receiving take out coordinates of the outer drum in step S the auxiliary transfer robot stands by at the delivery position of the second transfer robot in step S. If the auxiliary transfer robot detects in step S that a vial held by the second transfer robot has arrived it extends the boom in step S and holds the vial in step S. The auxiliary transfer robot contracts the boom and swivels the swivel table toward the drum in step S. The auxiliary transfer robot lifts the lifting table in step S and tilts the arm base at the tilt position in step S. If the auxiliary transfer robot reaches the take out coordinates in step S it extends the boom in step S. If the boom reaches the take out position in step S it stands by for a predetermined filling time in step S. This permits tablets to be dispensed into the vial. Subsequently the auxiliary transfer robot detects in step S whether or not the tablets are of a type that tends to remain. If the tablets are of a type that tends to remain the auxiliary transfer robot performs an operation of dropping off the remaining tablets by extending and contracting the boom two or three times in step S. If the tablets are not of a type that tends to remain the auxiliary transfer robot judges in step S whether or not the filled amount of tablets is 65 or more. If the filled amount is 65 or more the auxiliary transfer robot performs an oscillating operation by tilting the arm base through minus 5 degrees in step S. If the filled amount is less than 65 the auxiliary transfer robot locates the arm base at the horizontal position in step S moves to the delivery position of the second transfer robot in step S and upon confirmation of the delivery in step S ends it operation.

The third transfer robot has as shown in a rotation shaft that is rotatably and vertically supported by a base of a fitting base fitted to the main body . To the ends of the arm base guide bars are fitted in pairs at the upper and the lower positions respectively with a ball screw stretched in between. One pair of arms have base ends thereof slidably joined to the guide bars and also screwed with the ball screw . One end of the ball screw is coupled with a gear in between to an arm driving motor fitted to the arm base . This permits the distance between the arms to become wider or narrower when the arm driving motor is driven thereby permitting holding and releasing of the vial . To the ends of the arms pads are fitted which press against the vial . The lower end of the rotation shaft is coupled with a gear in between to a rotation driving motor fitted to the fitting base . This permits the arm base to be rotatable about the rotation shaft .

The base is fitted with three position detection sensor and which are located around the rotation shaft for detecting the rotation position of the arm base . This permits the arm to be rotatably moved between a first delivery position for receiving the vial transferred by the first transfer robot or the second transfer robot a second delivery position for passing over the vial to the photographing part a third delivery position for passing over the vial to the capping part the same as the second deliver position in this embodiment and a fourth delivery position for passing over the vial to the fourth transfer robot . Moreover the rotation shaft is fitted with a vial detection sensor for detecting that the vial is at a position that permits the arms to hold the vial . Furthermore the arm base is fitted with a position detection sensor for detecting an open close position of the arms .

The operation performed by the third transfer robot with the construction described above will be described with reference to the flowchart diagram . The third transfer robot moves to an origin i.e. the first delivery position in step S and judges whether or not the vial is empty in step S. If the vial is not empty processing proceeds to step S. If the third transfer robot detects the vial at the first delivery position in this step it holds the vial in step S moves to the second delivery position in step S and transmits a photographing permission signal to the PC in step S. If the third transfer robot receives a photographing end signal from the PC in step S it moves to the third delivery position in step S delivers it to the capping part in step S releases the arms in step S and stands by at the current position in step S. If the third transfer robot receives a cap fitting signal from the device controller in step S it holds the vial in step S moves to the fourth delivery position in step S and upon confirmation of the delivery in step S ends its operation. If the vial is empty in step S the processing proceeds to step S. If the third transfer robot detects the vial at the first delivery position in this step it holds the vial in step S moves to the fourth delivery position in step S and upon confirmation of the delivery in step S ends its operation.

The photographing part is as shown in built by fitting a digital camera to the end of a support member fitted to the main body such that the lens of the digital camera faces downward. The digital camera is so configured as to be capable of photographing the interior of the vial already filled with tablets and delivered by the third transfer robot from above the vial . The support member is movable horizontally in the anteroposterior direction and the left right direction and also is liftable vertically with respect to the main body by a driving motor not shown which is driven and controlled by the device controller .

Photographing initialization operation performed by the device controller on the photographing part will be described referring to the flowchart diagram shown in . If the main body is turned ON in step S the PC is turned ON in step S whereby the device control application is activated in step S. The device controller transmits an initialization signal to each device in step S and obtains the initial origin of each device in step S. Subsequently the device controller turns ON the digital camera in response to directions from the software in step S and makes setting in steps S to i.e. initial zoom setting image size selection image quality setting flash setting and color balance respectively. The device controller ends its operation upon receiving an initialization end signal in step S.

Next photographing control operation will be described with reference to the flowchart diagram of . First when a photographing permission signal is received in step S and auto focus detection is performed to thereby obtain an average over a plurality of times in step S. Based on this detected value focus control is performed in step S and a photographing signal is transmitted in step S. An image file is accessed in step S data of the image file is transferred and temporarily saved in step S and a monitor is displayed on the operation display panel in step S. If manual check is turned ON in step S and image saving permission is operated in step S a photographing end signal is transmitted in step S thereby ending the operation. If the image saving permission is not operated in step S the temporarily saved data is cleared in step S and the processing returns to step S to repeat the steps described above.

As described above in the photographing part the interior of a vial filled with tablets can be photographed by the digital camera before the vial is plugged with the cap and the resulting image can be confirmed on the operation display panel thus permitting a quick and simple audit operation without opening the cap of the vial which has been taken out. Moreover if the image confirmed on the operation display panel during photographing is not clear photographing can be performed once again thus permitting a clear image to be obtained at any time.

At packing processing when the PC transmits a packing designation signal to the device controller the device controller controls the devices to perform packing. When the vial filled with tablets reaches the photographing position the device controller transmits a camera photographing signal to the PC. The PC causes the digital camera of the image taking part to perform camera photographing. When the digital camera transmits a camera image to the PC the PC saves the image and transmits a photographing completion signal to the device controller . The device controller causes the devices to perform the next packing operation.

At ending processing the PC causes the digital camera of the photographing part to perform camera closing processing. When the main body is turned OFF the device controller causes the digital camera of the photographing part to perform camera closing processing.

After confirmation of packing the operator specifies the prescription while viewing a dispensed vial photo list screen . shown in or when the bar code of the vial is read the PC opens on the operation display panel a photo display screen .. shown in displaying the interior photo of the vial .

The tablet take out control performed by this external tablet supply part will be described below with reference to the flowchart diagram of . If prescription data is received in step S it is judged in step S whether or not the data is designated for the external tablet supply part . If the data is not designated for the external tablet supply part normal tablet take out control is performed. If the data is designated for the external tablet supply part the external tablet supply part detects the tablet cassette corresponding to the prescription data in step S and discharges tablets in step S. Subsequently the vial size is selected in step S print data is created in step S and the print data is transmitted to the labeling part in step S. The vial is delivered to the labeling part by the first transfer robot in step S printing and labeling are performed by the labeling part in step S and the vial is delivered by the first transfer robot to the third transfer robot in step S. The vial is transferred and delivered to the fourth transfer robot by the third transfer robot in step S and the vial is transferred by the fourth transfer robot to the storage part in step S. Then if the operator takes out the vial through the take out ports in step S the operator is asked in step S whether or not the vial has been filled with tablets. If the vial has been filled the operator is asked in step S whether or not to omit photographing. If photographing is to be omitted the data stored in the storage part is cleared in step S. The operator confirms the interior of the vial with his or her naked eyes in step S and the cap is taken out from the external cap supply part for plugging the vial in step S.

If photographing is to be performed in step S a photographing button is pressed in step S and the vial is returned in step S. If the third transfer robot or the fourth transfer robot is occupied in step S interrupt processing is performed in step S. If they are unoccupied the vial is delivered by the fourth transfer robot to the third transfer robot and the vial is transferred by the third transfer robot to the photographing part in step S. If it is detected that the vial is located at the photographing position in step S and photographing is completed in step S the vial is delivered by the third transfer robot to the fourth transfer robot in step S and the vial is transferred by the fourth transfer robot to the storage part in step S. If the vial is taken out in step S processing returns to step S the operator confirms the vial with his or her naked eyes and the cap is taken out from an outer cap storage part for plugging the vial in step S.

Next a description will be given on the embodiment of display and operation performed on the operation display panel . When the power button of the main body is turned ON the PC and the device controller are turned ON and the device controller makes initial setting on each device and then transmits the position information of each device to the PC whereby initialization is completed and the PC turns into a standby state.

In the standby state the operation display panel opens the Main Menu screen . shown in . If the AUTOMATIC button the CURRENT DRUG TABLET button the CASSETTE CONTROL button the DISCONNECT COMMUNICATION button and the TIMER SETTING PROGRAM VERSION button are respectively pressed and OK is pressed the Automatic Dispensing screen . of the Drug Table List screen . of the Tablet Cassette Control screen . of the Host Disconnection screen . of and the Update Time Setting screen . of open respectively.

On the Automatic dispensing screen shown . of clicking the COMPLETED tab the FILL CASSETTE tab the TRANSACTION tab the HISTORY tab the TO BE FILLED tab the PHOTO tab and the MANUAL tab open the In process prescription list screen . of the Drug filling cassette designation screen . of the Processed prescription list screen . of the Filling history drug selection screen . of the Dispensing machine not yet transmitted prescription list screen . of the Dispensed vial photo list screen . of and the Manual dispensing cassette designation screen . of respectively.

On the In process prescription list screen . of a list of prescriptions under dispensing is displayed. When a vial with which filling has been completed is taken out through the take out port the Vial take out error confirmation screen .. of opens prompting confirmation of the prescription and contents of the vial taken out. Touching the photo area on this Vial take out error confirmation screen .. opens the Vial interior photo display screen .. of displaying the photo of the interior of the vial on an enlarged scale.

On the Drug filling cassette specification screen . of the tablet cassette for filling drug is specified. When the tablet cassette number is inputted and OK is pressed the New drug registration screen ..of opens if the tablet has not yet been registered for the tablet cassette concerned or the NDC code check screen ..of opens if the tablets have been already registered. Pressing the LIST opens the Cassette list screen .. of . Pressing the STOCKS button opens the Cassette by cassette tablet inventory list screen .. of .

On the New drug registration screen ..of the tablets to be registered for the specified tablet cassette and master slave cassette information are set. Tablets that are frequently dispensed in a large amount are filled using not one tablet cassette but a plurality of tablet cassettes. Here it is defined that a tablet cassette serving as a main cassette is a master cassette while a tablet cassette serving as a subordinate cassette is a slave cassette. Pressing the ENTER button registers the tablets for the specified tablet cassette and opens the NDC code check screen ..of . Pressing the DATA BASE button opens the Drug list display screen ... of whereby a list of the contents of NDC masters is displayed. Selecting the drug to be deleted and pressing the DELETE button on this Drug list display screen ... opens the NDC master drug delete screen .... of confirming if the drug selected on the list may be deleted from the NDC masters. Thus the selected drug is deleted if it is accepted.

On the NDC code check screen ..of it can be checked by reading the inputted tablet cassettes information and the bar code information printed on the drug to be filled if the drug to be filled is appropriate. Manually inputting the NDC code and pressing the ENTER button can achieve the same operation as is achieved when the bar code is used. If the check result is OK pressing OK opens the Tablet filling screen ... of . On this screen inputting the tablet filling information and then pressing OK opens the Filling confirmation screen .... of where it is checked if the inputted filling information is correct. If the check result is OK the RESTART button is to be pressed.

On the Cassette list screen .. of a list is displayed indicating tablet cassettes and corresponding drugs registered for these tablet cassettes. Selecting the tablet cassette and then pressing OK permits transfer of this information to the new Drug registration screen ..

On the Cassette by cassette tablet inventory list screen .. of a list is displayed indicating inventories of tablets registered for their corresponding tablet cassettes. To change the inventory selecting the corresponding tablet cassette and pressing the UPDATE button opens the Tablet inventory change screen ... of permitting the new number of tablets to be set.

On the processed prescription list screen . of a list of processed prescriptions is displayed. Selecting a prescription suffering from a filling failure or contamination and pressing REFILL VIAL permits providing a designation for dispensing the selected prescription again.

On the Filling history drug selection screen . of a list of tablets filled into the tablet cassettes is displayed. Selecting the tablets and pressing the SELECT button opens the Filling history display screen .. of displaying a list of filling history of the selected tablets. Pressing the SAVE button causes the filling history data to be written into the floppy disk and pressing the PRINT button causes the filling history to be printed out.

On the Dispensing machine not yet transmitted prescription list screen . of a list is displayed indicating data of prescriptions which were received from the host computer or manually inputted but have not yet been transmitted to the device controller. On this screen selecting the prescription and then pressing the DELETE button permits deletion of this prescription.

On the Dispensed vial photo list screen . of a list is displayed indicating prescriptions whose tablets in the vial have been photographed by the photographing part . Selecting the prescription and pressing the SHOW button opens the Photo display screen .. of displaying the photo of the interior of the vial corresponding to the selected prescription. By reading the bar code on the label of a vial taken out through the take out port the photo of the interior of this vial can be displayed on the Photo display screen .. of . Viewing these photos permits auditing of whether the tablets have been filled in accordance with the prescription and also whether any contamination is present therein.

On the Manually dispensing cassette designation screen . of if no prescription data is received from the host computer prescription data can be manually inputted to dispense tablets. Inputting the cassette number and pressing OK on this Manual dispensing cassette designation screen . opens the Manual dispensed tablet quantity specification screen .. of permitting specification of the quantity of tablets to be dispensed the type of vial and the presence or absence of a cap and then permitting transmission of this data. If the cassette number is unknown pressing the LIST button on the Manual dispensing cassette designation screen . of opens the cassette list screen .. of displaying a list of tablet cassettes and their corresponding registered drugs. Selecting the tablet cassette and pressing OK on this screen causes delivery of this information to the Manual dispensing cassette designation screen ..

On the Drug table list screen . of a list of drug masters currently registered can be displayed. Selecting the drug and pressing the DELETE button opens the Delete drug confirmation screen . of where it is confirmed if the selected tablets may be deleted from the drug masters and the selected tablets are deleted if it is accepted.

On the Tablet cassette control screen . of a tablet cassette can be moved to the regular position for tablet filling or for maintenance of the motor base. Inputting the cassette number and pressing the CENTER button and then the SEARCH button permits rotation of the drum to thereby automatically move the specified tablet cassette from the current position to the regular position located on the front of the main body. Pressing the button permits the drum to be moved to the left or to the right by one pitch.

On the Host disconnection screen . of it is specified what action is to be taken with the remaining processing on data in process when the application end processing is performed due to mechanical problems or the like occurring during the operation of this apparatus. To block the communication delete unprocessed Rx data and close the vial filling application the check item indicated above is to be selected and then OK is to be pressed. To block the communication return to the automatic dispensing screen . and complete all the un dispensed Rx data remaining in the queue the check item indicated below is to be selected and OK is to be pressed.

On the Date update time setting screen . of the time for executing date updating on backup data can be inputted and OK can be pressed to make this setting. Pressing the PROGRAM VESION button opens the Program version information display screen . of permitting display of the program version.

