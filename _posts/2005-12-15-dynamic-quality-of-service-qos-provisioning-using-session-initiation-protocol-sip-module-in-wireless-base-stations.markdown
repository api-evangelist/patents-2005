---

title: Dynamic quality of service (QOS) provisioning using session initiation protocol (SIP) module in wireless base stations
abstract: A method, apparatus and/or system for communicating in a wireless network may dynamically create and/or delete a medium access control (MAC) quality of service (QoS) connection in a wireless link between a base station and a mobile station. Each wireless base station in the network may include a packet classifier to quickly identify packets that may include session initiation protocol (SIP) messages and SIP logic to trigger the MAC QoS connection based on a received SIP message. Various other detailed embodiments and variants are also disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07787470&OS=07787470&RS=07787470
owner: Intel Corporation
number: 07787470
owner_city: Santa Clara
owner_country: US
publication_date: 20051215
---
As more and more types of different services are being made available for devices utilizing wireless networks it is becoming increasingly important to design a wireless medium s physical layer to effectively handle the requirements of traditionally wired data link layer traffic. Many new generation wireless systems are designed to dynamically create medium access control MAC level service flows or connections with associated quality of service QoS requirements.

However there is an ongoing need to provide suitable mechanisms for Internet Protocol IP based applications to trigger the creation of these MAC connections with the appropriate QoS level on demand.

While the following detailed description may describe example embodiments of the present invention in relation to broadband wireless networks such as WiMAX an acronym that stands for Worldwide Interoperability for Microwave Access or EVDO Evolution Data Only networks the inventive embodiments may be applicable to any type of wireless metropolitan area network WMAN where similar advantages may be obtained. Additionally the inventive embodiments are not limited to WMANs and may relate to if applicable wireless local area networks WLANs wireless personal area networks WPANs and or wireless wide area networks WWANs such a cellular networks and the like. Further while specific embodiments may be described in reference to wireless networks utilizing Orthogonal Frequency Division Multiplexing OFDM and or Orthogonal Frequency Division Multiple Access OFDMA modulation the embodiments of present invention are not limited thereto and for example can be implemented using other modulation and or coding schemes where suitably applicable.

The following inventive embodiments may be used in a variety of applications including transmitters and receivers of a radio system although the present invention is not limited in this respect. Radio systems specifically included within the scope of the present invention include but are not limited to network interface cards NICs network adaptors fixed user stations mobile stations base stations access points APs hybrid coordinators HCs gateways bridges hubs routers and other network peripherals. Further the radio systems within the scope of the invention may include cellular radiotelephone systems satellite systems personal communication systems PCS two way radio systems and two way pagers as well as computing devices including such radio systems such as personal computers PCs and related peripherals personal digital assistants PDAs personal computing accessories hand held communication devices and all existing and future arising systems which may be related in nature and to which the principles of the inventive embodiments could be suitably applied.

Turning to a wireless communication network according to various inventive embodiments may be any system capable of facilitating wireless access between and or including a core network and one or more user stations also referred to as subscriber stations . For example in one embodiment network may include a one or more base stations BS that facilitate wireless communication between core network and subscriber station . In example implementations the wireless communication may use protocols such as those contemplated by various 802.16 standards specified by the Institute of Electrical and Electronics Engineers IEEE for fixed and or mobile subscribers although the inventive embodiments are not limited in this respect.

In the example configuration of base stations serve as managing entities that control the wireless communication between subscriber stations or client stations and provider network .

In one example implementation base stations are connected to a core network e.g. an Internet Protocol IP network . When subscriber station is executing an application collectively or individually referred to as a client that may require a certain level of QoS to be supported in the wireless link a triggering mechanism may be used for the serving base station e.g. BS to dynamically create or adapt the wireless link between base station and subscriber station with the appropriate QoS requirements e.g. bandwidth priority etc. . Several potential triggering mechanisms could be used and may be broadly classified into two general categories i implicit triggers and ii explicit triggers.

With implicit triggers the base station and or a subscriber station may monitor application traffic to deduce when MAC connections with a required QoS should be created. However this may require the base station or subscriber station to thoroughly inspect every IP packet and or use sophisticated logic to determine when to create and or delete connections. This approach may pose significant overhead and may not particularly suitable for subscriber station implementations. However this approach does not require any changes to existing applications and or their behavior.

For implicit triggers there are essentially two ways of realizing the trigger. First an application programming interface API may be developed that allows IP based applications to explicitly request QoS connections of the wireless network. However this approach requires applications to be designed specifically to utilize the new API and thus existing applications may not be supported. Second a server in the network that processes application level control messages can signal to the base station to create MAC connections with appropriate QoS on demand. This approach does not require a new API to be developed in the subscriber station and if an existing protocol mechanism is used may be supported by existing and emerging applications.

One such existing protocol mechanism is called Session Initiation Protocol SIP and has been used in multi access wired networks where the end hosts are stationary and the SIP server is customized with specialized protocols for communication with the devices implementing QoS.

SIP is an application layer control protocol known for use in Internet telephony. SIP can be used to establish sessions for features such as audio videoconferencing interactive gaming and call forwarding to be deployed over IP networks. However SIP has not heretofore been used in wireless networks to trigger the dynamic generation of MAC level connections with associated QoS between a base station e.g. BSs and a mobile station e.g. client . Further due to the potential for mobile station to be handed off to a new base station e.g. BS by virtue of its movement in network the use of SIP must be adapted to be able to seamlessly handle potential changes in the base station that is serving client .

According to various embodiments network may include one or more Mobile IP MIP home agent HA dynamic host configuration protocol DHCP and or authentication authorization and accounting AAA servers although the inventive embodiments are not limited in this respect. Network may also include one or more domain SIP proxies which serve as the entry egress points of SIP signaling for a service provider s network domain. One or more SIP registrar and location servers may also be included to support the SIP signaling in network . While shown separately it should be recognized that is illustrated as a functional block diagram as respective servers could be co located and or combined as suitably desired. Furthermore the term server is not necessarily intended to designate a free standing device as several functionalities can be implemented as virtual servers within a single device.

In one embodiment base stations in network may implement the wireless physical layer PHY and MAC layer logic and control the QoS over the air interface. For example base station may route IP packets between the radio side e.g. to and from client and the IP core network .

Accordingly base stations may implement an AAA client a mobile MIP foreign agent FA function and or a DHCP relay as suitably desired. This is a standard architectural model of a WiMAX network although the inventive embodiments are not limited in this respect and detailed descriptions of these elements is therefore omitted.

According to one inventive embodiment each base station may also include packet classifier logic and SIP logic also referred to as a SIP module . Packet classifier may function to recognize packets passing through the base station which originate from or destined to any domain SIP proxy and route these packets to the SIP module in the base station. For example classifier may recognize the IP address es corresponding to domain SIP proxies in the source of destination fields of the IP packets and forward matching packets its own SIP module . Classifier may be any combination of circuitry processor and or software individually or collectively referred to as logic to perform this functionality. Further classification of IP packets is capability already available in certain base station architectures for example those implementing WiMAX or other newer generation wireless data technologies.

SIP module functions to process and or transmit SIP messages and to trigger the base station to dynamically create and delete MAC connections having a specified QoS over a wireless link based on application signaling and local policies for admission control. In one embodiment SIP module may be a limited stateless SIP message processing module which may be simpler and or more scalable than using a full SIP proxy. As used in this context stateless means each SIP message is treated independently of others.

Turning to a process for base station to handle packets and dynamically build a MAC connection with required QoS parameters is shown. In this example an important requirement for base station is to be able to recognize packets originating from or destined to a domain SIP proxy in for example network . Accordingly each base station may obtain the IP address protocol and port number used by domain SIP proxies in the network. In one embodiment this may be performed using a domain name server DNS or a configuration file system.

The use of DNS for discovering SIP proxies is described by the Internet Engineering Task Force IETF Request For Comments RFC 3261 June 2002 www.faqs.org rfcs rfc3261.html . While the inventive embodiments may adopt this approach the inventive embodiments are not limited in this manner. Packet classifier in base station may therefore detect IP packets from a client e.g. subscriber station to a domain SIP proxy simply by looking for a corresponding match in the destination IP address while IP packets in the reverse direction may be identified by looking for a match in the source IP address.

If no address corresponding to a known SIP proxy address is identified then the packet may be assumed not to include SIP messaging and may be processed accordingly without use of SIP module .

However if a packet having a destination and or source address corresponding to a known domain SIP proxy is found it may be forwarded to SIP module for processing. SIP module may then perform a variety of functions depending on the packet received and or the extent of processing capabilities included in SIP module . For example SIP module may recover the SIP message from the IP packet. Each SIP message typically fits in a single IP packet. However a message could also be carried in multiple IP packets. Furthermore a message could be carried using transmission control protocol TCP or user datagram protocol UDP and IP packets could be retransmitted by the end systems. Therefore recovering SIP message may involve processing which takes these various factors into account. Recovering a SIP message may include identifying each message and its retransmission properties if any and determining if applicable classification information for the IP layer flow i.e. including QoS requirements etc. which may be desired between the client station and a correspondent SIP enabled device.

SIP module may also buffer recovered SIP messages and if applicable trigger the base station to create modify and or delete the MAC connection via the wireless link which supports the QoS level needed for a requested IP layer flow. For example in one embodiment the classification information for IP layer flow recovered from the SIP message may be forwarded to a MAC connection manager located in base station although the inventive embodiments are not limited in this respect. This classification information may include for example an IP address port protocol and or other information derived from a recovered SIP message. MAC connection manager may maintain a connection state and corresponding classifiers such that appropriate actions can be taken upon receiving triggers initiated by SIP module thereby allowing the SIP module to be stateless.

SIP module may also forward a recovered SIP message to the subscriber station or domain SIP proxy e.g. to which the SIP message is destined.

In this manner application level SIP signaling can be used to dynamically trigger the creation modification and or deletion of MAC flows having the specified QoS attributes over a wireless link. Further by only inspecting the source and or destination IP address of a packet thorough inspection is not required. It should be recognized that is merely a simplified representation of actions and or modules for understanding the primary concepts of the inventive embodiments. Practical implementation might take into account various additional factors such as various potential error conditions and other processes as suitably desired.

Turning to a message sequencing process is shown for establishing a media flow between a mobile subscriber station running a SIP compatible application and a correspondent SIP client such as another mobile subscriber station or fixed station . Process may also include messaging that may occur between a base station having an associated SIP module which is serving subscriber station and a network domain SIP proxy server .

Process in is directed to initial establishment of an application service flow by subscriber station which is being serviced by base station . Handover to a different base station and or initiation of the service flow by another correspondent will be discussed subsequently.

Initially subscriber station running a SIP compatible application collectively referred to as a SIP client needs to know an address of a server in the network to send SIP signaling messages and register for the SIP messaging.

This address can be assigned in multiple ways for instance via manual configuration in subscriber station using DHCP or DNS. A SIP message sent to the address is received and processed by a domain SIP proxy. Thus the SIP client in subscriber station need not be aware of the mobility of the subscriber station but can send SIP messages to an invariant proxy address.

The SIP client may register by sending a REGISTER message not separately shown to the domain SIP proxy . This message may be detected by the serving base station and forwarded to domain SIP proxy which subsequently may forward the REGISTER message to a centralized SIP Registrar e.g. server . In one embodiment the REGISTER message may contain the home address of the subscriber station to be registered in the SIP registrar and location server.

Once registered a session initiation may follow general SIP procedures and messaging formats per RFC 3261 mentioned previously although the inventive embodiments are not limited in this manner. For example the SIP application in the subscriber station may send a SIP INVITE message including call identification From and To information to SIP domain proxy via base station .

The INVITE message which is detected by the SIP module in the serving base station may include a session descriptor which may be used by base station to determine if there are adequate resources available to support a data flow associated with the session request and or whether the configured policies allow the requested flow to be established. This action is generally shown in process as Admission Control . If Admission Control fails then the SIP module may send not shown an appropriately formatted SIP message to the subscriber station terminating the session establishment attempt. However if successfully admitted base station may reserve the resources required e.g. as identified by the session descriptor or classifiers from the SIP module for the admitted session.

In one embodiment the SIP module of base station may then forward the IP packet s containing the INVITE message to the domain SIP proxy server . Using established SIP protocols the base station proxy may send a Trying indication not shown to the subscriber station SIP client although the inventive embodiments are not limited in this respect.

The domain SIP proxy server may establish the proper local state and forward the INVITE towards a correspondent SIP client which may or may not occur via additional proxies not shown . Domain SIP proxy may also send a Trying indication not shown to the subscriber station SIP client if desired. This message would naturally be detected by the SIP module in base station but may be passed on without any action taken by the SIP module in base station .

Correspondent client may send a Ringing response not shown initially followed by an OK or Accepted message after the session has been accepted. The accept message may be forwarded by domain proxy and then forwarded by base station to the SIP client at subscriber station .

According to one embodiment once base station SIP module receives the OK or Accepted message from domain SIP proxy it triggers the creation and or activation of a MAC connection having the specified QoS parameters between base station and subscriber station client as discussed above and for which resources were reserved during Admission Control .

Depending on the nature of the MAC and or wireless network protocols setup of the MAC connection might involve the allocation of air link and local buffer resources establishment of classification rules for the ensuing data flow and the like. IP layer classifiers from the session descriptor obtained in the original INVITE or any modifications to the descriptor by the correspondent SIP client may be used to establish the appropriate QoS parameters.

Finally an ACK message is sent by the SIP client in subscriber station via the SIP module in base station to domain SIP proxy and forwarded ultimately to correspondent SIP client .

Once the MAC connection having the appropriate QoS parameters is established data may flow directly between subscriber station and correspondent client . In a preferred embodiment the various proxies e.g. domain SIP proxy are not in the data flow path. In one embodiment Mobile IP forwarding may be used to maintain the data flow as the subscriber station moves between base stations although the inventive embodiments are not limited in this respect.

Although the foregoing embodiment identified specific points where admission control and MAC connection establishment were performed the inventive embodiments do not exclude other possibilities and or timing.

Turning to a service flow process is shown in the general case where subscriber station moves to a base station different from the previously serving base station and keeps the session established above active.

A handover or handoff procedure may be performed to transfer the air link connection of subscriber station from old serving base station to new serving base station . This handover procedure may be initiated by subscriber station or a base station the specific steps of which will be based on the underlying radio access technology of the network. However typically a handover involves some interaction between old and new serving base stations . Thus at some point old serving base station will receive an indication of handover completion from new serving base station . At this point old serving base station may transfer the SIP session state information to new serving base station . In a broadband wireless network context for example using WiMAX protocols the session state could also be transferred with other context information related to MAC connections. In one embodiment the session state information may include call identification the identity of the domain SIP proxy and or other desired information for example information as detailed in RFC 3261. The SIP session is then associated with the underlying MAC connection which was handed over to new serving base station .

The foregoing procedure is completely transparent to SIP client and hence no modifications are necessary to the existing client software or API. Furthermore the above procedure is also transparent to the domain SIP proxy which can therefore be an off the shelf implementation. Consequently the only entities to be modified to utilize the inventive processes would be the base stations.

Finally an ACK message is sent from the correspondent client via the domain proxy station proxy which results in the SIP session being terminated. The associated call state may then be deleted at the various proxies and at subscriber station SIP client .

The above processes are directed to subscriber station initiated SIP sessions. However when a SIP session is to be initiated by a correspondent host and targeted at a mobile subscriber station some mechanism may be necessary to locate the subscriber station so that SIP messages may be passed to the subscriber station. Accordingly in one embodiment mobile IP procedures which are capabilities already existing in newer generation network architectures can be used to ensure that IP packets are received by the subscriber station regardless of its location and hence by the SIP module in the serving base station.

Referring to a base station for use in a wireless network may include a processing circuit including logic e.g. circuitry processor and software or combination thereof to include the SIP module for triggering the creation of MAC QoS connections as described in one or more of the processes above. In certain embodiments station may generally include a radio frequency RF interface coupled to processing circuit .

In one example embodiment RF interface may be any component or combination of components adapted to send and receive multi carrier modulated signals e.g. OFDM although the inventive embodiments are not limited to any specific over the air interface or modulation scheme. RF interface may include for example a receiver a transmitter and a frequency synthesizer . Interface may also include bias controls a crystal oscillator and or one or more antennas if desired. Furthermore RF interface may alternatively or additionally use external voltage controlled oscillators VCOs surface acoustic wave filters intermediate frequency IF filters and or radio frequency RF filters as desired. Various RF interface designs and their operation are known in the art and the description thereof is therefore omitted.

In some embodiments interface may be configured to be compatible with one or more of the IEEE 802.16 standards contemplated for broadband wireless networks although the embodiments are not limited in this respect.

Processing portion may communicate with RF interface to process receive transmit signals and may include by way of example only an analog to digital converter for digitizing received signals a digital to analog converter for converting digitized signals into analog signals for carrier modulation and if desired a baseband processor for physical PHY link layer processing of respective receive transmit signals. Processing portion may also include or be comprised of a processing circuit for medium access control MAC data link layer processing.

In certain embodiments of the present invention a processor may be included for the base station SIP module and or packet classifier as discussed above. Alternatively or in addition baseband processing circuit and or MAC circuit may share processing for certain of these functions or perform these processes independently. MAC PHY and or SIP message processing may also be integrated into a single circuit if desired. In other embodiments SIP module and or packet classifier may be external to PHY and MAC processing circuit .

Apparatus may be for example a base station a wireless router or NIC and or network adaptor for computing devices used for example as a wireless mesh point. Accordingly the previously described functions and or specific configurations of apparatus could be included arranged or omitted as suitably desired.

Embodiments of apparatus may be implemented using single input single output SISO architectures. However as shown in certain preferred implementations may use multiple input multiple output MIMO architectures having multiple antennas e.g. for transmission and or reception. Further embodiments of the invention may utilize multi carrier code division multiplexing MC CDMA multi carrier direct sequence code division multiplexing MC DS CDMA for OTA link access or any other existing or future arising modulation or multiplexing scheme compatible with the features of the inventive embodiments.

The components and features of station may be implemented using any combination of discrete circuitry application specific integrated circuits ASICs logic gates and or single chip architectures. Further the features of apparatus may be implemented using microcontrollers programmable logic arrays and or microprocessors or any combination of the foregoing where suitably appropriate collectively or individually referred to as logic or circuit .

It should be appreciated that the example station shown in the block diagram of represents only one functionally descriptive example of many potential implementations. Accordingly division omission or inclusion of block functions depicted in the accompanying figures does not infer that the hardware components circuits software and or elements for implementing these functions would be necessarily be divided omitted or included in embodiments of the present invention.

Unless contrary to physical possibility the inventors envision the methods described herein i may be performed in any sequence and or in any combination and ii the components of respective embodiments may be combined in any manner.

Although there have been described example embodiments of this novel invention many variations and modifications are possible without departing from the scope of the invention. Accordingly the inventive embodiments are not limited by the specific disclosure above but rather should be limited only by the scope of the appended claims and their legal equivalents.

