---

title: System and method for embedding check data in a check image
abstract: An image capture system for retaining check processing data comprises a camera operable to generate an electronic check image of a physical check, with the electronic check image operable to generate an image replacement document. The system includes a scanner operable to process the check image to generate check processing data and one or more processors operable to embed at least a portion of the check processing data in the electronic check image. The embedded check processing data is typically operable to be subsequently identified.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07548641&OS=07548641&RS=07548641
owner: VECTORsgi, Inc.
number: 07548641
owner_city: Addison
owner_country: US
publication_date: 20050425
---
This application is a continuation in part of and claims priority from U.S. application Ser. No. 11 060 655 filed Feb. 17 2005 now U.S. Pat. No. 7 447 347 the disclosure of which is incorporated by reference herein.

This invention relates to check processing and more specifically to a system and method for embedding check data in a check image.

Currently the bank of first deposit receives a physical check from the point of sale or point of purchase with the physical check including a Magnetic Ink Character Recognition MICR code. The bank processes these checks using any suitable technique and communicates the physical check to the recipient or payor bank for storage or forwarding to the appropriate account holder. For example the checks are typically sorted according to payor bank bundled together and physically shipped to the receiving bank. This physical handling of checks and other commercial paper transactions requires large amounts of labor costs and storage space and is subject to various threats. But the Check Clearing for the 21st Century Act commonly referred to as Check 21 provides a framework for recipient banks to accept electronic images of checks from other banks thereby reducing costs and physical threats and increasing efficiency. Each electronic image may then be printed to generate an image replacement document which is the legal equivalent of a physical check.

This disclosure provides system and method for embedding check data in a check image. In certain embodiments for example an image capture system for embedding check data in the check image comprises a camera operable to generate an electronic check image of a physical check with the electronic check image operable to generate an image replacement document. The image capture system further comprises a scanner operable to identify MICR code data from the physical check and one or more processors. The one or more processors are operable to embed the identified MICR code data in the electronic check image with the embedded MICR code data in the original format. The one or more processors may also embed truncated MICR code data in the electronic check image with the truncated MICR code data comprising a portion of the identified MICR code data.

In other alternative or complimentary embodiments software for retaining check processing data operable to generate an electronic check image of a physical check with the electronic check image operable to generate an image replacement document. The software is further operable to process the check image to generate check processing data and embed at least a portion of the check processing data in the electronic check image. The embedded check processing data is normally operable to be subsequently identified. The software may be further operable to compress the check processing data prior to embedding in the electronic check image.

The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. One or more embodiments of the invention may include several important technical advantages. Generally the disclosed structures and techniques may help a bank or other financial institution avoid delays of ground and air transportation lessen the chance of checks being lost and reduce or eliminate backlogs created by paper checks that cannot be physically transported due to weather or unforeseen events. Further the disclosure may also allow additional revenue in financial areas including correspondent bank processing lockbox processing corporate image deposits and a variety of branch based applications. For example the financial institution may inspect a received electronic check image and determine the one or more institutions that processed the image prior to itself. In another example the described embodiments may allow the financial institution to inspect and verify the various Image Quality Analysis IQA tests performed by such prior institutions. Moreover the embedding of this check processing data might allow the processing institution to provide verification to other financial institutions or governmental entities. Of course various embodiments of the invention may have none some or all of these advantages. Other features objects and advantages of the invention will be apparent from the description and drawings as well as from the claims.

Generally system includes at least a portion of any financial or banking system operable to process commercial paper transactions such as checking generate at least one electronic check image associated with an image replacement document IRD for at least a particular one of the transactions and identify or capture process communicate and or archive the MICR code in its original format as well as other check processing data in the check image. For example system may receive a physical check at a receiving entity capture an electronic image and MICR data often termed a MICR code or a MICR line from the check at a first financial institution and embed the captured MICR data in the original format as well as a truncated format. The embedded MICR code may then be archived in a repository or archive as in for subsequent viewing and processing in its original format. In certain embodiments the embedded MICR code in its original format may be communicated to a second financial institution .

It will be understood that each check s MICR data may be in any appropriate format including E13 B CMC 7 output from Optical Character Recognition OCR as well as others including other standards versions formats or ink types . MICR data typically includes a plurality of fields including routing transit field account field serial field and others. For example MICR data may include an auxiliary on us field a routing transit number an on us field a check number and an amount field. The auxiliary on us field is typically a check number used for commercial or corporate checks. The routing transit number typically indicates i the Federal Reserve District from which the transaction should be cleared ii the Federal Reserve Bank or Branch serving the area where the recipient financial institution is located and iii identifies the number assigned to the recipient financial institution by the American Bankers Association. The on us field or account number and serial number fields includes the check writer s account number at the payee financial institution and in the case of personal checks may include the check number. The amount field includes the MICR version of the transaction amount and is normally encoded by the financial institution of first deposit. It will be understood that the described fields are for example purposes only and one or more these fields may not be captured without departing from the scope of this disclosure. Typically the MICR data on each physical check is formatted according to one of a plurality of conventional or propriety standards that include for example dashes and spaces between some or all of the fields. In certain embodiments the original and embedded MICR data may differ slightly. For example the identified MICR code may comprise a plurality of fields with at least two of the fields separated by a dash and two of the fields even one of the two dashed fields separated by spaces while the embedded MICR code data includes the plurality of fields and the dash without the spaces.

Returning to the illustrated embodiment system is typically but not necessarily distributed into at least one receiving entity or point of sale and two or more financial institutions illustrated as first and second financial institutions and . Often system is electronically inter coupled thereby allowing efficient communications among the various components. But system may be a standalone processing environment such as system consisting of one financial institution with a plurality of offices interconnected via an intranet or any other suitable banking environment operable to dynamically retain MICR data in its original format without departing from the scope of this disclosure. The term dynamically as used herein generally means that certain processing is determined at least in part at run time based on one or more variables. The term automatically as used herein generally means that the appropriate processing is substantially performed by at least part of system . It should be understood that automatically further contemplates any suitable user or manager interaction with system without departing from the scope of this disclosure.

Receiving entity is any recipient or payee of the checking or other commercial paper transaction. Receiving entity may be a store an online vendor a telephony system or others. Receiving entity may also represent a teller at one of the financial institutions without departing from the scope of the disclosure. In the illustrated embodiment receiving entity includes a cash register for receiving and storing physical checks . Of course receiving entity may include other additional or alternative components for processing transactions. For example receiving entity may include a scanner and or a computer for processing an example check or electronic payment. While not illustrated the point of sale computer may also include or execute a portion or a copy of check processing engine illustrated in servers and for performing or implementing MICR capture or other check processing without departing from the scope of the disclosure. Receiving entity may also be operable to generate an Automated Clearing House ACH transaction based on the checking transaction for quickly processing the transaction with financial institutions . Regardless at any appropriate time and using any suitable automatic or manual technique receiving entity communicates the checks to a first financial institution for subsequent processing.

Financial institution is any agent third party resource clearing house branch processing center or central office of a financial institution. Indeed while illustrated as two banks first financial institution and second financial institution respectively any number of banks and or other institutions may be included in system without departing from the scope of this disclosure. Moreover two or more financial institutions may represent two or more routing transit numbers associated with one institution. In other words each financial institution may have the same similar or distinct components from illustrated financial institutions . Returning to the illustrated embodiment each financial institution includes server printer and scanner . Printer is any device operable to generate a hard copy from an electronic image. For example financial institution may include a plurality of checks or other commercial paper transactions in electronic form which may then printed as image replacement documents IRDs using printer . These IRDs may then be considered a legal copy of the associated check. Scanner is any suitable device operable to capture or otherwise obtain information from the received physical transactions such as the checks from receiving entity . For example scanner may be a scanner a sorter an image capture system as illustrated in or any other similar device or combination thereof including a digital camera for recording or generating electronic images of the checks and a MICR reader for capturing MICR data from the checks. The example digital camera may record an electronic check image of the front and back of each check in black and white grayscale and or color. As used herein electronic check image may be a digital image or file of the check including the front the back both or any suitable portion thereof. This check image may be in any suitable format including Moving Picture Experts Group MPEG Joint Photographic Experts Group JPEG Tag Image File Format TIFF including any suitable version thereof such as TIFF 6.0 CIM and others. For example the TIFF file may include one or more tagged fields that may be customized or used for MICR data . In certain embodiments electronic check image may be stored in a file that includes a data or image header a front image in black white a front image in grayscale a back image in black white and a back image in grayscale. The MICR reader may capture or generate MICR data in its original format which is a plurality of fields including routing transit field account field serial field and others separated by spaces and or dashes.

Banking server includes memory and processor and comprises an electronic computing device operable to receive transmit process and store data associated with system and more specifically associated financial institution . For example server may be any computer or processing device such as for example a blade server general purpose personal computer PC Macintosh workstation a mainframe or any other suitable device. Generally provides merely one example of computers that may be used with the disclosure. For example although illustrates one server that may be used with the disclosure system can be implemented using computers other than servers as well as a server pool. In other words the present disclosure contemplates computers other than general purpose computers as well as computers without conventional operating systems. As used in this document the term computer is intended to encompass a personal computer workstation network computer or any other suitable processing device. Server may be adapted to execute any operating system including Linux UNIX Windows Server or any other suitable operating system. According to one embodiment server may also include or be communicably coupled with a web server and or a secure financial server.

Memory may include any memory or database module and may take the form of volatile or non volatile memory including without limitation magnetic media optical media random access memory RAM read only memory ROM removable media or any other suitable local or remote memory component. In the illustrated embodiment memory includes electronic check images but memory may include any appropriate data such as an audit log account information administration profiling MICR data one or more hash values and others. For example memory may store electronic check images in an object oriented or a relational database typically including tables defined using SQL statements and interrelated using schemas. In this example one table may store electronic check images and another table may store associated MICR data in its original format and when appropriate the truncated format. In another example memory may store electronic check images with embedded MICR data and or other check processing data in text files extensible Markup Language XML documents Virtual Storage Access Method VSAM files TIFF files CIM files flat files Btrieve files comma separated value CSV files internal variables one or more libraries encrypted files and others.

Server also includes processor . Processor executes instructions and manipulates data to perform the operations of server such as for example a central processing unit CPU a blade an application specific integrated circuit ASIC or a field programmable gate array FPGA . Although illustrates a single processor in server multiple processors may be used according to particular needs and reference to processor is meant to include multiple processors where applicable. In the illustrated embodiment processor executes check processing engine which captures MICR data for its original format for electronic check images and subsequent processing.

Check processing engine is typically software and may be written or described in any appropriate computer language including for example C C Java J Visual Basic assembler Perl any suitable version of 4GL or any combination thereof. As used herein software generally includes any appropriate combination of software firmware hardware and or other logic. In certain embodiments check processing engine is any module sub module subroutine or process operable to among other things automatically capture and store MICR data in its original format. Check processing engine may be further or alternatively operable to identify or generate check processing data or associated information and to embed store or otherwise retain such data or information in the associated electronic check image . It will be understood that while check processing engine is illustrated in as a single multi tasked module the features and functionality performed by this engine may be performed by multiple modules such as in for example or an image generation module a check processing module and an administration module. Further while illustrated as internal to server one or more processes associated with check processing engine may be stored referenced accessed or executed remotely such through receiving entity . For example such distributed modules may be in communication with one another through XML transactions using Simple Object Access Protocol SOAP over HTTP. Moreover check processing engine may be a child or sub module of another software module not illustrated without departing from the scope of this disclosure.

In one embodiment check processing engine may include or be communicably coupled with an administrative workstation or graphical user interface GUI . For example the workstation may comprise a computer that includes an input device such as a keypad touch screen mouse or other device that can accept information and an output device that conveys information associated with the operation of server or receiving entity including digital data visual information or GUI . Both the input device and output device may include fixed or removable storage media such as a magnetic computer disk CD ROM or other suitable media to both receive input from and provide output to users through the display namely GUI .

GUI comprises a graphical user interface operable to allow the user of the workstation to interface with at least a portion of system for any suitable purpose. Generally GUI provides the user of the workstation with an efficient and user friendly presentation of data provided by or communicated within system . GUI may comprise a plurality of customizable frames or views having interactive fields pull down lists and buttons operated by the user. In one embodiment GUI presents reports that includes the various processed check information and associated buttons and receives commands from the user via one of the input devices. In an alternative embodiment GUI may be hidden or not implemented. Moreover it should be understood that the term graphical user interface may be used in the singular or in the plural to describe one or more graphical user interfaces and each of the displays of a particular graphical user interface. Therefore GUI contemplates any graphical user interface such as a generic web browser or touch screen that processes information in system and efficiently presents the results to the user. Server can accept data from the workstation via the web browser e.g. Microsoft Internet Explorer or Netscape Navigator and return the appropriate HTML or XML responses using network .

Server may also include interface for communicating with other computer systems or components such as other server or receiving entity over network in a client server or other distributed environment. In certain embodiments server receives electronic images of checks from internal or external senders through interface for storage in memory and or processing by processor . Generally interface comprises logic encoded in software and or hardware in a suitable combination and operable to communicate with network . More specifically interface may comprise software supporting one or more communications protocols associated with communications network or hardware operable to communicate physical signals.

Network facilitates wireless or wireline communication between computer servers and any other local or remote computer or component such as all or a portion of a bank posting system or other intermediate systems. Indeed while illustrated as two networks and respectively network may be a continuous network without departing from the scope of this disclosure so long as at least portion of network may facilitate communications between the requisite parties or components. In other words network encompasses any internal or external network networks sub network or combination thereof operable to facilitate communications between various computing components in system . Network may communicate for example Internet Protocol IP packets Frame Relay frames Asynchronous Transfer Mode ATM cells voice video data and other suitable information between network addresses. Network may include one or more local area networks LANs radio access networks RANs metropolitan area networks MANs wide area networks WANs all or a portion of the global computer network known as the Internet and or any other communication system or systems at one or more locations.

In one aspect of operation receiving entity receives a physical check from a buyer or other payer. After any suitable processing receiving entity communicates at least this check to first financial institution . For example receiving entity may collect checks throughout a day or week and communicate these gathered checks to first financial institution in a bundle. Once first financial institution receives some or all of the physical checks it generates an electronic check image for each check using for example scanner . Often concurrently first financial institution also captures MICR data from each check. At any suitable time first financial institution may perform IQA on the electronic check image . The particular tests run and the respective results may then be embedded in the check image or stored in temporary storage such as a register or software variable for subsequent storage in image . First financial institution may also sort the electronic images and MICR data according to recipient bank illustrated as second financial institution . In this way first financial institution may parse out or otherwise collect the electronic data for communication to the appropriate recipient financial institution . First financial institution typically using check processing engine then embeds the MICR data in the electronic check image using any suitable technique. For example check processing engine may add the original MICR data in its original format into the DocumentName field in a TIFF file or insert the data into another field and tag it appropriately. Continuing this example check processing engine may also insert the truncated version of the MICR data without the formatting or as a hash value into a similar field. If the IQA tests were performed and the associated information put into temporary storage the check processing engine may embed such information at this point. First financial institution then generates an addendum record and embeds or appends the record to the electronic check image . In certain embodiments check processing engine may merge the various check processing information into one data structure. This information may then be embedded in one tag or other data structure in check image . Moreover check processing engine may compress with a standard or proprietary technique or otherwise encode the data prior to embedding the data in check image .

First financial institution then sends the appropriate electronic check images to recipient financial institution for processing. As described above these electronic check images are each operable generate an IRD thereby reducing or eliminating the need for shipping the physical checks. First financial institution may create Electronic Check Presentment ECP data files ECP Image Files ECPi Image Cash Letters non ECP IRD Cash Letters and others as appropriate. These data files are typically formatted in compliance with exchange network specifications populated with image and IQA records if desired or suitable and routed to the appropriate exchange network as specified in the profile. For example first financial institution may communicate electronic check images to an office local to recipient financial institution . The local office may print a plurality of IRDs from the received electronic images and provide the IRDs to the recipient financial institution . Continuing the example the local office then forwards the electronic check images to the recipient financial institution at any later time. In another example server may communicate electronic check images to recipient financial institution via network . In this example the bundled check images may conform to the X9.37 standard which typically allows up to ninety nine addendum records. However obtained recipient financial institution is then operable to generate the IRD with the MICR code in the original format including spaces dashes and such. Recipient financial institution may also pull extract parse or otherwise view and process the embedded check processing data using for example check processing engine . For example financial institution may identify certain debits to be associated with a credit performs its own IQA test and embed such data into check image generate and embed a second addendum record or perform any other suitable processing.

Check data API may be a DLL an object a macro or other process operable to automatically or dynamically identify embed and or retrieve the information into electronic check image . For example check data API may include reference or otherwise implement some of the following example functionality methods or functions 

Archive is any intra bank inter bank regional or nationwide or substantially national electronic storage facility data processing center or archive that allows for one or a plurality of financial institutions as well as receiving entities to store MICR data in its original format or other check processing data for subsequent access or processing. For example archive may be a central database communicably coupled with points of sale and financial institutions . In another example archive may be a tape backup of captured MICR codes or check data. Regardless archive may include store all or part of or otherwise reference archived MICR data and or check processing data in any appropriate storage format. For example archive may store MICR data as one or more tables stored in a relational database described in terms of SQL statements or scripts. In this example embodiment each record may be associated with a particular truncated or hashed MICR code or line as the primary key with the MICR code in its original format as a related field. The primary key allows for quick access and location. In another embodiment the one or more MICR codes may be stored or defined in various data structures as text files XML documents VSAM files TIFF files CIM files flat files Btrieve files CSV files internal variables or one or more libraries. In short archive may comprise one table or file or a plurality of tables or files stored on one computer or across a plurality of computers in any appropriate format. Moreover archive may be physically or logically located at any appropriate location including in one of the financial institutions or off shore so long as it remains operable to store archived images and or MICR data associated with a plurality of transactions. In certain embodiments archive may be generic or standard repository. In these cases images including the embedded data may be stored in such an archive without necessitating a reconfiguration of the repository to accommodate the embedded data.

Method begins at step where first financial institution receives a physical check from receiving entity . Of course first financial institution a may also receive physical check from any other appropriate component or institution. Next first financial institution generates an electronic image based on received check such as for example using scanner at step . This electronic image may comprise four images including a front image in black white a front image in grayscale a back image in black white and a back image in grayscale. At step first financial institution captures or otherwise identifies MICR data for received check . For example first financial institution may include scanner with a digital camera operable to capture MICR data from physical check . Next check processing engine embeds the identified MICR data in electronic check image using the original format at step . As described above this format typically includes any dashes spaces or other spatial or character formatting that are physically printed or located on check . The original MICR data may be embedded in the image header in a constituent field of one of the constituent images or in any other appropriate logical location. At step check processing engine truncates the identified MICR data using any suitable technique. For example check processing engine may remove any dashes or spaces may hash the MICR code to conserve space or for security or may generate some other representation of the MICR data . In certain embodiments check processing engine then embeds the truncated version of MICR data in electronic check image as shown step . Next at step check processing engine archives the electronic check image which now includes MICR data . According to certain embodiments check processing engine may generate or store a local copy of electronic check image in memory . For example check processing engine may store the local copy in an audit record or log in memory . In another example check processing engine may communicate a copy of electronic check image to a data storage repository or archive . At step check processing engine communicates electronic check image and the associated MICR data to a recipient financial institution illustrated in also termed second financial institution

Once IQA has been sufficiently performed if appropriate then financial institution processes the check image using any suitable technique at step . For example financial institution may verify the validity of the received files. Upon successful completion of the validation process the cash letter data may be loaded into a database to preserve its original content. Then based on the type of cash letter the file or record is often routed to an existing ECP data system or processed through a virtual capture process simulating a reader sorter capture. Suspect images may be displayed to operators and bad missing images are flagged as reversals and if appropriate are returned to the prior financial institution based on the addendum records. When the IQA process is complete the valid images are typically loaded into the institution s archive such as archive using for example the institution s capture sequence numbers. Once the check image has been suitably processed then check processing engine generates an addendum record at step . At step check processing engine retrieves the stored IQA records if any and merges the gathered check processing information at step . In certain embodiments this check processing information may be compressed or otherwise encoded as indicated at step . This information is then stored referenced or otherwise embedded in any appropriate check image at step . At step check processing engine may communicate a copy of electronic check image to a data storage repository or archive . According to certain embodiments check processing engine may generate or store a local copy of electronic check image in memory . For example check processing engine may store the local copy in an audit record or log in memory . In other embodiments check processing engine may alternatively or in combination communicate check image with the embedded check processing information to the next recipient financial institution .

The preceding flowcharts and accompanying descriptions illustrate exemplary methods and . But system contemplates using any suitable technique for performing these and other tasks. Accordingly many of the steps in these flowcharts may take place simultaneously and or in different orders than as shown. Moreover system may use methods with additional steps fewer steps and or different steps so long as the methods remain appropriate. For example it will be understood that the truncation and the embedding of the truncated MICR data may not be performed in certain embodiments. In another example check processing engine may not merge or compress the check processing data but may instead embed each data item in a different tag or storage location in image .

Indeed although this disclosure has been described in terms of certain embodiments and generally associated techniques alterations and permutations of these embodiments and techniques will be apparent to those skilled in the art. For example the electronic check image may include both the MICR data in its original format as well as some or al of the disclosed check processing data. In another example the check processing engine may automatically present the check processing data to the user reviewing the particular check image through the GUI. In a further example the check processing engine may allow an administrator to develop a profile for recipients of the image file that dynamically determines the appropriate data to embed in the particular image. Accordingly the above description of example embodiments does not define or constrain this disclosure. Other changes substitutions and alterations are also possible without departing from the scope of this disclosure.

