---

title: Method, apparatus and program storage device for providing virtual disk service (VDS) hints based storage
abstract: A method, apparatus and program storage device for providing virtual disk service hints based storage. Virtual disk service hints are provided. The virtual disk service hints are analyzed to determine a configuration model to implement. The storage system is then configured according to the configuration model identified using the virtual disk service hint.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07406578&OS=07406578&RS=07406578
owner: Xiotech Corporation
number: 07406578
owner_city: Eden Prairie
owner_country: US
publication_date: 20050930
---
This disclosure relates in general to configuring storage systems and more particularly to a method apparatus and program storage device for providing virtual disk service hints based storage.

Managing storage complexity is a common problem for organizations of all sizes. Businesses have undergone dramatic increases in the amount of data that they manage and therefore require greater intelligence in storage resource provisioning and management. Storage administrators continue to examine ways to expand storage capacity and provide storage management using direct attached storage and networked storage solutions. However business managers require storage administrators to provide solutions that deliver lower costs and improved efficiency. Effective storage management is key to ensuring these solutions.

Managing networked storage particularly storage area networks SANs makes fundamentally different demands on the administrator than does managing local directly attached storage. Direct attached storage DAS causes management headaches because storage resources are tied to the servers and the distribution of those resources is difficult. Networked storage on the other hand consolidates storage resources which introduces a number of management issues around the area of shared storage including determining what storage devices are attached to the network access to devices and routing for fault tolerance.

Although high end single vendor storage management solutions for enterprise sized organizations have been on the market for some time increasingly sophisticated storage management tools that are designed to work with storage devices from multiple vendors have been lacking for the small and midsize business. The development of such tools can ease the complexity of storage management tasks for all businesses seeking to implement networked storage solutions.

The Microsoft Windows Server 2003 and Microsoft Windows Storage Server 2003 introduced two storage infrastructures services to allow storage administrators to manage complex storage configurations including multi vendor configurations more effectively thus helping to realize the business goal of highly available data at lower cost. In particular the Windows Virtual Disk service VDS is designed to address problems with disk management. VDS is a core service new to Windows Server 2003 and Windows Storage Server 2003. The VDS infrastructure is designed to provide storage administrators with a single user interface for managing multi vendor storage at the block level. VDS provides the infrastructure used to manage storage resources such as disks and volumes so that directly attached and networked storage resources can be carved up and made available for use. VDS allows an administrator in charge of different storage arrays to centrally pull in the management of these disparate arrays within a single Windows interface and allows for the scripting of storage management activities across heterogeneous storage platforms. With VDS disk and volume management can be centralized and scripted thus allowing those not skilled in the storage management software to still be able to perform storage tasks such as adding a new disk to the array.

The capabilities of hardware providers depend on the capabilities of the underlying storage hardware. Therefore the degree to which each manufacturer implements the VDS API can vary. For instance manufacturers can implement as many of the features that are defined in the VDS API as are necessary to optimize hardware configurations monitor and dynamically tune performance or automate fault management. However the configuration of storage attributes expected by applications from storage sub systems remains complex i.e. binding physical storage into virtual storage often requires detailed knowledge of the storage architecture in order to make the correct decisions initial creation of the storage and even more analysis and knowledge when attempting to correct performance or fault tolerance deficiencies. Without a common and simple means of presenting the correct requests to a storage array to accomplish this complex configuration most hardware providers will tend to support such a limited subset of capabilities that it becomes impossible to properly utilize the full functionality of specific storage arrays.

It can be seen then that there is a need for a method apparatus and program storage device for providing virtual disk service hints based storage.

To overcome the limitations described above and to overcome other limitations that will become apparent upon reading and understanding the present specification the present invention discloses a method apparatus and program storage device for providing virtual disk service hints based storage.

The present invention solves the above described problems by mapping hints provided by applications to predetermined storage configurations and implementing the storage attributes according to the storage configuration identified by the hint.

A system in accordance with the principles of an embodiment of the present invention includes a configuration selection device for receiving a hint regarding virtual disk service and a storage system coupled to the configuration selection device for providing storage according to a configuration model wherein the configuration selection device identifies a configuration model using the virtual disk service hint and configures the storage system according to the identified configuration model based upon the virtual disk service hint.

In another embodiment of the present invention a database for providing virtual disk service hints based storage is provided. The database includes a list of virtual disk service hints and a plurality of configuration steps at least one of the plurality of configuration steps being associated with a virtual disk service hint for providing operations for configuring a storage system according to a configuration model identified by a virtual disk service hint.

In another embodiment of the present invention a method for providing virtual disk service hints based storage is provided. The method includes receiving a virtual disk service hint identifying a configuration based upon a match of the received virtual disk service hint to available configuration models and configuring a storage system based on the identified configuration resulting from the received virtual disk service hint.

In another embodiment of the present invention a program storage device is provided. The program storage device includes program instructions executable by a processing device to perform operations for providing virtual disk service hints based storage the operations including receiving a virtual disk service hint identifying a configuration based upon a match of the received virtual disk service hint to available configuration models and configuring a storage system based on the identified configuration resulting from the received virtual disk service hint.

In another embodiment of the present invention another system for providing virtual disk service hints based storage is provided. This system includes means for receiving a hint regarding virtual disk service and means coupled to the means for receiving for providing storage according to a configuration model wherein the means for receiving identifies a configuration model using the virtual disk service hint and configures the storage system according to the identified configuration model based upon the virtual disk service hint.

In another embodiment of the present invention another database for providing virtual disk service hints based storage is provided. This database includes means for providing a list of virtual disk service hints and configuration means associated with a virtual disk service hint for providing operations for configuring a storage system according to a configuration model identified by a virtual disk service hint.

These and various other advantages and features of novelty which characterize the invention are pointed out with particularity in the claims annexed hereto and form a part hereof. However for a better understanding of the invention its advantages and the objects obtained by its use reference should be made to the drawings which form a further part hereof and to accompanying descriptive matter in which there are illustrated and described specific examples of an apparatus in accordance with the invention.

In the following description of the embodiments reference is made to the accompanying drawings that form a part hereof and in which is shown by way of illustration the specific embodiments in which the invention may be practiced. It is to be understood that other embodiments may be utilized because structural changes may be made without departing from the scope of the present invention.

The present invention provides a method apparatus and program storage device for providing virtual disk service hints based storage. Virtual disk service hints are provided. The virtual disk service hints are analyzed to determine a configuration model to implement. The storage system is then configured according to the configuration model identified using the virtual disk service hint.

The concept of virtual memory has traditionally been used to enable physical memory to be virtualized through the translation between physical addresses in physical memory and virtual addresses in virtual memory. Recently the concept of virtualization has been implemented in storage area networks through various mechanisms. Virtualization converts physical storage to virtual storage on a storage network. The hosts initiators see virtual disks as targets. The virtual disks represent available physical storage in a defined but somewhat flexible manner. Virtualization provides hosts with a representation of available physical storage that is not constrained by certain physical arrangements allocation of the storage.

One early technique Redundant Array of Independent Disks RAID provides some limited features of virtualization. Various RAID subtypes have been implemented. In RAID a virtual disk may correspond to two physical disks which both store the same data or otherwise support recovery of the same data thereby enabling redundancy to be supported within a storage area network. In RAID a single virtual disk is striped across multiple physical disks. Some other types of virtualization include concatenation sparing etc. Some aspects of virtualization have recently been achieved through implementing the virtualization function in various locations within the storage area network. Three such locations have gained some level of acceptance virtualization in the hosts e.g. virtualization in the disk arrays or storage arrays e.g. and virtualization in a storage appliance separate from the hosts and storage pool. Unfortunately each of these implementation schemes has undesirable performance limitations.

Virtualization in the storage array is one of the most common storage virtualization solutions in use today. Through this approach virtual volumes are created over the storage space of a specific storage subsystem e.g. disk array . Creating virtual volumes at the storage subsystem level provides host independence since virtualization of the storage pool is invisible to the hosts. In addition virtualization at the storage system level enables optimization of disk access and therefore high performance. However such a virtualization scheme typically will allow a uniform management structure only for a homogenous storage environment and even then only with limited flexibility. Further since virtualization is performed at the storage subsystem level the physical virtual limitations set at the storage subsystem level are imposed on all hosts in the storage area network. Moreover each storage subsystem or disk array is managed independently. Virtualization at the storage level therefore rarely allows a virtual volume to span over multiple storage subsystems e.g. disk arrays thus limiting the scalability of the storage based approach.

The software provider is a host based program that is supported by a kernel mode driver in the storage input output I O stack. The VDS software provider enables disk and volume management at the operating system level. VDS related functions are provided for the software provider . These are the Basic Disk Provider and the Dynamic Disk Provider . The Basic Disk Provider includes support for basic disk functionality such as partitions and volumes. The Dynamic Disk Provider adds dynamic disk functionality such as disk striping and spanning and fault tolerant functionality such as RAID and mirroring.

The VDS Hardware provider is supplied by a hardware vendor to provide RAID arrays management. Each hardware vendor may write a VDS hardware provider that translates the general purpose VDS APIs into specific instructions for their hardware. VDS simplifies storage management because storage applications no longer need to take into account the specific hardware being targeted. Thus different storage applications are not needed to manage each different storage device. Instead one compatible storage application may be used to manage any hardware that has a VDS hardware provider .

A collection of command line interface tools is provided as command line interfaces to provide an interface to VDS. The Diskpart command line tool enables SAN functionality such as the ability to specify parameters for LUNs and to mark LUNs as inactive from the command line. Diskraid is a command line tool that lets administrators perform LUN operations e.g. create delete from the command line. These tools interface directly with VDS as clients and extend the manageability of storage.

Storage management applications can use VDS methods to query and configure host based disks and RAID storage. Typical storage management applications use VDS to solve configuration management and monitoring problems. These applications range from dedicated storage management systems to applications that require better control over configuration or fault management.

Disk Management provides a tool for allowing a user to manage the disks. Depending on the underlying disk subsystem each disk can be a single physical hard disk sometimes called a spindle or it can be a group of hard drives bound together at the controller level and presented to the operating system as a single disk. This type of disk is often referred to as a virtual disk or logical unit number LUN and typically uses some form of hardware based RAID to ensure data availability if one of the disks fails.

A second VDS hint require fast recovery from crashing involves determining whether the volume is a LUN used by the server not a plex mirror i.e. a second copy for redundancy . If the volume is a LUN used by the server not a plex mirror i.e. a second copy for redundancy the RAID type of the virtual disk is changed to RAID . If the volume is a plex mirror i.e. a second copy for redundancy the configuration steps include finding a remote storage system creating a virtual disk on the remote storage system with the same capacity and same RAID type establishing a virtual link to the remote storage system and performing a copy and swap of the virtual disk with the virtual link .

A third VDS hint the volume is mostly for reads is associated with the configuration step of changing the RAID type of the virtual disk to RAID . A fourth VDS hint optimize the volume for sequential reads is associated with the configuration step of changing the RAID type of the virtual disk to RAID . A fifth VDS hint optimize the volume for sequential writes is associated with the configuration step of changing the RAID type of the virtual disk to RAID . A sixth VDS hint optimize the volume for large block sequential access is associated with the configuration step of changing the RAID array such that it is striped over fewer disks drives . However as mentioned above additional hints and configuration steps may be provided without departing from the scope of the present invention.

The foregoing description of the exemplary embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not with this detailed description but rather by the claims appended hereto.

