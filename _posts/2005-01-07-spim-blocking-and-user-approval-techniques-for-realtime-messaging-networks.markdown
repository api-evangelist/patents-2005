---

title: SpIM blocking and user approval techniques for real-time messaging networks
abstract: Techniques for processing instant messages (IM) received from entities destined for IM clients are provided. An IM module is used to receive the instant messages and process them. In one embodiment, the IM module may be used to determine if a message is spam (or spim) or not. The IM module receives an instant message for the IM client and determines if a challenge message should be sent to the sender of the IM. The challenge IM is an IM that is sent to the sender of the IM that necessitates a challenge. If a response to the IM challenge is received at the IM module, it is determined if the response satisfies an answer required by the challenge IM. If the response satisfies the answer, the IM received may be forwarded to the intended recipient IM client. Additionally, a method for processing buddy list events using an IM module is provided.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07899867&OS=07899867&RS=07899867
owner: FaceTime Communications, Inc,
number: 07899867
owner_city: Belmont
owner_country: US
publication_date: 20050107
---
This application is a continuation in part of U.S. application Ser. No. 10 212 129 entitled MANAGEMENT CAPABILITIES FOR REAL TIME MESSAGING NETWORKS filed on Jul. 31 2002 which is herein incorporated by reference in its entirety for all purposes.

This application claims priority from co pending U.S. Provisional Patent Application No. 60 606 284 filed Aug. 31 2004 entitled APPARATUS AND METHODS FOR PROCESSING INSTANT MESSAGES which is hereby incorporated by reference as if set forth in full in this document for all purposes.

The present invention generally relates to telecommunications and more specifically to a system and method for managing instant message communications.

With the advent of the Internet users have been provided with a faster electronic means of communicating with each other. For example instant messaging allows users to interact in real time communications through networks such as the Internet.

Unfortunately with the advent of new communication methods associated with the Internet spam has proliferated with the ease of use of these new methods of communication. Spam on IM networks is the unauthorized sending of messages to an instant message screen name. When a spam message is sent to an IM screen name an IM window is created on a user s screen as a pop up window. The pop up window typically includes the message from the spammer such as any objectionable content an advertisement etc. The pop up window cannot be avoided as it takes up visible and valuable screen real estate. A user typically has to respond to the pop up window by minimizing it closing it or responding to the spammer. Unlike email which allows a user to deal with the spam at another time the user is interrupted when IM spam is received. A popular new shorthand for IM spam is spIM or spim or SpIM etc. .

IM clients allow a user to block anyone not on their buddy list from contacting them. A buddy list may be any list of contacts. This effectively eliminates spam in that people not on the user s buddy list cannot contact the user. Blocking all users not on their buddy list however imposes a big limitation on an IM user. For example friends of the user cannot contact the user without first being on the user s buddy list. Additionally acquaintances or people that user may want to receive an IM from cannot IM with the user until the user puts them on his or her buddy list.

In one embodiment a method of processing instant messages IM received from entities destined for IM clients is provided. An IM module is used to receive the instant messages and process them. In one embodiment the IM module may be used to determine if a message is spam or not. The IM module receives an instant message for the IM client and determines if a challenge message should be sent to the sender of the IM. The challenge IM is an IM that is sent to the sender of the IM that necessitates or prompts or warrants etc. a challenge. A challenge may be a question or any other statement that requires a response to a challenge. If a response to the IM challenge is received at the IM module it is determined if the response satisfies an answer required by the challenge IM. If the response satisfies the answer the IM received may be forwarded to the IM client. If the response does not satisfy the answer it may be classified as spam and not forwarded to the IM client. Also if no response is received the IM may be considered spam and the IM not be forwarded to the user. Thus by declining a response to a challenge IM the incoming IM may be classified as spam.

In one embodiment a method for processing instant messages IMs from entities destined for IM clients using an IM module is provided. The method comprises receiving an IM destined for an IM client at the IM module determining if a challenge IM should be sent to a sender of the IM if a challenge IM should be sent sending a challenge IM to sender of the IM the challenge message requiring a response from the sender and if an IM response to the challenge IM is received at the IM module determining if the response satisfies an answer required by the challenge IM and forwarding the received IM to the IM client if the response satisfies the response required by the challenge IM.

In another embodiment a method for managing IMs from entities for one or more IM clients using an IM module is provided. The method comprises determining a contact list for the one or more IM clients the contact list including a list of identifiers receiving an IM destined for an IM client in the one or more IM clients at the IM module determining an identifier for the received IM determining a contact list for the IM client the contact list including one or more identifiers that may be associated with IMs determining whether the determined identifier matches an identifier in the one or more identifiers if the determined identifier does not match an identifier in the one or more identifiers sending a challenge IM to an entity that sent the IM the challenge message requiring a response from the entity and if the determined identifier does match an identifier in the one or more identifiers forwarding the received IM to the IM client.

In yet another embodiment a method for processing instant messages IMs from entities destined for IM clients using an IM module is provided. The method comprises receiving an IM destined for an IM client at the IM module determining if a challenge IM should be sent to a sender of the IM if a challenge IM should be sent sending a challenge IM to sender of the IM the challenge message requiring a response from the sender and if an IM response to the challenge IM is received at the IM module determining if the response satisfies an answer required by the challenge IM and forwarding the received IM to the IM client if the response satisfies the response required by the challenge IM.

A further understanding of the nature and advantages of the invention herein may be realized by reference of the remaining portions in the specifications and the attached drawings.

IM clients are used to send and receive instant message communications with other IM clients. IM clients may be installed on any computing device such as a personal computer PC pocket PC personal digital assistant PDA RIM blackberry device telephone cellular phone pager etc.

In one embodiment IM clients may send IM communications that include textual messages. Also IM communications may be sent that signal configuration and or control information or indicate actions to be taken by an IM client . For example IM communications include on line and off line indications for users alerts communications for sending files voice video etc. For purposes herein IM communications include any communications made for the purpose of instant messaging.

In one embodiment IM clients are IM clients of any network implementation. For example the network implementations may include MSN AIM Yahoo ICQ SMS IBM Lotus Sametime Microsoft Exchange 2000 Microsoft RTC Reuters Messaging Bloomberg and the like. In one embodiment IM clients of a particular network implementation communicate with each other through an IM network for the network implementation. An IM network is any network that is configured to allow instant messaging for a particular network implementation.

Network is any network that can support instant messaging. For example network includes an enterprise local area network an extranet etc. In one embodiment network forms an enterprise network that is defined by firewall . In this embodiment any devices behind firewall are considered part of the enterprise network and other devices outside of firewall are considered to be outside of the enterprise network. Accordingly IM clients and IM module are considered part of the enterprise network. Although firewall is shown it will be understood that firewall may not be included in system .

Network is any network that is configured to support instant messaging and other communications. In one embodiment network is a public IM network for a particular network implementation e.g. AIM MSN Yahoo . For discussion purposes network includes any IM network located outside of firewall . For example network may be a public IM network AIM MSN Yahoo running on top of the Internet or in some cases a proprietary IM network running over an extranet e.g. a VPN built on top of the Internet . Network thus can include an AOL commercial IM network an MSN commercial IM network a Yahoo commercial IM network etc.

IM clients are connected to network . IM clients may include similar characteristics as described with regard to IM clients . However in relation to firewall IM clients are located outside of network . While IM clients may be located on their own enterprise network for discussion purposes IM clients are considered public IM clients that may communicate with IM clients .

In one embodiment instant message IM module is configured to receive and forward instant message communications. The functionality of embodiments of IM module and other devices described may be implemented by software hardware or any combination thereof. In one embodiment IM module is a computing device such as a server PC workstation network computer mainframe and the like. In another embodiment IM module is a software module or plug in.

In one embodiment IM module may receive and forward instant message communications using different models. For example a proxy model a server model an event model or any combination thereof may be used and will be described in more detail below. Although only these models are described it will be understood that a person skilled in the art will appreciate other models that may be used to receive and forward messages at IM module .

IM module receives instant message communications associated with IM clients of various network implementations. Thus no matter what the network implementation of each IM client IM module can receive and process instant message communications sent for or from IM clients .

Once IM module receives instant message communications from IM clients IM module is configured to determine a policy that is applicable for that instant message communication. The policies include actions that IM module may take based on the instant message communication. After determining an applicable policy IM module performs the action associated with the policy for the instant message communication. Examples of actions that may be taken include recording the instant message communication modifying the instant message communication blocking the instant message communication forwarding the instant message communication. Additional actions will be described below and it will be understood that the actions are not limited to these actions and a person skilled in the art will appreciate other actions that may be taken.

Transceiver module is configured to receive and transmit hence the name transceiver denoting the combination of transmitter and receiver instant message communications from IM clients and IM clients . In one embodiment transceiver module includes an inbound transceiver module and an outbound transceiver module . The inbound transceiver module handles instant messaging communications on behalf of IM clients and outbound transceiver module handles outbound instant message communications on behalf of IM clients . For example inbound transceiver module receives instant message communications from IM clients or sends IM communications to IM clients . Also outbound transceiver module receives IM communications from IM clients or sends an IM communications to IM clients .

In one embodiment transceiver module receives instant message communications through different models such as the proxy model server model and event model. Although only the above models are described below a person skilled in the art will appreciate other models that may be used to receive messages at IM module .

When transceiver module receives an instant message communication transceiver module sends the instant message communication to filter module . Filter module is configured to then filter the instant message communication based on its network implementation. In one embodiment filter module includes one or more filters for the various network implementations. For example an AOL filter an MSN filter a Yahoo filter and an enterprise filter may be included in filter module . Although only these filters are shown in it will be understood that other filters may be included in filter module . Each filter in filter module filters instant message communications of a corresponding network implementation. Thus AOL filter filters instant message communications of an AOL network implementation MSN filter filters instant communications of a MSN network implementation and so on.

In filtering the messages filter module converts an instant message communication received in the network implementation into an IM module format readable by policy module . For example the instant message communications of different network implementations include different protocols. Filter module filters the network implementation specific protocols for the IM communications and converts the IM communications to the IM module format. In one embodiment the IM module format is a generic format. For example the network implementation protocols may be removed in the generic format. Accordingly an AOL instant message communication that is filtered by AOL filter will be filtered into the IM module format an MSN instant message communication will be filtered by MSN filter into the IM module format and so on.

Policy module accesses a number of policies that include actions for instant message communications. In one embodiment a policy database stores the policies. As shown policy database is located in policy module however it will be understood that policy database may be located anywhere in IM module or be separate from IM module .

The policies in policy database include actions that can be taken by instant message module . The policies may be applied to a certain instant message communication or multiple IM communications. Policy module determines from characteristics related to the instant message communication whether any policies in policy database apply to the IM communication. For example policy module may be configured to apply a disclaimer policy to all instant message communications that are received. Thus when an instant message communication for a certain user is received policy module determines that the disclaimer policy applies to the instant message communication. In another example the disclaimer policy may be applicable to IM communications for a user or a group of users in which case policy module will determine that the disclaimer policy applies to IM communications for the user or a group of users when received. In another example file transfers from IM clients are scanned by a virus checking program while file transfers among IM clients may not be scanned for viruses. In another example certain groups of users are restricted from performing file transfers. In another example certain IM content is detected causing automatic prohibition of that message s transmission and or an alert via IM email etc. sent to an administrator.

Once a policy is determined by policy module action module is configured to perform the action corresponding to the determined policy. For example action module may add a disclaimer to the instant message. Additionally action module may take one or more action s including but not limited to storing the instant message modifying the instant message blocking the instant message and forwarding the instant message etc. Once the action is taken the instant message communication is sent back to transceiver module which may send the instant message to the applicable IM client assuming that the IM message was not blocked by action module . If the message is blocked IM module will not forward the instant message communication.

A database may be used to store information usable for instant message module . Database may be included in instant message module or be separate from instant message module . In one embodiment database includes one or more information items including but not limited to client identifications for IM clients mapping information for IM clients and policies that may be implemented by policy module . This information is used by modules in IM module for any purpose.

As mentioned above IM module may be implemented in a proxy server model a server model an event model or any combination thereof. In the proxy server model IM module is situated in network and acts as a proxy server between IM clients and network . IM module supports any kind of enterprise proxy protocols such as SOCKS HTTP HTTPS.

In the proxy server model IM module intercepts IM communications. In one example IM clients connect to IM module by specifying IM module s host and port in the proxy settings of IM clients . IM module then connects to network on behalf of IM clients . IM module then connects to other IM clients e.g. other IM clients and or network in order to reach IM clients for an IM client .

Referring to in the proxy server model a request is received by IM module . IM module thus intercepts and processes the received IM communications and then sends the response to network or network via SOCKS or HTTP or HTTPS if necessary or directly to network or network .

In the server model IM module does not appear as a proxy for IM clients . Instead IM clients connect to IM module in a client to server fashion. For example IM clients may connect using a protocol that is specially defined for use between the given IM client and IM module .

In the event model IM module interacts with another IM server such as an enterprise IM server that is deployed on network . The enterprise IM server is responsible for sending events to IM module . The events indicate that something related to instant messaging has taken place in the enterprise IM server e.g. an IM client signed on off an IM client sent a text message to another IM client an IM client has joined left a chat room the presence status of an IM client has changed or the geographical location of an IM client has changed . Once receiving the event IM module may access the enterprise IM server through an interface typically an application programmer s interface or API for short that allows IM module to gain control of enterprise IM server functions. IM module thus receives events encapsulating various details concerning instant message communications. If IM module determines an action should be taken IM module can take the action by controlling the IM server through the API.

For example an IM communication may be sent by the enterprise IM client to the enterprise IM server. Upon receiving the IM communication the enterprise IM server sends the corresponding event to IM module . IM module intercepts the event which includes the IM communication and may then process the intercepted IM communication according to any applicable policies.

As shown includes an enterprise IM server an event adapter and an event listener . Enterprise IM server handles IM communications for enterprise clients . Enterprise IM server also includes an API that allows IM module to access functions and controls of enterprise IM server .

When enterprise IM server receives an IM communication enterprise IM server sends an indication through event adapter to indicate that an event has occurred. Event listener receives the indication and alerts IM module of the event. IM module then connects to enterprise IM server through API to intercept and receive the IM communication. IM module then can process the IM communication as described above.

IM module may also be configured in the proxy server model or server model for public IM clients . Public IM clients connect to IM module through methods described above which allows IM module to intercept IM communications to and from IM clients . IM module also forwards the IM communications to and from IM clients and connects to network on behalf of IM clients .

In step IM module filters the IM communication in the network implementation into an IM module format. As mentioned above the IM module format may be a generic format. In one embodiment protocols that are associated with each of the network implementations are filtered from the IM communications. For example AOL IM communications are filtered through AOL filter MSN IM communications are filtered through MSN filter and so on.

In step IM module determines a policy from a group of policies that is applicable for the IM communication in the IM module format. In one embodiment policies are stored in policy database and appropriate policies are retrieved based on characteristics of the IM communication. Also IM module may retrieve multiple policies for the IM communication.

Once one or more policies are determined to be applicable to the IM communication in step IM module performs an action associated with the applicable policy for the IM communication. As discussed above various actions such as recording portions of the IM communication modifying the IM communication blocking the IM communication and forwarding the IM communication may be taken by IM module .

Embodiments of actions and implementations for IM module will now be described. In one embodiment IM module may be used as an auditor for an enterprise. Some enterprises may be subjected to regulation and auditing of all conversations among employees and between employees and outsiders. Thus even instant message communications by employees are recorded.

IM module may be configured to manage instant message communications of enterprise employees using IM clients and perform the action of recording the content of all IM communications. Accordingly the enterprise will be in compliance with regulations for recordings of all conversations with regard to instant messages.

IM module may also be configured to store and reproduce any or all IM communications involving employees using IM clients in their entirety. Additionally reports showing the IM communications and when they occurred may also be produced.

Also IM module may be used to produce comprehensive reports on employee s usage of IM clients . In this case IM module will perform the action of storing all IM communications from IM clients of different network implementations. Thus no matter what network implementation of an IM client is used IM module is able to record the employee s IM usage. The enterprise can thus monitor employee IM usage and its affect on employee productivity.

In another embodiment IM module may be used in securing an enterprise network. For example IM module may monitor IM communications to and from IM clients and perform the action of a virus check or a check for other potential hazards associated with IM communications.

Also IM module may monitor IM communications for spam. In this case IM module processes IM communications to determine whether some IM communications are spam. If spam is detected the IM communications are then flagged blocked or sent to a spam message folder. Other actions can be taken as well e.g. alerting the administrator.

Moreover IM module may provide access control for network . For example IM module may impose control of principal communication features such as sign on privileges internal enterprise routing or external routing alerts file transfers chatting and news stock tickers for each user using IM clients . In one example IM module may receive an IM communication from an IM client with a request for logging onto an IM network. IM module will then determine the sign on privileges for the user and determine whether the user should be allowed to sign onto the IM network. IM module will then perform the action of allowing the user to sign on or blocking the user from signing on.

In another embodiment IM module may be used to map network identities also known as buddy names or screen names to corporate identities of the users of IM clients . A user may have a corporate identity that is used for other enterprise applications such as email. In this example an instant message communication may be received for a user that is associated with the user s network identity. IM module will include a policy that will map the IM network identity to the corporate identity for the user. Thus corporate identities may be mapped to identities used in commercial IM networks allowing IT administrators to have a consistent view of how employees use the company s LAN consistent in that a view includes all of a user s IM IDs associated with their assigned and recognized corporate ID . Otherwise the administrator would have to track each network identity on public IM networks.

Also the corporate identity may be mapped to a group of users. Thus one identity may be mapped to multiple users identities. IM module may be used as a foundational platform for building other applications. For example an automated call distribution ACD contact center application server may be implemented in an enterprise network to receive IM communications for the enterprise through a universal representative identification. Because IM module can map network identifications to corporate identifications the universal representative identification associated with the ACD server may be assigned to receive IM communications as a concentrator for the entire organization. This universal representative or universal agent identification may be thought of as a 1 800 telephone number that outside users can use. Thus outside users contact the ACD server through the universal agent identification but internally agents are selected according to their corporate identifications and business policies.

Thus a help desk identity may be established where an IM communication is sent to the help desk identity and then IM module maps the help desk identity to multiple users that are working on the help desk and sends the instant message communication to all the help desk users of IM clients . The users may then choose to help the patrons to answer the question that was sent to the help desk identity.

In another variation IM module may use sequential routing for the group of enterprise users in this example help desk agents where IM module contacts each user of a group in a pre determined order until a user responds. IM module then connects the responding user to the customer and they can exchange instant messages. Also a broadcast routing may be implemented by IM module where all members of a group are contacted at once and the user responds as soon as selected and connected for communicating with a customer.

IM message module then receives the IM communication through the universal identification and can map the universal identification to another user using any IM client . The mapping for the universal identification is implemented according to a policy and an action maps the universal identification to other identifications. In one example depending on who is assigned to a help desk IM module can map the IM communication for the universal representative identification to specific identifications for the help desk. Additionally polices may be set up to map the universal agent identification to specific users depending on the hours of the day and when the users both are scheduled to work.

In another embodiment IM module performs the action of managing presence for users. IM module receives presence and availability information in some cases location information as well that is associated with the user s network identity in IM communications. An identity with presence availability and other auxiliary information associated with it may be referred to as a presentity i.e. identity with presence . The presentity may become a group presentity when multiple users identities with presence information are mapped to a virtual group identity. In one embodiment the presence status of an IM client may indicate that the IM client is on line off line busy unavailable on a mobile device or other status related information. Moreover the presence status may include geographic location information.

IM module may receive IM communications indicating the presence status of IM clients on network IM clients on network and IM clients on network . IM module may provide and utilize an API to manage individual presentities and group presentities. The presence API makes generic the presence information obtained in received IM communications containing the presence status of individual users and groups of users. IM module may also encapsulate the management of individual and group presentities for various commercial and enterprise networks in a dedicated component such as an IM Gateway or an IM Bridge .

Policies may be used by IM module where presentities i.e. individual and groups of IM clients on network IM clients on network and IM clients on network are managed. For example IM module may receive an IM communication indicating a change in the presence status of IM client such as going from on line status to off line status. Depending on a policy applicable for that IM client IM module takes an action. In one example an action may include connecting a first IM client trying to communicate with a second IM client with a different user of a third IM client because the second IM client presence status indicates the user is off line while the third IM client presence status indicates the user is on line i.e. the third user is present and available . For the ACD scenario described above this could be interpreted as connecting the outside user to an available internal agent such as the assistant of the agent who became unavailable. Another type of action based on a change in the presence status of a single IM client may include changing the status of a group presentity. For example identities of IM clients may be mapped to a help desk identity which is a group of agents . When IM communications indicating the status change of one or more of the presentities of IM clients are received IM module may take an action for the help desk group presentity based on a policy. If the presence status for an IM client is on line then IM module may make the presence status of the help desk presentity to be on line. Accordingly presence may be mapped between an identity for an IM client and other identities. Moreover presence may be mapped across multiple IM clients of different network implementations.

A session is defined as the information associated with a client connected to a server. For example a telephone connected to a call center is in session until one side or the other hangs up. When two clients engage in a live conversation voice text etc. this is called an interaction. In the case of instant messaging a session starts when the client signs on. During that time the client may engage in interactions with other clients that is conversations containing one or more messages exchanged among the parties receive alerts change availability status and so on. The session ends when the client signs off. Individual clients are presentities and groups of clients are group presentities.

Individual and group identities can possess profiles consisting of other attributes besides presence information. These profile attributes can be manipulated and policies applied to them as part of applications built on top of IM module as a foundational platform. In some applications it may be advantageous to specify a type of a client by a designated attribute its values denoting an IM client an email client and so on . Since IM module treats presentities sessions and interactions generically possibly accessible via an API it is possible to develop applications such as the ACD system described above that manage communications flowing across these diverse media channels in a unified way. In other words text messaging email voice over IP VoIP and video are just different types of interaction media. While the media have differences real time or delayed response full duplex or one way specific device types required etc. they can be managed uniformly clients connect and disconnect interactions start and stop data flows across for the identities involved.

In another embodiment IM module may take the action of providing an IM alert. In this embodiment IM module receives an IM communication that indicates IM module should send an alert to a particular IM client or a group of IM clients . Once receiving the indication IM module sends an instant message as a reminder for users of particular IM clients . For example if a meeting is scheduled at 11 00 a.m. IM module may receive an IM communication indicating IM module should perform the action of sending an instant message to IM clients that are participating in the meeting.

In another embodiment IM module performs the actions of implementing various business policies to IM communications. For example IM module then performs the action of examining messages as they travel between IM clients for objectionable content and other violations. In another example IM module may receive the IM communication examine the communication for keywords that have been deemed objectionable and flag the IM communication if the keywords are found.

In another embodiment IM module may prevent IM communications from being sent and or reaching their intended IM clients. In this case IM module may determine from the IM communication that IM communications to the recipient are not allowed. IM module will then block the IM communication.

In another embodiment IM module may allow employees connected to the enterprise network to share files or block employees IM clients from sharing files with outside IM networks . For example IM module may enforce a policy for internal routing where IM module allows IM communications between employees behind the enterprise firewall. If an IM communication is for an external IM client IM module may block the IM communication. This is useful for intellectual property protection among other benefits.

In another embodiment the action of adding a disclaimer to an instant message communication may be taken. For example a disclaimer may be added periodically or when an IM client starts interacting with another IM client for the first time.

Accordingly IM module uses its position in between an enterprise firewall and IM clients used by employees of the enterprise to manage IM communications to and from the IM clients. IM module receives IM communications for the enterprise and processes the communications according to policies implemented by the enterprise. Actions are then taken by IM module according to the policies. An enterprise using IM module can thus manage all IM communications no matter what the network implementation of the IM communications because IM module is situated to receive all IM communications.

In one embodiment methods and apparatus for processing instant messages IMs destined for IM clients are provided. An IM module is provided that receives the IM messages and may issue a challenge IM to the sender of the IM. The challenge IM requires a response in which a sender can send a response IM with an answer. If the answer satisfies an answer required for the challenge IM the IM module may forward the originally sent IM to the IM client. Because spam is propagated by so called spam bots e.g. software programs processes or machines that generate IM messages automatically the bots most likely do not have the capability of responding to IMs with correct answers. Thus when a challenge IM is issued for an IM received typically a bot cannot respond to it at least not likely with a correct answer . When a response is not received or if the response does not contain the correct answer to the challenge it may be determined that the received IM is spam. However if it was a human user who actually sent the IM the human user should be able to respond to the challenge IM with the correct answer. Thus it may be determined that the IM is not spam thereby directing it to be forwarded and delivered to the recipient.

In step an IM for IM client is received. Typically an IM is sent to a username associated with the IM client. For example a username may be Alex . An IM may then be sent to that username Alex on the IM network.

In step a username for a sender of the IM is determined. The username represents the sender s identity on the IM network over which the communication is taking place. By the virtue of being situated between IM clients and IM network IM module is able to determine the username IM network identity information of IM clients outside of the enterprise and not just of IM clients inside the enterprise . Hence the IM username of the entity that sent the IM is known by IM module .

In step it is determined if the username is associated with an allowed username. In one embodiment the allowed username may be on a contact list for IM client . Also in another embodiment a larger contact list that includes other names not on the user s contact list may be used. For example a corporate contact list or any other names that may be deemed safe may be added to the contact list. In one example a global contact list including usernames for contact lists of all IM clients used in a corporate network may be used as a contact list for the IM client .

In step if the username is allowed the IM may be sent. If the username is not allowed in step a challenge IM is issued. In one embodiment the challenge IM is sent to the username of the sender of the IM. The challenge IM is used to determine if the IM message should be allowed and forwarded to a user. The challenge IM may ask a question that requires an answer. Alternatively the challenge message may just require a response IM to be sent without any restrictions on its content e.g. if no particular answer is required but just something such as 123 sent back .

In one embodiment if a response to the challenge IM is not received the IM is blocked. If an acceptable response to the challenge is received then the IM message is forwarded to the IM client. Additionally as will be described below other actions may be taken.

An answer is not received for the challenge message sent to IM client . Accordingly IM is blocked from being forwarded to client . In one embodiment it is assumed that IM is spam and thus should not be sent to IM client . Accordingly IM client does not receive a burdensome pop up of a spam IM or spim .

As shown in this example IM module manages all IMs sent to IM clients . For example IM module may manage all IM messages for a corporate network or entity. Thus spam may be controlled for an entire network of IM clients .

Receiver module includes an inbound IM processor and an outbound IM processor . Also a database is used to store IM messages received. Outbound receiver detects a contact list from an IM client when a user logs on using an IM username. The contact list may be detected at other times though such as when the buddy list is changed.

When the contact list is received the policy for storing the contact list is reviewed. One policy for storing the contact list is to maintain the contact list for each user. Another policy for storing the contact list is to maintain the union of the contact lists of all users in the organization. A person skilled in the art can envision other policies. A contact list detector determines that a contact list is received by outbound receiver and stores the contact list in a contact list database . The contact list may then be used to determine if IM messages are from users in that contact list when they are received. In an embodiment a contact list may not be detected every time a user logs on. Rather a global contact list for an entire organization may be used.

An inbound message processor receives an IM from IM client . The IM is stored in IM database even if it is determined as spam or spim and not forwarded to an IM client . In one embodiment an IM may be received from the IM client . In this case the IM is from an IM client that is internal to the network. For example the IM client may be situated in the same corporate network. IM module may be configured to forward these IMs to the destination IM client without checking whether or not the IM was spam or spim .

When the IM is received a username detector detects the username associated with the IM message received. In one embodiment a username detector parses the IM protocol message to determine the username that sent the IM. The username is then sent to policy module .

Policy module then uses a policy for issuing challenges to determine if a challenge message should be sent. Policy module determines whether a challenge should be issued based on one or more policies. For example a policy may be all usernames may be challenged except if the usernames fall within certain categories. For example categories may be users who are on the contact list of the username being contacted users who access IM networks through a specific IM module deployment users who access IM networks through a federated IM module i.e. several IM modules within the same business or among multiple businesses that have some sort of a trust relationship among them may be referred to as federated IM modules users who are explicitly placed on a configurable contact list or configurable contact lists in IM Module users who are explicitly given challenge response keys e.g. opted in software agents bots that are considered legitimate or used by the organization and the like.

Users who access IM networks through another IM module such as IM module deployed in a different organization or different deployment in the same organization may not be challenged. In this case it is assumed that an IM sent by an IM module may not be spam. There may be many ways of detecting whether an IM has been sent by an IM module . For example IM module may be configured to insert a disclaimer into an IM and that disclaimer may be detected by policy module . Also other signatures or information may be used to determine if the message was sent to an IM module .

Users who access IM networks through a federated IM module may be allowed. As mentioned above a federated IM module is defined as being one among a number of IM modules that have some sort of a trust relationship among them. Typically these are IM modules at the organization and its partner and or customer organizations.

Users who are explicitly added to a configurable contact list or configurable contact lists in IM Module may also be allowed. For example friends of a corporation opted in software agents bots that are considered legitimate and or useful by the organization may be included in a contact list in database . Thus not all IM messages from bots may be challenged if they are deemed useful or allowable.

Users who are explicitly given challenge response keys e.g. opted in software agents bots that are considered legitimate or used by the organization may be allowed. These users may be given a key that may be inserted into an IM message that is detected by policy module . Thus IM messages sent by these users are not issued challenges and are sent to IM clients .

The above configurations are not exhaustive and a person skilled in the art will appreciate other variations. Additionally any number of policies may be used in determining if a challenge should be issued.

The contact list found in IM database is also dynamic. For example configuration changes may take place in real time. If one or more of the above conditions changes the changes are updated to contact list in database . For example if one or more IM usernames are removed or added to an IM contact list for an IM client in the IM network those changes are detected and realized in a contact list in IM module as well as in database if needed.

If a policy for issuing a challenge is satisfied action module is sent the username and a challenge issuer is configured to issue a challenge. In one embodiment challenge issuer may determine the format of the challenge to be sent based on the destination IM client the sender of IM or any other factors. Additionally a pre set challenge IM may be configured for all IM messages received. One challenge format is plain text wherein a question would be formulated e.g. please type facetime on a line by itself . More advanced formats such as IMs that include images or links are also possible.

After the challenge IM is issued a response IM may be received from the IM client that received the challenge IM at a challenge response analyzer . Also a response to the challenge IM may not be received. For example a bot may not know how to respond to a challenge IM sent to it.

If a response IM is sent challenge response analyzer reviews the response and determines if the response IM satisfies an answer that is expected from the response. In one embodiment receiving a response IM for the challenge IM may be sufficient to allow the initial IM sent to be forwarded to its destination intended recipient . Or a question may have been asked to which an answer may be required. For example a personal question related to the destination username may be sent. Also the message may ask a user to type in a word or phrase that is shown on the screen. The response IM is then analyzed to determine if the response IM has the correct answer required.

If a response is not received or the answer to the response IM is not correct the initial IM received is blocked. A time limit may be set for receiving a response message. For example if response message is not sent in ten seconds the IM is blocked. In addition the maximum number of wrong answers allowed may be set beyond which the challenged IM username is blocked for a significant period of time. Other response processing policies are also possible.

If a response is received in step it is determined whether or not the response contains the correct answer for the challenge. For example the message may ask a user to type in a word or phrase that is shown on the screen. In another embodiment a challenge may be an image containing a handwritten word that needs to be replicated in the response. These challenges are easily answered by human IM users but pose significant difficulty to the automatic spam or spim agents bots. This is because a human user can easily see the word and replicate it in a response IM. Typically software agents bots cannot recognize the word and hence cannot send the correct response even if the bots are able send any response at all . Additionally just receiving a response e.g. any text message may be considered sufficient and be construed as the correct answer for the challenge message. If the response is not the correct answer the method proceeds to step where the IM is blocked.

If the correct answer is received for the challenge IM in step the destination IM client is prompted with a message indicating that an IM was sent from a username and asking if the user wants to accept the IM. For example a message may be An IM has been received from a user Alex the user has satisfied the challenge do you want to accept the IM In one embodiment this step may be skipped and the IM message may be automatically forwarded to the IM client. However since the IM that was sent from a username that was not on the user s contact list and thus may not be known by the user the user is given the option to reject the IM.

In step it is determined if the destination IM client accepted the IM. If it is not accepted in step the IM is blocked.

If the IM is accepted in step the original IM that was sent is retrieved from the computer memory or possibly from database or any other storage area for the purposes of forwarding it to its intended destination recipient. Because the challenge IM was issued the original IM was not immediately forwarded to its intended destination recipient in the anticipation of the response to the challenge and the need to determine whether or not the response is correct. Since IM module is capable of storing received IMs it can monitor the potentially spam or spim traffic and provide the means to display e.g. by the means of convenient Web based reports unsuccessful responses to challenges for a subsequent review by authorized personnel.

In step the IM is forwarded to the destination IM client . Accordingly in one embodiment the IM is not sent in real time but rather stored for a moment inside IM module while IM module communicates with the sender of the IM message.

In step the username of the sender may be added to a contact list of the destination IM client or a global contact list of the organization and its partners and or customers. This action may not be taken in some embodiments. For example the affirmative addition of the username by a user of IM client itself may be necessary. Thus the user permits the sender to be on their contact list and manually adds them. However IM module may determine that since the user accepted this IM other IMs from the sender should be directly forwarded to the user s IM client .

In one embodiment a user may attempt to add a contact to his her buddy list. A signal for adding the contact to the buddy list is intercepted by IM module . IM module may not allow the immediate addition of the contact to the user s buddy list. In one embodiment IM module may perform an action such as sending a message like a challenge message that requires additional input from the user. For example a link may be sent to the user s IM client . The link when selected may present a form that needs to be filled out by the user in order to get approval for adding the contact to the user s buddy list. When the form is filled out it may be sent to IM module which may then route the form to an entity designed to approve buddy requests. The entity may then decide whether to approve or deny the buddy request. If the buddy request is approved the user is able to add the contact to the user s buddy list.

If a user continues to try and add the contact before receiving approval IM module may intercept the requests and not allow the addition until approval is received. A message may also be sent to the user s IM client indicating that the approval is being processed. Once the approval is given IM module may determine when the user is logged in to an IM client and send an IM that the buddy request has been approved and the contact can be added. Similarly if the request is denied a denial IM may be sent with the reasons for denial.

The contacts that can be subject to the approval process may be contacts in an enterprise network or outside of the enterprise network. The above process allows the interception of buddy list events and actions are performed related to the buddy list events.

The approval entity may communicate with IM module using any methods. For example application programming interfaces APIs may be used to communicate with the approval entity.

Accordingly methods and apparatus for processing IM messages are provided. The methods and apparatus may be used to prevent spam or unauthorized messages that are sent to IM clients. For example challenges are issued that need to be responded to in order for the IM message to be forwarded to the IM client. The challenge messages may be issued in certain circumstances if for example a username of the sender is not on a contact list of the intended recipient or contact lists of the others inside the organization . Because a response to a challenge message is required automated software agents bots typically have trouble responding to the challenge messages. Thus messages from these automated software agents bots may be prevented by issuing the challenges. Policies are included in a central IM module that detect contact lists for IM clients and determine when to send challenge messages.

Also by having an IM module that can receive and filter IM messages from different IM networks a solution for all IM clients of a corporate network may be provided by IM module . Also because the IM module is configured to process IMs from different network providers spam in different network formats may be prevented using challenges.

While the present invention has been described using a particular combination of hardware and software it should be recognized that other combinations of hardware and software are also within the scope of the present invention. The control logic may also be stored on an information storage medium as instructions configured to be executed by an information processing device. The present invention may be implemented only in hardware or only in software or using combinations thereof.

The above description is illustrative but not restrictive. Many variations of the invention will become apparent to those skilled in the art upon review of the disclosure. The scope of the invention should therefore be determined not with reference to the above description but instead should be determined with reference to the pending claims along with their full scope or equivalents.

