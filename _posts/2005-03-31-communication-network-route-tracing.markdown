---

title: Communication network route tracing
abstract: A method for tracing a communication route through a network coupling a first device with a second device is provided. A first signal is transferred from the first device to the second device to cause a plurality of intermediate devices to report first information concerning the first signal. The first information is processed to identify the intermediate devices as defining the communication route. The intermediate devices are configured so that a second signal, when transferred from the first device toward the second device, causes a subset of the intermediate devices to report second information concerning the second signal. The second signal is transferred from the first device toward the second device. The second information is processed to identify the subset of the intermediate devices as a portion of a sequence of the intermediate devices defining the communication route.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07843838&OS=07843838&RS=07843838
owner: Sprint Communications Company L.P.
number: 07843838
owner_city: Overland Park
owner_country: US
publication_date: 20050331
---
Aspects of the invention relate generally to communication networks and more particularly to identification of communication routes in communication networks.

Communication networks such as local area networks LANs wide area networks WANs virtual private networks VPNs and myriad others typically provide extremely useful connectivity among large numbers of computers personal digital assistants PDAs mobile communications terminals and other devices for informational interchange. Due to the often complex topology required of a network to provide this connectivity many possible physical paths or routes for informational transfer between any two network devices may exist. Further the decision as to which particular path is employed for communication between a source and destination in the network may be distributed among many routers which are devices employed to forward packets of data from a source to a destination through or between networks. Thus determining the particular route employed for information transfer between two specific devices is often a nontrivial task.

Identification of a particular communication route between a source and a destination within one or more networks provides significant advantages in terms of facilitating network maintenance. More specifically ascertaining the various routes employed by a network to connect any two communicating devices provides an indication of the overall topology of the network. In turn this information allows faster identification of faulty devices within the network as well as any bottlenecks adversely affecting network performance.

In networks employing Internet Protocol IP determining the physical route between a source and a destination is facilitated by way of an IP utility called traceroute. By sending a series of data packets traceroute determines the identity of each router through which data is transferred between the source and destination as well as the sequence or order of the routers encountered by the data. Other network protocols such as those employed in UNIX and Windows based networks provide similar utilities.

However tracing a route through a network is complicated by the existence of multi layer networks which are networks utilizing two or more different network protocol layers to constitute at least a portion of a network. For example some IP networks employ one or more optical networks to supply some of the connections between network devices. Such optical networks typically employ a communication protocol other than IP such as the Synchronous Optical Network SONET protocol. However due to limited interaction between the separate layers of the network the optical portions of the network are not detected by the IP traceroute utility only the IP routers are identified. As a result a particular route through an optical portion of the network between two IP routers which may constitute a significant portion of the route typically remains unknown. Thus opportunities for reconfiguring the optical connections to circumvent failed equipment or enhance performance are not exploited making the network difficult to support and maintain.

Embodiments of the invention described below provide a method for tracing a communication route through a communication network coupling a first device with a second device. A first signal is transferred from the first device to the second device to cause a plurality of intermediate devices to report first information concerning the first signal. The first information is processed to identify the intermediate devices as defining the communication route. The intermediate devices are configured so that a second signal when transferred from the first device toward the second device causes a subset of the intermediate devices to report second information concerning the second signal. The second information is processed to identify the subset of the intermediate devices as a portion of a sequence of the intermediate devices defining the communication route.

In one embodiment the intermediate devices are reconfigured and the second signal is retransferred from the first device toward the second device repeatedly until the sequence of the intermediate devices defining the communication route is determined.

Additional embodiments and advantages of the present invention will be realized by those skilled in the art upon perusal of the following detailed description taken in conjunction with the accompanying drawings.

In the particular example of the link includes the first router and the second router for transmitting data between various communication devices such as computers PDAs and the like. The routers represent first and second devices of the network between which data packets are transferred.

Coupling the first router and the second router are multiple wavelength division multiplexing WDM systems and coupled back to back to form a path. Each WDM system employs wavelength division multiplexing to provide multiple optical communication channels over a single optical connection. Any number of WDM systems may be employed to couple the first router and the second router together in alternative embodiments of the invention so that packets of data may be transferred from the first router to the second router and vice versa. In another embodiment other optical communication mechanisms such as dense wavelength division multiplexing DWDM systems may be employed to similar end. In a further embodiment communication mechanisms other than optical communication links may be utilized to couple the first and second routers 

Between each router and its closest WDM system such as the first router and the first WDM system a packet over SONET POS interface translates data between the electrical signals of the router and the optical signals of the WDM system . In a POS interface resides between the first router and the first WDM system while a second POS interface resides between the second router and the last WDM system . Each POS interface also performs the required data conversion between IP packets and SONET frames. The POS interface may reside within the router or may be located externally thereto.

In each WDM system contains two WDM terminals each of which contains one or more WDM transceivers . Those WDM transceivers which form the route between the routers act as intermediate devices for transmitting and receiving optical data between the routers . Each WDM transceiver contains a bidirectional long reach interface and a bidirectional short reach interface for interchange of optical data. The long reach interface couples a transceiver of one WDM terminal to a transceiver of another WDM terminal within a single WDM system while the short reach interface connects a transceiver of one WDM terminal to a transceiver of another WDM terminal of an adjoining WDM system or to one of the routers . In other words the short reach interfaces are employed to couple WDM systems together while the long reach interfaces transfer optical signals between the two WDM terminals of the same WDM system 

Although not shown in the particular embodiment of one or more optical switches may also be employed to connect some portion of the various WDM systems or other network devices together in a variety of configurations to couple two or more routers together optically. Thus embodiments of the invention to be described below may operate on such alternative link configurations and many others without departing from the scope of the invention.

Location and interconnection information describing the identity and order of the WDM systems and their various components comprising the connection between the routers of the link is often recorded into a facility management system FMS associated with the network by way of a manual and hence error prone process. Also this information is rarely updated to represent changes that have been made in the route especially those made automatically by the routers in response to detected failure conditions. In addition if optical switches are employed in the route changes to the route may be made quickly and easily thereby rendering the stored connection information essentially obsolete. As a result a more automated method for determining the route for data packets between the routers would be beneficial.

Each WDM terminal when employing the SONET protocol typically reports to a SONET management system SMS various error signals or alarms to indicate the occurrence of various error or alarm conditions detected at one or more of the WDM transceivers of WDM terminals . In one example if a first WDM transceiver detects an error in a data packet received over a short reach interface the transceiver informs the SMS of the error and passes the erroneous data packet along without correction by way of its long reach interface to a second WDM transceiver . As a consequence the second WDM transceiver will detect the same error along with any other errors that were induced in the long reach interface . Normally each WDM transceiver issues a single SONET alarm for one or more error or alarm conditions encountered within a fixed time segment or bin of fifteen minutes in length to reduce the total number of alarms generated by the link .

In the case of certain classes of SONET alarms such as CV code violation alarms ES errored seconds alarms and SES severe errored seconds alarms only the first incidence of such an alarm per fifteen minute bin is reported while further alarms of the same type are suppressed during the same time period. Generally CV alarms indicate the presence of parity errors in one or more SONET bytes while ES and SES alarms indicate the number of one second intervals containing data or other errors within a particular 15 minute time period. Other SONET alarms such as the alarm indicating signal AIS exhibit different programmable behavior. For example each WDM transceiver may be programmed to forward over its associated short reach interface an AIS alarm received over its long reach interface . Alternatively such forwarding may be suppressed. Similarly AIS alarms received over a short reach interface may be either forwarded over the opposing long reach interface or suppressed. Also the transceiver may be configured to report or suppress AIS alarms to the SMS.

As part of each alarm an identification of the transceiver generating the alarm is provided as well as the WDM terminal upon which the transceiver is installed. In some cases the transceiver is identified by way of a shelf number and a slot number indicating the physical location of the transceiver within the WDM terminal .

While SONET provides a rather robust and detailed alarm system correlating these alarms with the alarms of another protocol layer such as those associated with IP routers has proven rather difficult due to the different alarm numbering conventions employed among the various protocols. As a result identifying which WDM transceivers a particular IP link is employing is problematic. However using these alarms as signals in a particular manner allows identification and sequencing of the transceivers forming a route as is described below.

Generally embodiments of the present invention provide a method for tracing a communication route through a communication network over which data packets are transferred from a first device to a second device of the network. As shown in a first signal is transferred from the first device to the second device to cause a plurality of intermediate devices to report first information concerning the first signal operation . The first information is processed to identify the intermediate devices as defining the communication route operation . The intermediate devices are then configured so that a second signal when sent from the first device toward the second device causes a subset of the intermediate devices to report second information concerning the second signal operation . The second signal is transferred from the first device toward the second device operation . The second information is then processed to identify the subset of the intermediate devices as a portion of a sequence of the intermediate devices defining the communication route operation . In one embodiment the intermediate devices are reconfigured operation the second signal is retransferred operation and the second information reprocessed operation repeatedly until the sequence of the intermediate devices defining the communication route is determined. The methods described herein may also be embodied in a digital storage medium for storing a program comprising instructions executable on a processor for implementing the foregoing method.

More specifically related to the particular link of illustrate a method according to an embodiment of the invention for determining the route of data packets transferred between the first router and the second router by way of the WDM transceivers . In one embodiment initiation of the various actions occurs by way of a remote terminal not shown in in communication with the routers operation . In addition as described below the remote terminal may access a network management system NMS in this case the SONET management system SMS through one or more application programming interfaces APIs and thus may query the NMS regarding alarm conditions and the like reported by the WDM transceivers . Thus by way of the remote terminal a user or network manager may initiate an automatic tracing function to determine the route taken by data packets via the WDM transceivers between the first and second routers .

Once trace routing is initiated each of the routers is notified to indicate that SONET level errors are going to be generated by one router to be received by the other router operation . In one embodiment the remote terminal directly notifies both routers indicating which will be generating the errors first. In another embodiment the first router may be notified by the remote terminal after which the first router notifies the second router via the link .

Each of the routers then waits for an error free period of time exceeding the size of the error bins employed in SONET operation . In one embodiment each router waits for a length of time exceeding fifteen minutes to ensure no naturally produced errors i.e. errors generated during normal data transfer operations are encountered during the current error bin. If a naturally produced error in a SONET frame is encountered in other traffic between the routers the routers wait another fifteen minutes until an error free bin is encountered. The wait period helps isolate naturally produced errors from the errors intentionally generated by the trace. Once such an error free period occurs each of the routers signals the other over the link to indicate detection of this period operation .

Assuming an error free time of fifteen minutes is encountered each router disables IP layer restoration operation . IP level restoration describes the actions of the routers to reconfigure the network topology at the IP level to circumvent the link or portions thereof that are considered defective. Generally such rerouting involves the modification of a routing table maintained by each router . These routing tables typically must be synchronized with each other to ensure effective routing. Generally this synchronization is rather time consuming so the routers typical wait for a relatively length period of time such as 200 milliseconds before attempting IP layer restoration. Allowing IP layer restoration would defeat the purpose of determining the current route between the routers as that route would no longer be valid if errors transmitted during detection of the route caused the route to be deemed unusable. Thus IP layer restoration is disabled to allow generation and transmission of SONET alarms without causing subsequent network rerouting.

In an alternative embodiment each of the routers may alter the value of its carrier timer which typically is a configurable amount of time during which a router will wait for the communication link to recover before initiating IP layer restoration. In one embodiment the carrier timer is set to a sufficiently high value to ensure that IP layer restoration and hence rerouting will not occur during the tracing of the route as described below. In such a case the optical network layer underlying the IP layer would then be primarily responsible for reestablishing communication in the presence of errors before the IP layer initiates restoration. In one embodiment the carrier timer of each router is set to five seconds.

One of the routers for example the first router then generates an unconditionally propagated SONET alarm as a first signal to be detected by the other router operation . In other words the first router causes an alarm condition which will be propagated through all WDM transceivers along the yet to be traced route to the second router regardless of how each WDM transceiver is configured regarding the forwarding of alarm conditions. In one embodiment the SONET alarm is a code violation CV which indicates a data error in the data packet being transferred from the first router to the second router . In one embodiment the POS interface of each router is capable of generating burst data errors solely in the SONET overhead bytes in order to trigger CV alarms in the WDM transceivers receiving the data without affecting the data at the IP level. For example an integrated circuit within the POS interface such as a PM5380 ATM and Packet Over SONET SDH Physical Layer Device by PMC Sierra Inc. or the PD98414 ATM SONET Framer by NEC Electronics Inc. may be employed to generate code violations in the SONET frame bytes. For example the B1 byte of the SONET section overhead which carries the section bit interleaved parity code BIP 8 byte may be corrupted to cause a parity error and hence a code violation in the receiving WDM transceiver . Other methods for generating a CV alarm such as corrupting the B2 byte i.e. the line bit interleaved parity code BIP 8 byte the B3 byte i.e. the synchronous transport signals STS path bit interleaved parity code path BIP 8 byte and others may be performed in the alternative. Generally alteration is performed on the SONET frame itself rather than the IP packets carried inside the SONET frame due to the inability of most IP routers to generate errors the inability of SONET framers to detect IP packet errors and the relative ease with which various bytes of the SONET frame may be accessed and modified.

In one embodiment the length of each burst error may range from one to some small number n so that the overall error rate remains below some error rate such as 1 10. The length of each burst error is reported in a CV alarm and is employed by the remote terminal to discern the CV alarms generated by the route tracing function from those which occur naturally as is discussed further below. Thus by keeping the length of each burst error low and hence the overall error rate low the ability of the remote terminal to distinguish between generated and normally occurring errors is enhanced thus improving the accuracy of the route tracing function. In another embodiment if the communication link historically exhibits a particular burst error length a different burst error length may be employed for the generated errors to help distinguish between naturally produced errors and those errors generated for the route tracing function.

The first router generates the first burst error or other alarm at a random time T. The first router also sends a message to the second router indicating the time value of Tso that the second router may distinguish the first burst error from other naturally produced errors that may be occurring over the link operation . In an alternative embodiment the length of the generated burst error may also be transferred so that the second router may discern generated errors from natural errors. If the second router detects the presence of the first burst error the second router records the time Tand signals the first router to confirm that the first burst error was detected operation . Both the first and the second routers then reset their corresponding carrier timers or re enable IP layer restoration operation and return to waiting for a bin length of fifteen minutes of no errors during normal operation of the link operation . In an alternative embodiment the disabling of IP layer restoration executed earlier operation is a timed operation which involves an automatic re enabling of IP layer restoration capability after a specified amount of time. Therefore a separate re enabling operation operation would not be necessary in that particular case.

Execution follows in this fashion until a predetermined number N of confirmed random time stamps Tthrough T are collected by the second router . In one embodiment at least four time random time stamps are collected which may require one to two hours to accomplish. In one embodiment each of the random time stamps Tthrough Tare chosen so that the pattern or signature of the time stamps is different than that produced by normal errors produced over the link . For example a particular repeating pattern of low values for the length of each burst error such as three followed by eight may be employed to distinguish the generated errors from naturally occurring errors. Thus the remote terminal may use both the timestamp and the length of the burst error to detect the SONET alarms generated for route tracing purposes.

In conjunction with the burst errors generated by the first router to the second router the second router may also generate a second set of burst errors to the first router resulting in a second set of time stamps T through T operations . In an alternative embodiment the number of time stamps generated by the first router and the second router may be different. In one embodiment the second router generates its burst errors to develop the second set of time stamps after the first set of time stamps Tthrough Thave been collected. In another embodiment the first router and the second router generate burst errors concurrently so that the two sets of time stamps are also collected concurrently to reduce the amount of time required to collect the time stamps.

As a result of the burst errors generated by each of the routers by way of their associated POS interfaces each WDM transceiver constituting part of the route taken by the data packets between the first and second routers detects the errors and reports them to the SMS. Each error report to the SMS also includes a time stamp indicating the time at which the burst error was detected and the length of the particular burst error as described above.

After collection of the two sets of time stamps the remote terminal may then query the SMS to determine the identity of each WDM transceiver that issued a CV alarm at each of the particular time stamps Tthrough T thereby identifying a first set of WDM transceivers referred to herein as TRthrough TR that may form the route through the link from the first router to the second router operation . The remote terminal also queries the SMS to identify each WDM transceiver that issued a CV alarm at each of the second set of time stamps T through T thereby producing a second set of WDM transceivers labeled herein as TR through TR that may form the route from the second router to the first router operation . In one embodiment the two sets of WDM transceivers may not coincide i.e. TRthrough TRare not the same as TR through TR thereby indicating that the path from the first router to the second router is different from the path from the second router to the first router

While the WDM transceivers employed within the link for the route between the routers have been identified at this point the order or sequence of the WDM transceivers along the route as they are encountered by data packets transferred between the routers is yet to be determined. To address this need the remote terminal employs the use of a conditionally propagated alarm as a second signal to determine the sequence. In one embodiment the conditionally propagated alarm is the AIS alarm mentioned above.

More specifically the remote terminal initializes the WDM transceivers TR TRby signaling each of the transceivers to clear its fifteen minute bin alarms and counters operation . The remote terminal also informs each of the WDM transceivers TR TRin the path to prevent forwarding of AIS alarms received over the long reach interface of each of the transceivers operation . The remote terminal also signals the first and second routers to begin the process of sending and receiving messages incorporating MS alarms operation . In one embodiment the remote terminal also informs the routers which of the two will be sending the alarms. In an alternative embodiment the sending router for example the first router informs the receiving router the second router by way of a message that the transmission of AIS alarms will begin.

Prior to the sending of the AIS alarms the first router and the second router each disables its IP layer restoration capability or modifies its carrier timer to a level sufficiently high to prevent the routers from attempting to invoke their IP layer restoration capability while the AIS alarms are being transmitted operation . In so doing the routers substantially limit their capacity to reconfigure the route connecting the routers as discussed above.

The first router then sends an AIS alarm in a message to the second router at a random time T operation . depicts the extent which the MS alarm propagates along the link by way of dashed arrows. Given that each of the identified WDM transceivers TRthrough TRhave been configured to not propagate an AIS alarm received over its long reach interface an AIS alarm will propagate through a first WDM transceiver TRencountered which is directly coupled with the first router by way of the short reach interface of the first transceiver TR. Accordingly the first transceiver TRresides on the WDM terminal of the WDM system first encountered along the route from the first router to the second router . The AIS alarm is propagated to a second WDM transceiver TRby way of the long reach interface of the first and second transceivers TR TR. The second transceiver TRthus resides within the second WDM terminal of the first WDM system . As the second transceiver TRreceived the current message over its long reach interface the second transceiver TRdoes not propagate the AIS alarm when it transfers the current message over its short reach interface to the next WDM transceiver thus ceasing any further propagation of that alarm. Therefore only the first two WDM transceivers TR TRhave detected the AIS alarm and have subsequently reported the alarm to the SMS. The message from the first router then continues on to the second router along the link but without the AIS alarm signal. In the report to the SMS each transceiver TR TRtypically reports the time the AIS alarm was received which in this example is the time stamp T . In addition each transceiver TR TRindicates in the report whether the AIS alarm was received over its short reach interface or its long reach interface .

In one embodiment the IP layer restoration or carrier timer is then restored in the routers to return the routers to their normal operating state operation .

The remote terminal then queries the SMS for each of the identified transceivers TR TRto determine the identity of the two transceivers TR TRthat reported the AIS alarm at the time stamp T operation . The remote terminal determines which of the two transceivers TR TRfirst received the AIS alarm by consulting the report to the SMS to determine whether the short reach interface or the long reach interface of each of the transceivers TR TRreceived the alarm. Based on this information the remote terminal can determine that the first transceiver TR having received the alarm over its short reach interface was the first in the sequence of WDM transceivers TR TRto received the alarm while the second transceiver TR having received the alarm from the first transceiver TRover its long reach interface was the second transceiver in the sequence. Thus the remote terminal is able to determine the first two transceivers TR TRin the route from the first router to the second router

The remote terminal then clears the fifteen minute bin alarms and counters for each of the identified WDM transceivers TR TR operation . Further the remote terminal sets the long reach interface of the second transceiver TRinto AIS forwarding mode operation .

Prior to the sending another AIS alarm the first router and the second router again disable their IP layer restoration capability or modify their carrier timers as before operation . The first router is then free to generate another AIS alarm in a second message sent to the second router at a second time T operation . Since the second transceiver TRis now configured to propagate the AIS alarm to the next transceiver along the route the AIS alarm is now received by the first and second transceivers TR TR and thereafter by a second pair of transceivers TR TR residing within opposing WDM terminals of the second WDM system . This scenario is illustrated in . As the fourth transceiver TRis still configured to prevent propagation of an AIS alarm received over its long reach interface the message from the first router is passed along the remainder of the route toward the second router without the AIS alarm. Thus the second AIS alarm is received by each of the first four transceivers TR TR TR TR in the route each of which reports the alarm to the SMS including the information described above.

The IP layer restoration or carrier timer is then restored again in the routers to return the routers to their normal operating state operation . The remote terminal then once again queries the SMS to determine which of the identified transceivers TR TRreceived the alarm operation . Having already determined the sequence along the route of the first two transceivers TR TR the remote terminal identifies the second pair of transceivers TR TRas the next two transceivers in the route. Further by determining which of the second pair of transceivers TR TRreceived the message containing the AIS alarm over its short reach interface or its long reach interface the remote terminal can determine the proper order of the second pair of transceivers. In other words since the third WDM transceiver TRreceived the message via its short reach interface and the fourth transceiver TRreceived the message by way of its long reach interface from the third transceiver TR the remote terminal ascertains the proper order of the third and fourth transceivers TR TR.

At this point the remote terminal again clears the fifteen minute bin alarms and counters for each of the identified WDM transceivers TR TR operation . Further the remote terminal sets the long reach interface of the fourth WDM transceiver TRto AIS forwarding mode so that the AIS alarm may propagate beyond the fourth transceiver TRto determine the next two WDM transceivers in the route operation .

This process continues in this fashion with another message containing an AIS alarm being sent from the first IP router to the second router followed by a query of the SMS by the remote terminal to determine the next two transceivers in the route. In another embodiment fewer or greater numbers of transceivers may be sequenced for each AIS alarm transferred. Once the remote terminal determines that no new WDM transceivers TR TRare being detected by way of another AIS alarm message the proper sequence of the identified WDM transceivers TR TRalong the route from the first router to the second router has been determined. In an alternative embodiment once the sequence of each of the previously identified WDM transceivers TR TRhas been discovered the process of tracing the route may be considered completed.

Presuming the route for data packets transmitted from the first router to the second router follows the reverse sequence of WDM transceivers TR TRemployed by messages sent from the second router to the first router the process may end there. However if the link may be configured so that the two routes may be different or if the results of the AIS alarms sent by the first router should be verified the same process may then occur as described above with the second router sending the AIS alarm messages to the first router

Therefore methods according to an embodiment of the invention utilize a first alarm or signal indication sent from one router to another router to identify the transceivers employed in the data packet route in the link between the first and second routers . Further the actual sequence of the identified transceivers in the route is determined by the use of a second alarm or signal indication sent from one router toward the other router .

Use of the various embodiments of the invention may be useful in tracing a route of a multi layer network even in less than ideal conditions. Using the link of as an example in cases where the link between the first and second routers is severed e.g. when one of the WDM transceivers carrying data packets between the routers is inoperative determination of the identity and sequence of the transceivers constituting the route between one of the routers and the point at which the route is broken may still be performed with some minor modifications to the method of tracing the route as provided above. For example as the packets containing burst data errors are not traversing the entire link under these conditions the receiving router would not be required to confirm receipt of the burst error conditions generated by the sending router . Beneficially as the route may be traced up to the point of a break in the link performing the trace from each of the routers may help localize or even specifically identify the location of the fault causing the link to be inoperative.

Another difficulty may be the presence of an inordinate data error rate while a trace is being performed. Once again using the environment shown in CV alarms may occur more often than once every fifteen minutes thus not allowing an alarm bin that is free from naturally occurring burst errors. As a result eliminating the requirement of a CV alarm free period of fifteen minutes prior to the sending router issuing a packet with a CV alarm condition may be necessary in order to perform the trace. This condition likely makes positive detection of the CV errors purposely produced from the sending router at a particular time stamp by the WDM transceivers and the receiving router more difficult and error prone as complete correlation of each transceiver reporting a CV error to the time stamp signature chosen by the sending router may be improbable. While such conditions may render the tracing of the route less accurate the multi layer tracing methods disclosed herein produce useful tracing information in spite of the presence of a higher than normal data error rate. In an alternative embodiment another unconditionally propagated alarm that is not affected by a high data error rate may be employed.

The embodiments of the invention disclosed above employ well known alarm signals and frame bytes currently defined within the SONET standard and thus may be employed to trace a wide range of multi layer network links. Other methods residing within the scope of the invention may also be devised which employ less standard techniques. For example within the context of the IP over SONET over WDM link described above the AIS alarm may be replaced with another alarm signal that is conditionally propagated along the route being traced. Additionally any SONET frame bytes that are currently unused or defined may be employed to pass along a special purpose alarm signal detectable by each of the transceivers along the route being traced. Similarly the CV alarm may be replaced with any other alarm or error condition that is propagated unconditionally throughout each transceiver along the path from the sending router to the receiving router . For example if the CV alarm is replaced in the tracing method with an alarm not associated with data errors the fifteen minute wait between error bursts may be dispensed with thereby shortening the overall time required to perform a trace.

In the case of either the unconditionally or conditionally propagated alarms use of distinct alarms not associated with alarms or errors occurring during normal operation of the multi layer network would also provide the additional advantage of the remote terminal being relieved of the responsibility of discerning alarms associated with normal operation from those generated during the trace. In addition the use of a numerical identifier in addition to the aforementioned time stamp may be employed in conjunction with the alarm to provide another means of identifying the alarm as one employed by the route tracing function. That identifier may just be some random number or an encrypted value providing some measure of security in identifying the source of the particular alarm. However additional specialized software or firmware would likely be required in each of the routers and the WDM transceivers in order to interpret propagate and report each of the specialized alarms correctly.

While several embodiments of the invention have been discussed herein other embodiments encompassed within the scope of the invention are possible. For example while the specific environment discussed herein in conjunction with the various tracing methods discussed above is an IP over SONET over WDM multi layer network other multi layer networks involving optical technology such as IP over SONET over DWDM dense wavelength division multiplexing or IP over ATM Asynchronous Transfer Mode over SONET over WDM may be traced in a similar fashion. Further routes of other networks not employing an optical communication layer may also be traced using the principles discussed herein. Also aspects of one embodiment may be combined with aspects of other embodiments disclosed above to produce additional embodiments not heretofore discussed. Thus while the present invention has been described in the context of specific embodiments such descriptions are provided for illustration and not limitation. Accordingly the proper scope of the present invention is delimited only by the following claims.

