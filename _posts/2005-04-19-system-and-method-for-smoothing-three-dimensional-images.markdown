---

title: System and method for smoothing three dimensional images
abstract: A method and system for converting two-dimensional artwork into three-dimensional models. Data relating to an image is imported and segments of the image are chained into contiguous curves. The contiguous curves together may form loops. Subsets of closed loops are split and created where surfaces of the image are to be created. The closed loops are contoured to create contours. The geometries created are projected onto a surface as an image. Finally, the image is smoothed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08085266&OS=08085266&RS=08085266
owner: Jostens, Inc.
number: 08085266
owner_city: Minneapolis
owner_country: US
publication_date: 20050419
---
This invention relates generally to a system and method for smoothing three dimensional images and more specifically to a system and method for smoothing three dimensional images for use in the manufacturing of jewelry including rings.

It is frequently necessary to convert a two dimensional drawing into a three dimensional figure. Such conversion requires aspects of mechanical modeling and artistry. However many applications currently used to convert a two dimensional drawing into a three dimensional figure are static and rigid providing little or no room for artistry. This can lead to unrealistic three dimensional models. Further problems arise when the three dimensional models are projected onto non planar surfaces.

The present invention relates to a system and method for smoothing figures. More specifically the invention relates to a method and software implementing the method for advanced geometric modeling techniques to smooth figures.

The invention converts two dimensional artwork into three dimensional models while allowing the user artist freedom in interpreting the artwork. In particular the present invention supports both artistic and mechanical modeling techniques.

The method begins with importing data relating to the image. Segments of the image are chained into contiguous curves. The segments to be chained may be line segments. The contiguous curves together may form loops. Subsets of closed loops are split and created where surfaces of the image are to be created. These surfaces form closed loops may be referred to as contoured areas. Stated otherwise segments of the image are connected to form loops and the closed loops are contoured to create contours. The closed loops are contoured to create contours. The geometries created are projected onto a surface as an image. In some embodiments the geometries that have been contoured may be projected onto non planar surfaces. Finally the image is smoothed. This process or individual steps therein may be repeated as desired.

While multiple embodiments are disclosed still other embodiments of the present invention will become apparent to those skilled in the art from the following detailed description. As will be apparent the invention is capable of modifications in various obvious aspects all without departing from the spirit and scope of the present invention. Accordingly the drawings and detailed description are to be regarded as illustrative in nature and not restrictive.

The present invention relates to a system and method for smoothing figures. More specifically the invention relates to a method and associated software for advanced geometric modeling techniques to smooth figures for use in manufacturing jewelry.

The invention converts two dimensional artwork into three dimensional models while allowing the user artist freedom in interpreting the artwork. In particular the present invention supports both artistic and mechanical modeling techniques. Mechanical modeling techniques for converting a two dimensional image to a three dimensional model are typically static and rigid. The exact dimensions of features of a part are carefully calculated and may not be easily changeable. It is desirable that three dimensional modeling techniques be both dynamic and flexible.

CAD artists generally focus on how a geometric object looks relative to the existing geometry. Transformations on geometric entities typically need to be fast tens of translations and other transformations being performed per second on a large set of objects. It is desirable that three dimensional modeling techniques display real time operations on geometric entities quickly. Stated otherwise it is desirable that the results of modifications to surfaces and curves be displayed in real time. In that manner the artist or user works on the relative positioning of a three dimensional object in a part rather than on the exact positioning of the object.

In the past multiple and various CAD CAM packages have been used to generate three dimensional artwork. In one embodiment the present invention provides a unified CAD CAM environment that is cross functional and flexible.

The method begins with importing data relating to the image shown at block . Segments of the image are chained into contiguous curves at block . The segments to be chained may be line segments. The contiguous curves together may form loops. Subsets of closed loops are split and created where surfaces of the image are to be created shown at block . These surfaces form closed loops may be referred to as contoured areas. Stated otherwise segments of the image are connected to form loops and the closed loops are contoured to create contours. The closed loops are contoured to create contours at block . The geometries created are projected onto a surface as an image shown at block . In some embodiments the geometries that have been contoured may be projected onto non planar surfaces. Finally the image is smoothed at block . This process or individual steps therein may be repeated as desired. As shown in the method further includes several optional steps. These steps are described below.

The data imported relating to the image at block may be a set of line segments and curves that together form an image. The image may be of any subject for example a lion s face a football player a mascot or an architectural image. While the line segments and curves may be touching one another they are typically not connected. In one embodiment the data imported may be in dxf format from Corel draw in the UG environment. Alternately the imported data may be IGES Rapid Prototype or any other suitable format.

The segments and curves of the image imported are connected at block to form contiguous curves. At block the continguous curves are split and subsets of closed loops are created. This may be thought of as curve chaining. In a specific embodiment curve chaining is done using a function called Join. To connect the segments and curves the segments and curves to be joined are selected. Each segment is looped through to find matching end points and chains are constructed. This is typically done using a function of the computer program. The chains formed using the matching endpoints are loops generally closed loops.

Data imported at block is represented in lines and curves. In one embodiment a program is provided that converts each curve to a local NonUniform Rational B Spline NURBS format. Thus the program converts the geometries imported at block into NURBS geometries. The program then generates a union between the collection of segments.

Optionally curve offsets may be created with fillets on a subset of loops as shown at block of . A fillet is an arc of a circle of a specified radius that replaces a portion of a curve. The fillet arc meets the curve at two points in a tangential manner.

The process of fillet insertion is illustrated at . As shown at block initially the curve has sharp corners. A radius for the fillet is specified shown at block . The portions of the curve where the fillet fits tangentially are determined as shown at block . The fillet arc then replaces those portions of the curve shown at block . Fillets may be used for example to reduce an offset distance of the curves. The curve offset process may be used in a hidden line algorithm to generate an advance front offset. A particular embodiment of this discussed more fully below is used when the contours are triangulated.

After a series of loops are formed the loops are contoured at block of thereby forming a set of contours. To contour a loop it is desirable that the loop is closed. If the loop is not completely closed it may be closed by hand for example by using UG functionality. The contouring process is a form of dynamic modeling. Contour lines or contour areas are created from one of five basic shapes spheres cylinders ellipsoids cones or planes.

Contouring involves dynamic modeling of a three dimensional shape. illustrates a three dimensional shape for dynamic modeling. The shape represents a three dimensional trimmed surface that is modified through various parameters. As stated above contour lines and contour areas are created from one of five basic shapes spheres cylinders ellipsoids cones or planes. Various parameters control each of these shapes and may be used to define the exact shape of the contoured areas.

The parameters that control a sphere are radius center x center y and center z. illustrates a dialog box that may be used to control the parameters of a sphere. The parameters that control a cylinder are radius of the cylinder and x y and z center of the point used to define the location axis of symmetry of the cylinder. illustrates a dialog box that may be used to control the parameters of a cylinder. The parameters that control an ellipsoids are x and y radii of the ellipsoid rotation of the ellipsoid around the z axis and the x y and z center of the point used to define the location axis of symmetry of the ellipsoid. illustrates a dialog box that may be used to control the parameters of an ellipsoid. The parameters that control the cone are two radii of the cone rotation of the cone around the z axis and x y and z center of the point used to define the location axis of symmetry of the cone. illustrates a dialog box that may be used to control the parameters of a cone. The parameters that control a plane are the x y and z rotations of the normal to the plane and x y and z center of the point used to define the location of the plane. illustrates a dialog box that may be used to control the parameters of a plane.

It may be desirable to modify or change the parameters for example for the amount of rotation for each shape. The parameters may be modified at block . As shown in the value of each parameter may be controlled by a slide bar. After the parameters are updated the wireframe is updated at block . The contouring process then returns to block where the updated wireframe is displayed. If desired the parameters of the updated wireframe may be modified at block . If modified the loop of blocks is repeated. If the parameters are not modified the contouring process proceeds to block where it is determined of the contouring of the selected curve is complete. If not the contouring process returns to block . If the contouring process for the selected curve is complete at block the user may select to proceed with another contour. If another contour is to be performed the process returns to block where the contour is initiated. If no further contours are to be performed the method of the present invention proceeds generally towards smoothing the data represented by block .

Returning to after selection of the curve for contouring a wireframe or grid may be displayed approximately over the surface at block . A hidden line algorithm may be used to generate a uniform mesh that approximates the collection of contoured objects. The hidden line algorithm uses the curve offset process and a projection process. In the projection process the geometries that have been contoured are projected on the set of contour areas. This mesh is used to smooth the geometries and create organic shapes. Generally translations and dynamic modifications of contour area surfaces are required an amount of time to update the display of a contour area after its parameters have been modified such that it is impractical to perform dynamic displays. To improve the performance and be able to understand the effect of modifying the basic shape of surfaces through changes in the parameters an approximation of the contour area through curves that conform to the contour area shape may be displayed. These curves conform to the shape of the contour area and may be referred to as wireframes. illustrates a contour area and a wireframe of the contour area.

Optionally text may be added to the image shown at block of . For example text may be created using a text mapping functionality. In a specific embodiment text is created using a text mapping functionality in Next Gen JDS.

If desired or as called for by particular images the contours may be triangulated shown at block of . To triangulate the contours the curves from the contour are selected. The curves are then offset by a uniform distance. The offset distance may be predetermined or may be determined via trial and error. If the initial offset is too large the offset is reduced and fillets are added. In one embodiment to create the curve offsets a C API discussed below to a third party library is created to extract curve data provided by UGOPEN. The curve data is discretized to a given tolerance by a collection of poly segments. illustrates an exemplary spline and approximation to the given tolerance. The resulting entities are created as degree 1 Splines by poles and fed to a curve offset engine.

Returning to a hidden line mesh may optionally be generated shown at block from the contours using the hidden line algorithm.

The geometries that have been contoured are projected onto a surface shown at block of . For example if the image is to be used on a ring the geometries are projected onto a surface that represents the shank of the ring. If the figure has been triangulated this involves projecting the vertices of the contours onto the surface. This enables the image to be projected onto the surface. For example illustrates a three dimensional image and illustrates the same three dimensional image projected onto a spherical dome .

Smoothing of the image is performed at block of and block of . To smooth the image the centroid of each of the triangles formed is selected. A vertex is chosen and for each triangle that contains the vertex the centers are averaged. For the purposes of smoothing the center is the average of three vertices. This process is repeated for a fixed number of iterations for example ten to fifteen.

Additional techniques may be used for the creation of organic soft features. For example in an image having walls transitioning from an upper contour to a lower contour a slight slant can be noted on these walls. One technique involves adding more slant to the walls by specifying an angle at which the walls would be tilted. Any technique permitting recontouring of portions of the mesh by drawing a closed curve around the section of the mesh and redoing the contour locally may be used. In such techniques the smoothing algorithm operates at a neighborhood of the new recontoured sections of the mesh.

The method may be used for generating an image for engraving on a piece of jewelry for example a ring. In such usage a tool path may be generated for the engraving. Thus as shown at block of a tool path may generated on the projected geometries. If the geometry is a contour area the tool path is crated as a raster tool path. If the geometry is a contour curve the tool path is a contour curve.

A particular embodiment of software is provided for implementing the method for smoothing images of the present invention. However any suitable software may be used to implement the method.

In one embodiment the software UGOPEN has base UG functionality which provides basic CAD operations. The software supports NURBS trimmed surfaces and Facetted Model entities as well as provides an integrated CAM environment. A functional graphical user interface GUI may be provided to support additional enhancements through the UGOPEN application programming interface API . Specific functionality may be implemented with UGOPEN Third Party Libraries Proprietary code.

A wizard is provided for graphics control. The wizard generates a standard MFC based dynamic link library DLL without any OpenUG functionality. From this layer a wrapper is called to OpenUG and general purpose geometry libraries In some embodiments such wrapper may be omitted.

As shown in in the specific embodiment three application programming interfaces APIs are provided. The first API is C API Third Party and Proprietary DLL . The second API is C API UGOPEN DLL . This API is built on core UGOPEN functions . The third API is C Mixed API DLL . This API is built on core UGOPEN functions and third party functions . More or fewer APIs may be provided in other embodiments.

In the embodiment shown five types of libraries are used. These include proprietary source developed in C an API written in C built on core UGOPEN functions third party libraries that handle NURBS and triangular data libraries that use MFC modeless dialog boxes and libraries that mix UGOPEN with other libraries. The specific libraries provided may vary. All of the libraries generated may be custom to the software for implementing the method for smoothing images. Alternately in the embodiment here described third party libraries may be used as available. By utilizing multiple libraries the code is easy to maintain and functionality may easily be added.

The C API Third Party and Proprietary the C API UGOPEN and the C Mixed API together are accessible vie MFC dialog boxes . The MFC dialog boxes may be accessed via a ufusr entry point . In one embodiment the MFC dialog boxes are supported through Visual C .

In a specific embodiment the UGOPEN functionality is encapsulated. An API is provided to access UGOPEN functions calls. Thus modules that call on UGOPEN functionality may be written through the API. The API encapsulates the UGOPEN calls. The software includes classes supporting basic UG Calls. For example UGSurface UGCurve and UGLock. Of course other classes may be provided.

Graphics operators using the software of the embodiment described are provided with keyboard functionality to speed creation of 3D models. This is done by providing a control class that generically inherits from a not yet defined existing control. Inheriting from existing Windows controls edit control spin control button control slider control combobox control etc. allows to compactly re implement the existing Windows control with the functionality to process keyboard events.

In a specific embodiment curve chaining as at block of is done using a function of the software called Join. The segments and curves to be joined are selected each segment is looped through to find matching end points and chains are constructed. Phrased otherwise a collection of segments to be joined are selected UGOPEN converts each curve to a local NURBS format and UGOPEN generates a union between the collection of segments.

The software may provide various dialogs for aiding user control. For example a contour dialog for contouring loops block of . UGOPEN makes it easy for a user to associate data related to its creation to the entity tags. Attributes on the trimmed surface entity store the parameters used to generate the surface. These parameters may be read by an editing function discussed below that permits the user to further modify the geometry.

To create curve offsets for triangulation of the contours as in block of the C API to a third party library extracts curve data provided by UGOPEN. The curve data is discretized to a given tolerance. As discussed above the curve data is discretized to a given tolerance by a collection of poly segments. A library such as TSLIB.DLL may be used to approximate NURBS curves by poly segments to a given tolerance. The resulting entities are created as degree 1 Splines by poles and fed to a curve offset engine. The resulting entities are created as degree 1 Splines by poles and fed to a curve offset engine. One of the APIs or calls to a library such as a third party library to generate an advancing front triangulation.

Software such as UGOPEN implementing the method for smoothing images provides clean interfaces for the creation and editing of facetted models. Further scaling and translation of facetted models is possible. The triangles belonging to a particular facetted model may be accessed independently and edited.

Although the present invention has been described with reference to preferred embodiments persons skilled in the art will recognize that changes may be made in form and detail without departing from the spirit and scope of the invention.

