---

title: Method for verifications and fast QoS establishment
abstract: A wireless communication system is provided for rapidly establishing the QoS resource on different communication networks. In this system, the NAP evaluates a network resource used by the MT, and generates the QoS history information unit indicating the evaluation result. The AAA authenticates the QoS history information unit generated by the NAP. The NAP transmits the authenticated QoS history information unit to the MT. The MT request for a resource establishment to the NAP when switching the communicating party from the NAP to the NAP, and transmits the QoS history information unit. The NAP verifies the authenticity of the QoS history information unit to the AAA when receiving the request for resource establishment from the MT and allocates the network resource to the MT based on the QoS history information unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08195175&OS=08195175&RS=08195175
owner: Panasonic Corporation
number: 08195175
owner_city: Osaka
owner_country: JP
publication_date: 20051228
---
The present invention pertains to resource management in communications networks and more particularly it relates to the verification and establishment of quality of service resources in mobile environments.

The increasing popularity of mobile wireless communications has resulted in the development of numerous communications technologies. Each technology addresses user needs in different environments under different circumstances or during different time periods. Consequently the entirety of user needs is addressed by a combination of different technologies. So users will utilize heterogeneous communications networks to satisfy their needs.

Among the numerous technologies is the IEEE 802.11 wireless local area network WLAN . This communications technology is used in localized areas of high communications activity or hotspots. They are generally available at locations such as residences offices and shops. IEEE 802.11 WLANs are characterized by gross achievable data rates of 11 Mbps or 54 Mbps. This is the data rate available at the physical layer. The typical sustained throughput as calculated at the IP layer is approximately 4 Mbps to 5 Mbps and 10 Mbps to 20 Mbps respectively due to header signaling and timing overheads. Due to its contention based CSMA CA radio access technique IEEE 802.11 WLANs are also characterized by high packet loss rates and long radio access delays. The performance of IEEE 802.11 WLANs is also affected by their locations. For example IEEE 802.11 WLANs located in an office environment are utilized by more users than those in a residential environment. As a result the load levels and consequently delays are higher for office IEEE 802.11 WLANs.

Another technology that addresses user needs is the cellular GPRS network. This communications technology has been used to cover large areas of many square kilometers. Cellular GPRS networks are characterized by gross achievable data rates of 171 Kbps. Due to its contention free TDMA radio allocation technique cellular GRPS networks are characterized lower packet loss rates and shorter radio access delays as compared to IEEE 802.11 WLANs.

Another communications technology that is currently being increasingly deployed is cellular third generation 3G networks. This technology is used to cover large areas similar to those of cellular GRPS networks. Cellular 3G networks are characterized by gross achievable data rates of 384 Kbps with further developments in process of delivering even greater data rates. Due to its radio allocation technique in which unique codes are used for radio access contention is avoided. This leads to lower packet loss rates compared to IEEE 802.11 WLANs. Given its nascent state cellular 3G networks are not as widely available as cellular GPRS networks.

In general communications network technologies are characterized by differences in achievable data rates or throughput packet loss rate retransmission delay retransmission attempts radio access delay and network load conditions. The resulting heterogeneity requires innovative methods for effective operation.

Mobile wireless user terminals typically use a combination of different communications technologies to meet their needs. For example a mobile wireless user terminal will use a multi mode terminal device to access an IEEE 802.11 WLAN while at home then switch to a cellular GPRS network when driving from home to the city then switch again to a cellular 3G network when entering the coverage area in the city downtown area and finally switch back to an IEEE 802.11 WLAN when reaching the office.

So as mobile wireless user terminals switch between technologies of different communications networks their varying characteristics and conditions alter the quality of service QoS performance for the users and their applications. For example when switching from an office IEEE 802.11 WLAN to a cellular 3G network users encounter lower throughput and simultaneously reduced packet loss rates and shorter radio access delays. So if the user was using a streaming video application there will be an abrupt disruption or degradation of video quality after the network switch. Application performance must be preferably seamless when switching from one type of network technology to another. Alternatively application performance must be gradually adapted to prevailing network conditions and characteristics.

The transition period between one communications network to another is a critical part of communications. It is during this period that mobile wireless user terminals and their applications are most vulnerable to disruption. This is seen by the fact that in traditional non heterogeneous communications networks service providers assign greater priorities to transitioning sessions as compared to newly originating sessions.

Furthermore due to the changes in link characteristics resulting from switching between communications networks mobile terminal devices must map their existing QoS requirements to the new link characteristics and conditions. This is an intensive and time consuming task for mobile terminal devices which have limited battery power. When a user switches frequently mapping of QoS requirements becomes a processing overhead that adversely affects QoS performance. Additionally signaling required for negotiating QoS resources at new communications networks is also time consuming because greater exchanges are required to confirm and establish appropriate QoS requirements which are not known to the mobile terminal device.

Another problem arising from switching between technologies of different communications networks is that QoS resources are not efficiently allocated due to differences in mobility conditions. For example when two users switch to an IEEE 802.11 WLAN a first user from a cellular 3G network and a second user from another IEEE 802.11 WLAN both will make identical QoS resource requests to the new IEEE 802.11 WLAN. However the first user from the cellular 3G network will have substantially lower actual throughput requirements due to the user s past history with the lower throughput cellular 3G network. So allocating identical QoS resources to both requests is inefficient as the first user from the cellular 3G will not completely utilize them. This problem is exacerbated when there are large numbers of users moving to an IEEE 802.11 WLAN from different types of previous communications networks.

Related to the problem of inefficient resource allocation is the problem of inaccurate QoS resource requests. Based on extant technologies and prior arts it is not possible for a communications network to verify the exact nature of a user s QoS resource request. As a result a communications network must allocate the entirety of request QoS resources even if the user utilized substantially lower resources at a previous communications network. For example when a user switches from a first to a second communications network it is not possible to verify which type of network the user switched from the level of resource utilization at the first network and the time duration spent at the first network. As a result the second communications network cannot allocate the optimal level of QoS resources. So inaccurate resource requests whether legitimate or illegitimate cannot be verified by technologies of existing communications networks.

Such problems of abrupt performance changes switching overhead inefficient QoS resource allocations and unauthenticated QoS requests deprives mobile wireless user terminals of seamless communications. Consequently mobile wireless user terminals suffer from poor QoS performance.

 Prior Art 1 illustrates a method for adjusting QoS performance when a mobile wireless user terminal switches from one communications network to another. The method relies on an active packet indicating QoS characteristics of the first communications network being sent to the second communications network. The method despite its theoretical basis has limited practical appeal because it requires the two different networks to be in communications with each other. In reality communications networks of different technologies are not communicably coupled. This is because of security concerns competitive advantage and incompatibility. So the proposed method is not effective in solving the needs of mobile wireless user terminals.

 Prior Art 2 presents a method for a first communications network to determine the QoS conditions at a second communications network by means of ICMP time stamp messages. This method is disadvantaged similarly to Prior Art 1 in that it requires the two networks to be communicably coupled in order to be effective. So in practice this method is not a feasible solution to address the problems faced by mobile wireless user terminals that switch between different communications networks.

 Prior Art 3 illustrates yet another method to address the needs of mobile wireless user terminals switching between communications networks. This method utilizes foreign agents at each communications network and requires them to collaborate to provide consistent QoS across handovers. This is not feasible for the practical cases in which mobile wireless user terminals switch between distinct communications networks that do not offer a medium for coordination. The foreign agents of this method are not effective in addressing the problems highlighted earlier.

The prior arts discussed insofar illustrate the lack of existing mechanisms to address the needs of mobile wireless user terminals that switch between distinct communications networks. In particular these users are faced with the problems of abrupt performance changes switching overhead inefficient QoS resource allocations and unauthenticated QoS requests which consequently deprive them of seamless communications.

In view of the above discussed problems it is the objective of the present invention to provide systems and methods for fast establishment of QoS resources across heterogeneous communications networks.

It is another objective of the invention to provide methods for monitoring and updating QoS utilization histories of mobile wireless user terminals.

It is another objective of the invention to provide methods for verifying QoS requests from mobile wireless user terminals switching across heterogeneous communications networks.

It is yet another objective of the invention to provide methods for allocating QoS resources based on actual needs of mobile wireless user terminals.

It is yet another objective of the invention to provide methods for gradually adjusting initial allocations of QoS resources after a determined period of mobile wireless user terminals receiving communications services.

The present invention addresses the problems relating to QoS and network resource allocations across communications networks. In particular the invention addresses the problem of abrupt changes in network conditions and characteristics as mobile wireless user terminals move across communications networks. The invention also addresses the problems of signaling and processing overhead and inefficient resource allocations for mobile wireless user terminals. Another problem the invention addresses is the verification of resource requests by mobile wireless user terminals.

In its broadest aspect the present invention provides a system for generating resource utilization updates of a communications network comprising means for evaluating resource utilization and means for assigning verifications to resource utilization evaluations whereby said resource utilization updates summarize communications network services received by a mobile wireless user terminal of said communications network.

In another aspect the current invention presents a system for verifying resource utilization updates comprising means for assigning verifications to said resource utilization updates based on security association of mobile wireless user terminals with a single or plurality of external entities.

In a preferred form of the invention for verifying resource utilization updates said external entities are authentication authorization and authentication AAA entities.

Another aspect of the present invention presents a system for fast establishment of network communications by a mobile wireless user terminal comprising means for receiving resource utilization updates of a first communications network and means for providing said resource utilization updates from a first communications network to a second communications network whereby signaling for negotiating resources at said second communications network is partially or wholly substituted by means of said resource utilization updates.

In a preferred form of the invention for a system of fast establishment of network communications said first and second communications networks are distinct said distinctions comprising technologies characteristics and conditions.

In another preferred form of the invention for a system of fast establishment of network communications said resource utilization updates are provided by said mobile wireless user terminal moving from said first communications network to said second communications network.

In yet another aspect of the invention a system for efficient allocation of network resources is presented wherein comprising means for verifying resource utilization updates of a mobile wireless user terminal and means for allocating network resources consistent with the actual resource utilizations of said mobile wireless user terminal at a first communications network whereby said actual resource utilizations are determined from said resource utilization updates of said mobile wireless user terminal.

Another aspect of the invention presents a system for efficient allocation of network resources in a communications network comprising means for adjusting initial resource allocations to a mobile wireless user terminal after a determined time period of providing communications services to said mobile wireless user terminal by said communications network.

In a preferred form of the invention for efficient allocation of network resources said adjustments are made gradually to allow communications applications of said mobile wireless user terminal to gradually adapt to prevailing conditions and characteristics of said communications network.

In the following description for the purpose of explanation specific numbers times structures and other parameters are set forth in order to provide a thorough understanding of the present invention. However it will be apparent to those skilled in the art that the present invention may be practiced without these specific details.

With reference to a communications network CN provides services to a single or plurality of mobile terminals MT such as MT . CN comprises network controller NC and a single or plurality of network attachment points NAP such as NAP . CN may be interfaced to a single or plurality of other communications network such as Internet.

NC is representative of a controller entity capable of coordinating network resources provisioning NAPs such as NAP and controlling MTs such as MT . NAP is representative of a contact entity capable of establishing and maintaining radio interfaces with MTs such as MT monitoring radio activity and relaying communications traffic between MTs and CNs. NC and NAP are communicably coupled by means of wireline or wireless links.

NC and NAP assume different roles for different communications networks. For IEEE 802.11 WLANs NC represents a WLAN controller or WLAN switch and NAP represents a wireless access point WAP . For such cases NC and NAP may communicate using the IETF CAPWAP protocol. For cellular GPRS and cellular 3G communications networks NC represents a mobile switching center MSC or base station controller BSC and NAP represent a base transceiver station BTS .

CN has access to an authentication authorization accounting AAA server . CN uses protocols such as RADIUS for communications with AAA .

In accordance with the present invention NAP regularly monitors radio link performance metrics for each of a single or plurality of MTs that are in contact such as MT . The radio link performance metrics comprise throughput achieved packet or bit loss rates radio propagation delays and delay jitter. These metrics are then regularly sent to NC .

NC regularly monitors communications performance metrics for each of a single or plurality of MTs of CN . The communications performance metrics comprise retransmission attempts communications session establishment times memory utilization scheduling priorities volume to traffic transmissions transmission durations and network load levels. Another communications performance metric is a user satisfaction index which determines the degree to which CN satisfies a user s needs. The user satisfaction index is based on feedback from users.

NC combines radio link performance metrics with communications performance metrics to derive a QoS history information unit. The QoS history information unit summarizes the communications experience of MT at CN . The QoS history information unit is assigned a verification code that is derived from the security association of MT with AAA . The verification code serves to authenticate the veracity of the QoS history information unit and prevents subsequent changes to it by either MT or any other entity. The QoS history information unit is assigned a time stamp to specify its time relevance.

The verification code is derived by a performing a reversible and strongly collision free hash function over the entirety of the QoS history information unit. This results in a verification code of fixed length for any given length of the input information unit. In one embodiment the hash function is a mix function using a sequence of addition subtraction exclusive or and bit shift. The authentication secret used in the security association of MT with AAA is used as either for the exclusive or or bit shift operations of the hash function. The hash function may further comprise an addition subtraction exclusive or or bit shift operation based the time stamp of QoS history information unit derivation. As a result the verification code is unique for each instance a QoS history information unit is derived for a MT .

In one embodiment the time stamp is based on a synchronized timer between all network controllers such as NC and a common timer such as that in the AAA . Such synchronization across heterogeneous communications networks allows each network controller to maintain the same time. In an alternative embodiment the time stamp is assigned by the AAA as part of the verification code.

The QoS history information unit presents a snapshot of the communications services received by MT from CN . This information is made immediately available to subsequent communications networks to which MT moves such that signaling and processing overhead are reduced and seamless communications services are provided.

As a result of the QoS history information unit authenticated with the verification code and time stamp a second communications network can verify the actual QoS resource needs of a MT moving from a first communications network and accordingly provision resources so as to efficiently allocate resources and deliver seamless communications services.

The sequence of operations among NC NAP AAA and MT is described hereinafter with aid of . Additionally is used to illustrate the structure of messages exchanged in the current invention. Each message begins with a 1 byte Type field with a value corresponding to the nature of the message. Subsequent descriptions of messages include their Type values. The C field is denotes if the message is destined for a network controller or originated from a network controller. A 0 value denotes a message from a NC and a 1 value denotes a message to a NC. The subsequent Length field denotes the total length of the message in bytes. Subsequent Message Element fields comprise various parameters and settings for the message type.

In the operational sequence NAP and NC regularly monitor radio link performance metrics and communications performance metrics respectively in a monitoring step . The monitoring step may be performed periodically in mutual coordination or be triggered by other events. This step enables NAP and NC to gather information on the state of the communications network CN and the state of mobile terminal MT .

Upon gathering adequate information on the radio link performance metrics NAP sends a Radio Status Update message to NC in a step . This message has a Type field value of 1 . The Radio Status Update message contains evaluated or computed values of the radio link performance metrics. The metrics are organized as information message elements according to a pre determined format within the Radio Status Update message. The message elements for the Radio Status Update message comprise Average Loss Rate Average Transmission Rate Average Delay etc.

In a step NC sends a Verification Code Request message to the AAA server AAA . This message has a Type field value of 2 . The Verification Code Request contains information derived from security state maintained by NC . This security information is included in the message element field . AAA provides the verification code to NC in a Verification Code Response message with Type field value of 3 in a step . The verification code is derived from security state corresponding to MT which is maintained by AAA and NC . Additionally the AAA includes its time stamp in the Verification Code Response message . Alternatively the verification code may be derived by NC alone this code still based on the security association with AAA . The message elements of the Verification Code Response message comprise the verification code and time stamp.

In a step NC prepares a QoS history information unit for MT . In this step NC combines information from the Radio Status Update message of step with its own communications performance metrics. The combination includes a list of information elements corresponding to the values of the evaluated or computed metrics. The QoS history information unit also comprises a time stamp to specify the time relevance of the information contained within. The time stamp may be assigned by the NC using a timer synchronized with AAA or the time stamp may be assigned by the AAA during its derivation of the verification code. Then using the verification code the QoS history information unit is authenticated from NC . This serves to inform subsequent communications network that the QoS history information unit accurately describes the status and resource utilization history of MT at CN .

After preparing the QoS history information unit NC sends a QoS History Update message to MT in a step . The QoS History Update message has a Type field value of 4 and comprises the time stamped and verified QoS history information unit as its message elements . Upon receiving the QoS History Update message MT removes any previously stored QoS history information units and stores the new information unit.

In one embodiment the QoS history information unit is used to reduce signaling and processing operations during transitions between heterogeneous communications networks and enhance seamless communications. As described above the transition period between communications networks is critical and must ensure that mobile wireless user terminals receive communications services that are as seamless as possible. It is for this reason that in the present embodiment the initial signaling required between a mobile terminal and new communications network are bypassed by means of sending the QoS history information unit. The new communications network verifies the information unit and establishes the necessary resources and state information without requiring time consuming signaling operations.

In the current embodiment of the invention MT moves from a first communications network of a first communications technology type CN to a second communications network of a second communications technology type CN . In general when a mobile terminal moves from a first to a second communications network it establishes a network connection in a two step process. A mobile terminal first establishes a link transport such as selecting radio parameters authenticating and associating itself with the new communications network. Then a mobile terminals establishes QoS service such as negotiating QoS resources network settings etc. For example in IEEE 802.11 WLANs link transport establishment comprise IEEE 802.11 association and authentication while QoS service establishment comprises IEEE 802.11e exchanges.

In CN is assumed to be a cellular 3G communications network while CN is assumed to be an IEEE 802.11 WLAN.

When MT moves from the cellular 3G network CN to the IEEE 802.11 WLAN CN it first establishes a link transport with CN in accordance with the IEEE 802.11 standards specifications. This entails selecting a radio channel from the information presented in IEEE 802.11 Beacon messages or IEEE 802.11 Probe Response messages associating with CN using IEEE 802.11 Association Request and IEEE 802.11 Association Response messages and authenticating with CN using IEEE 802.11 Authentication messages. In accordance with the current invention MT sends its QoS history information unit to CN during link transport establishment. This information unit may be sent during the exchange of IEEE 802.11 Authentication messages between MT and CN .

The IEEE 802.11 standards specifications allow for Extensible Authentication Protocol EAP packets to be transported in IEEE 802.11 data packets during the authentication exchanges. In the current invention a QoS history information unit from MT is sent to NC of CN using IEEE 802.11 data packets during the authentication exchanges.

Upon receiving the QoS history information unit from MT NC first verifies the authenticity of the information unit by communicating with AAA and analyzing the time stamp. If the verification code and time stamp of the QoS history information unit are consistent with the expectations of the NC the information unit is considered for further processing.

After verifying the QoS history information unit NC determines the QoS resource utilization traffic pattern and communications performance history of MT . This corresponds to the step in . In this step NC maps information from the QoS history information unit to corresponding network configuration parameters at the second communications network CN . This step is to provide MT with communications services at CN that are consistent with those it received at the previous CN . Step allows for MT to quickly and accurately establish QoS resources at the new communications network.

Then with the QoS history information unit NC allocates appropriate levels of QoS resources to MT without requiring the IEEE 802.11e QoS exchanges as part of the QoS service establishment. This is performed in a step of . The QoS resources are allocated based on configuration parameters determined in the step . For instance using the QoS history information unit NC determines that MT was previously serviced by a cellular 3G communications network in which the net achievable throughput would be less than that available at CN . NC also determines that CN entailed lower packet loss rates and shorter radio access delays for MT . So in a preferred form of the embodiment NC of an IEEE 802.11 WLAN assigns higher radio access priorities for MT so as to enable seamless communications experience for MT . In exemplification higher priorities are assigned by means of short AIFSN durations. The higher priorities compensate for longer radio access delays at IEEE 802.11 WLAN as compared to the cellular 3G communications network CN . The initial higher priorities may be altered after a given duration. The given duration may be predetermined or instantaneously determined by CN or MT .

The present embodiment illustrates how MT receives quicker communications services at a new communications network CN as the QoS service establishment phase is bypassed. The invention enables the QoS history information unit to aide CN in determining the appropriate levels of QoS resources necessary for MT without the need for QoS signaling.

CN determines the appropriate QoS levels with the aim of making communications characteristics at CN as consistent as possible to that of CN . In this process CN uses the QoS history information unit to derive configuration parameters and allocate network resources such that communications services provided to MT are similar to the services received by MT at the previous CN . According to the invention resources are allocated so as to ensure throughput achievable at the second communications network CN is equivalent or proportionally equivalent to throughput achieved at the first communications network CN . Similarly other resources are allocated at the second communications network so as to normalize or proportionally normalize other communications metrics as provided in the QoS history information unit by MT .

An example of the resource allocation is provided when MT moves from a first cellular 3G communications network CN to a second IEEE 802.11 WLAN CN its QoS history information unit contains information on communications performance and characteristics in CN . In an exemplification the QoS history information unit comprises MT s 50 Kbps average throughput 80 average transmission success rate without retransmissions and 20 ms average transmission delay at CN . Upon receiving the QoS history information unit from MT and reviewing the information CN in exemplification allocates scheduling resources so as to enable MT to achieve throughput of 50 Kbps. CN also assigns high IEEE 802.11e priorities so as to make the average transmission success rate and average transmission delay at CN match or closely correspond 80 and 20 ms respectively at CN .

Furthermore QoS services for MT are established quicker using the QoS history information unit. In the absence of the current invention MT must first map its application level needs to the network communications network. This process is complicated by the limited processing power of mobile terminals and MT s lack of accurate knowledge of the new communications network. The current invention overcomes these problems and enhances communications performance for MT and CN .

In an embodiment related to the IETF CAPWAP architecture CN is representative of an IETF CAPWAP enabled communications network. Here NAP and NC are representative of CAPWAP enabled wireless termination point WTP and WLAN controller respectively. illustrates a message sequence in accordance with the invention. The message sequence is separated for local MAC WTP and split MAC WTP.

When a MT moves from a previous CN to new CN it first establishes a link transport in accordance with IEEE 802.11 specifications. Then MT encapsulates its QoS history information unit within an IEEE 802.11 data packet as part of the authentication exchange and sends it through the IEEE 802.1X uncontrolled port.

In case of NAP being a local MAC WTP upon receiving an IEEE 802.11 data packet containing the QoS history information unit of MT the WTP extracts the information unit in a step and encapsulates it in a CAPWAP QoS Terminal Configuration message in a step . The CAPWAP Terminal Configuration message is then sent to the WLAN controller NC . Incase of NAP being a split MAC WTP the IEEE 802.11 data packet containing the QoS history information is encapsulated in to a CAPWAP Configuration message in a step and forwarded to WLAN controller NC in .

Upon receipt of the QoS history information unit either in or the WLAN controller NC authenticates the information unit in a step . The step comprises establishing the authenticity of the verification code and time stamp. The verification step may involve communicating with AAA . This is accomplished using existing AAA access methods such as RADIUS. Then NC determines and allocates the appropriate level of QoS resources for MT in a step . The step also involves determining resource allocation information for the WTP NAP . In the case of the NAP being a local MAC WTP the determined information is sent in a CAPWAP Terminal Configuration Response message and in the case of NAP being a split MAC WTP the determined information is sent in a CAPWAP Configuration Response message. After receiving the QoS resource allocation information NAP then establishes the appropriate QoS settings in a step . NAP communicates the QoS settings with MT in a QoS confirmation message encapsulated in accordance with IEEE 802.11 standards specifications such as with an IEEE 802.11 data message or with an IEEE 802.11 Probe Response message .

This embodiment illustrates how the present invention operates in the IETF CAPWAP context. It shows that the CAPWAP protocol may use the QoS history information unit to enhance communications performance for MT and CN .

Network controller NC comprises a number of system blocks such as the Network system block NET which sends and receives data general control and QoS control communications frames from other network entities such as NAP AAA and other networks. Communications frames are exchanged between system blocks on paths corresponding to they type of frames. Consequently there are three types of paths that are marked with D C and Q to denote exchange of data general control and QoS control communications frames respectively. NET may operate based on any communications standards such as IEEE 802.11 Ethernet and IEEE 082.16. All communications frames received by NET comprising data general control and QoS control frames are appropriately forwarded to other system blocks such as Controlling Unit CU QoS Evaluator QEV or Scheduler SCH via the data general control or QoS control paths.

CU is the main management system block. It performs computations and processing necessary for the overall control of the communications network. It also comprises a timer module. CU coordinates and supervises the operations of system blocks within NC and also other network elements within the communications network such as NAPs. General control signals are coordinated using the C path while QoS control signals are coordinated using the Q path. CU interfaces with SCH over D and C paths to transmit and receive data and control communications frames. SCH manages a single or plurality of queues and enforces priorities among them. The Scheduler SCH interacts closely with NET over C and D paths and with CU over C path.

The Storage Unit STU comprises buffer or memory modules to store data and control information. STU and CU are interfaced by D and C paths.

In accordance with the invention the QoS Evaluator QEV and QoS Processor QP are the main system blocks. It is the responsibility of QEV to verify the authenticity of QoS history information units received from NET over the Q path in coordination with CU over the Q path. QEV processes the verification code with input received from the AAA server over the C path. This system block comprises computing a similarity function to determine the authenticity of QoS history information units. QEV also verifies the time stamp of QoS history information units to ensure that QoS history information units are recent and accurate representations of a wireless mobile user s communications performance in a previous communications network. This is done in coordination with the timer module of CU over the Q path. The outcome of QEV s evaluation is sent to CU and the QoS Processor QP both over the Q paths.

QP is responsible for quickly allocating appropriate QoS resources to a new MT such that communications performance at the new communications network is consistent with that at the previous communications network. QP determines the appropriate amounts of buffer usage priority levels scheduling attributes bandwidth reservations and other parameters. It then corresponds with other system blocks such as the Controlling Unit Scheduler and Storage unit over their respective C paths to allocate corresponding QoS resources to the particular MT.

Network attachment point NAP of comprises similar system blocks to NC with the exception of the QEV . QEV is only present in NC as the sole system block that processes QoS history information units. The system blocks of NAP have similar functionalities but with limited scope as compared to those of NC . This is because system blocks of NAP are only concerned with the operations of NAP . System blocks of NC on the other hand are concerned with the operations of the communications system as a whole including the numerous NAPs and as a result have greater scope and capabilities. NAP additionally comprises a Radio Network RNET system block to communicate with mobile terminals. RNET may communicate with MTs using a single or plurality of communications protocols such as IEEE 802.11 IEEE 802.16 GPRS and WCDMA.

So in accordance with the embodiment relating to CAPWAP NET of NAP first receives the QoS history information unit within an IEEE 802.11 data frame through the uncontrolled port. The IEEE 802.11 data frame is then passed to the Controlling Unit CU . If NAP is a local MAC WTP CU extracts the QoS history information unit from the IEEE 802.11 data frame and performs an extraction step followed by encapsulation in a CAPWAP Terminal Configuration message in a step . If NAP is a split MAC WTP CU encapsulates the entire IEEE 802.11 data frame in a CAPWAP Configuration message in a step .

The encapsulated CAPWAP messages are then sent to the Scheduler SCH for transmission scheduling. SCH then sends the messages to NET for transmission to the network controller in either or depending on the type of WTP either local MAC WTP or split MAC WTP respectively.

NC receives the CAPWAP message through NET before passing it to CU . The Controlling Unit then extracts the QoS history information unit and sends it to the QoS Evaluator QEV for verification. After verification QP determines appropriate QoS resource levels and makes corresponding allocations.

The sequence of operations for the fast establishment of QoS embodiment is described hereinafter with aid of . The operations commence when the mobile terminal MT moves from a first communications network CN to a second communications network CN in a step . The movement may be a soft handover between the communications networks or an explicit disconnection with CN followed by a connection with CN . The invention applies to all cases where mobile terminals move from one communications network to another.

Upon moving to a new communications network CN MT first establishes a link transport with it. So in a step MT sends link transport establishment messages. The operations comprising step are specific to the technology of CN . So in the case of IEEE 802.11 WLANs step comprises exchanges of IEEE 802.11 Probe Association and Authentication messages. In the case of cellular 3G communications networks step comprises exchanges in the dedicated control channel DCCH dedicated traffic channel DPDCH and broadcast control channel BCCH . In all cases step also comprises MT sending its QoS history information unit in a QoS History message encapsulated in the technology specific transport. The QoS History message has a Type field value of 5 . This message comprises a QoS history information message element that contains the information unit. The step is performed between MT and the Radio Network system block RNET of NAP .

In a step NAP sends the QoS history information unit to NC in a QoS notification message with Type field value of 7 and message element comprising the information unit. The QoS notification message may be transported from NAP and NC using the IETF CAPWAP protocol GPRS Gs interface GPRS Gb interface or other transport protocols used between NAP and NC . This step is performed between NET of NAP and NET of NC .

Upon receiving the QoS history information unit of MT NC must verify its authenticity. So in a step NC sends a security association request message to AAA which comprises a query based on the QoS history information unit. AAA sends a reply to the query in a security association response message in a step . The steps and may be part of RADIUS exchanges between NC and AAA .

The 1 byte Code Field denotes the type of RADIUS message and is assigned a value currently unassigned by the Internet Assigned Numbers Authority IANA . The value may be 254 to signify a Security Association Request message and 255 to signify a Security Association Response message .

The next 1 byte field Identifier is used to match corresponding Security Association Request and Security Association Response messages. The 2 bytes Length Field illustrates the total length of the Security Association packet. Next the 4 bytes Authenticator Field contains a shared secret between the NC and AAA and used to authenticate each of the Security Association Request and Security Association Response messages.

Subsequent to the Authenticator Field are the Attributes used to identify the exact nature of the message. Each attribute is assigned an attribute type code with a value currently unassigned by IANA. A first attribute is the MT Identification with type code 244 which serves to identify the MT for which the corresponding Security Association message structure is used. The value may correspond to that of the Medium Access Control MAC address. The Verification Code attribute with type code 245 contains the verification code received by NC . Upon receipt of such an attribute AAA compares the MT Identification and Verification Code values with its own records for verification. The response of this comparison either positive or negative is sent using the Verification Response attribute with type code 247 .

In an alternative embodiment NC sends a QoS History attribute with type code 1335 containing the QoS history information unit received from MT . Upon receipt of a Security Association Request with this attribute AAA derives the verification code using the corresponding hash function over the entirety of the information unit. The resulting fixed length verification code is sent to the NC in a Security Association Response message containing the Verification Response attribute.

With the Security Association Response message from AAA containing a Verification Response attribute NC verifies the authenticity of the QoS history information unit in a step . The QoS verification step is performed by the QoS Evaluator system block QEV of NC . This verification step takes in to account the time stamp and the verification code. NC may also use network identifications MAC addresses and other identifications to verifying QoS history information unit.

After the verification step NC performs resource allocation in a step . This step is dependent on the verification step of in that positive verification will result in the appropriate QoS resources being provisioned and negative verification will result in minimal QoS resources being provisioned. Step comprises computing appropriate priority levels determining durations of transmission opportunities and assigning network resources for MT to be consistent with its QoS history information unit. This resource allocation step is performed by the QoS Processor system block QP .

NC sends a QoS notification response message to NAP in a step . The QoS notification response message has a Type field value of 8 . This message informs the NAP on the outcome of the verification step and resource allocation step . The QoS notification response message also comprises QoS parameters and instructions within the message element fields for NAP and MT . The QoS parameters are included in the message elements and comprise transmission priorities buffer space allocation transmission rate assignment transmission duration assignment etc. The QoS instructions included in the message elements of the QoS notification response message comprises instructions on how NAP assigns relative priorities allocates resources for existing MTs error handling etc.

After receiving a QoS notification response message NAP performs its own resource allocation step performed by its QoS Processor QP . Given a positive verification of the QoS history information unit step serves to provide consistent communications performance to MT .

NAP then sends a QoS confirmation message to MT in a step . Step is scheduled by SCH of NAP and performed between RNET of NAP and a corresponding system block of MT . Similar to step the operations comprising step are dependent on the communications technology of CN . After completion of step MT begins to receive communications services from CN in a manner consistent with that received at its previous communications network.

In another embodiment of the invention pertaining to efficient QoS resource utilization the QoS history information unit is used to allocate appropriate levels of QoS and network resources to deliver consistent or seamless communications performance to mobile terminals.

Following in accordance with the current embodiment the second communications network CN attempts to adjust its network parameters and settings so as to deliver consistent communications performance to a mobile terminal MT moving from a first communications network CN . The second communications network effects the adjustments based on the QoS history information unit made available from MT . These steps are performed by the QoS Processor QP of NC of the second communications network CN .

In accordance with the invention when MT moves between communications networks that deliver similar communications performance the second CN will adjust its network parameters and settings such that MT achieves communications performance equivalent to that it achieved at the first CN . For example if throughput achieved at the first CN can be achievable at the second CN then CN delivers said throughput. Similarly for delay loss rates and other performance metrics.

If MT moves from a first CN delivering superior communications performance such as higher throughput lower delay lower loss rates etc as compared to a second CN then CN initially adjusts network parameters and settings so as to allocate additional resources such that MT achieves communications performance as similar as possible to that it achieved at the first CN . For example if throughput achieved at the first CN is greater than that can be achieved at CN CN allocates additional resources to MT . If delay or loss rates encountered at the first CN are lower than the delay encounterable at CN CN may assign higher priorities or longer transmission periods respectively to MT for compensation.

If MT moves from a first CN delivering inferior communications performance such as lower throughput higher delay higher loss rates etc as compared to a second CN then CN initially adjusts network parameters and settings such as MT continues to receive similar communications performance as CN for an initial duration after which they are readjusted to higher communications performance levels. For example if throughput achieved at the first CN is lower than that can be achieved at the second CN CN allocates only sufficient resources so as to match throughput levels at CN . This is to ensure efficient allocation among all MTs arriving with varying levels of communications performances at respective previous communications networks.

In the following specific instances of efficient QoS resource utilization in accordance with the invention are disclosed.

If MT moves from a cellular 3G CN to an IEEE 802.11 CN CN provisions higher EDCA priorities and longer transmission opportunities TXOPs to compensate for greater channel loss more retransmissions and longer delays at CN .

If MT moves from a home IEEE 802.11 CN at which achievable throughput is high due to limited contention and load to an office IEEE 802.11 CN at which achievable throughput is low due to greater contention and load CN provisions higher EDCA priorities and longer TXOPs to compensate for lower throughput available.

If MT moves from an IEEE 802.11 CN to a cellular GPRS CN CN assigns a CS 4 or alternative channel coding scheme and multiple packet data traffic channels to MT to compensate for lower throughput available at CN .

The adjusted network parameters are maintained at the second communications network CN for a fixed duration. The fixed duration may be pre determined at the time of associating MT with CN or may be instantaneously determined upon an external trigger or otherwise determined based on network policies. The QoS Processor QP of NC is responsible for maintaining the adjusted network parameters at the second communications network CN .

The current invention ensures that the critical period during and immediately after MT moving from a first communications network CN to a second communications network CN is one in which MT communications services. Furthermore the invention prevents the adverse effects of abrupt changes in network conditions. So MT is provided with a buffer period in which its applications may adapt to actual conditions of the new communications network CN .

Initially during time period MT arrives at CN from CN and begins to receive communications services. The resource level during time period is consistent with that of the resource level received by MT at its previous communications network CN . Resource level is a determination comprising the QoS history information unit of MT inherent network characteristics of CN and prevailing network conditions at CN . Time period provides MT with opportunities to adjust its applications and the user s expectations to the actual characteristics and conditions of CN . It represents a transition period of MT s communications with CN .

Next in the time period QoS resources for MT at CN are adjusted from resource level to resource level . The relative positions of resource levels and in may be altered while still adhering to the invention. QoS and network resources are gradually adjusted during the time period . The gradual adjustment may follow an alternative path from that illustrated in .

In the time period QoS resources for MT are adjusted according to the actual prevailing conditions of CN . The corresponding resource level is representative of the steady state conditions of CN .

This embodiment illustrates how the present invention overcomes the problems of abrupt changes in network conditions faced by mobile wireless user terminals. Resource levels are gradually adjusted to deliver consistent communications performance to mobile terminals.

In another embodiment of the invention corresponding to the IETF NSIS framework the use of QoS history information enhances service establishment for a moving MT and reduces initial signaling overhead. The embodiment is described hereinafter with reference to CN in and the message sequence of . Here MT is a NSIS enabled mobile terminal that is initially attached to CN through a NSIS enabled NAP . MT has a NSIS path established with its destination DST . DST may be within or outside CN .

MT then moves from its initial attachment point NAP to another NSIS enabled attachment point NAP . At first MT performs a link transport establishment step of in in accordance with the communications protocol used between MT and NAP . As a result of this move the path characteristics between MT and its destination DST have changed. Crossover node CRN represents the explicit network location from which the NSIS path changes due to movement of MT .

According to IETF NSIS specifications when MT moves from NAP to NAP it must first determine the characteristics of the new network path to its destination DST . So in accordance with NSIS specifications MT creates Path QUERY messages comprising QSPECs to determine path characteristics. These are then passed to the NS IS GIMPS transport mechanism via an application programming interface API . The Path QUERY messages are then sent to the new NAP in a step . NAP processes the QUERY messages and forwards them to CRN in step . CNR reviews the QUERY message and provides information regarding the network state comprising bandwidth availability priority mapping path loss and delay characteristics etc. in its RESPONSE message in step . The RESPONSE is reviewed by NAP and any additional information is included before forwarding the RESPONSE to MT in a step . After the exchange of NSIS Path QUERY and RESPONSE messages appropriate QoS and network resources are provisioned by NAP and NC . The exchange of NSIS Path Query messages before resource provisioning leads to long service establishment time at NAP .

According to the current invention MT first sends its QoS history information unit to NAP which is received by RNET of NAP accompanying the link transport establishment step of . The information unit provides adequate information to determine QoS resources required for consistent communications performance for MT . Then bypassing the NSIS Path QUERY and RESPONSE exchanges NAP sends the QoS history information unit to NET of NC . This is sent in a QoS Notification message . Upon receiving the information unit QEV of NC evaluates its authenticity and passes it to QP in order to determine appropriate QoS and network resources to deliver consistent communications performance for MT . These operations comprise the step of message sequence . The determined resource parameters are then sent to NAP and exchanged between NET of NC and NET of NAP . The resource parameters are sent in a QoS Notification Response message .

Then QP of NAP uses the QoS and network resource parameters in order to provision appropriate QoS and network resources in a step to deliver consistent communications performance to MT . As a result of the invention the exchange of Path Query messages between MT and NAP is avoided. This leads to quicker service establishment time and consequently consistent communications performance. At a later instance NAP may adjust the QoS and network resources to reflect actual network conditions. At that instance MT will be capable of adapting its application needs and user expectations accordingly.

This embodiment illustrates how the present invention bypasses signaling overhead particularly the Path QUERY and RESPONSE exchanges in the NSIS framework and quickens the service establishment time for NSIS enabled mobile terminals.

In one embodiment of the invention corresponding to scalable audio video AV the QoS history information unit is used to enhance the performance of streaming applications such as streaming audio or streaming video. The embodiment is described in relation to and message sequence of . Here CN is considered to be an IEEE 802.11 WLAN capable of delivering high throughput and CN is considered to be a cellular 3G communications network capable of delivering relatively lower throughput. MT is considered to be using a streaming application.

According to prior arts when MT moves from NAP in CN to NAP in CN it must first map the streaming application QoS requirements to the new cellular 3G link characteristics in a step of . The step comprises mapping application throughput delay jitter and loss rate requirements with available bit rates priority levels SDU size etc. at CN . MT must then negotiate corresponding cellular 3G QoS parameters such as Radio Access Bearer parameters PDP Context Request and PDP Context Modification with NAP and NC of CN . Message sequence illustrates these as the exchange of negotiation request and and negotiation response and . The extended duration required for service establishment at CN leads to adverse effects on streaming application performance.

In accordance with the current invention when MT moves to NAP it first sends its QoS history information unit accompanying the link transport establishment step which it received in CN by RNET of NAP . The QoS history information unit indicates to the QoS Processor QP of NC of the cellular 3G CN the service history of MT . In particular the information unit indicates that MT received relatively high throughput at CN and encountered high packet loss rates and high retransmission attempts.

The information unit is forwarded by NAP in the QoS Notification message which is then verified and correspondingly used to allocate QoS resources by NC in steps and respectively. Subsequently the QoS Notification Response message is sent to NAP for it to perform its own resource allocation step . So in using the QoS history information unit NAP and NC of the cellular 3G CN adjust QoS and network resources without requiring signaling and negotiations with MT . In particular NC adjusts the Radio Access Bearer parameters for MT to proportionally correspond to those at CN . The corresponding PDP Context Response is then generated and sent to MT . As a result the exchange of negotiation request and and negotiation response and are bypassed.

The embodiment illustrates how the invention improves service establishment time and consequently improves streaming application performance in cases of mobility across different communications networks.

The embodiment described hereinafter with reference to highlights efficient resource allocation for among a plurality of moving mobile terminals. There are three heterogeneous communications networks. In the current embodiment CN is considered to be a cellular 3G communications network and CN and CN are considered to be IEEE 802.11 WLANs. Message sequence of illustrates how the operation of invention may be easily extended for plurality of MTs from heterogeneous communications networks.

MT and MT move from their respective communications networks cellular 3G CN and IEEE 802.11 CN to IEEE 802.11 CN in corresponding steps and . NAP and NC must now determine most efficient QoS resource allocation for the two new mobile terminals.

According to prior arts both MT and MT will send similar QoS resource requests as their requests are based only on the characteristics of the new network namely high throughput and high packet loss rates corresponding to IEEE 802.11 CN . However in reality MT and MT will have distinct actual requirements due to their immediate service histories in distinct cellular 3G CN and IEEE 802.11 CN respectively. In particular MT will have actual requirements of relatively low throughput corresponding to throughput of cellular 3G CN relatively low packet loss rates and retransmission attempts. MT will have actual requirements of relatively high throughput corresponding to throughput of IEEE 802.11 CN relatively high packet loss rates and retransmission attempts.

In accordance with the current invention MT and MT send their respective QoS history information units to NC during their link transport establishment with CN in steps and respectively. It is noted that while message sequence illustrates steps for MT occurring prior to those of MT the invention is identically applicable in alternative sequence of steps as the invention operates independently on the QoS history information units from each of the wireless mobile terminals. Since the QoS history information units are validated representations of actual resource utilizations in the previous communications networks they provide NC with the adequate information to make efficient resource allocation decisions.

Upon receiving the respective QoS history information units from MT and MT through NAP in QoS Notification steps and respectively NC verifies their authenticity using their AAA security association with AAA and their time stamps. This is achieved through respective exchanges of and and exchanges of and . . This is followed by the QoS verification steps of and for QoS history information units from MT and MT respectively. Next NC determines that MT had relatively low throughput requirements relatively low packet loss rates and relatively few retransmission attempts in its previous cellular 3G CN . NC also determines that MT had relatively high throughput requirements relatively high packet loss rates and relatively high retransmission attempts in its previous IEEE 802.11 CN . NC then determines that CN need not initially provide identical resource allocations for MT and MT in order to meet their respective actual resource requirements.

Based on the determination of the mobile terminals respective QoS histories NC allocates distinct levels of QoS and network resources to MT and MT in steps and respectively. The resource levels are allocated based on QoS histories in the previous communications networks and prevailing network conditions at CN . Specifically NC initially allocates relatively lower throughput resources to MT as compared to the resources allocated to MT . NC also initially allocates higher integrity resources to MT as compared to the resources allocated to MT . This is to compensate for higher packet loss rates at CN as compared to CN . NC makes such resource allocations so that both MT and MT initially receive communications services that are consistent with those received at their respective previous communications networks. Such an arrangement enables CN to efficiently allocate QoS and network resources to meet actual requirements for mobile terminals. As a result CN according to the current invention can initially accommodate greater number of mobile terminals than those of prior arts. At later instances CN adjusts QoS and network resources for MT and MT based on prevailing network conditions at CN . Subsequently NAP is provided with resource allocation parameters and instructions for MT and MT through QoS Notification Response messages and respectively. Then upon allocating corresponding QoS resources NAP confirms with each MT and MT the allocated QoS resources in steps and respectively.

This embodiment illustrates how the current invention can achieve efficient QoS and network resource allocations for mobile terminals from heterogeneous communications networks. This allows the invention to be highly practical given the actual needs of communications users that receive communications services from a plurality of heterogeneous communications networks. The embodiment also highlights how the invention can be applied to increase instantaneous capacity of communications networks so as to accommodate a greater number of mobile terminals.

Next in a step NC of current CN determines the appropriate QoS and network resource allocations to be made to the entering MT from previous CN. The determination step is based on the QoS history of the entering MT the characteristics and prevailing conditions of the current CN. The determination step comprises further steps for each of major network characteristics. Flowchart illustrates three major network characteristics namely network throughput packet loss rates and network delay . Additional network characteristics may be determined while being within the scope of the current invention.

For network throughput NC checks if the throughput achieved by the entering MT in its previous CN is equivalent to the throughput achievable in the current CN in a step . Differences in network throughput achievable among communications networks may comprise differences in technology such as IEEE 802.11 and GPRS and differences in the distance of an MT to its CN. If the comparison step is positive NC determines in a step initial resource levels such as to maintain consistency between throughput achievable at the current CN and throughput achieved by the entering MT in its previous CN.

If the comparison step is negative NC checks if the throughput achieved by the entering MT is lower than the throughput achievable in the current CN in a step . If the comparison step is positive NC determines in a step initial resource levels such as to maintain consistency between throughput achievable at the current CN and throughput achieved by the entering MT in its previous CN.

If the comparison step is negative NC checks if the throughput achieved by the entering MT is greater than the throughput achievable in the current CN in a step . If the comparison step is positive NC determines in a step initial resource levels such as to allow the entering MT to achieve as high throughput as the current CN can deliver. The determination step may comprise assigning longer duration transmission opportunities in IEEE 802.11 WLANs or assigning greater number of packet data traffic channels in cellular GPRS communications networks.

For packet loss rates NC checks if the packet loss rates encountered by the entering MT in its previous CN is equivalent to the packet loss rates that may be encountered in the current CN in a step . Differences in packet loss rates encountered within communications networks may comprise differences in technology such as IEEE 802.11 GPRS and differences in radio channel conditions such as interference. If the comparison step is positive NC determines in a step initial resource levels such as to maintain consistency between packet loss rates that may be encountered at the current CN and packet loss rates encountered by the entering MT in its previous CN.

If the comparison step is negative NC checks if the packet loss rates encountered by the entering MT is lower than the packet loss rates that may be encountered in the current CN in a step . If the comparison step is positive NC determines in a step initial resource levels such as allow the entering MT to encounter as low packet loss rates as the current CN can deliver. The determination step may comprise assigning higher priorities for transmissions or assigning greater error control information to transmissions.

If the comparison step is negative NC checks if the packet loss rates encountered by the entering MT is greater than the packet loss rates that may be encountered in the current CN in a step . If the comparison step is positive NC determines in a step initial resource levels such as to maintain consistency between packet loss rates that may be encountered at the current CN and packet loss rates encountered by the entering MT in its previous CN.

For network delays NC checks if the network delays encountered by the entering MT in its previous CN are equivalent to the network delays that may be encountered in the current CN in a step . Differences in network delays encountered within communications networks may comprise differences in load levels such as home office IEEE 802.11 WLANs and differences in radio channel conditions such as interference. If the comparison step is positive NC determines in a step initial resource levels such as to maintain consistency between network delays that may be encountered at the current CN and network delays encountered by the entering MT in its previous CN.

If the comparison step is negative NC checks if the network delays encountered by the entering MT are lower than the network delays that may be encountered in the current CN in a step . If the comparison step is positive NC determines in a step initial resource levels such as allow the entering MT to encounter as low network delay as the current CN can deliver. The determination step may comprise assigning higher priorities for transmissions or assigning longer transmission opportunities to transmissions.

If the comparison step is negative NC checks if the network delays encountered by the entering MT are greater than the network delays that may be encountered in the current CN in a step . If the comparison step is positive NC determines in a step initial resource levels such as to maintain consistency between network delays that may be encountered at the current CN and network delays encountered by the entering MT in its previous CN.

The resource level determination steps and are followed by a resource allocation step . In this step NC of the current CN allocates the initial QoS and network resources as determined in previous steps. In a step at a later instance resource allocations are adjusted to reflect prevailing network conditions of current CN.

This embodiment highlights the sequence of resource determination operations that help to bypass signaling overhead and allow for efficient resource allocations.

The aforementioned embodiments of the invention illustrate the applications of the invention for verifying and fast re establishment of QoS and network resources. The embodiments show how the invention helps to verify resource requests bypass signaling overhead overcome the adverse effects of abrupt changes in network conditions and improve efficiency of resource allocations.

