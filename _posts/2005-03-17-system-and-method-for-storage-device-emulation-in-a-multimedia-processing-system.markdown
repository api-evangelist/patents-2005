---

title: System and method for storage device emulation in a multimedia processing system
abstract: A device and method for storage device emulation in a multimedia processing system are provided. The device includes a processing module to process multimedia data, a first mass storage device interface operably coupled to the processing module, the first mast storage interface operable to couple to a mass storage device interface of a multimedia processing device and a second mass storage device interface operably coupled to the first mass storage device and the processing module, wherein the second mass storage device is operable to couple to one or more mass storage devices. A method is also provided. The method comprises receiving a first multimedia data at first mass storage device interface of a first multimedia processing device, processing the first multimedia data at the first multimedia processing device to generate a first processed multimedia data and providing the first processed multimedia data to a second mass storage device interface of the first multimedia processing device for output.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08949920&OS=08949920&RS=08949920
owner: VIXS Systems Inc.
number: 08949920
owner_city: Toronto
owner_country: CA
publication_date: 20050317
---
The present disclosure relates generally to multimedia processing and more particularly to the storage and access of multimedia data.

Multimedia decoding components found in for example DVD players and set top boxes typically utilize a decoder to decode encoded multimedia data e.g. MPEG video and audio data . The multimedia decoding components then provide the decoded multimedia data for formatting for display as video and audio content. To reduce cost and complexity many of these multimedia decoding components have limited capabilities. Moreover these components often implement limited types of interfaces that may be used to connect to other components. Frequently the only device interface provided by such components is a single mass storage device interface through which the components connect to one or more mass storage devices for the storage of and access to multimedia data. The limited interface capabilities of these multimedia decoding components typically inhibits the ability to connect other components in a conventional manner so as to increase the capabilities and functionality of multimedia processing components implementing a decoder. Accordingly a system and technique for interfacing with such multimedia components would be advantageous.

The following description is intended to convey a thorough understanding of the present disclosure by providing a number of specific embodiments and details involving multimedia data processing and storage. It is understood however that the present disclosure is not limited to these specific embodiments and details which are exemplary only. It is further understood that one possessing ordinary skill in the art in light of known systems and methods would appreciate the use of the disclosure for its intended purposes and benefits in any number of alternative embodiments depending upon specific design and other needs.

For ease of illustration the following exemplary techniques are described in the context of processing multimedia content formatted in compliance with one or more MPEG standards such as for example MPEG 1 MPEG 2 and or MPEG 4. The following exemplary techniques also are described in the context of interfaces compliant with an ATAPI specification. However other multimedia data formats such as for example DiVX Quicktime H.261 RealVideo M JPEG and the like may be utilized in view of the teachings provided herein as may other storage device interface specifications such as ATA SATA USB IEEE 1394 and the like without departing from the spirit or the scope of the present disclosure.

Referring now to an exemplary multimedia system is illustrated in accordance with at least one embodiment of the present disclosure. The system provides functionality directed to the processing of multimedia data such as MPEG video and audio data and may include for example a DVD player a DVD recorder a cable set top box a personal video recorder PVR a commercial example of a PVR includes for example the TiVo box available from TiVo Inc. of Alviso Calif. and the like.

In the illustrated example the multimedia system includes a multimedia processing device having a processing module and a mass storage device interface such as ATAPI host interface connected via a storage device bus e.g. an ATAPI bus to a mass storage device e.g. a hard disk drive or a DVD drive . The multimedia processing device in one embodiment may include an MPEG decoder whereby MPEG data obtained from the storage device via the ATAPI host interface or MPEG data obtained from A V feed discussed below is decoded by the processing module . The resulting multimedia content then may be provided for display on display device . The multimedia content may be provided for example using a display driver not shown or the system may include wireless interfaces such as for example IEEE 802.11 compliant wireless transceivers not shown to wirelessly transmit a signal representative of the multimedia content.

In at least one embodiment the multimedia processing device provides only limited multimedia processing capabilities. For example the multimedia processing device may include an MPEG decoder that while capable of performing decoding operations fails to provide for example MPEG encoding functionality. Alternately the multimedia processing device may include for example an MPEG encoder capable of performing encoding operations while failing to provide MPEG decoding or transcoding functionality. As additional examples the multimedia processing device may fail to provide functionality associated with encoding or decoding such as for example dual encoding DVD authoring personal video recording PVR copy protection and digital rights management tools such as encryption decryption and other applications used to contribute to the device s intended application. To illustrate the multimedia processing device may include a retail DVD player having an MPEG decoder for decoding encoded MPEG data typically obtained from a DVD but missing any ability to encode or transcode multimedia data.

Accordingly in at least one embodiment the system further includes an additional supplemental processing device operably coupled to the multimedia processing device whereby the multimedia processing device supplements the functionality of the multimedia processing device . In the illustrated example the multimedia processing device includes a first mass storage device interface depicted as ATAPI client interface one or more processing modules and a second mass storage device interface depicted as ATAPI host interface . The ATAPI client interface is coupled to the ATAPI host interface of the multimedia processing device via the ATAPI bus . The ATAPI host interface is coupled to one or more mass storage devices via an ATAPI bus . The supplemental processing device further may include an A V input coupled to for example the A V feed to receive encoded or unencoded decoded multimedia content. The A V input may include any of a variety of connections utilized to transport multimedia content such as for example a coaxial input to receive cable or terrestrial television signals including digital cable a wireless receiver to receive wirelessly transmitted multimedia content a network interface e.g. an Ethernet interface to receive multimedia content over a network a set of standard analog audio video cables e.g. Y C component or composite cables coupleable to any of a variety of consumer multimedia products such as for example camcorders DVD players and the like.

The one or more processing modules in one embodiment supplement the functionality provided by the processing module of the multimedia processing device . For example where the processing module is a MPEG decoder the processing module may include an encoder so as to encode multimedia data provided by or to the processing device or the processing module may include a transcoder so as to transcode multimedia data for provision to the processing device or the storage devices and . The one or more processing modules also may provide other capabilities such as DVD authoring encryption e.g. content protection for recordable media CPRM scrambling and other Digital Rights Management DRM techniques subtitle addition automatic chapter indexing based on cues and keywords retrieved from the stream keyword detection based on OCR or voice recognition and the like. Examples of capabilities of the multimedia processing device and its integration with the multimedia processing device are illustrated in detail below with reference to .

In multimedia systems that provide full functionality multimedia components such as MPEG encoders decoders codecs and transcoders typically are connected using interfaces tailored specifically for such interconnections. For example PCI buses frequently are used for generic device connections and ATAPI interfaces are frequently used for connections to storage devices. USB and IEEE1394 connections conventionally are used for storage devices such as flash memory cards or external camcorders. However in the interest of reducing cost and or complexity limited functionality multimedia devices such as the multimedia processing device may lack such an interface or may not have such an interface available for connection to another multimedia processing device in a conventional manner. To illustrate using the retail DVD player example provided above the DVD player may have been originally designed so as to only provide DVD playback capabilities and therefore does not have the hardware firmware or software capabilities to directly manipulate the supplemental processing device through a conventional processing device to processing device interface. However it may be desirable to modify the DVD player so as to implement the supplemental processing device for additional functionality. In this example the DVD player by incorporating the supplemental processing device may be converted to a PVR whereby live content or home video can be captured and stored into a local hard disk drive and in turn such previously stored multimedia content may be transcoded and then recorded onto a recordable DVD media. In an example a cable set top box having a multimedia processing device in the form of a MPEG decoder may be modified to implement a supplemental processing device in the form of an encoder or transcoder so as to convert the decode only set top box to a PVR with a built in hard disk drive and a DVD recordable drive.

Accordingly the supplemental processing device may be configured so as to operate as a conventional mass storage device with respect to the multimedia processing device . In this instance the supplemental processing device includes a storage device emulator to manage the operation of the ATAPI client interface and the ATAPI host interface as well as the one or more processing modules so that the supplemental processing device receives data and commands from and provides data and commands to the multimedia processing device in the same or substantially similar manner as would the mass storage device . Through storage device emulation provided by storage device emulator and the connection via the mass storage device interfaces of the processing devices and the operations of the supplemental processing device may be entirely transparent to the multimedia processing device because it appears to the multimedia processing device that data is provided to or obtained from a conventional mass storage device. For example the supplemental processing device may be utilized to perform encoding or transcoding operations on data provided from the multimedia processing device prior to storing the encoded transcoded data in at least one of the storage devices or . In this instance the multimedia processing device provides the data to the supplemental processing device via the ATAPI host interface as it would provide data to the mass storage device .

As another example the supplemental processing device may encode or transcode data obtained from the mass storage devices or prior to providing the encoded transcoded data to the multimedia processing device via the ATAPI client interface . In this instance the multimedia processing device receives the data as it would from the mass storage device without necessarily being aware of the supplemental encoding transcoding operations performed by the supplemental processing device prior to receiving the data.

In other embodiments it may be desirable for the multimedia processing device to be aware of the particular capabilities of the supplemental processing device . For example it may be desirable to convert a retail set top box from a device that simply decodes MPEG data and then provides the decoded MPEG data for display to a PVR that is capable of re encoding or transcoding the MPEG data storing the re encoded transcoded MPEG data and then subsequently decoding the MPEG data for later playback. In these implementations the software and or firmware of the multimedia processing device may be updated or upgraded so that the multimedia processing device is able to manipulate the supplemental processing device so that the supplemental processing device provides the desired functionality. In this instance the interface between the processing devices and provided by the ATAPI interfaces and the ATAPI bus allows the multimedia processing device to be upgraded in the above described manner without requiring substantial hardware modifications that would be necessary to connect the processing devices and in a conventional manner.

The storage device emulator may include software firmware or hardware or a combination therein so as to allow the supplemental processing device to receive and provide commands and data via the ATAPI client interface in the same or similar manner that a conventional mass storage device would receive and provide commands and data via its ATAPI client interface. Likewise the storage device emulator operates the ATAPI host interface to provide and receive commands and data from the mass storage devices and . Further the storage device emulator acts as an ATAPI bridge by reflecting data and commands between the ATAPI client interface and the ATAPI host interface when no additional processing is to be provided by the one or more processing modules for data supplied by the provided by the multimedia processing device for storage in the mass storage devices or or on data obtained from the mass storage devices or for provision to the multimedia processing device i.e. when the supplemental processing device is operating in a pass through mode .

In many instances the ATAPI connection provided by the ATAPI host interface ATAPI bus and the ATAPI client interface may be sufficient for the operations of the processing devices and . However in other instances additional control signaling may be desirable accordingly a separate command control bus may be implemented between the processing devices and . The additional signaling may be done via common busses such as I2C or UART or by less complex busses such as an SRAM like eight bit or sixteen bit parallel bus.

The multimedia system may be utilized in any of a variety of ways. For example the capabilities of the processing devices and may be combined to provide a DVD player with enhanced capabilities. In this implementation rather than connecting the DVD drive directly to the ATAPI host interface for direct access by the multimedia processing device the DVD drive is coupled to the ATAPI host interface of the supplemental processing device . In this manner multimedia content from the DVD drive may be obtained by the supplemental processing device and then pre processed e.g. transcoded or deciphered by performing one or more processing operations on the data representative of the multimedia content. The pre processed multimedia content then may be provided from the processing device to the processing device via the ATAPI interfaces and ATAPI bus . As the multimedia processing device receives the multimedia content from the ATAPI host interface as it would receive multimedia content from a conventional DVD drive coupled to the ATAPI bus the preprocessing of the multimedia content provided by the supplemental processing device may be transparent to the multimedia processing device .

The system alternatively may be configured to operate as a pseudo DVD player whereby multimedia content supplied by the A V feed to the supplemental processing device may be encoded if the multimedia content is in an unencoded or decoded form or transcoded if the multimedia content is in an encoded form by the processing module and the encoded transcoded multimedia content may be stored to one or both of the storage devices or . The stored media content from the A V feed subsequently may be obtained from the storage devices or and provided to the multimedia processing device for decoding and display as described above.

Referring to an exemplary method of operation of the system as an enhanced DVD player as described above is illustrated. At step the supplemental processing device obtains multimedia data from one of storage devices or implemented as for example a DVD drive via the ATAPI interface and the ATAPI bus . Alternately the multimedia data is obtained directly from the A V feed via the A V input . In one instance multimedia data is unencoded. Accordingly at step the processing module performs one or more processing operations on the multimedia data such as encoding the multimedia data. In another instance the multimedia data is encoded but it may have a resolution frame rate bit rate or other characteristic that is unsupported by or not optimal for the decoding capability of the processing module of the processing device . Accordingly in this instance the multimedia data is transcoded by the processing module at step . Additional processing operations such as descrambling decryption or deciphering operations higher level programmable features such as keyword detection based on optical character recognition OCR or voice recognition and automatic chapter indexing based on cues in the stream may be performed by the processing module at step . At step the encoded transcoded multimedia data is provided to the multimedia processing device via the ATAPI client interface the ATAPI bus and the ATAPI host interface . In this instance the encoded transcoded multimedia data may be transmitted in accordance with conventional ATAPI protocols with the assistance of the storage device emulator so that the encoded transcoded multimedia data appears to the processing device to have been provided by a conventional mass storage device. At step the processing module decoded the encoded transcoded multimedia data and the decoded multimedia data is provided for display on the display device at step .

In other instances the system may be configured so as to provide a PVR whereby multimedia content received from the A V feed may be recorded and then provided for subsequent playback. In this case multimedia content provided via the A V feed is received by the multimedia processing device via an A V input similar to the A V input discussed above. The data representing the multimedia content is decoded by the processing module as necessary and the resulting data is provided to the supplemental processing device via the ATAPI interfaces and and the ATAPI bus . The decoded data also may be formatted and output for display by the display device at the same time. The processing module can encode or transcode the receive data and store it to one or both of the mass storage devices or . In the event that the mass storage device used to store the data is a DVD drive the processing module further may provide DVD authoring functionality when writing the data to a DVD. The stored data subsequently may be accessed and provided to the processing module via the ATAPI interfaces and and the ATAPI bus whereupon it is decoded and formatted for display on the display device in accordance to instructions received from a user of the system .

Referring to an exemplary method of operation of the system to store multimedia content as described above is illustrated. At step multimedia data representative of multimedia content is received at the multimedia processing device via for example the A V feed or via the mass storage device . At step the processing module processes the received multimedia data. Processing of the multimedia data may include for example processing operations directed to decoding the multimedia data when the multimedia data is encoded at the time of its receipt or transcoding the multimedia data. At step the multimedia data is provided to the supplemental processing device via the ATAPI interfaces and the ATAPI bus . At step the multimedia data is encoded if received in a decoded unencoded form or the multimedia data may be transcoded if received in an encoded form. Alternately encoded multimedia data may remain unprocessed by the processing module . At step the encoded transcoded data is provided to one or more of the storage devices or for storage via the ATAPI host interface and the ATAPI bus . Subsequent access to the stored data for playback at the display device may be performed as described with respect to above.

Referring now to an exemplary implementation of a multimedia system is illustrated in accordance with at least one embodiment of the present disclosure. The system includes a DVD decoder having an ATAPI host interface not shown coupled to a supplemental encoding device implemented as for example a system on a chip SOC on a printed circuit board PCB . In the illustrated example the supplemental encoding device includes an MPEG encoder an ATAPI client interface an ATAPI host interface and a general purpose input output GPIO . The ATAPI host interface is operably coupled to storage devices and via ATA connectors and respectively and ATAPI bus at the PCB . The ATAPI client interface is operably coupled to the ATAPI host interface of the DVD decoder via an ATA connector and an ATAPI bus at the PCB . The ATAPI bus and therefore the ATA connector and the ATAPI client interface is coupleable to the ATA connector and therefore the storage device via a bus extension and a switch operable based on the output of the GPIO . Thus a connection to the storage device and may be alternated between the supplemental encoding device and the DVD decoder using the switch .

In modes utilizing the functionality of the encoding device the switch may be operated such that the ATAPI host interface is connected to both ATA connectors and and therefore connected to both storage device and storage device . In such modes the supplemental processing device may be used to transfer data between the storage devices and with or without performing encoding operations by the MPEG encoder data may be obtained from one or both of the storage devices and processed and provided to the DVD decoder or data may be received from the DVD decoder processed and then provided to one or both of the storage devices or . In other modes the functionality provided by the supplemental encoding device may be bypassed using the switch so that the data is transmitted directly between the ATA connectors and and therefore directly between the DVD decoder and the storage device . In such modes the DVD decoder may provide data directly to the storage device for storage or the DVD decoder may obtain data directly from the storage device without routing the data through the encoding device .

Other embodiments uses and advantages of the present disclosure will be apparent to those skilled in the art from consideration of the specification and practice of the disclosure disclosed herein. The specification and drawings should be considered exemplary only and the scope of the disclosure is accordingly intended to be limited only by the following claims and equivalents thereof.

