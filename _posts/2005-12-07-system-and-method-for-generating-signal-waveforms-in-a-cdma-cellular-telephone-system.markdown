---

title: System and method for generating signal waveforms in a CDMA cellular telephone system
abstract: A system and method for communicating information signals using spread spectrum communication techniques. PN sequences are constructed that provide orthogonality between the users so that mutual interference will be reduced, allowing higher capacity and better link performance. With orthogonal PN codes, the cross-correlation is zero over a predetermined time interval, resulting in no interference between the orthogonal codes, provided only that the code time frames are time aligned with each other. In an exemplary embodiment, signals are communicated between a cell-site and mobile units using direct sequence spread spectrum communication signals. In the exemplary embodiment, transmit power of mobile unit signals is controlled based on signal power received by the mobile unit and power adjustment commands sent to the mobile unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07839960&OS=07839960&RS=07839960
owner: Qualcomm Incorporated
number: 07839960
owner_city: San Diego
owner_country: US
publication_date: 20051207
---
The present Application for Patent is a Continuation and claims priority to patent application Ser. No. 10 772 490 entitled SYSTEM AND METHOD FOR GENERATING SIGNAL WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM filed Feb. 5 2004 now U.S. Pat. No. 7 003 021 now allowed which is a continuation of U.S. patent application Ser. No. 09 360 059 filed Jul. 23 1999 now U.S. Pat. No. 6 693 951 issued on Feb. 17 2004 which is a continuation of U.S. patent application Ser. No. 08 441 895 filed May 16 1995 now U.S. Pat. No. 5 943 361 issued Aug. 24 1999 which is a continuation of U.S. patent application Ser. No. 07 825 147 filed Jan. 24 1992 now U.S. Pat. No. 5 416 797 issued May 16 1995 which is a continuation of U.S. patent application Ser. No. 07 543 496 filed Jun. 25 1990 now U.S. Pat. No. 5 103 459 issued Apr. 7 1992 all of which are entitled SYSTEM AND METHOD FOR GENERATING SIGNAL WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM and are assigned to the assignee hereof and are hereby expressly incorporated by reference herein.

The present invention relates to cellular telephone systems. More specifically the present invention relates to a novel and improved system and method for communicating information in a mobile cellular telephone system or satellite mobile telephone system using spread spectrum communication signals.

The use of code division multiple access CDMA modulation techniques is one of several techniques for facilitating communications in which a large number of system users are present. Other multiple access communication system techniques such as time division multiple access TDMA frequency division multiple access FDMA and AM modulation schemes such as amplitude companded single sideband ACSSB are known in the art. However the spread spectrum modulation technique of CDMA has significant advantages over these modulation techniques for multiple access communication systems. The use of CDMA techniques in a multiple access communication system is disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS assigned to the assignee of the present invention of which the disclosure thereof is incorporated by reference.

In the just mentioned patent a multiple access technique is disclosed where a large number of mobile telephone system users each having a transceiver communicate through satellite repeaters or terrestrial base stations also referred to as cell sites stations cell sites or for short cells using code division multiple access CDMA spread spectrum communication signals. In using CDMA communications the frequency spectrum can be reused multiple times thus permitting an increase in system user capacity. The use of CDMA results in a much higher spectral efficiency than can be achieved using other multiple access techniques.

The satellite channel typically experiences fading that is characterized as Rician. Accordingly the received signal consists of a direct component summed with a multiple reflected component having Rayleigh fading statistics. The power ratio between the direct and reflected component is typically on the order of 6 10 dB depending upon the characteristics of the mobile unit antenna and the environment about the mobile unit.

Contrasting with the satellite channel the terrestrial channel experiences signal fading that typically consists of the Rayleigh faded component without a direct component. Thus the terrestrial channel presents a more severe fading environment than the satellite channel in which Rician fading is the dominant fading characteristic.

The Rayleigh fading characteristic in the terrestrial channel signal is caused by the signal being reflected from many different features of the physical environment. As a result a signal arrives at a mobile unit receiver from many directions with different transmission delays. At the UHF frequency bands usually employed for mobile radio communications including those of cellular mobile telephone systems significant phase differences in signals traveling on different paths may occur. The possibility for destructive summation of the signals may result with on occasion deep fades occurring.

Terrestrial channel fading is a very strong function of the physical position of the mobile unit. A small change in position of the mobile unit changes the physical delays of all the signal propagation paths which further results in a different phase for each path. Thus the motion of the mobile unit through the environment can result in a quite rapid fading process. For example in the 850 MHz cellular radio frequency band this fading can typically be as fast as one fade per second per mile per hour of vehicle speed. Fading this severe can be extremely disruptive to signals in the terrestrial channel resulting in poor communication quality. Additional transmitter power can be used to overcome the problem of fading. However such power increases effect both the user in excessive power consumption and the system by increased interference.

The CDMA modulation techniques disclosed in U.S. Pat. No. 4 901 307 offer many advantages over narrow band modulation techniques used in communication systems employing satellite or terrestrial repeaters. The terrestrial channel poses special problems to any communication system particularly with respect to multipath signals. The use of CDMA techniques permit the special problems of the terrestrial channel to be overcome by mitigating the adverse effect of multipath e.g. fading while also exploiting the advantages thereof.

In a CDMA cellular telephone system the same frequency band can be used for communication in all cells. The CDMA waveform properties that provide processing gain are also used to discriminate between signals that occupy the same frequency band. Furthermore the high speed pseudonoise PN modulation allows many different propagation paths to be separated provided the difference in path delays exceed the PN chip duration i.e. 1 bandwidth. If a PN chip rate of approximately 1 MHz is employed in a CDMA system the full spread spectrum processing gain equal to the ratio of the spread bandwidth to system data rate can be employed against paths that differ by more than one microsecond in path delay from the desired path. A one microsecond path delay differential corresponds to differential path distance of approximately 1 000 feet. The urban environment typically provides differential path delays in excess of one microsecond and up to 10 20 microseconds are reported in some areas.

In narrow band modulation systems such as the analog FM modulation employed by conventional telephone systems the existence of multiple paths results in severe multipath fading. With wide band CDMA modulation however the different paths may be discriminated against in the demodulation process. This discrimination greatly reduces the severity of multipath fading. Multipath fading is not totally eliminated in using CDMA discrimination techniques because there will occasionally exist paths with delayed differentials of less than the PN chip duration for the particular system. Signals having path delays on this order cannot be discriminated against in the demodulator resulting in some degree of fading.

It is therefore desirable that some form of diversity be provided which would permit a system to reduce fading. Diversity is one approach for mitigating the deleterious effects of fading. Three major types of diversity exist time diversity frequency diversity and space diversity.

Time diversity can best be obtained by the use of repetition time interleaving and error detection and coding which is a form of repetition. The present invention employs each of these techniques as a form of time diversity.

CDMA by its inherent nature of being a wideband signal offers a form of frequency diversity by spreading the signal energy over a wide bandwidth. Therefore frequency selective fading affects only a small part of the CDMA signal bandwidth.

Space or path diversity is obtained by providing multiple signal paths through simultaneous links from a mobile user through two or more cell sites. Furthermore path diversity may be obtained by exploiting the multipath environment through spread spectrum processing by allowing a signal arriving with different propagation delays to be received and processed separately. Examples of path diversity are illustrated in U.S. Pat. No. 5 101 501 entitled METHOD AND SYSTEM FOR PROVIDING SOFT HANDOFF IN COMMUNICATIONS IN A CDMA CELLULAR TELEPHONE SYSTEM and U.S. Pat. No. 5 109 390 entitled DIVERSITY RECEIVER IN A CDMA CELLULAR TELEPHONE SYSTEM both assigned to the assignee of the present invention.

The deleterious effects of fading can be further controlled to a certain extent in a CDMA system by controlling transmitter power. A system for cell site and mobile unit power control is disclosed in U.S. Pat. No. 5 056 109 entitled METHOD AND APPARATUS FOR CONTROLLING TRANSMISSION POWER IN A CDMA CELLULAR MOBILE TELEPHONE SYSTEM also assigned to the assignee of the present invention.

The CDMA techniques as disclosed in U.S. Pat. No. 4 901 307 contemplated the use of coherent modulation and demodulation for both directions of the link in mobile satellite communications. Accordingly disclosed therein is the use of a pilot carrier signal as a coherent phase reference for the satellite to mobile link and the cell to mobile link. In the terrestrial cellular environment however the severity of multipath fading with the resulting phase disruption of the channel precludes usage of coherent demodulation technique for the mobile to cell link. The present invention provides a means for overcoming the adverse effects of multipath in the mobile to cell link by using noncoherent modulation and demodulation techniques.

The CDMA techniques as disclosed in U.S. Pat. No. 4 901 307 further contemplated the use of relatively long PN sequences with each user channel being assigned a different PN sequence. The cross correlation between different PN sequences and the autocorrelation of a PN sequence for all time shifts other than zero both have a zero average value which allows the different user signals to be discriminated upon reception.

However such PN signals are not orthogonal. Although the cross correlations average to zero for a short time interval such as an information bit time the cross correlation follows a binomial distribution. As such the signals interfere with each other much the same as if they were wide bandwidth Gaussian noise at the same power spectral density. Thus the other user signals or mutual interference noise ultimately limits the achievable capacity.

The existence of multipath can provide path diversity to a wideband PN CDMA system. If two or more paths are available with greater than one microsecond differential path delay two or more PN receivers can be employed to separately receive these signals. Since these signals will typically exhibit independence in multipath fading i.e. they usually do not fade together the outputs of the two receivers can be diversity combined. Therefore a loss in performance only occurs when both receivers experience fades at the same time. Hence one aspect of the present invention is the provision of two or more PN receivers in combination with a diversity combiner. In order to exploit the existence of multipath signals to overcome fading it is necessary to utilize a waveform that permits path diversity combining operations to be performed.

It is therefore an object of the present invention to provide for the generation of PN sequences which are orthogonal so as to reduce mutual interference thereby permitting greater user capacity and support path diversity thereby overcoming fading.

The implementation of spread spectrum communication techniques particularly CDMA techniques in the mobile cellular telephone environment therefore provides features which vastly enhance system reliability and capacity over other communication system techniques. CDMA techniques as previously mentioned further enable problems such as fading and interference to be readily overcome. Accordingly CDMA techniques further promote greater frequency reuse thus enabling a substantial increase in the number of system users.

The present invention is a novel and improved method and system for constructing PN sequences that provide orthogonality between the users so that mutual interference will be reduced allowing higher capacity and better link performance. With orthogonal PN codes the cross correlation is zero over a predetermined time interval resulting in no interference between the orthogonal codes provided only that the code time frames are time aligned with each other.

In an exemplary embodiment signals are communicated between a cell site and mobile units using direct sequence spread spectrum communication signals. In the cell to mobile link pilot sync paging and voice channels are defined. Information communicated on the cell to mobile link channels are in general encoded interleaved bi phase shift key BPSK modulated with orthogonal covering of each BPSK symbol along with quadrature phase shift key QPSK spreading of the covered symbols.

In the mobile to cell link access and voice channels are defined. Information communicated on the mobile to cell link channels are in general encoded interleaved orthogonal signaling along with QPSK spreading.

In a CDMA cellular telephone system each cell site has a plurality of modulator demodulator units or spread spectrum modems. Each modem consists of a digital spread spectrum transmit modulator at least one digital spread spectrum data receiver and a searcher receiver. Each modem at the cell site is assigned to a mobile unit as needed to facilitate communications with the assigned mobile unit.

A soft handoff scheme is employed for a CDMA cellular telephone system in which a new cell site modem is assigned to a mobile unit while the old cell site modem continues to service the call. When the mobile unit is located in the transition region between the two cell sites the call can be switched back and forth between cell sites as signal strength dictates. Since the mobile unit is always communicating through at least one cell site modem fewer disrupting effects to the mobile unit or in service will occur. The mobile unit thus utilizes multiple receivers for assisting in the handoff process in addition to a diversity function for mitigating the effects of fading.

In the CDMA cellular telephone system each cell site transmits a pilot carrier signal. Should the cell be divided into sectors each sector has an associated distinct pilot signal within the cell. This pilot signal is used by the mobile units to obtain initial system synchronization and to provide robust time frequency and phase tracking of the cell site transmitted signals. Each cell site also transmits spread spectrum modulated information such as cell site identification system timing mobile paging information and various other control signals.

The pilot signal transmitted by each sector of each cell is of the same spreading code but with a different code phase offset. Phase offset allows the pilot signals to be distinguished from one another thus distinguishing originating cell sites or sectors. Use of the same pilot signal code allows the mobile unit to find system timing synchronization by a single search through all pilot signal code phases. The strongest pilot signal as determined by a correlation process for each code phase is readily identifiable. The identified strongest pilot signal generally corresponds to the pilot signal transmitted by the nearest cell site. However the strongest pilot signal is used whether or not it is transmitted by the closest cell site.

Upon acquisition of the strongest pilot signal i.e. initial synchronization of the mobile unit with the strongest pilot signal the mobile unit searches for another carrier intended to be received by all system users in the cell. This carrier called the synchronization channel transmits a broadcast message containing system information for use by the mobiles in the system. The system information identifies the cell site and the system in addition to conveying information which allows the long PN codes interleaver frames vocoders and other system timing information used by the mobile unit to be synchronized without additional searching. Another channel called the paging channel may also be provided to transmit messages to mobiles indicating that a call has arrived for them and to respond with channel assignments when a mobile initiates a call.

The mobile unit continues to scan the received pilot carrier signal code at the code offsets corresponding to cell site neighboring sector or neighboring transmitted pilot signals. This scanning is done in order to determine if a pilot signal emanating from a neighboring sector or cell is becoming stronger than the pilot signal first determined to be strongest. If while in this call inactive mode a neighbor sector or neighbor cell site pilot signal becomes stronger than that of the initial cell site sector or cell site transmitted pilot signal the mobile unit will acquire the stronger pilot signals and corresponding sync and paging channel of the new sector or cell site.

When a call is initiated a pseudonoise PN code address is determined for use during the course of this call. The code address may be either assigned by the cell site or be determined by prearrangement based upon the identity of the mobile unit. After a call is initiated the mobile unit continues to scan the pilot signal transmitted by the cell site through which communications are established in addition to pilot signal of neighboring sectors or cells. Pilot signal scanning continues in order to determine if one of the neighboring sector or cell transmitted pilot signals becomes stronger than the pilot signal transmitted by the cell site the mobile unit is in communication with. When the pilot signal associated with a neighboring cell or cell sector becomes stronger than the pilot signal of the current cell or cell sector it is an indication to the mobile unit that a new cell or cell sector has been entered and that a handoff should be initiated.

An exemplary telephone system in which the present invention is embodied is illustrated in . The system illustrated in utilizes spread spectrum modulation techniques in communication between the system mobile units or mobile telephones and the cell sites. Cellular systems in large cities may have hundreds of cell site stations serving hundreds of thousands of mobile telephones. The use of spread spectrum techniques in particular CDMA readily facilitates increases in user capacity in systems of this size as compared to conventional FM modulation cellular systems.

In system controller and switch also referred to as mobile telephone switching office MTSO typically includes interface and processing circuitry for providing system control to the cell sites. Controller also controls the routing of telephone calls from the public switched telephone network PSTN to the appropriate cell site for transmission to the appropriate mobile unit. Controller also controls the routing of calls from the mobile units via at least one cell site to the PSTN. Controller may connect calls between mobile users via the appropriate cell sites since the mobile units do not typically communicate directly with one another.

Controller may be coupled to the cell sites by various means such as dedicated telephone lines optical fiber links or microwave communication links. In two such exemplary cell sites and including along with mobile units and each including a cellular telephone are illustrated. Cell sites and as discussed herein and illustrated in the drawings are considered to service an entire cell. However it should be understood that the cell may be geographically divided into sectors with each sector treated as a different coverage area. Accordingly handoffs are made between sectors of a same cell as is described herein for multiple cells while diversity may also be achieved between sectors as is for cells.

In arrowed lines and respectively define the possible communication links between cell site and mobile unit and . Similarly arrowed lines and respectively define the possible communication links between cell site and mobile units and . Cell sites and nominally transmit using equal power.

The cell site service areas or cells are designed in geographic shapes such that the mobile unit will normally be closest to one cell site and within one cell sector should the cell be divided into sectors. When the mobile unit is idle i.e. no calls in progress the mobile unit constantly monitors the pilot signal transmissions from each nearby cell site and if applicable from a single cell site in which the cell is sectorized. As illustrated in the pilot signals are respectively transmitted to mobile unit by cell sites and upon outbound or forward communication links and . Mobile unit can determine which cell it is in by comparing signal strength in pilot signals transmitted from cell sites and .

In the example illustrated in mobile unit may be considered closest to cell site . When mobile unit initiates a call a control message is transmitted to the nearest cell site cell site . Cell site upon receiving the call request message transfers the called number to system controller . System controller then connects the call through the PSTN to the intended recipient.

Should a call be initiated within the PSTN controller transmits the call information to all the cell sites in the area. The cell sites in return transmit a paging message within each respective coverage area that is intended for the called recipient mobile user. When the intended recipient mobile unit hears the page message it responds with a control message that is transmitted to the nearest cell site. This control message signals the system controller that this particular cell site is in communication with the mobile unit. Controller then routes the call through this cell site to the mobile unit. Should mobile unit move out of the coverage area of the initial cell site cell site an attempt is made to continue the call by routing the call through another cell site.

With respect to cellular telephone systems The Federal Communications Commission FCC has allocated a total of 25 MHz for mobile to cell links and 25 MHz for cell to mobile links. The FCC has divided the allocation equally between two service providers one of which is the wireline telephone company for the service area and the other chosen by lottery. Because of the order in which allocations were made the

12.5 MHz allocated to each carrier for each direction of the link is further subdivided into two sub bands. For the wireline carriers the sub bands are each 10 MHz and 2.5 MHz wide. For the non wireline carriers the sub bands are each 11 MHz and 1.5 MHz wide. Thus a signal bandwidth of less than 1.5 MHz could be fit into any of the sub bands while a bandwidth of less than 2.5 MHz could be fit into all but one sub band.

To preserve maximum flexibility in allocating the CDMA technique to the available cellular frequency spectrum the waveform utilized in the cellular telephone system should be less than 1.5 MHz in bandwidth. A good second choice would be a bandwidth of about 2.5 MHz allowing full flexibility to the wireline cellular carriers and nearly full flexibility to non wireline cellular carriers. While using a wider bandwidth has the advantage of offering increased multipath discrimination disadvantages exist in the form of higher equipment costs and lower flexibility in frequency assignment within the allocated bandwidth.

In a spread spectrum cellular telephone system such as illustrated in the preferred waveform design implemented involves a direct sequence pseudonoise spread spectrum carrier. The chip rate of the PN sequence is chosen to be 1.2288 MHz in the preferred embodiment. This particular chip rate is chosen so that the resulting bandwidth about 1.25 MHz after filtering is approximately one tenth of the total bandwidth allocated to one cellular service carrier.

Another consideration in the choice of the exact chip rate is that it is desirable that the chip rate be exactly divisible by the baseband data rates to be used in the system. It is also desirable for the divisor to be a power of two. In the preferred embodiment the baseband data rate is 9600 bits per second leading to a choice of 1.2288 MHz 128 times 9600 for the PN chip rate.

In the cell to mobile link the binary sequences used for spreading the spectrum are constructed from two different types of sequences each with different properties to provide different functions. There is an outer code that is shared by all signals in a cell or sector that is used to discriminate between multipath signals. The outer code is also used to discriminate between signals transmitted by different cells or sectors to the mobile units. There is also an inner code that is used to discriminate between user signals transmitted by single sector or cell.

The carrier waveform design in the preferred embodiment for the cell site transmitted signals utilizes a sinusoidal carrier that is quadraphase four phase modulated by a pair of binary PN sequences that provide the outer code transmitted by a single sector or cell. The sequences are generated by two different PN generators of the same sequence length. One sequence bi phase modulates the in phase channel I Channel of the carrier and the other sequence bi phase modulates the quadrature phase Q Channel of the carrier. The resulting signals are summed to form a composite four phase carrier.

Although the values of a logical zero and a logical one are conventionally used to represent the binary sequences the signal voltages used in the modulation process are V volts for a logical one and V volts for a logical zero . To bi phase modulate a sinusoidal signal a zero volt average value sinusoid is multiplied by the V or V voltage level as controlled by the binary sequences using a multiplier circuit. The resulting signal may then be band limited by passing through a bandpass filter. It is also known in the art to lowpass filter the binary sequence stream prior to multiplying by the sinusoidal signal thereby interchanging the order of the operations. A quadraphase modulator consists of two bi phase modulators each driven by a different sequence and with the sinusoidal signals used in the bi phase modulators having a 90 phase shift therebetween.

In the preferred embodiment the sequence length for the transmitted signal carrier is chosen to be 32768 chips. Sequences of this length can be generated by a modified maximal length linear sequence generator by adding a zero bit to a length 32767 chip sequence. The resulting sequence has good cross correlation and autocorrelation properties. Good cross correlation and autocorrelation properties are necessary to prevent mutual interference between pilot carriers transmitted by different cells.

A sequence this short in length is desirable in order to minimize acquisition time of the mobile units when they first enter the system without knowledge of system timing. With unknown timing the entire length of the sequence must be searched to determine the correct timing. The longer the sequence the longer time the acquisition search will require. Although sequences shorter than 32768 could be used it must be understood that as sequence length is reduced the code processing gain is reduces. As processing gain is reduced the rejection of multipath interference along with interference from adjacent cells and other sources will also be reduced perhaps to unacceptable levels. Thus there is a desire to use the longest sequence that can be acquired in a reasonable time. It is also desirable to use the same code polynomials in all cells so that the mobile unit not knowing what cell it is in when initially acquiring synchronization can obtain full synchronization by searching a single code polynomial.

In order to simplify the synchronization process all the cells in the system are synchronized to each other. In the exemplary embodiment cell synchronization is accomplished by synchronizing all the cells to a common time reference the Navstar Global Positioning System satellite navigation system which is itself synchronized to Universal Coordinated Time UTC .

Signals from different cells are differentiated by providing time offsets of the basic sequences. Each cell is assigned a different time offset of the basic sequences differing from its neighbors. In the preferred embodiment the 32768 repetition period is divided into a set of 512 timing offsets. The 512 offsets are spaced 64 chips apart. Each sector of each cell in a cellular system is also assigned a different one of the offsets to use for all its transmissions. If there are more than 512 sectors or cells in the system then the offsets can be reused in the same manner as frequencies are reused in the present analog FM cellular system. In other designs a different number than 512 offsets could be used. With reasonable care in assignment of pilot signal offsets it should never be necessary for near neighboring cells to use near neighboring time offsets.

All signals transmitted by a cell or one of the sectors of the cell share the same outer PN codes for the I and Q channels. The signals are also spread with an inner orthogonal code generated by using Walsh functions. A signal addressed to a particular user is multiplied by the outer PN sequences and by a particular Walsh sequence or sequence of Walsh sequences assigned by the system controller for the duration of the user s telephone call. The same inner code is applied to both the I and Q channels resulting in a modulation which is effectively bi phase for the inner code.

It is well known in the art that a set of n orthogonal binary sequences each of length n for n any power of 2 can be constructed see S. W. Golomb et al. Prentice Hall Inc. 1964 pp. 45 64. In fact orthogonal binary sequence sets are also known for most lengths which are multiples of four and less than two hundred. One class of such sequences that is easy to generate is called the Walsh function also known as Hadamard matrices.

A Walsh sequence is one of the rows of a Walsh function matrix. A Walsh function of order n contains n sequences each of length n bits.

A Walsh function of order n as well as other orthogonal functions has the property that over the interval of n code symbols the cross correlation between all the different sequences within the set is zero provided that the sequences are time aligned with each other. This can be seen by noting that every sequence differs from every other sequence in exactly half of its bits. It should also be noted that there is always one sequence containing all zeroes and that all the other sequences contain half ones and half zeroes.

Neighboring cells and sectors can reuse the Walsh sequences because the outer PN codes used in neighboring cells and sectors are distinct. Because of the differing propagation times for signals between a particular mobile s location and two or more different cells it is not possible to satisfy the condition of time alignment required for Walsh function orthogonality for both cells at one time. Thus reliance must be placed on the outer PN code to provide discrimination between signals arriving at the mobile unit from different cells. However all the signals transmitted by a cell are orthogonal to each other and thus do not contribute interference to each other. This eliminates the majority of the interference in most locations allowing a higher capacity to be obtained.

The system further envisions the voice channel to be a variable rate channel whose data rate can be varied from data block to data block with a minimum of overhead required to control the data rate in use. The use of variable data rates reduces mutual interference by eliminating unnecessary transmissions when there is no useful speech to be transmitted. Algorithms are utilized within the vocoders for generating a varying number of bits in each vocoder block in accordance with variations in speech activity. During active speech the vocoder may produce 20 msec. data blocks containing 20 40 80 or 160 bits depending on the activity of the speaker. It is desired to transmit the data blocks in a fixed amount of time by varying the rate of transmission. It is further desirable not to require signaling bits to inform the receiver how many bits are being transmitted.

The blocks are further encoded by the use of a cyclic redundancy check code CRCC which appends to the block an additional set of parity bits which can be used to determine whether or not the block of data has been decoded correctly. CRCC check codes are produced by dividing the data block by a predetermined binary polynomial. The CRCC consists of all or a portion of the remainder bits of the division process. The CRCC is checked in the receiver by reproducing the same remainder and checking to see of the received remainder bits are the same as the regenerated check bits.

In the disclosed invention the receiving decoder decodes the block as if it contains 160 bits and then again as if it contains 80 bits etc. until all possible block lengths have been tried. The CRCC is computed for each trial decoding. If one of the trial decodings results in a correct CRCC the data block is accepted and passed on to the vocoder for further processing. If no trial decoding produces a valid CRCC the received symbols are passed on to the system s signal processor where other processing operations can optionally be performed.

In the cell transmitter the power of the transmitted waveform is varied as the data rate of the block is varied. The highest data rate uses the highest carrier power. When the data rate is lower than the maximum the modulator in addition to lowering the power repeats each encoded data symbol a number of times as required to achieve the desired transmission rate. For example at the lowest transmission rate each encoded symbol is repeated four times.

In the mobile transmitter the peak power is held constant but the transmitter is gated off or or of the time in accordance with the number of bits to be transmitted in the data block. The positions of the on times of the transmitter is varied pseudo randomly in accordance with the mobile user s addressed user code.

In the preferred embodiment the Walsh function size n is set equal to sixty four n 64 for the cell to mobile link. Therefore each of up to sixty four different signals to be transmitted are assigned a unique orthogonal sequence. The forward error correction FEC encoded symbol stream for each voice conversation is multiplied by its assigned Walsh sequence. The Walsh coded FEC encoded symbol stream for each voice channel is then multiplied by the outer PN coded waveform. The resultant spread symbol streams are then added together to form a composite waveform.

The resulting composite waveform is then modulated onto a sinusoidal carrier bandpass filtered translated to the desired operating frequency amplified and radiated by the antenna system. Alternate embodiments of the present invention may interchange the order of some of the just described operations for forming the cell site transmitted signal. For example it may be preferred to multiply each voice channel by the outer PN coded waveform and perform the filtering operation prior to summation of all the channel signals to be radiated by the antenna. It is well known in the art that the order of linear operations may be interchanged to obtained various implementation advantages and different designs.

The waveform design of the preferred embodiment for cellular service uses the pilot carrier approach for the cell to mobile link as described in U.S. Pat. No. 4 901 307. All cells transmit pilot carriers using the same 32768 length sequence but with different timing offsets to prevent mutual interference.

The pilot waveform uses the all zero Walsh sequence i.e. a Walsh sequence comprised of all zeroes that is found in all Walsh function sets. The use of the all zero Walsh sequence for all cells pilot carriers allows the initial search for the pilot waveform to ignore the Walsh functions until after the outer code PN synchronization has been obtained. The Walsh framing is locked to the PN code cycle by virtue of the length of the Walsh frame being a factor of the PN sequence length. Therefore provided that the cell addressing offsets of the PN code are multiples of sixty four chips or the Walsh frame length then the Walsh framing is known implicitly from the outer PN code timing cycle.

All the cells in a service area are supplied with accurate synchronization. In the preferred embodiment a GPS receiver at each cell synchronizes the local waveform timing to Universal Coordinated Time UTC . The GPS system allows time synchronization to better than 1 microsecond accuracy. Accurate synchronization of cells is desirable in order to allow easy handoff of calls between cells when mobiles move from one cell to another with a call in progress. If the neighboring cells are synchronized the mobile unit will not have difficulty synchronizing to the new cell thereby facilitating a smooth handoff.

The pilot carrier is transmitted at a higher power level than a typical voice carrier so as to provide greater signal to noise and interference margin for this signal. The higher power level pilot carrier enables the initial acquisition search to be done at high speed and to make possible a very accurate tracking of the carrier phase of the pilot carrier by a relatively wide bandwidth phase tracking circuit. The carrier phase obtained from tracking the pilot carrier is used as the carrier phase reference for demodulation of the carriers modulated by user information signals. This technique allows many user carriers to share the common pilot signal for carrier phase reference. For example in a system transmitting a total of fifteen simultaneous voice carriers the pilot carrier might be allocated a transmit power equal to four voice carriers.

In addition to the pilot carrier another carrier intended to be received by all system users in the cell is transmitted by the cell site. This carrier called the synchronization channel also uses the same 32768 length PN sequence for spectrum spreading but with a different pre assigned Walsh sequence. The synchronization channel transmits a broadcast message containing system information for use by the mobiles in the system. The system information identifies the cell site and the system and conveys information allowing the long PN codes used for mobile information signals to be synchronized without additional searching.

Another channel called the paging channel may be provided to transmit messages to mobiles indicating that a call has arrived for them and to respond with channel assignments when a mobile initiates a call.

Each voice carrier transmits a digital representation of the speech for a telephone call. The analog speech waveform is digitized using standard digital telephone techniques and then compressed using a vocoding process to a data rate of approximately 9600 bits per second. This data signal is then rate r constraint length K 9 convolutional encoded with repetition and interleaved in order to provide error detection and correction functions which allow the system to operate at a much lower signal to noise and interference ratio. Techniques for convolutional encoding repetition and interleaving are well known in the art.

The resulting encoded symbols are multiplied by an assigned Walsh sequence and then multiplied by the outer PN code. This process results in a PN sequence rate of 1.2288 MHz or 128 times the 9600 bps data rate. The resulting signal is then modulated onto an RF carrier and summed with the pilot and setup carriers along with the other voice carriers. Summation may be accomplished at several different points in the processing such as at the IF frequency or at the baseband frequency either before or after multiplication by the PN sequence.

Each voice carrier is also multiplied by a value that sets its transmitted power relative to the power of the other voice carriers. This power control feature allows power to be allocated to those links that require higher power due to the intended recipient being in a relatively unfavoring location. Means are provided for the mobiles to report their received signal to noise ratio to allow the power to be set at a level so as to provide adequate performance without waste. The orthogonality property of the Walsh functions is not disturbed by using different power levels for the different voice carriers provided that time alignment is maintained.

In the first receiver system is comprised of antenna analog receiver searcher receiver and digital data receiver . The first receiver system may also include an optional digital data receiver receiver . The second receiver system includes antenna analog receiver searcher receiver and digital data receiver .

The cell site also includes cell site control processor . Control processor is coupled to data receivers and along with searcher receivers and . Control processor provides among other functions functions such as signal processing timing signal generation power control and control over handoff diversity diversity combining and system control processor interface with the MTSO . Walsh sequence assignment along with transmitter and receiver assignment is also provided by control processor .

Both receiver systems are coupled by data receivers and to diversity combiner and decoder circuitry . Digital link is coupled to receive the output of diversity combiner and decoder circuitry . Digital link is also coupled to control processor cell site transmit modulator and the MTSO digital switch. Digital link is utilized to communicate signals to and from the MTSO with cell site transmit modulator and circuitry under the control of control processor .

The mobile unit transmitted signals are direct sequence spread spectrum signals that are modulated by a PN sequence clocked at a predetermined rate which in the preferred embodiment is 1.2288 MHz. This clock rate is chosen to be an integer multiple of the baseband data rate of 9.6 Kbps.

Signals received on antenna are provided to analog receiver . The details of receiver are further illustrated in . Signals received on antenna are provided to downconverter which is comprised of RF amplifier and mixer . The received signals are provided as an input to RF amplifier where they are amplified and output to an input to mixer . Mixer is provided another input that being the output from frequency synthesizer . The amplified RF signals are translated in mixer to an IF frequency by mixing with the frequency synthesizer output signal.

The IF signals are then output from mixer to bandpass filter BPF typically a Surface Acoustic Wave SAW filter having a passband of 1.25 MHz where they are bandpass filtered. The filtered signals are output from BPF to IF amplifier where the signals are amplified. The amplified IF signals are output from IF amplifier to analog to digital A D converter where they are digitized at a 9.8304 MHz clock rate which is exactly 8 times the PN chip rate. Although A D converter is illustrated as part of receiver it could instead be a part of the data and searcher receivers. The digitized IF signals are output from A D converter to data receiver optional data receiver and searcher receiver . The signals output from receiver are I and Q channel signals as discussed later. Although as illustrated in with A D converter being a single device with later splitting of the I and Q channel signals it is envisioned that channel splitting may be done prior to digitizing with two separate A D converters provided for digitizing the I and Q channels. Schemes for the RF IF Baseband frequency downconversion and analog to digital conversion for I and Q channels are well known in the art.

Searcher receiver is used at the cell site to scan the time domain about the received signal to ensure that the associated digital data receiver and data receiver if used are tracking and processing the strongest available time domain signal. Searcher receiver provides a signal to cell site control processor which provides control signals to digital data receivers and for selecting the appropriate received signal for processing.

The signal processing in the cell site data receivers and searcher receiver is different in several aspects than the signal processing by similar elements in the mobile unit. In the inbound i.e. reverse or mobile to cell link the mobile unit does not transmit a pilot signal that can be used for coherent reference purposes in signal processing at the cell site. The mobile to cell link is characterized by a non coherent modulation and demodulation scheme using 64 ary orthogonal signaling.

In the 64 ary orthogonal signaling process the mobile unit transmitted symbols are encoded into one of 2 i.e. 64 different binary sequences. The set of sequences chosen are known as Walsh functions. The optimum receive function for the Walsh function m ary signal encoding is the Fast Hadamard Transform FHT .

Referring again to searcher receiver and digital data receivers and receive the signals output from analog receiver . In order to decode the spread spectrum signals transmitted to the particular cell site receiver through which the mobile unit communicates the proper PN sequences must be generated. Further details on the generation of the mobile unit signals are discussed later herein.

As illustrated in receiver includes two PN generators PN generators and which generate two different short code PN sequences of the same length. These two PN sequences are common to those of all cell site receivers and all mobile units with respect to the outer code of the modulation scheme as discussed in further detail later herein. PN generators and thus respectively provide the output sequences PNand PN. The PNand PNsequences are respectively referred to as the In Phase I and Quadrature O channel PN sequences.

The two PN sequences PNand PN are generated by different polynomials of degree 15 augmented to produce sequences of length 32768 rather than 32767 which would normally be produced. For example the augmentation may appear in the form of the addition of a single zero to the run of fourteen 0 s in a row which appears one time in every maximal length linear sequence of degree 15. In other words one state of the PN generator would be repeated in the generation of the sequence. Thus the modified sequence contains one run of fifteen 1 s and one run of fifteen 0 s. Such a PN generator circuit is disclosed in U.S. Pat. No. 5 228 054 entitled POWER OF TWO LENGTH PSEUDO NOISE SEQUENCE GENERATOR WITH FAST OFFSET ADJUSTMENTS and assigned to the assignee of the present invention.

In the exemplary embodiment receiver also includes a long code PN generator which generates a PNsequence corresponding to a PN sequence generated by the mobile unit in the mobile to cell link. PN generator can be a maximal length linear sequence generator that generates a user PN code that is very long for example degree 42 time shifted in accordance with an additional factor such as the mobile unit address or user ID to provide discrimination among users. Thus the cell site received signal is modulated by both the long code PNsequence and the short code PNand PNsequences. In the alternative a non linear encryption generator such as an encrypt or using the data encryption standard DES to encrypt a 64 symbol representation of universal time using a user specific key may be utilized in place of PN generator .

The PNsequence output from PN generator is exclusive OR ed with the PNand PNsequences respectively in exclusive OR gates and to provide the sequences PN and PN .

The sequences PN and PN are provided to PN QPSK correlator along with the I and Q channel signals output from receiver . Correlator is utilized to correlate the I and Q channel data with the PN and PN sequences. The correlated I and Q channel outputs of correlator are respectively provided to accumulators and where the symbol data is accumulated over a 4 chip period. The outputs of accumulators and are provided as inputs to Fast Hadamard Transform FHT processor . FHT processor produces a set of 64 coefficients for every 6 symbols. The 64 coefficients are then multiplied by a weighting function generated in control processor . The weighting function is linked to the demodulated signal strength. The weighted data output from FHT is provided to diversity combiner and decoder circuitry for further processing.

The second receiver system processes the received signals in a manner similar to that discussed with respect to the first receiver system of . The weighted 64 symbols output from receivers and are provided to diversity combiner and decoder circuitry . Circuitry includes an adder which adds the weighted 64 coefficients from receiver to the weighted 64 coefficients from receiver . The resulting 64 coefficients are compared with one another in order to determine the largest coefficient. The magnitude of the comparison result together with the identity or the largest of the 64 coefficients is used to determine a set of decoder weights and symbols for use within a Viterbi algorithm decoder implemented in circuitry .

The Viterbi decoder contained within circuitry is of a type capable of decoding data encoded at the mobile unit with a constraint length K 9 and of a code rate r . The Viterbi decoder is utilized to determine the most likely information bit sequence. Periodically nominally 1.25 msec a signal quality estimate is obtained and transmitted as a mobile unit power adjustment command along with data to the mobile unit. Further information on the generation of this quality estimate is discussed in further detail in the copending application mentioned above. This quality estimate is the average signal to noise ratio over the 1.25 msec interval.

Each data receiver tracks the timing of the received signal it is receiving. This is accomplished by the well known technique of correlating the received signal by a slightly early local reference PN and correlating the received signal with a slightly late local reference PN. The difference between these two correlations will average to zero if there is no timing error. Conversely if there is a timing error then this difference will indicate the magnitude and sign of the error and the receiver s timing is adjusted accordingly.

The cell site further includes antenna which is coupled to GPS receiver . GPS receiver processes signals received on antenna from satellites in the Navstar Global Positioning System satellite navigation system so as to provide timing signals indicative of Universal Coordinated Time UTC . GPS receiver provides these timing signals to control processor for timing synchronizing at the cell site as discussed previously.

In optional digital data receiver may be included for improved performance of the system. The structure and operation of this receiver is similar to that described with reference to the data receivers and . Receiver may be utilized at the cell site to obtain additional diversity modes. This additional data receiver alone or in combination with additional receivers can track and receive other possible delay paths of mobile unit transmitted signals. Optional additional digital data receivers such as receiver provides additional diversity modes which are extremely useful in those cell sites which are located in dense urban areas where many possibilities for multipath signals occur.

Signals from the MTSO are coupled to the appropriate transmit modulator via digital link under control of control processor . Transmit modulator under control of control processor spread spectrum modulates the data for transmission to the intended recipient mobile unit. Further details with respect to the structure and operation of transmit modulator are discussed below with reference to 

The output of transmit modulator is provided to transmit power control circuitry where under the control of control processor the transmission power may be controlled. The output of circuitry is provided to summer where it is summed with the output of transmit modulator transmit power control circuits directed to other mobiles in the cell. The output of summer is provided to transmit power amplifier circuitry where output to antenna for radiating to mobile units within the cell service area. further illustrates pilot control channel generators and transmit power control circuitry . Circuitry under control of control processor generates and power controls the pilot signal the sync channel and the paging channel for coupling to circuitry and output to antenna .

A block diagram of an exemplary embodiment of the cell site transmitter is illustrated in . The transmitter includes a pair of PN sequence generators used in generating the outer code. These PN generators generate two different PN sequences i.e. the PNand PNsequences as was discussed with reference to . However these PNand PNsequences are delayed in time according to the sector or cell address.

In the transmitter circuitry of is illustrated in further detail with the pilot sync paging and voice channel signals. The transmitter circuitry includes two PN generators PN generators and which generate the PNand PNsequences. PN generators and are responsive to an input signal corresponding to a sector or cell address signal from the control processor so as to provide a predetermined time delay to the PN sequences. These time delayed PNand PNsequences again relate respectively to the In Phase I and Quadrature Q channels. Although only two PN generators are illustrated for respectively generating the PNand PNsequences for the corresponding channels of the cell site or sector it should be understood that many other PN generator schemes may be implemented. For example in an unsectorized cell a pair of PN generators may be provided for each of the pilot sync paging and voice channels to produce in synchronization the PNand PNsequences used in the outer code. Such a case may be advantageous to avoid distributing the PNand PNsequences throughout a large number of circuits.

In the preferred embodiment Walsh function encoding of the channel signals is employed as the inner code. In the exemplary numerology as disclosed herein a total of 64 different Walsh sequences are available with three of these sequences dedicated to the pilot sync and paging channel functions. In the sync paging and voice channels input data is convolutionally encoded and then interleaved as is well known in the art. Furthermore the convolutional encoded data is also provided with repetition before interleaving as is also well known in the art.

The pilot channel contains no data modulation and is characterized as an unmodulated spread spectrum signal that all of the users of a particular cell site or sector use for acquisition or tracking purposes. Each cell or if divided into sectors each sector has a unique pilot signal. However rather than using different PN generators for the pilot signals it is realized that a more efficient way to generate different pilot signals is to use shifts in the same basic sequence. Utilizing this technique a mobile unit sequentially searches the whole sequence and tunes to the offset or shift that produces the strongest correlation. In using this shift of the basic sequence the shifts must be such that the pilots in adjacent cells or sectors must not interfere or cancel.

The pilot sequence must therefore be long enough that many different sequences can be generated by shifts in the basic sequence to support a large number of pilot signals in the system. Furthermore the separation or shifts must be great enough to ensure that there is no interference in pilot signals. Accordingly in a exemplary embodiment of the present invention the pilot sequence length is chosen to be 2. The sequence is generated started by a sequence 2 1 with an extra 0 appended to the sequence when a particular state is detected. In the exemplary embodiment there are chosen to be 512 different pilot signals with offsets in the basic sequence of 64 chips. However offsets may be integer multiples of the 64 chip offset with a corresponding reduction in the number of different pilot signals.

In generating the pilot signal the Walsh zero W sequence which consists of all zeroes is used so as to not modulate the pilot signal which in essence is the PNand PNsequences. The Walsh zero W sequence is therefore multiplied by the PNand PNsequences in exclusive OR gates. The resulting pilot signal thus contains only the PNand PNsequences. With all cell sites and sectors having the same PN sequence for the pilot signal the distinguishing feature between cell sites or sectors of origination of the transmission is the phase of the sequence.

With respect to the portion of transmit modulator and power control circuitry for the pilot channel Walsh generator W generates a signal corresponding to the all zero function as just discussed. The timing in the generation of the Walsh function is provided by the control processor as in the case of all Walsh function generators in the cell site and mobile unit. The output of generator is provided as an input to both of exclusive OR gates and . The other input of exclusive OR gate receives the PNsignal while the other input of exclusive OR gate receives the PNsignal. The PNand PNsignals are respectively exclusive OR ed with the output of generator and respectively provided as inputs to Finite Impulse Response FIR filters and . The filtered signals output from FIR filters and provided to a transmit power control circuitry comprised of gain control elements and . The signals provided to gain control elements and are gain controlled in response to input signals not shown from the control processor. The signals output from gain control elements are provided to transmit power amplifier circuitry whose detailed structure and function is described later herein.

The sync channel information is encoded and then multiplied in exclusive OR gates by a preassigned Walsh sequence. In the exemplary embodiment the selected Walsh function is the W sequence which consists of a sequence of 32 ones followed by 32 zeros . The resulting sequence is then multiplied by the PNand PNsequences in exclusive OR gates.

In the exemplary embodiment the sync channel data information is provided to the transmit modulator typically at a rate of 1200 bps. In the exemplary embodiment the sync channel data is preferably convolutionally encoded at a rate r with a constraint length K 9 with each code symbol repeated twice. This encoding rate and constraint length is common to all encoded forward link channels i.e. sync paging and voice. In an exemplary embodiment a shift register structure is employed for the generators of the code G 753 octal and G 561 octal . The symbol rate to the sync channel is in the exemplary embodiment 4800 sps i.e. one symbol is 208 sec or 256 PN chips.

The code symbols are interleaved by means of a convolutional interleaver spanning in the exemplary embodiment 40 msec. The tentative parameters of the interleaver are I 16 and J 48. Further details on interleaving is found in Howard W. Sams Co. 1987 pp. 343 352. The effect of the convolutional interleaver is to disperse unreliable channel symbols such that any two symbols in a contiguous sequence of I 1 or fewer symbols are separated by at least J 1 symbols in a deinterleaver output. Equivalently any two symbols in a contiguous sequence of J 1 symbols are separated by at least I 1 symbols at the deinterleaver output. In other words if I 16 and J 48 in a string of 15 symbols the symbols are transmitted separated by 885 sec thus providing time diversity.

The sync channel symbols of a particular cell or sector are tied to the corresponding pilot signal for that cell or sector. illustrates the timing of two different pilot channels N and N 1 which are separated by a shift of 64 chips. illustrates only by way of example a timing diagram for the exemplary pilot and sync channels with the state of the actual pilot signal chips and sync channel symbols not illustrated. Each sync channel starts a new interleaver cycle with the first code symbol c of a code symbol pair c c due to a code repeat of two shifted with respect to absolute time by an amount equal to the corresponding pilot.

As illustrated in The N pilot channel starts a new interleaver cycle or pilot sync at the time t. Similarly the N 1 pilot channel starts a new interleaver cycle or pilot sync at the time twhich occurs 64 chip later in time than time t. The pilot cycle in the exemplary embodiment is 26.67 msec long which corresponds to 128 sync channel code symbols or 32 sync channel information bits. The sync channel symbols are interleaved by a convolutional interleaver which spans 26.67 msec. Thus when the mobile unit has acquired the pilot signal it has immediate sync channel interleaver synchronization.

The sync channel symbols are covered by the preassigned Walsh sequence to provide orthogonality in the signal. In the sync channel one code symbol spans four cover sequences i.e. one code symbol to four repetitions of the 32 one 32 zero sequence as illustrated in . As illustrated in a single logical one represents the occurrence of 32 one Walsh chips while a single logical zero represents the occurrence of 32 zero Walsh chips. Orthogonality in the sync channel is still maintained even though the sync channel symbols are skewed with respect to absolute time depending upon the associated pilot channel because sync channel shifts are integer multiples of the Walsh frame.

The sync channel messages in the exemplary embodiment are variable in length. The length of the message is an integer multiple of 80 msec which corresponds to 3 pilot cycles. Included with the sync channel information bits are cyclic redundancy check code CRCC bits for error detection.

In all cases in which a shifted pilot is used a PN phase offset corresponding to the pilot shift is introduced. In other words pilot sync initial state and sync channel messages are skewed with respect to the 1 pps signals. The sync messages carry this phase offset information so that the mobile unit can adjust its timing accordingly.

As soon as a sync channel message has been correctly received the mobile unit has the ability to immediately synchronize to either a paging channel or a voice channel. At pilot sync corresponding to the end of each sync message a new 40 msec interleaver cycle begins. At that time the mobile unit starts deinterleaving the first code symbol of either a code repetition or a c c pair with decoder synchronization achieved. The deinterleaver write address is initialized to 0 and the read address is initialized to J memory deinterleaver synchronization is achieved.

The sync channel messages carry information regarding the state of a 42 bit long PN generator for the voice channel assigned for the communication with the mobile unit. This information is used at the mobile unit digital data receivers to synchronize the corresponding PN generators. For example in the sync channel message N 1 contains a 42 bit field which is indicative of the state state X that the sector or cell voice channel corresponding long code PN generator will have at a predetermined later time such as 160 msec later. The mobile unit after successfully decoding a sync channel message loads at the correct instant of time the long code PN generator with the state X. The mobile unit long code PN generator is thus synchronized to permit descrambling of the user intended messages.

With respect to the portion of transmit modulator and power control circuitry for the sync channel the sync channel information is input from the control processor to encoder . The sync channel data in the exemplary embodiment is as discussed above convolutional encoded by encoder . Encoder further provides repetition of the encoded symbols in the case of the sync channel the encoded symbols are repeated. The symbols output from encoder are provided to interleaver which provides convolutional interleaving of the symbols. The interleaved symbols output from interleaver are provided as an input to exclusive OR gate .

Walsh generator generates a signal corresponding to the Walsh W sequence that is provided as the other input to exclusive OR gate . The sync channel symbol stream and the Walsh W sequence are exclusive OR ed by exclusive OR gate with the result thereof provided as an input to both of exclusive OR gates and .

The other input of exclusive OR gate receives the PNsignal while the other input of exclusive OR gate receives the PNsignal. The PNand PNsignals are respectively exclusive OR ed with the output of exclusive OR gate and respectively provided as inputs to Finite Impulse Response FIR filters and . The filtered signals output from FIR filters and provided to a transmit power control circuitry comprised of digital variable gain control elements and . The signals provided to gain control elements and are digitally gain controlled in response to input digital signals not shown from the control processor. The signals output from gain control elements and are provided to transmit power amplifier circuitry .

The paging channel information is also encoded with repetition interleaved and then multiplied by a preassigned Walsh sequence. The resulting sequence is then multiplied by the PNand PNsequences. The data rate of the paging channel for a particular sector or cell is indicated in an assigned field in the sync channel message. Although the paging channel data rate is variable it is in the exemplary embodiment fixed for each system at one of the following exemplary data rates 9.6 4.8 2.4 and 1.2 kbps.

With respect to the transmit modulator and power control circuitry of the paging channel the paging channel information is input from the control processor to encoder . Encoder is in the exemplary embodiment a convolutional encoder that also provides repetition of the symbols according to the assigned data rate of the channel. The output of encoder is provided to interleaver where the symbols are convolutional interleaved. The output from interleaver is provided as an input to exclusive OR gate . Although the paging channel data rate will vary the code symbol rate is kept constant at 19.2 ksps by code repetition.

Walsh generator generates a signal corresponding to a preassigned Walsh sequence that is provided as the other input to exclusive OR gate . The symbol data and Walsh sequence are exclusive OR ed by exclusive OR gate and provided as an input to both of exclusive OR gates and .

The other input of exclusive OR gate receives the PNsignal while the other input of exclusive OR gate receives the PNsignal. The PNand PNsignals are respectively exclusive OR ed with the output of exclusive OR gate and respectively provided as inputs to Finite Impulse Response FIR filters and . The filtered signals output from FIR filters and are provided to a transmit power control circuitry comprised of gain control elements and . The signals provided to gain control elements and are gain controlled in response to input signals not shown from the control processor. The signals output from gain control elements are provided to transmit power amplifier circuitry .

The data of each voice channel is also encoded with repetition interleaved scrambled multiplied by its assigned Walsh sequence W W and then multiplied by the PNand PNsequences. The Walsh sequence to be used by a particular channel is assigned by the system controller at call setup time in the same manner as channels are assigned to calls in the analog FM cellular system. In the exemplary embodiment illustrated herein up to 61 different Walsh sequences are available for use by the voice channels.

In the exemplary embodiment of the present invention the voice channel utilizes a variable data rate. The intent in using a variable data rate is to lower the data rate when there is no voice activity thereby reducing interference generated by this particular voice channel to other users. The vocoder envisioned to provide variable rate data is disclosed in U.S. Pat. No. 5 414 796 entitled VARIABLE RATE VOCODER also assigned to the assignee of the present invention. Such a vocoder produces data at four different data rates based on voice activity on a 20 msec frame basis. Exemplary data rates are 9.6 kbps 4.8 kbps 2.4 kbps and 1.2 kbps. Although the data rate will vary on a 20 msec basis the code symbol rate is kept constant by code repetition at 19.2 ksps. Accordingly the code symbols are repeated 2 4 and 8 times for the respective data rates 4.8 kbps 2.4 kbps and 1.2 kbps.

Since the variable rate scheme is devised to reduce interference the code symbols at the lower rates will have lower energy. For example for the exemplary data rates of 9.6 kbps 4.8 kbps 2.4 kbps and 1.2 kbps the code symbol energy E is respectively E 2 E 4 E 8 and E 16 where Eis the information bit energy for the 9.6 kbps transmission rate.

The code symbols are interleaved by a convolutional interleaver such that code symbols with different energy levels will be scrambled by the operation of the interleaver. In order to keep track of what energy level a code symbol should have a label is attached to each symbol specifying its data rate for scaling purposes. After orthogonal Walsh covering and PN spreading the quadrature channels are digitally filtered by a Finite Impulse Response FIR filter. The FIR filter will receive a signal corresponding to the symbol energy level in order to accomplish energy scaling according to the data rate. The I and Q channels will be scaled by factors of 1 1 square root over 2 or square root over 2 . In one implementation the vocoder would provide a data rate label in the form of a 2 bit number to the FIR filter for controlling the filter scaling coefficient.

In the circuitry of two exemplary voice channels voice channels i and j are illustrated. The voice channel i data is input from an associated vocoder not shown to transmit modulator . Transmit modulator is comprised of encoder interleaver exclusive OR gates and PN generator and Walsh generator W .

The voice channel i data is input to encoder where in the exemplary embodiment it is convolutional encoded with code symbol repetition according to the input data rate. The encoded data is then provided to interleaver where in the exemplary embodiment it is convolutional interleaved. Interleaver also receives from the vocoder associated with the voice channel i a 2 bit data rate label that is interleaved with the symbol data to identify at the data rate to the FIR filters. The data rate label is not transmitted. At the mobile unit the decoder checks for all possible codes. The interleaved symbol data is output from interleaver at an exemplary rate of 19.2 ksps to an input of exclusive OR gate .

In the exemplary embodiment each voice channel signal is scrambled to provide greater security in cell to mobile transmissions. Although such scrambling is not required it does enhance the security in communications. For example scrambling of the voice channel signals may be accomplished by PN coding the voice channel signals with a PN code determined by the mobile unit address of user ID. Such scrambling may use the PNsequence or encryption scheme as discussed with reference to with respect to the particular receiver for the mobile to cell communications. Accordingly a separate PN generator may be implemented for this function as illustrated in . Although scrambling is discussed with reference to a PN sequence scrambling may be accomplished by other techniques including those well known in the art.

Referring again to scrambling of the voice channel i signal may be accomplished by providing PN generator which receives the assigned mobile unit address from the control processor. PN generator generates a unique PN code that is provided as the other input to exclusive OR gate . The output of exclusive OR gate is provided to the one input of exclusive OR gate .

Walsh generator W generates in response to a function select signal and timing signals from the control processor a signal corresponding to a preassigned Walsh sequence. The value of the function select signal may be determined by the address of the mobile unit. The Walsh sequence signal is provided as the other input to exclusive OR gate . The scrambled symbol data and Walsh sequence are exclusive OR ed by exclusive OR gate with the result provided as an input to both of exclusive OR gates and . PN generator along with all other PN generators and Walsh generators at the cell site provide an output at 1.2288 MHz. It should be noted that PN generator includes a decimator which provides an output at a 19.2 kHz rate to exclusive OR gate .

The other input of exclusive OR gate receives the PNsignal while the other input of exclusive OR gate receives the PNsignal. The PNand PNsignals are respectively exclusive OR ed with the output of exclusive OR gate and respectively provided as inputs to Finite Impulse Response FIR filters and . The input symbols are filtered according to the input data rate label not shown from convolutional interleaver . The filtered signals output from FIR filters and are provided to a portion of transmit power control circuitry comprised of gain control elements and . The signals provided to gain control elements and are gain controlled in response to input signals not shown from the control processor. The signals output from gain control elements are provided to transmit power amplifier circuitry .

In addition to voice bits the forward link voice channel carries power control information. The power control bit rate is in the exemplary embodiment 800 bps. The cell site receiver which is demodulating the mobile to cell signal from a given mobile generates the power control information which is inserted in the cell to mobile voice channel addressed to that particular mobile. Further details on the power control feature is disclosed in the above identified copending application.

Power control bits are inserted at the output of the convolutional interleaver by means of a technique called code symbol puncturing. In other words whenever a power control bit needs to be transmitted two code symbols are replaced by two identical code symbols with polarity given by the power control information. Moreover power control bits are transmitted at the energy level corresponding to the 9600 bps bit rate.

An additional constraint imposed on the power control information stream is that the position of the bits must be randomized among mobile to cell channels. Otherwise the full energy power control bits would generate spikes of interference at regular intervals thus diminishing the detectability of such bits.

With respect to the Walsh generators of Walsh functions are a set of orthogonal binary sequences that can be easily generated by means well known in the art. The characteristic of interest in the Walsh function is that each of the 64 sequences is perfectly orthogonal to all of the other sequences. As such any pair of sequences differ in exactly as many bit positions as they agree i.e. 32 over an interval of 64 symbols. Thus when information is encoded for transmission by the Walsh sequences the receiver will be able to select any one of the Walsh sequences as a desired carrier signal. Any signal energy encoded onto the other Walsh sequences will be rejected and not result in mutual interference to the desired one Walsh sequence.

In the exemplary embodiment for the cell to mobile link the sync paging and voice channels as mentioned previously use convolutional encoding of a constraint length K 9 and code rate r that is two encoded symbols are produced and transmitted for every information bit to be transmitted. In addition to the convolutional encoding convolutional interleaving of symbol data is further employed. It is further envisioned that repetition is also utilized in conjunction with the convolutional encoding. At the mobile unit the optimum decoder for this type of code is the soft decision Viterbi algorithm decoder. A standard design can be used for decoding purposes. The resulting decoded information bits are passed to the mobile unit digital baseband equipment.

Referring again to circuitry includes series of digital to analog D A converters for converting the digital information from the PNand PNspread data for the pilot sync paging and voice channels to analog form. In particular the pilot channel PNspread data is output from gain control element to D A converter . The digitized data is output from D A converter to an summer . Similarly the output of the corresponding gain control elements for the sync paging and voice channels PNspread data i.e. gain control elements and are respectively provided to D A converters and where the signals are digitized and provided to summer . The PNspread data for the pilot sync paging and voice channels are output from gain control elements and are respectively provided to D A converters and where the signals are digitized and provided to summer .

Summer sums the PNspread data for the pilot sync paging and voice channels and while summer sums the PNspread data for the same channels. The summed I and Q channel data is respectively input along with local oscillator LO frequency signals Sin 2 ft and Cos 2 ft to mixers and where they are mixed and provided to summer . The LO frequency signals Sin 2 ft and Cos 2 ft are provided from suitable frequency sources not shown . These mixed IF signals are summed in summer and provided to mixer .

Mixer mixes the summed signal with an RF frequency signal provided by frequency synthesizer so as to provide frequency upconversion to the RF frequency band. The RF signal output from mixer is bandpass filtered by bandpass filter and output to RF amplifier . Amplifier amplifies the band limited signal in accordance with the input gain control signal from the transmit power control circuitry . It should be understood that the embodiment illustrated for transmit power amplifier circuitry is merely for purposes of illustration with many variations in signal summing mixing filtering and amplification possible as is well known in the art.

Cell site control processor has the responsibility for assignment of digital data receivers and transmit modulators to a particular call. Control processor also monitors the progress of the call quality of the signals and initiates teardown on loss of signal. The cell site communicates with the MTSO via link where it is coupled by a standard telephone wire optical fiber or microwave link.

When the cell diversity mode is active the call is processed by two cell sites. Accordingly signals will arrive at the MTSO from more than one cell site with nominally the same information. However because of fading and interference on the inbound or reverse link from the mobile unit to the cell sites the signal from one cell site may be of better quality than the signal from the other cell site.

Digital switch is used in routing the information stream corresponding to a given mobile unit from one or more cell sites to diversity combiner or the corresponding diversity combiner as determined by a signal from system control processor . When the system is not in the cell diversity mode diversity combiner may be either bypassed or fed the same information on each input port.

A multiplicity of serial coupled diversity combiners and vocoder are provided in parallel nominally one for each call to be processed. Diversity combiner compares the signal quality indicators accompanying the information bits from the two or more cell site signals. Diversity combiner selects the bits corresponding to the highest quality cell site on a frame by frame basis of the information for output to vocoder .

Vocoder converts the format of the digitized voice signal to standard 64 Kbps PCM telephone format analog or any other standard format. The resultant signals is transmitted from vocoder to digital switch . Under the control of system control processor the call is routed to the PSTN.

Voice signals coming from the PSTN intended for the mobile units are provided to digital switch for coupling to an appropriate digital vocoder such as vocoder under control of system control processor . Vocoder encodes the input digitized voice signals and provides the resulting information bit stream directly to digital switch . Digital switch under system control processor directs the encoded data to the cell site or cell sites to which the mobile unit is communicating. Although discussed previously that information transmitted to the MTSO analog voice it is further envisioned that digital information may also be communicated in the system. To ensure compatibility with the system care must be taken in proper framing of the data.

If the mobile unit is in a handoff mode communicating to multiple cell sites or in a cell diversity mode digital switch routes the calls to the appropriate cell sites for transmission by the appropriate cell site transmitter to the intended recipient mobile unit. However if the mobile unit is communicating with only a single cell site or not in a cell diversity mode the signal is directed only to a single cell site.

System control processor provides control over digital switches and for routing data to and from the MTSO. System control processor also determines the assignment of calls to the cell sites and to the vocoders at the MTSO. Furthermore system control processor communicates with each cell site control processor about the assignment of particular calls between the MTSO and cell site and the assignment of PN codes for the calls. It should be further understood that as illustrated in digital switches and are illustrated as two separate switches however this function may be performed by a single physical switching unit.

When the cell diversity mode is in use the mobile unit will use the searcher receiver to identify and acquire the strongest multipath signal from each of the two cell sites. The digital data receivers will be controlled by the searcher receiver and the control processor so as to demodulate the strongest signals. When the number of receivers is less than the number of cell sites transmitting information in parallel a switching diversity capability is possible. For example with only a single data receiver and with two cell sites transmitting the searcher will monitor the pilots from both cell sites and choose the strongest signal for the receiver to demodulate. In this embodiment the choice can be made as frequently as every vocoder frame or about every 20 msec.

The system control processor has responsibility for assignment of digital data receivers and modulators at the cell site to handle particular calls. Thus in the cell to mobile link the system control processor controls the assignment of Walsh sequences used at the cell site in transmission of a particular call to the mobile unit. In addition the system control processor controls the receiver Walsh sequences and PN codes. In the mobile to cell link the system control processor also controls the mobile unit user PN codes for the call. Assignment information is therefore transmitted from the MTSO to the cell site and from there to the cell to the mobile. The system control processor also monitors the progress of the call the quality of signals and initiates tear down on loss of signal.

In the mobile to cell link the channel characteristics dictate that the modulation technique be modified. In particular the use of a pilot carrier as is used in the cell to mobile link is no longer feasible. The pilot carrier must be more powerful than a voice carrier in order to provide a good phase reference for data modulation. With the cell site transmitting many simultaneous voice carriers a single pilot signal can be shared by all the voice carriers. Therefore the pilot signal power per voice carrier is quite small.

In the mobile to cell link however there is usually only a single voice carrier per mobile. If a pilot were used it would require significantly more power than the voice carrier. This situation is clearly not desirable since overall system capacity would be greatly reduced due to the interference caused by the presence of a larger number of high power pilot signals. Therefore a modulation capable of efficient demodulation without a pilot signal must be used.

With the mobile to cell channel corrupted by Rayleigh fading resulting in a rapidly varying channel phase coherent demodulator techniques such as a Costas loop which derives phase from the received signal are not feasible. Other techniques such as differentially coherent PSK can be employed but fail to provide the desired level of signal to noise ratio performance.

Thus a form of orthogonal signaling such as binary quaternary or m ary signaling should be employed. In the exemplary embodiment a 64 ary orthogonal signaling technique is employed using Walsh functions. The demodulator for m ary orthogonal signaling requires channel coherence only over the duration of transmission of the m ary symbol. In the exemplary embodiment this is only two bit times.

The message encoding and modulation process begins with a convolutional encoder of constraint length K 9 and code rate r . At a nominal data rate of 9600 bits per second the encoder produces 28800 binary symbols per second. These are grouped into characters containing 6 symbols each at a rate of 4800 characters per second with there being 64 possible characters. Each character is encoded into a length 64 Walsh sequence containing 64 binary bits or chips. The 64 ary Walsh chip rate is 307 200 chips per second in the exemplary embodiment.

The Walsh chips are then covered or multiplied by a PN sequence running at the rate of 1.2288 MHz. Each mobile unit is assigned a unique PN sequence for this purpose. This PN sequence can either be assigned only for the duration of the call or assigned permanently to the mobile unit. The assigned PN sequence is referred to herein as the user PN sequence. The user PN sequence generator runs at a clock rate of 1.2288 MHz and so as to produce four PN chips for every Walsh chip.

Finally a pair of short length 32768 PN sequences are generated. In the exemplary embodiment the same sequences are used as for the cell to mobile link. The user PN sequence covered Walsh chip sequence is then covered or multiplied by each of the two short PN sequences. The two resulting sequences then bi phase modulate a quadrature pair of sinusoids and are summed into a single signal. The resulting signal is then bandpass filtered translated to the final RF frequency amplified filtered and radiated by the antenna of the mobile unit. As was discussed with reference to the cell to mobile signal the ordering of the filtering amplification translation and modulation operations may be interchanged.

In an alternative embodiment two different phases of the user PN code might be produced and used to modulate the two carrier phases of the quadraphase waveform dispensing with the need for using the length 32768 sequences. In yet another alternative the mobile to cell link might utilize only bi phase modulation also dispensing with the need for the short sequences.

The cell site receiver for each signal produces the short PN sequences and the user PN sequence for each active mobile signal being received. The receiver correlates the received signal energy with each of the coded waveforms in separate correlators. Each of the correlator outputs is then separately processed to demodulate the 64 ary encoding and the convolutional coding using a Fast Hadamard Transform processor and a Viterbi algorithm decoder.

In another alternative modulation scheme for the mobile to cell link the same modulation scheme would be used as for the cell to mobile link. Each mobile would utilize the pair of 32768 length sector codes as outer codes. The inner code would utilize a length 64 Walsh sequence that is assigned to the mobile for use while it is in that sector. Nominally the same Walsh sequence would be assigned to the mobile for the mobile to cell link as is used for the cell to mobile link.

The above orthogonal PN coding scheme limits the available bandwidth spreading that can be used by the modulation system to a maximum rate of the chip rate divided by 64 or 19200 Hz for the numbers used in the exemplary embodiment. This would preclude the use of m ary encoding with large m as described for the exemplary embodiment. As an alternative however a rate r constraint length K 9 convolutional code could be used with differential binary phase shift keying modulation of the encoded binary symbols. The demodulator in the cell site could build up a phase reference over a short interval using the technique described in the article Nonlinear Estimation of PSK Modulated Carrier with Application to Burst Digital Transmission Andrew J. Viterbi and Audrey M. Viterbi IEEE Transactions On Information Theory Vol IT 29 No. 4 July 1983. For example a phase reference could be averaged over only 4 symbols requiring no more channel coherence than the above 64 ary scheme.

The performance of the just described alternative scheme however will be inferior to the preferred embodiment in the presence of severe Rayleigh fading and multipath conditions. However in certain environments where fading and multipath are less severe for example the satellite mobile channel and in certain land mobile channels the performance of the alternative system could be better than the preferred embodiment. This can occur because the gain from making the mobile signals orthogonal to each other may exceed the loss in detection efficiency of the DPSK scheme.

In order to satisfy the requirement for time alignment in orthogonal Walsh functions for the alternative mobile to cell link each cell receiver determines the time error from nominal timing of each received signal. If a given received signal lags in timing then the associated cell modulator and transmitter will transmit a command to this mobile to advance its transmit timing by a small increment. Conversely if the received signal timing of a mobile leads the nominal timing a command to retard by a small increment is transmitted to the mobile. The timing adjustment increments are made on the order of PN chip or 101.7 nanoseconds. The commands are transmitted at a relatively low rate on the order of 10 to 50 Hz and consist of a single bit inserted into the digital voice data flow.

During a soft handoff operation the mobile unit will be receiving signals from two or more cells. Because the mobile unit can only align its timing in response to one of cells timing adjust commands the mobile unit will normally move its timing in response to the commands received from the strongest cell being received. The mobile unit transmitted signal will thus be in time alignment with the cell with which it has the best path. Otherwise greater mutual interference to other users will result.

If each cell receiver receiving a mobile signal performs the above time error measurement and correction transmission operation then all the mobiles received signals will normally be received with approximately the same timing resulting in reduced interference.

The details of receiver are further illustrated in . Received signals from antenna are provided to downconverter which is comprised of RF amplifier and mixer . The received signals are provided as an input to RF amplifier where they are amplified and output as an input to mixer . Mixer is provided with another input that being the signal output from frequency synthesizer . The amplified RF signals are translated in mixer to an IF frequency by mixing with the frequency synthesizer output signal.

The IF signals are output from mixer to bandpass filter BPF typically a Surface Acoustic Wave SAW filter having a passband of approximately 1.25 MHz where they are from bandpass filtered. The characteristics of the SAW filter are chosen to match the waveform of the signal transmitted by the cell site. The cell site transmitted signal is a direct sequence spread spectrum signal that is modulated by a PN sequence clocked at a predetermined rate which in the exemplary embodiment is 1.2288 MHz. This clock rate is chosen to be an integer multiple of the baseband data rate of 9.6 kbps.

The filtered signals are output from BPF as an input to a variable gain IF amplifier where the signals are again amplified. The amplified IF signals are output from IF amplifier to analog to digital A D converter where the signals are digitized. The conversion of the IF signal to a digital signal occurs at a 9.8304 MHz clock rate in the exemplary embodiment which is exactly eight times the PN chip rate. Although A D converter is illustrated as part of receiver it could instead be a part of the data and searcher receivers. The digitized IF signals are output from A D converter to data receivers and and searcher receiver .

Receiver also performs a power control function for adjusting the transmit power of the mobile unit. An automatic gain control AGC circuit is also coupled to the output of IF amplifier . In response to the level of the amplified IF signal AGC circuit provides a feedback signal to the gain control input of IF amplifier . Receiver also uses AGC circuit to generate an analog power control signal that is provided to transmit power control circuitry .

In the digitized signal output from receiver is provided to digital data receivers and and to searcher receiver . It should be understood that an inexpensive low performance mobile unit might have only a single data receiver while higher performance units may have two or more to allow diversity reception.

The digitized IF signal may contain the signals of many on going calls together with the pilot carriers transmitted by the current cell site and all neighboring cell sites. The function of the receivers and are to correlate the IF samples with the proper PN sequence. This correlation process provides a property that is well known in the art as processing gain which enhances the signal to interference ratio of a signal matching the proper PN sequence while not enhancing other signals. Correlation output is then synchronously detected using the pilot carrier from the closest cell site as a carrier phase reference. The result of this detection process is a sequence of encoded data symbols.

A property of the PN sequence as used in the present invention is that discrimination is provided against multipath signals. When the signal arrives at the mobile receiver after passing through more than one path there will be a difference in the reception time of the signal. This reception time difference corresponds to the difference in distance divided by the velocity of propagation. If this time difference exceeds one microsecond then the correlation process will discriminate between the paths. The receiver can choose whether to track and receive the earlier or later path. If two receivers are provided such as receivers and then two independent paths can be tracked and processed in parallel.

Searcher receiver under control of control processor is for continuously scanning the time domain around the nominal time of a received pilot signal of the cell site for other multi path pilot signals from the same cell site and for other cell site transmitted pilot signals. Receiver will measure the strength of any reception of a desired waveform at times other than the nominal time. Receiver compares signal strength in the received signals. Receiver provides a signal strength signal to control processor indicative of the strongest signals.

Processor provides control signals to data receivers and for each to process a different one of the strongest signals. On occasion another cell site transmitted pilot signal is of greater signal strength than the current cell site signal strength. Control processor then would generate a control message for transmission to the system controller via the current cell site requesting a transfer of the cell to the cell site corresponding to the strongest pilot signal. Receivers and may therefore handle calls through two different cell sites.

During a soft handoff operation the mobile unit will be receiving signals from two or more cells. Because the mobile unit can only align its timing in response to one of cells timing adjust commands the mobile unit will normally move its timing in response to the commands received from the strongest cell being received. The mobile unit transmitted signal will thus be in time alignment with the cell with which it has the best path. Otherwise greater mutual interference to other users will result.

Further details of an exemplary receiver such as data receiver is illustrated in further detail in . Data receiver includes PN generators and which generate the PNand PNsequences in a manner and corresponding to those generated by the cell site. Timing and sequence control signals are provided to PN generators and from control processor . Data receiver also includes Walsh generator which provides the appropriate Walsh function for communication with this mobile unit by the cell site. Walsh generator generates in response to timing signals not shown and a function select signal from the control processor a signal corresponding to an assigned Walsh sequence. The function select signal is transmitted to the mobile unit by the cell site as part of the call set up message. The PNand PNsequences output from PN generators and are respectively input to exclusive OR gates and . Walsh generator provides its output to both of exclusive OR gates and where the signals are exclusive OR ed and output the sequences PN and PN .

The sequences PN and PN are provided to receiver where they are input to PN QPSK correlator . PN correlator may be constructed in a manner similar to the PN correlator of the cell site digital receivers. PN correlator correlates the received I and Q channel data with the PN and PN sequences and provides correlated I and Q channel data output to corresponding accumulators and . Accumulators and accumulate the input information over a period of one symbol or 64 chips. The accumulator outputs are provided to phase rotator which also receives a pilot phase signal from control processor . The phase of the received symbol data is rotated in accordance with the phase of the pilot signal as determined by the searcher receiver and the control processor. The output from phase rotator is the I channel data which is provided to the deinterleaver and decoder circuitry.

Control processor also includes PN generator which generates the user PN sequence in response to an input mobile unit address or user ID. The PN sequence output from PN generator is provided to diversity combiner and decoder circuitry. Since the cell to mobile signal is scrambled with the mobile user address PN sequence the output from PN generator is used in descrambling the cell site transmitted signal intended for this mobile user similar to that as in the cell site receiver. PN generator specifically provides the output PN sequence to the deinterleaver and decoder circuitry where it is used to descramble the scrambled user data. Although scrambling is discussed with reference to a PN sequence it is envisioned that other scrambling techniques including those well known in the art may be utilized.

The outputs of receivers and are thus provided to diversity combiner and decoder circuitry . The diversity combiner circuitry contained within circuitry simply adjusts the timing of the two streams of received symbols into alignment and adds them together. This addition process may be proceeded by multiplying the two streams by a number corresponding to the relative signal strengths of the two streams. This operation can be considered a maximal ratio diversity combiner. The resulting combined signal stream is then decoded using a forward error detection FEC decoder also contained within circuitry . The usual digital baseband equipment is a digital vocoder system. The CDMA system is designed to accommodate a variety of different vocoder designs.

Baseband circuitry typically includes a digital vocoder not shown which may be a variable rate type as disclosed in the previously mentioned copending patent application. Baseband circuitry further serves as an interface with a handset or any other type of peripheral device. Baseband circuitry accommodates a variety of different vocoder designs. Baseband circuitry provides output information signals to the user in accordance with the information provided thereto from circuitry .

In the mobile to cell link user analog voice signals are typically provided through a handset as an input to baseband circuitry . Baseband circuitry includes an analog to digital A D converter not shown which converts the analog signal to digital form. The digital signal is provided to the digital vocoder where it is encoded. The vocoder output is provided to a forward error correction FEC encoding circuit not shown for error correction. In the exemplary embodiment the error correction encoding implemented is of a convolutional encoding scheme. The digitized encoded signal is output from baseband circuitry to transmit modulator .

Transmit modulator first Walsh encodes the transmit data and then modulates the encoded signal on a PN carrier signal whose PN sequence is chosen according to the assigned address function for the call. The PN sequence is determined by control processor from call setup information that is transmitted by the cell site and decoded by receivers and and control processor . In the alternative control processor may determine the PN sequence through prearrangement with the cell site. Control processor provides the PN sequence information to transmit modulator and to receivers and for call decoding.

The output of transmit modulator is provided to transmit power control circuitry . Signal transmission power is controlled by the analog power control signal provided from receiver . Control bits transmitted by the cell sites in the form of power adjustment commands are processed by data receivers and . The power adjustment commands are used by control processor in setting the power level in mobile unit transmission. In response to these commands control processor generates a digital power control signal that is provided to circuitry . Further information on the relationship of receivers and control processor and transmit power control with respect to power control is further described in the above mentioned U.S. Pat. No. 5 056 109.

Transmit power control circuitry outputs the power controlled modulated signal to transmit power amplifier circuitry . Circuitry amplifies and converts the IF signal to an RF frequency by mixing with a frequency synthesizer output signal which tunes the signal to the proper output frequency. Circuitry includes an amplifier which amplifies the power to a final output level. The intended transmission signal is output from circuitry to diplexer . Diplexer couples the signal to antenna for transmission to the cell sites.

Control processor also is capable of generating control messages such as cell diversity mode requests and cell site communication termination commands. These commands are provided to transmit modulator for transmission. Control processor is responsive to the data received from data receivers and and search receiver for making decisions relative to handoff and diversity combining.

With respect to transmission by the mobile unit the mobile user analog voice signal is first passed through a digital vocoder. The vocoder output is then in sequence convolutional forward error correction FEC encoded 64 ary orthogonal sequence encoded and modulated on a PN carrier signal. The 64 ary orthogonal sequence is generated by a Walsh function encoder. The encoder is controlled by collecting six successive binary symbol outputs from the convolutional FEC encoder. The six binary collectively determine which of the 64 possible Walsh sequences will be transmitted. The Walsh sequence is 64 bits long. Thus the Walsh chip rate must be 9600 3 64 307200 Hz for a 9600 bps data transmission rate.

In the mobile to cell link a common short PN sequence is used for all voice carriers in the system while user address encoding is done using the user PN sequence generator. The user PN sequence is uniquely assigned to the mobile for at least the duration of the call. The user PN sequence is exclusive OR ed with the common PN sequences which are length 32768 augmented maximal length linear shift register sequences. The resulting binary signals then each bi phase modulate a quadrature carrier are summed to form a composite signal are bandpass filtered and translated to an IF frequency output. In the exemplary embodiment a portion of the filtering process is actually carried out by a finite impulse response FIR digital filter operating on the binary sequence output.

The modulator output is then power controlled by signals from the digital control processor and the analog receiver converted to the RF frequency of operation by mixing with a frequency synthesizer which tunes the signal to proper output frequency and then amplified to the final output level. The transmit signal is then passed on to the diplexer and the antenna.

Transmit modulator further includes PN generator which receives the mobile unit address as an input in determining the output PN sequence. PN generator generates the user specific 42 bit sequence as was discussed with reference to . A further attribute of PN generator that is common to all user PN generators and not previously discussed is the use of a masking technique in generating the output user PN sequence. For example a 42 bit mask is provided for that user with each bit of the 42 bit mask exclusive OR ed with a bit output from each register of the series of shift register that form the PN generator. The results of the mask and shift register bit exclusive OR operation are then exclusive OR ed together to form the PN generator output that is used as the user PN sequence. The output PN sequence of PN generator the sequence PN is input to exclusive OR gate . The Walsh symbol data and the PNsequence are exclusive OR ed in exclusive OR gate and provided as in input to both of exclusive OR gates and .

Transmit modulator further includes PN generators and which respectively generate PNand PNsequences. All mobile units use the same PNand PNsequences. These PN sequences are in the exemplary embodiment the zero shift used in the cell to mobile communications. The other input of exclusive OR gates and are respectively provided with the PNand PNsequences output from PN generators and . The sequences PNand PNare exclusive OR ed in the respective exclusive OR gates with the output provided to transmit power control .

In the exemplary embodiment the mobile to cell link uses rate r convolutional code with constraint length K 9. The generators for the code are G 557 octal G 663 octal and G 711 octal . Similar to the cell to mobile link code repetition is used to accommodate the four different data rates that the vocoder produces on a 20 msec frame basis. Unlike the cell to mobile link the repeated code symbols are not transmitted over the air at lower energy levels rather only one code symbol of a repetition group is transmitted at the nominal power level. In conclusion the code repetition in the exemplary embodiment is used merely as an expedient to fit the variable data rate scheme in the interleaving and modulation structure as it will be shown in the following paragraphs.

A block interleaver spanning 20 msec exactly one vocoder frame is used in the mobile to cell link. The number of code symbols in 20 msec assuming a data rate of 9600 bps and a code rate r is 576. The N and B parameters N is equal to the number of rows and B to the number of columns of the interleaver array are 32 and 18 respectively. The code symbols are written into the interleaver memory array by rows and read out by columns.

The modulation format is 64 ary orthogonal signaling. In other words interleaved code symbols are grouped into groups of six to select one out of 64 orthogonal waveforms. The 64 time orthogonal waveforms are the same Walsh functions used as cover sequences in the cell to mobile link.

The data modulation time interval is equal to 208.33 sec and is referred to as a Walsh symbol interval. At 9600 bps 208.33 sec corresponds to 2 information bits and equivalently to 6 code symbols at a code symbol rate equal to 28800 sps. The Walsh symbol interval is subdivided into 64 equal length time intervals referred to as Walsh chips each lasting 208.33 64 3.25 sec. The Walsh chip rate is then 1 3.25 sec 307.2 kHz. Since the PN spreading rate is symmetric in the two links i.e. 1.2288 MHz there are exactly 4 PN chips per Walsh chip.

A total of three PN generators are used in the mobile to cell link path. The user specific 42 bit PN generator and the pair of 15 bit I and Q channel PN generators. Following the user specific spreading operation the signal is QPSK spread as it was done in the cell to mobile link. Unlike the cell to mobile link where each sector or cell was identified by unique sequences of length 2 here all mobile units use the same I and Q PN sequences. These PN sequences are the zero shift sequences used in the cell to mobile link also referred to as the pilot sequences.

Code repetition and energy scaling are used in the cell to mobile link to accommodate the variable rates produced by the vocoder. The mobile to cell link uses a different scheme based on a burst transmission.

The vocoder produces four different data rates i.e. 9600 4800 2400 and 1200 bps on a 20 msec frame basis as in the cell to mobile link. The information bits are encoded by the rate r convolutional encoder and code symbols are repeated 2 4 and 8 times at the three lower data rates. Thus the code symbol rate is kept constant at 28800 sps. Following the encoder the code symbols are interleaved by the block interleaver which spans exactly one vocoder frame or 20 msec. A total of 576 code symbols are generated every 20 msec by the convolutional encoder some of which might be repeated symbols.

The code symbols sequence as it is transmitted is shown in . Notice that a vocoder frame 20 msec has been subdivided into 16 slots each lasting 1.25 msec. The numerology of the mobile to cell link is such that in each slot there are 36 code symbols at the 28800 sps rate or equivalently 6 Walsh symbols at the 4800 sps rate. At the rate i.e. 4800 bps the slots are grouped into 8 groups each comprising 2 slots. At the rate i.e. 2400 bps the slots are grouped into 4 groups each comprising 4 slots and finally at the rate i.e. 1200 bps the slots are grouped into 2 groups each comprising 8 slots.

An exemplary symbol burst transmission pattern is further illustrated in . For example at the rate i.e. 2400 bps during the fourth slot of the first group the fourth and eighth row of the interleaver memory array are read out by columns and sequentially transmitted. The slot position for the transmitted data must be randomized in order to reduce the interference.

The mobile to cell link timing is illustrated in . expands upon the timing diagram of to include the mobile to cell channels i.e. voice and access. The synchronization of the mobile to cell link comprises the following steps 

At this point the mobile has complete synchronization i.e. PN synchronization and real time synchronization and can begin to transmit on either the access channel or voice channel.

The mobile unit in order to originate a call must be provided with signaling attributes in order to complete a call to another system user via a cell site. In the mobile to cell link the envisioned access technique is the slotted ALOHA. An exemplary transmission bit rate on the reverse channel is 4800 bps. An access channel packet comprises of a preamble followed by the information.

The preamble length is in the exemplary embodiment an integer multiple of 20 msec frames and is a sector cell parameter which the mobile receives in one of the paging channel messages. Since the cell receivers use the preambles to resolve propagation delays this scheme allows the preamble length to vary based on the cell radius. The users PN code for the access channel is either prearranged or transmitted to the mobile units on the paging channel.

The modulation is fixed and constant for the duration of the preamble. The orthogonal waveform used in the preamble is W i.e. the all zero Walsh function. Notice that an all zero pattern at the input of the convolutional encoder generates the desired waveform W.

An access channel data packet may consist of one or at most two 20 msec frames. The coding interleaving and modulation of the access channel is exactly the same as for a voice channel at the 9600 bps rate. In an exemplary embodiment the sector cell requires the mobile units to transmit a 40 msec preamble and the access channel message type requires one data frame. Let Nbe the number of preamble frames where k is the number of 20 msec elapsed from a predefined time origin. Then mobiles are allowed to initiate transmission on the access channel only when the equation k N 2 0 is true.

With respect to other communications applications it may be desirable to rearrange the various elements of the error correction coding the orthogonal sequence coding and the PN coding to better fit the application.

For example in satellite mobile communications where the signals are relayed between large Hub earth stations and the mobile terminals by one or more earth orbiting satellites it may be desirable to employ coherent modulation and demodulation techniques in both directions of the link because the channel is much more phase coherent than the terrestrial mobile channel. In such an application the mobile modulator would not utilize m ary encoding as described above. Instead bi phase or four phase modulation of forward error correction symbols might be employed with conventional coherent demodulation with carrier phase extracted from the received signal using Costas loop techniques. In addition the orthogonal Walsh function channelization such as herein described for the cell to mobile link may be employed. As long as the channel phase remains reasonably coherent this modulation and demodulation system provides operation with lower Eb No than m ary orthogonal signaling resulting in higher system capacity.

In another embodiment it may be preferable to encode the speech waveform directly into the RF waveform instead of utilizing a vocoder and FEC techniques. While the use of a vocoder and FEC techniques result in very high link performance the complexity of implementation is high resulting in additional cost and in high power consumption. These disadvantages may be especially unfavorable in a pocket portable telephone where battery consumption and cost are important. In customary digital telephone transmission practice the speech waveform is represented in a digital format as 8 bit speech samples at a sample rate of 8 kHz. The CDMA system could encode the 8 bit samples directly into carrier phase angles. This would eliminate the need for a vocoder or a FEC encoder decoder. It would also require a somewhat higher signal to noise ratio for good performance resulting in lower capacity. In another alternative the 8 bit speech samples could be directly encoded into carrier amplitudes. In yet another alternative the speech waveform samples could be encoded into carrier phases and amplitudes.

The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

