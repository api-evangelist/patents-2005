---

title: Security tokens including displayable claims
abstract: A system for providing a digital identity includes a claims transformer programmed to generate a security token including a computational token and a display token, the computational token including one or more claims associated with an identity of a principal, and the display token including display information about the claims in the computational token. The display information is configured to allow the principal to view the display token.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07788499&OS=07788499&RS=07788499
owner: Microsoft Corporation
number: 07788499
owner_city: Redmond
owner_country: US
publication_date: 20051219
---
A portion of the disclosure of this patent document contains material that is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the United States Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

Identity is an important component enabling interactions in everyday life. For example an individual s credit card enables merchants to identify and allow the individual to purchase products and services on credit. The same is true in the digital world as well where digital identity enables digital interactions. For example digital identities can be used to authenticate parties to each other in the digital environment. Knowing with whom one is interacting is an important element in deciding whether or not to trust and provide information to a party.

An entity can use a digital identity to authenticate a party s identity or other personal information about the party. A digital identity can be issued by another entity and include information about the party. Examples of such information include the party s name address social security number age telephone number etc. A party can have multiple digital identities issued by one or more other entities similar to that of an individual having a driver s license a credit card and a frequent flyer card.

The party can use a digital identity to identity itself to a third party. For example a third party such as an online service can require that the party authenticate its identity before the third party allows the party to access goods or services. In order to authenticate its identity the party can forward to the third party a digital identity in the form of a security token issued by another entity trusted by the third party. Once authentication is complete the third party can provide access to the goods or services requested by the party.

In many cases the party has little or no ability to control or view the contents of a security token issued by another entity. When the party shares a security token with a third party during authentication of the party s identity the party s privacy can become a concern. For example without knowledge of the contents of the security token the party can unknowingly share personal information in the security token with the third party that the party does not need to share for authentication. In addition the party can unknowingly provide personal information that the party does not want to share with the third party e.g. social security number telephone number etc. .

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

One aspect relates to a system for providing a digital identity that includes a claims transformer programmed to generate a security token including a computational token and a display token the computational token including one or more claims associated with an identity of a principal and the display token including display information about the claims in the computational token. The display information is configured to allow the principal to view the display token.

Another aspect relates to a method for providing a digital identity the method including receiving a security token including a computational token and a display token the computational token including one or more claims associated with an identity of a principal and the display token including display information about the claims in the computational token and displaying the display information in the display token for the principal so that the principal can review the contents of the display token.

Yet another aspect relates to a computer readable medium having computer executable instructions for performing steps including generating a security token including receiving a security token including a computational token and a display token the computational token including one or more claims associated with an identity of a principal and the display token including display information about the claims in the computational token and displaying the display information in the display token for the principal so that the principal can review the contents of the display token.

Example embodiments will now be described more fully hereinafter with reference to the accompanying drawings. These embodiments are provided so that this disclosure will be thorough and complete. Like numbers refer to like elements throughout.

Example embodiments disclosed herein relate generally to digital identities that can be exchanged between a first party and a second party to authenticate an identity and or information related to the first party. In example embodiments herein the first party can be an individual a company an organization a computer or other device a service or any other type of entity. The first party is referred to herein as the principal. In example embodiments the second party has goods services or other information that the principal desires to access and or obtain. The second party is referred to herein as the relying party.

Referring now to an example digital identity system is shown including a principal and a relying party . Principal and relying party can communicate with each other over one or more networks as described further below. In example embodiments principal can request goods services or other information from relying party and relying party can require authentication of the identity of or information about principal before or in conjunction with providing the requested goods services or information.

Also shown in are a claims transformer and a claims authority sometimes referred to as a security token service or STS . In the example shown claims transformer and claims authority are one or more entities that can provide one or more claims or assertions about a principal. A claim is a statement made about the principal related to the principal s identity or information about the principal such as for example name address social security number age etc. As described further below claims transformer and claims authority can provide claims to the principal and or the relying party in the form of a signed security token.

In example embodiments claims authority is in a trusted relationship with relying party so that relying party trusts the claims in the signed security token from claims authority .

Although claims transformer and claims authority are shown as separate entities in in alternative embodiments claims transformer and claims authority can be the same entity or different entities. In addition although claims transformer is illustrated as being in communication with principal in alternative embodiments relying party can communicate directly with claims transformer as described further below.

In example embodiments disclosed herein system is implemented as an InfoCard system provided in the WINFX application programming interface developed by Microsoft Corporation of Redmond Wash. The InfoCard system allows principals to manage multiple digital identities from various claims authorities.

The InfoCard system utilizes a web services platform such as the Windows Communication Foundation in the WINFX application programming interface. In addition the InfoCard system is built using the Web Services Security Specifications propagated at least in part by Microsoft Corporation of Redmond Wash. These specifications include a message security model WS Security an endpoint policy WS SecurityPolicy a metadata protocol WS MetadataExchange and a trust model WS Trust. Generally the WS Security model describes how to attach security tokens to messages. The WS SecurityPolicy model describes end point policy requirements such as required security tokens and supported encryption algorithms implemented using a metadata protocol WS MetadataExchange. The WS Trust model describes a framework for trust models that enable different web services to interoperate.

Example embodiments described herein refer to the Web Services Security Specifications described above. In alternative embodiments one or more different specifications can be used to facilitate communications between the various elements in system .

Referring now to in one example embodiment principal is an individual that uses a computer system such as an example computer system to communicate with relying party and claims transformer . Computer system can take a variety of forms such as for example a desktop computer a laptop computer and a hand held computer. In addition although computer system is illustrated the systems and methods disclosed herein can be implemented in various alternative computer systems as well.

The system includes a processor unit a system memory and a system bus that couples various system components including the system memory to the processor unit . The system bus can be any of several types of bus structures including a memory bus a peripheral bus and a local bus using any of a variety of bus architectures. The system memory includes read only memory ROM and random access memory RAM . A basic input output system BIOS which contains basic routines that help transfer information between elements within the computer system is stored in ROM .

The computer system further includes a hard disk drive for reading from and writing to a hard disk a magnetic disk drive for reading from or writing to a removable magnetic disk and an optical disk drive for reading from or writing to a removable optical disk such as a CD ROM DVD or other optical media. The hard disk drive magnetic disk drive and optical disk drive are connected to the system bus by a hard disk drive interface a magnetic disk drive interface and an optical drive interface respectively. The drives and their associated computer readable media provide nonvolatile storage of computer readable instructions data structures programs and other data for the computer system .

Although the example environment described herein can employ a hard disk a removable magnetic disk and a removable optical disk other types of computer readable media capable of storing data can be used in the example system . Examples of these other types of computer readable mediums that can be used in the example operating environment include magnetic cassettes flash memory cards digital video disks Bernoulli cartridges random access memories RAMs and read only memories ROMs .

A number of program modules can be stored on the hard disk magnetic disk optical disk ROM or RAM including an operating system such as the WINDOWS operating system from Microsoft Corporation one or more application programs other program modules and program data .

A user may enter commands and information into the computer system through input devices such as for example a keyboard mouse or other pointing device. Examples of other input devices include a toolbar menu touch screen microphone joystick game pad pen satellite dish and scanner. These and other input devices are often connected to the processing unit through a serial port interface that is coupled to the system bus . Nevertheless these input devices also may be connected by other interfaces such as a parallel port game port or a universal serial bus USB . An LCD display or other type of display device is also connected to the system bus via an interface such as a video adapter . In addition to the display computer systems can typically include other peripheral output devices not shown such as speakers and printers.

The computer system may operate in a networked environment using logical connections to one or more remote computers such as a remote computer . The remote computer may be a computer system a server a router a network PC a peer device or other common network node and typically includes many or all of the elements described above relative to the computer system . The network connections include a local area network LAN and a wide area network WAN . Such networking environments are commonplace in offices enterprise wide computer networks intranets and the Internet.

When used in a LAN networking environment the computer system is connected to the local network through a network interface or adapter . When used in a WAN networking environment the computer system typically includes a modem or other means for establishing communications over the wide area network such as the Internet. The modem which can be internal or external is connected to the system bus via the serial port interface . In a networked environment program modules depicted relative to the computer system or portions thereof may be stored in the remote memory storage device. It will be appreciated that the network connections shown are examples and other means of establishing a communications link between the computers may be used.

The embodiments described herein can be implemented as logical operations in a computing system. The logical operations can be implemented 1 as a sequence of computer implemented steps or program modules running on a computer system and 2 as interconnected logic or hardware modules running within the computing system. This implementation is a matter of choice dependent on the performance requirements of the specific computing system. Accordingly the logical operations making up the embodiments described herein are referred to as operations steps or modules. It will be recognized by one of ordinary skill in the art that these operations steps and modules may be implemented in software in firmware in special purpose digital logic and any combination thereof without deviating from the spirit and scope of the disclosure. This software firmware or similar sequence of computer instructions may be encoded and stored upon computer readable storage medium and may also be encoded within a carrier wave signal for transmission between computing devices.

Referring now to example principal and relying party are again shown. Principal can communicate with relying party using for example a computer system see that is similar to computer system described above. In the example shown principal uses computer to send a request to relying party for goods services or other information. For example in one embodiment principal sends a request to relying party for access to information that principal desires.

The request sent by principal can include a request for the security policy of relying party using for example the mechanisms provided in WS MetadataExchange. In response to the request relying party sends principal requirements for relying party to authenticate the identity or other information about principal . The requirements of relying party for authentication are referred to herein as a security policy. The security policy defines the set of claims that the principal must provide to relying party for relying party to authenticate principal .

In one example relying party specifies its security policy using WS SecurityPolicy including both the claim requirements and type of security token required by relying party . A basic form for a security policy in accordance with WS SecurityPolicy is illustrated in the example below.

The policy can also be used to specify the type of security token required by relying party or a default type can be used as specified by WS Trust. For example the above noted policy specifies a certain type of security token that is required by relying party i.e. wst TokenType .

In addition to specifying the required claims and token type the security policy can specify a specific claims authority required by the relying party sp Issuer as shown below.

Other elements can be specified in the security policy as well such as for example the freshness of the required security token.

Referring now to once principal receives the security policy from relying party principal can communicate with one or more claims authorities to gather the claims required by the policy. In the example shown principal communicates the requirements of the security policy to claims transformer and claims authority .

For example principal can request one or more security tokens from claims authority using the issuance mechanism described in WS Trust. In one example principal forwards the claim requirements in the policy of relying party to claim authority . The identity of relying party can but need not be specified in the request sent by principal to the claims authority . The request can include other requirements as well such as a request for a display token as described further below.

Claims authority can provide one or more of the claims required by the policy from relying party . For example claims authority is programmed to generate one or more claims required by the policy. Claims transformer is programmed to translate the claims of claims authority into one or more claims that can be understood by relying party . In example embodiments claims transformer generates one or more signed security tokens that include the one or more claims as described below.

The security token can then be forwarded to principal . In example embodiments claims transformer forwards the security token to principal using the response mechanisms described in WS Trust.

Referring now to an example security token is shown. In the embodiment shown security token includes a computational token and a display token . Computational token includes the claims provided by claims authority in an encrypted format. In example embodiments claims transformer generates computational token in an encrypted format that can be understood i.e. decrypted by relying party as described below.

Claims transformer also generates display token . Generally display token includes at least a summary of the claims that are included in computational token of security token . For example in some embodiments display token includes a list of all of the claims included in computational token . Display token can be generated in a format that can be reviewed by principal using for example computer system as described below. In some examples display token is generated in a plain text format or a Hypertext Markup Language HTML format. One example of an embodiment of a display token included as part of a security token response is shown below.

In some embodiments security token including computational token is issued in accordance with the Security Assertion Markup Language SAML standard promulgated by the Organization for the Advancement of Structured Information Standards OASIS . For example security token can be issued in accordance with SAML 1.1 or SAML 2.0 standards. Other standards can also be used such as for example and without limitation an X.509 certificate and a Kerberos ticket.

In addition security token can be cryptographically signed or endorsed by claims transformer using a known algorithm. In one embodiment for example and without limitation a 2048 bit asymmetric RSA key is used. In other embodiments other encryption algorithms can be used such as for example a base encoded symmetric encryption key. In one embodiment a symmetric key is used by default. In this manner in the example shown a party such as relying party can cryptographically verify that security token originated from claims transformer .

In example embodiments computational token is cryptographically bound to display token using one or more known algorithms such as for example and without limitation using a digital signature over the entire response message from the claims authority containing both the computational token and the display token .

Referring now to example computer system of principal can include an interpreter and a display . For example in the illustrated embodiment interpreter can be one or more application programs see e.g. programs described above executable by computer system . In addition display can be an output device such as a printer or monitor see e.g. monitor that can output information to principal .

In example embodiments interpreter is programmed to interpret display token of security token . For example interpreter can identify the claims that are summarized in display token and interpreter can display the claims for principal using display . As described further below principal can utilize the summary of the claims included in security token provided on display to make a decision as to whether or not to share security token with relying party .

Referring now to principal can forward security token to relying party to satisfy all or a part of the security policy of relying party . In one example principal can forward security token to relying party by binding security token to an to application message using the security binding mechanisms described in WS Security.

Once relying party receives security token relying party can cryptographically verify the origin of signed security token . Relying party can also utilize the claims in computation token of security token to satisfy the security policy of relying party to authenticate principal . Once authentication is complete relying party can provide access to the goods services or other information requested by principal .

Referring now to an example method for authenticating a principal is shown. Method is described with reference to a non limiting example wherein the principal is Employee A. Employee A is an employee of a company referred to as Company A and the relying party is a travel agency referred to as Travel Agency A. Company A has partnered with Travel Agency A for making travel arrangements for employees of Company A at discounted rates.

At operation of method a principal requests information from a relying party. For example in the illustrated embodiment Employee A utilizes an application program on Employee A s computer to request travel arrangements from the web site of Travel Agency A. Next at operation Employee A s computer receives the security policy from the web site of Travel Agency A. This policy requires that Employee A submit a security token with a claim establishing that Employee A is an employee of Company A before Employee A can access the discounted travel arrangements on the web site of Travel Agency A.

At operation Employee A s computer forwards the policy to a claims authority which in the present example is a security token service or STS operated by Company A. The STS of Company A can issue a security token with a claim establishing that Employee A is an employee of Company A. For example the claim could simply be Is Employee of Company A True. Next at operation Employee A s computer receives a signed security token from the STS of Company A. The security token includes a computational token and a display token with the computational token including the claim establishing that Employee A is an employee of Company A.

Control is then passed to operation and Employee A s computer presents the summary of the claims from the display token to Employee A for review. Next at operation Employee A can decide whether or not to forward the security token to the web site of Travel Agency A based on the information in the display token presented to Employee A.

For example if the only claim in the security token from Company A is that Employee A is an employee of Company A e.g. Is Employee of Company A True the display token will list this claim for Employee A to review. If Employee A is comfortable revealing this information to Travel Agency A Employee A can forward the security token to the web site of Travel Agency A at operation . Control is then passed to operation and Employee A gains access to the requested discounted travel arrangements on the web site of Travel Agency A.

If Employee A instead decides at operation not to forward the security token control is passed to operation and Employee A does not forward the security token to the web site of Travel Agency A. For example if the security token from Company A includes more than a single claim about Employee A and Employee A identifies a claim by reviewing the display token that Employee A is uncomfortable sharing with Travel Agency A Employee A can decide not to forward the security token. For example if the security token from Company A not only includes a claim establishing that Employee A is an employee of Company A but also includes a claim with Employee A s home telephone number Employee A may not be comfortable sharing Employee A s home telephone number with Travel Agency A. In this situation Employee A can review the display information from the display token of the security token determine that the security token includes Employee A s home telephone number and decide not to forward the security token to Travel Agency A.

Referring now to additional example details regarding operation of method related to review of the display token in the security token by the principal is shown. At operation the display token of the security token is interpreted by the principal. For example in some embodiments an application program such as a web browser plug in or applet or another application is programmed to interpret the information contained in the display token. Next at operation the application is programmed to display the information to the principal using a graphical user interface such as a web browser interface. In alternative embodiments other configurations are possible.

For example referring now to an example user interface is shown. User interface displays information in a display token of a security token. User interface includes a list of the display information from the display token. In the example shown the display information includes employer information e.g. Company A and home telephone number e.g. 999 999 9999 . User interface also includes a send element and a cancel element . The principal can select send element to send the security token to the relying part e.g. Travel Agency A or select cancel element to refrain from sending the security token.

In alternative embodiments additional information can be provided in user interface . For example in some embodiments information about other security tokens that have been sent to a particular relying party can be listed and or information about where the particular security token currently being displayed has been sent previously can be listed. In yet other embodiments information about the particular relying party to which the security token is going to be sent can be provided in the user interface and or links to obtain additional information about the relying party can be provided. Other configurations are possible.

Referring now to an example method for a claims authority and a claims transformer to generate a security token including a computational token and a display token is shown. Once again method is described with reference to the non limiting example provided above wherein the principal is Employee A the relying party is Travel Agency A and the claims authority and claims transformer are Company A.

At operation the STS of Company A receives the policy of Travel Agency A forwarded by Employee A. Next at operation Company A generates a computation token including one or more claims required by the policy. At operation a display token including display information about the claims in the computational token is generated. Next at operation the display token is logically bound to the computational token to generate the security token. Finally at operation the security token including the computational token and the display token are forwarded to Employee A bound together cryptographically in the response message.

In example embodiments a display token can be provided by default in each security token issued by a claims transformer. In other embodiments a display token is provided only if the principal requests the display token. An example of such a display token request included in a security token request is as follows.

In example embodiments if a security token lacks a display token the principal is notified of the lack of a display token and the principal can decide whether or not to forward the security token to a relying party. In other embodiments if no display token is provided no display information is presented to the principal.

In example embodiments a principal can review the display information from the display token and decide whether or not to forward the security token to a relying party. In other embodiments the principal can review the display information but does not have the option to stop the forwarding of the security token to the relying party. In other words once the security token is requested by the principal the security token is automatically forwarded to the relying party once the security token is received by the principal.

In example embodiments only the computational token portion of a security token is forwarded by the principal to the relying party. In other embodiments the principal forwards the entire security token including both the computational token and the display token to the relying party.

Although example embodiments shown herein illustrate a security token that is forwarded by a claims transformer to a principal and then on to a relying party in alternative embodiments the security token can be forwarded directly from the claims transformer to the relying party. For example in some embodiments one security token including a computational token and possibly a display token can be forwarded to the relying party and another security token including a display token and possibly the computational token can be forwarded to the principal. Other configurations are possible.

Although the example embodiments shown herein illustrate a security policy requiring only a single claim and a single security token issued by one claims transformer in other embodiments a policy can require multiple claims and one or more claims authorities can issue one or more security tokens with one or more claims to satisfy the policy.

Although in some of the embodiments disclosed herein the principal is an individual in alternative embodiments the principal can be a company an organization a computer or other device a service or any other type of entity. For example in one alternative embodiment the principal is a device that is part of a network. The device can request information such as a software update from another device on the network functioning as a relying party. The relying party can require authentication of the identity of the device before the relying party provides the requested update. The device can request one or more claims required by the security policy of the relying party from one or more claims transformers and the claims transformers can provide one or more security tokens including display tokens to the device. The device can be programmed to review the contents of the display tokens and decide whether or not to forward the security token to the relying party based on its contents. If the device forwards the security token to the relying party the relying party can then complete the authentication process and provide the requested update to the device.

There can be various advantages associated with a security token including both a computation token and a display token with display information that can be reviewed by a principal. For example a principal can efficiently review the contents of a security token using an application program on the client computer system of the principal programmed to interpret and display the contents of the display token. In addition the principal s review of the contents of the security token enables the principal to have more control over the information shared with relying parties in the security token. Further such a system including a security token with both a computational token and a display token bound together can provide an auditable trail should disclosure of unauthorized information about the principal occur.

The various embodiments described above are provided by way of illustration only and should not be construed to limiting. Those skilled in the art will readily recognize various modifications and changes that may be made to the embodiments described above without departing from the true spirit and scope of the disclosure or the following claims.

