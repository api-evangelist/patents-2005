---

title: Home printing from internet sources
abstract: Internet-based printing to a home printer in which the print job is pre-rasterized at the cable head end and sent in rasterized format to the set top box. Because the print job is pre-rasterized at the cable head end, and not at the set top box, resources are not wasted at the set top box when they are more readily available at the cable head end. In addition, because of the high speed communication network already in existence between the cable head end and the set top box, even large pre-rasterized print jobs can be transmitted to the set top box in reasonable amounts of time, meaning more quickly than a situation in which it was the set top box that performed rasterization.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07433070&OS=07433070&RS=07433070
owner: Canon Kabushiki Kaisha
number: 07433070
owner_city: Tokyo
owner_country: JP
publication_date: 20050701
---
This application is a divisional of application Ser. No. 09 357 585 filed Jul. 20 1999 now allowed the contents of which are incorporated herein by reference.

The present invention relates to printing from an internet based source onto a printer located at a user s home. Specifically contemplated is a situation in which the home printer is connected to a set top box which in turn is connected to a cable network with the cable network accepting print jobs from the internet based source and directing the print job to the home printer.

With increasing availability of cable television networks that also provide digital data to a home subscriber a new product is becoming increasingly common in homes a set top box which provides access not only to conventional cable television but also provides access to internet based digital data. Examples of existing set top boxes include those manufactured by Scientific Atlanta under the tradename Explorer 2000 General Instrument under the tradename DCT 5000 and Motorola under the tradename StreamMaster . Set top boxes are home based and are connected to a cable provider often referred to as the cable head end over a high speed digital cable network. Set top boxes provide efficient delivery of cable television broadcasts from the cable head end. In addition through an internet connection at the cable head end set top boxes also provide the ability for a home user to access the internet through web browser software included in the set top box.

In a related development sophisticated printers such as bubble jet printers designed specifically for home use have become increasingly affordable and have enjoyed widespread acceptance. It has therefore been considered to provide a connection between a set top box and a printer thereby to allow a home user of a set top box to initiate printout of documents directly on his printer without the need for a separate computer.

In an unrelated development in the field of printing the subject of distributed printing has recently attracted attention. Conventional paradigms of printing allow for printout to a printer connected to the same computer or network as the source of the print job. According to distributed printing the source of the print job need not be connecte to the same network or be at the same location as the destination printer. An Internet Printing Protocol has been proposed that allows for distributed printing over the internet that is from an internet based source to an internet based destination. The following documents describe the Internet Printing Protocol and are incorporated herein by reference RFC 2568 Rationale for the Structure of the Model and Protocol for the Internet Printing Protocol April 1999 RFC 2567 Design Goals for an Internet Printing Protocol April 1999 RFC 2566 Internet Printing Protocol 1.0 Model and Semantics April 1999 RFC 2565 Internet Printing Protocol 1.0 Encoding and Transport April 1999 and RFC 2569 Mapping between LPD ad IPP Protocols April 1999.

Distributed printing has not yet been considered in the field of set top boxes primarily because the set top box and any attached printer is not actually connected to the internet. Rather it is the cable head end that is connected to the internet thus distributed printing techniques like the Internet Printing Protocol are not able to address print jobs from an internet based source to the set top box. The assignee of the present application is currently engaged in development of internet based printing over a digital cable network to a set top box for example U.S. application entitled Internet Based Push Printing Over Cable Network filed Jul. 20 1999.

One problem encountered in such a proposal is the limited computing power currently available in set top boxes. Specifically set top boxes must be designed to provide access not only to cable television but also to the internet and must be designed for these criteria at an affordable price. Accordingly the computing power included in set top boxes is deliberately limited so as to ensure affordability with reasonable function.

Because of limited resources in the set top box however print jobs routed to the set top box can not ordinarily be executed by the set top box without undue delays and other frustrations to the user all resulting directly from limited resources. What is needed therefore is a more efficient way of printing via a digital cable network on a printer connected to a home user s set top box for a print job originated from an internet based source.

It is an object of the present invention to address the foregoing difficulties by providing for printout of an internet based print job at a printer connected to a home user s set top box in which the print job is pre rasterized at the cable head end and sent via the digital cable network in rasterized format to the set top box. Because the print job is pre rasterized at the cable head end and not at the set top box resources are not wasted at the set top box when they are more readily available at the cable head end. In addition because of the high speed communication network already in existence between the cable head end and the set top box even large pre rasterized print jobs can be transmitted to the set top box in reasonable amounts of time. Reasonable in this situation means ordinarily more quickly than a situation in which it was the set top box that performed rasterization of the print job.

Thus in one aspect the invention involves receipt of a print job from an internet based source at the cable head end. The print job is received in a printer independent format such as a high level printer description language and also includes address information designating one or more home printers connected to respective set top boxes for which printout of the print job is desired. Upon receipt at the cable head end and based on the address information a user directory is accessed so as to determine user preferences including information identifying the type and configuration of the printer or printers involved. A logical software printer is created at the cable head end and a print driver corresponding to the printer identity is executed in the logical printer. The logical printer is used to render the printer independent print job into a rasterized bit map image that is specific for the ultimate destination printer. The rasterized bit map image is thereafter transferred over the cable network to the set top box to which the destination printer is connected. At the set top box another logical printer is created with a simplified print driver that accepts rasterized bit map print jobs. The rasterized bit map print job is accepted by the logical printer and transmitted to the printer for visual printout thereby.

In preferred aspects the rasterized bit map image created at the cable head end includes all needed printer commands for the target printer and in addition formats the bit map data so that it is specific to the printer in question. For example many printers designed for home use require printer specific commands that load paper eject paper advance paper and the like. Those printer commands are included in the rasterized bit map data created by the logical printer at the cable head end. In addition the rasterized bit map print data is formatted in whatever form is needed by the target printer. For example many printers designed for home use require out of sequence print data for each of plural different colors printed by the printer so as to accommodate physical offsets in print positions of one color relative to another. Again the rasterized bit map data created by the logical printer at the cable head end preferably formats the data to its needed format.

In further preferred aspects the cable head end automatically detects the identification information for the type and configuration of printer attached to the cable head end by requesting such information from the set top box and thereafter automatically obtains a suitable print driver such as by downloading over the internet. In this way it is possible to update user preference information so that future print jobs addressed to the same user may be printed with increased efficiency.

This brief summary has been provided so that the nature of the invention may be understood quickly. A more complete understanding of the invention can be obtained by reference to the following detailed description of the preferred embodiment thereof in connection with the attached drawings.

As shown in the above listed services may be delivered from service infrastructure located at the cable head end the infrastructure including value added service provider systems and network control systems . Value added service provider systems include digital satellite distribution systems applications executing on cable servers such as special purpose applications like subscriber service application content gather applications etc. digital media servers outputting MPEG 2 datastreams and an application data carousel defined by the DSM CC specification. Network control systems consisting of the Broadcast Control Suite and the PowerKey Control Suite provide management and control for the services supported by the broadband network.

Alternatively services may be delivered from World Wide Web WWW through internet proxy for example from remote merchants like merchant . Examples of merchants include banking retailing utilities and the like.

In either case the services are delivered to Cable Head End CHE which serves as an interface between the service providers and the rest of the broadband network.

In particular CHE which is responsible for providing services to 500 000 to 1 000 000 homes is connected via fiber optic cabling to hubs which are connected to CHE or other hubs . Each hub is in turn connected to at least one node also using fiber optic cabling. Coaxial cable is then used to connect each node to Set Top Boxes STB s of 500 to 2000 homes. Finally each STB is connected to television printer or both. Accordingly services are delivered from a service provider to CHE to one or more hubs to node to STB and to television or printer .

It should be noted that by virtue of the foregoing arrangement service infrastructure may be distributed among CHE hubs or other facilities.

Each client module includes client application a Cable Printing Services Infrastructure CPSI client and Internet Printing Protocol IPP client . Each client application is preferably specific to services being performed at the client module such as banking services newspaper services and the like. Other client specific applications may also be executed at the client modules such as applications that generate data or access databases for printout. Client application communicates with CPSI client using an application programming interface API .

CPSI client delivers print data received from client application to CHE through IPP client . Correspondingly CHE is provided with IPP server to receive the print data. It should be noted that the print data travels over all three of IPP HTTP and TCP IP protocols between respective ones of IPP clients and IPP server .

Although is illustrated with an IPP client server communication between client modules and CHE other communication protocols or layers of protocols may also be used. For example to facilitate printing that is secure an SSL secure socket layer protocol may be utilized. In such an arrangement a protocol stack is used consisting of IPP client over HTTP over SSL over TCP IP. A complementary arrangement is provided at CHE . Similarly other protocols may be used and multiple protocols can be used in parallel or in stacked arrangements.

Whatever client server arrangement is used the client and servers communicate over a CPSI transport layer that facilitates communication from CPSI client . In general data is pushed in one direction from CPSI client with little or no data other than acknowledgements and the like returning in the other direction toward CPSI client . The actual CPSI transport may use TCP IP SMTP or the like. The sessions may be secure. The CPSI transport layer is configured to hide any differences in the actual transport from CPSI client so that the actual transport is transparent from the viewpoint of CPSI client thereby making CPSI client transport independent.

CHE includes CPSI server which is complementary in software structure to CPSI client and acts to receive data transmitted from CPSI client . CHE further includes spooler which assigns print data received from IPP server and CPSI server to a logical printer corresponding logically to a printer and queues print data for a physical device corresponding to the logical printer. CPSI spooler assigns print data to a logical printer by retrieving a profile from preferences directory which corresponds to a user ID or other address information received with the print data.

Besides address information preference directory also stores other information relating to subscriber preferences. Such information is set initially by the subscriber during a registration process and may thereafter be modified as desired. One such preference is a blocking feature whereby a subscriber can block printing jobs that are received from particular merchants or can accept print jobs only if they are received from particular merchants. Another such preference involves selection and configuration of an automatic data information delivery service. According to this delivery service and based on subscriber preferences CHE periodically executes a data gathering application like application that gathers information from internet sources such as news coupons theater schedules and the like packages the information into a print job and sends the print job to the subscriber s set top box.

CPSI spooler is also connected to cable specific applications such as application through CPSI server IPP server IPP client and CPSI client . CPSI client is similar to CPSI client . Moreover application is similar to client application in that it provides an application executed to perform services specific to a client here the cable head end and can deliver print data to CPSI spooler .

IPP client is connected to CPSI spooler via CPSI client to allow CHE to communicate with each STB . CPSI client is similar to CPSI clients and and again provides for a complementary software architecture and data communications with a CPSI server at the set top box. In this regard only two of many thousands of STB s are illustrated. Each STB includes IPP server for connection to IPP client . It should be noted that to deliver data from CHE to STB a server is established in STB and a corresponding client is established in CHE . In such a case a preferred transport protocol is again the CPSI transport layer which is usable regardless of the particular underlying transport TCP IP SMTP QPSK DOCSYS broadband through IP gateway etc. .

Although illustrates an IPP client server communication between CHE and STB other protocols may also be used. For example in a situation where the resources available in STB are already strained it is possible to use SMTP and POP mail protocols to deliver print jobs from CHE to STB . Advantages of such an arrangement include the fact that many conventional STB s already include mail protocols thereby avoiding a further increase in STB resource usage firewalls that might exist in CHE will allow mail to go through multiple mailboxes can be defined in each household and mail clients at the client modules can easily be configured to support print jobs. In the latter situation CHE and corresponding client modules are also configured for communication via a mail protocol client server relation such as an SMTP client server. Similarly other protocols can be used between CHE and respective STB s and multiple protocols can be used in parallel or in stacked arrangements.

STB includes CPSI server and further includes CPSI spooler which controls a single queue for a single logical printer corresponding to printer . Otherwise CPSI spooler is nearly identical to CPSI spooler as are CPSI server and CPSI server . The limited functionalities of CPSI spooler and CPSI server are advantageous because STB is likely to have limited computing resources. STB also includes STB client application which communicates to CPSI spooler through CPSI client using a subset of the API used by client application . This configuration allows an STB user to initiate local print jobs.

Through the software architecture illustrated in STB hosts various applications that present to the home user functionality offered by various cable services. Typical applications are a navigator an interactive program guide electronic mail and a web browser. Most of these applications are client server implementations where STB hosts the client software and CHE hosts the server software. Communication between client and server over the cable network is facilitated by an operating system executed on STB and is performed through published API s. Depending on the hardware platform and the operating system those applications may be resident at STB or can be downloaded from servers situated at CHE for execution at STB .

Thus as shown in software architecture and STB includes an interface to hardware an operating system an HTML engine resident applications and other applications . The operating system is usually vendor specific for the STB and may include operating systems such as PTV WinCE MicroWare or OpenTV. HTML engine provides a group of independent handlers that can be plugged together in conformity to known plug in specifications so as to provide ability to handle different types of media such as HTML GIF MPEG HTTP Java script etc. The HTML engine is used to allow STB to render HTML documents to a windows manager for display on the local television receiver. HTML documents may be retrieved from local cache from in band and out of band broadcast carrousels VBI streams HTTP proxy servers located at CHE or remote HTTP servers accessed by the STB user over the internet. In the latter case documents retrieved from external web servers are filtered by a proxy according to predefined filtering criteria such as surf watch which also may convert requested documents into formats supported by the HTML engine .

Resident applications include such applications as the aforementioned navigator interactive program guide and the like.

Applications and include a web browser an e mail program a print driver for attached printer and the like. Of particular note these applications include the aforementioned applications from namely IPP server CPSI spooler CPSI client and STB client applications .

Because of limited resources available within STB print data destined for printer is not forwarded to STB in a high level device independent print language such as a page description language like PCL PDF PostScript or the like for rasterization at STB . Such an arrangement which requires STB to rasterize print data based on a higher level printer language would often overwhelm the availability of resources at STB . Accordingly and because a high speed data communication link exists between CHE and STB rasterization is performed at CHE and rasterized data is sent from CHE to STB for printout by printer . This section describes a preferred implementation for achieving this effect.

In more detail shows steps S through S that are performed at CHE and steps S through S that are performed at STB . In step S cable head end receives a print job from a client application. The print job is preferably in a high level printer description language PDL which is printer independent. In addition the print job includes one or more addresses identifying the destination or destinations for the print job. The addresses may be in any convenient format agreed to mutually between cable head end and the client applications.

It is envisioned that the print jobs received by cable head end are print jobs from merchants located remotely and connected to cable head end via the internet. Examples of merchants and corresponding print jobs include a bank that prints out bank statements directly into a customer s home utility companies that print out utility bills directly at a consumer s home advertisers that printout advertisements and or coupons directly at a consumer s home newsletter news clipping services that print out periodicals directly in a reader s home and the like. It is also possible for the print job to be delivered from a client application executing at cable head end for example a client application that generates a monthly cable guide for printout in a viewer s home a news retrieval service which based on automatic searches performed in accordance with user preferences over the internet obtains news from a variety of internet sources collates such news and prints news out directly in a news reader s home and the like. Multiple other arrangements are easily envisioned. What is preferable in the context of the invention however is that the print job is received by CPSI spooler in cable head end in a printer independent format such as the aforementioned printer description languages.

In step S and based on the printer addresses received with the print job CHE accesses preferences directory so as to retrieve user profiles for the users corresponding to the printers to which the print job is ultimately destined. User profiles preferably include at least an identification of printer configuration and type of printer connected to the user s set top box. Other information may also be included in the user preference. One such piece of information is a blocking filter which specifies filtering applied to the print jobs thereby to permit a user to exclude unwanted print jobs. For example so as to avoid a proliferation of unwanted print jobs at his home printer a user may specify preferences instructing cable head end to block print jobs from specific sources or to allow print jobs only from specific sources. Any such preferences are applied in step S in which CHE determines whether or not to reject the print job. If the job is rejected flow branches to step S so as to reject the job and possibly to inform client module that the job has been rejected.

If the print job is accepted for printout flow advances to step S in which the print job is scheduled and deposited in the subscriber s queue and the step S in which the cable head end determines whether a print driver exists for the printer to which the print job is destined. A print driver might not exist for a variety of reasons. One such reason is that the cable head end does not have available a software module corresponding to the printer defined in the user profile. In such a circumstance cable head end simply accesses an internet provider of such a software driver such as an internet site corresponding to the printer manufacturer. One more common situation in which a driver might not exist however is a situation in which the user profile does not contain any identification of printer configuration or type. Such a situation is addressed in steps S and S to which CHE branches in a situation where a driver does not exist for failure of the user profile to specify a printer.

Thus in step S CHE communicates directly via CPSI spooler CPSI client and IPP client server and to the destination STB with a request for STB to provide an identification of configuration and type for printer connected to STB . STB responds with the needed information which is obtained by CHE . In step S CHE loads the driver corresponding to the identification information provided from STB and in addition updates the user profile in preferences directory so that future print jobs can be performed more readily without the need for communication with STB for the purpose of determining printer identification.

In any event once a driver exists flow advances to steps S and S in which CPSI spooler in CHE determines whether a logical printer corresponding to the print driver already exists or if one needs to be created. A logical printer will already exist if a prior print job has already been processed. Using the logical printer CPSI spooler feeds the print job in the printer independent PDL format to the logical printer such that the logical printer rasterizes the print job into a printer specific rasterized bit map image step S . It should be understood that the rasterized bit map image print job is not simply a fully bit map raster of the print job. Rather the rasterized bit map print job is a bit by bit representation of the print job tailored specifically for the printer corresponding to the logical printer in CPSI spooler . As one example of printer specific rasterization many printers require print commands embedded in the print job so as to enable control over the printer. Examples of such print commands include start of page advance down eject page load new page and the like. Such printer specific commands are embedded in the rasterized print job. As a further example some printers such a bubble jet printers print in bands and embedded commands are needed so as to define such bands. As yet a further example some bubble jet printers that print in color require print data to be supplied out of sequence for each different color so as to accommodate physical differences in location between printing jets for one color relative to printing jets for another color. Whatever the source of printer specificity the rasterized bit map print job created by the logical printer in step S is printer specific tailored directly based on the identity of printer configuration and type of printer .

Step S transmits the rasterized bit map print job to STB . As described above the transmission to STB is from CPSI spooler via CPSI client IPP client server and to CPSI server and spooler in STB .

At the set top box step S receives the rasterized bit map print job in CPSI server and forwards it to CPSI spooler . If a logical printer does not already exist in CPSI spooler then a logical printer is created based on the identity of printer type and configuration for attached printer steps S and S . In step S CPSI spooler using the logical printer executes the rasterized bit map print job so as to send the print job to printer where it is rendered into a visible printed image.

As described previously the purpose of the CPSI architecture is to offer facilities that will enable applications running anywhere on the internet to print on printers attached to set top boxes. Such printing is referred to as push printing in the sense that the remote applications push print data through the cable head end to the set top box for printout at an attached printer.

Of course it is possible to provide the set top box with its own printing capability so as to enable a user to print data as desired. Such printing is referred to as pull printing in the sense that the user of the set top box pulls data for printout from sources remote from him. For example a user may as part of browsing the internet come across a web page of interest and may request printout of such a web page. Such printout is pull printing and is different from push printing described hereafter.

General printing goals of the architecture described above and hereinafter include the ability to support attachment and software and driving of any supported printer as well as the elimination of any need for a user to intervene in installation of a printer beyond physical connection to the set top box. Because of a uniform API software maintenance costs are reduced. In addition by virtue of the CPSI software architecture printing does not interfere with other programs running on the set top box such as web browsing applications or television viewing. In addition the CPSI architecture is portable across a variety of platforms and supports a variety of different operating systems particularly those operating systems that maintain execution in the set top box itself.

Push printing in particular represents a model in which print action is initiated by an entity other than the set top box user. It is assumed that this entity which actually may either be local to the cable head end or be an internet citizen owns the document for which the print job is desired or is able to reference it. Two different printing modes are contemplated 

1. Unicasting which refers to a point to point connection in which a remote internet site sends print data separately to each destination client and

2. Multicasting which refers to a mode in which a single copy of the print data is sent to multiple destination points. Multicasting can also include broadcasting in which a single copy of print data is sent to all destination points rather than to a selected subcast thereof.

Examples of print jobs subject to push printing include merchant initiated print jobs from remote internet sites. Such merchant initiated print jobs may include constant content print jobs such as a flyer advertising particular items for sale. The flyer can be printed in a unicast or multicast mode and is delivered in the appropriate unicast or multicast mode from the cable head end to the appropriate set top boxes. Merchant initiated print jobs can also include variable content print jobs such as personalized statements like retailing a bank statement or a utility bill. Based on a client application running at the merchant s server the print job is created and submitted to the cable head end. Again the cable head end delivers the print job in either unicast or multicast mode as requested by the print job to the set top box or boxes in question.

Generalized goals of merchant initiated printout from remote internet sites include the following. First the merchant is able to submit the print job at its own internet site by means of a client application running on the merchant s CPU. The merchant is able to specify parameters for the print job including destination address and whether or not the transmission is via secured or unsecured transmission. The destination address may specify unicast or multicast printing meaning that the destination address might identify only a single recipient or might represent multiple recipients or a group of recipients. The print job is generated in non proprietary device independent format by use of widely available client applications or even customized print applications that print through standardized and device independent format. This is achieved through separation of the print submission client and the content creation tool the content creation tool is left to the merchant whereas the print submission client is embodied in the CPSI client described above. At the cable head end resident software maintains a directory of user profiles in preferences directory the profiles including subscriber name subscriber account number address printer model set top box capabilities any blocking filters and policy data. The CPSI spooler at the cable head end discards print jobs that meet criteria specified by blocking filter data or accepts only print jobs that meet other specified criteria. A system administrator at the cable head end is able to display a print queue indicating global print jobs for all cable subscribers or print jobs on a per user basis. Using such a print queue the system administrator is able to examine the status of jobs in the queue and the status of corresponding printers attached to set top boxes and is further able to delete jobs in the queue and override any of user selectable print options. The cable head end spooler does not commence a print job until it has ascertained that the set top box is ready to accept print data and that the attached printer is ready and on line. Preferably the CPSI spooler in the set top box is able to commence a print operation before the entire print job has been downloaded from the cable head end and is further able to confirm successful completion of print jobs.

On the other hand if the job has not been rejected flow advances to step S in which based on destination information included with the print job the cable head end determines the destination address or addresses for the print job. Steps S and S create logical printers if they are needed. That is if a corresponding logical printer or printers do not already exist in spooler the needed logical printer or printers are created in CPSI spooler with a separate logical printer being created for each different printer needed to accomplish the unicast or multicast printing. That is in a unicast mode since only a single printer is involved then only a single logical printer corresponding to the printer in question is created. On the other hand in a multicast or broadcast mode multiple users and multiple printers are the destination for the print job. It is possible however for several of the multiple users to employ the exact same printer and printer configuration. As a consequence although it is likely that multiple logical printers are created in the CPSI spooler at the cable head end it is equally likely that a single logical printer will be able to support several users because each of the several users will have exactly the same printer type and configuration.

The print job is thereafter scheduled and deposited into the user s queue step S for rendering by the logical printers or spooled for subsequent rendering just prior to delivery to the STB . It is possible to render the print jobs into a bit map rasterized format as discussed above in connection with but this is not ordinarily necessary. Rather all that is necessary is for the logical printers to process the print job for subsequent use by the set top boxes.

In step S the print job from each logical printer is unicast or broadcast to the destination address or addresses. Thereafter in step S the cable head end builds a notification server so as to await notification of printout from each of the set top boxes to which print data has been transmitted.

In step S the set top box builds a notification client for communication with the corresponding confirmation server built at the cable head end in connection with step S. The notification client in the set top box then communicates with the notification server at the cable head end step S so as to notify the cable head end of ongoing print status. In particular the notification client at the set top box notifies the cable head end as each sheet of the print job is commenced as each sheet is concluded and as the print job is concluded. In addition the notification client permits interaction from the user at the set top box whereby the user at the set top box can modify his print queue by cancelling jobs or advancing jobs out of sequence from the queue.

At the cable head end and based on information received from the notification client at the set top box the cable head end can distribute print status information as appropriate. For example it is possible for the cable head end to transmit print status back to the originating merchant at the remote internet site so as to permit the merchant to confirm that the print job has been successfully completed. Alternatively or in addition it is possible for the cable head end to utilize the print status information so as to monitor maintain and manage print queues for each and every one of the set top boxes connected to the digital cable network.

By virtue of the foregoing arrangement push printing from remote internet sites is facilitated at printers connected to set top boxes that are fed data from a cable head end and via a digital cable network. The push printing can be unicast or multicast. In addition notification of print status is provided from the set top box back to the cable head end thereby permitting confirmation of printout to the remote internet merchant or maintenance and management of print queues from the cable head end.

The ability of the present invention to provide push printing as discussed immediately above allows a merchant having internet client application to send print data through CHE to a subscriber at the subscriber s STB . For instance a merchant having an internet application such as a bank or credit card services company generates print data which corresponds to a particular subscriber such as a banking statement or a credit card statement for automatic printing on the printer which is locally attached to the set top box of the subscriber. It can be appreciated that such print data is of a confidential nature and that it would be preferable to have the print data sent to STB in a secure manner. As such the present invention provides the ability to allow client application to push print confidential print data to a subscriber at STB via CHE in a secure manner.

First as illustrated in secure printing is achieved by establishing a secure connection between client application and CHE and between CHE and set top box . Specifically the preferred embodiment utilizes a secure protocol between CPSI client and CPSI server to establish a secure connection between client application and CHE . A secure protocol such as secure sockets layer SSL protocol is used in addition to the previously described protocols between client application and CHE in order to achieve secure push printing. depicts the protocol layers that are preferably utilized between client application and cable head end for secure push printing. The protocol layers often referred to as a protocol stack are described in from the perspective of a communication path between CPSI client and CPSI server . Specifically it can be seen from that CPSI protocol is the top layer communication protocol between CPSI client and CPSI server . Directly below CPSI protocol is IPP protocol layer which provides the printing specific protocol for communication between IPP client and IPP server which are in direct communication with CPSI client and CPSI server respectively. HTTP protocol may also be utilized for communication between client application and CHE and is located directly below IPP protocol layer . SSL protocol layer resides directly below HTTP protocol layer so as to provide for a secure communication path between CPSI client and CPSI server . Directly below SSL protocol layer is the underlying transport layer which may be comprised of TCP IP or other such transport protocols. In this manner secure transport of print data from client application to CHE is made possible. The present invention is not limited to the use of SSL and any other secure protocol or secure transport mechanism may be utilized to accomplish the same result.

Returning to the secure connection between client application and CHE is established through the use of the above described protocols therefore providing a path from client application through CPSI client and IPP client to IPP server and CPSI server respectively. In the preferred embodiment the connection is established upon the receipt by client application of a certificate from CHE via the SSL protocol . The certificate is preferably signed by a trusted third party and is used to verify that client application is really communicating with CHE . In this manner CHE is authenticated by client application . Print data is then sent in a secure manner from client application to CPSI spooler in CHE through the secure connection. It is also possible for client application provide a signed certificate to CHE so that CHE can authenticate the identity of client application . In this manner client application and CHE are mutually authenticated thereby ensuring that client application is sending the confidential data to the correct destination and ensuring that CHE verifies the identity of the source of the confidential source. It can be appreciated that such mutual identification is preferable for print data comprising a bank statement or a utility bill.

In the embodiment illustrated in the print data is provided to CPSI spooler along with the identification information related to the subscriber to whom the print data is to be sent. The print data is provided from client application to CPSI spooler in a device independent format. CPSI spooler then refers to preferences directory to obtain the necessary information corresponding to the subscriber such as the print driver information for printer connected to STB corresponding to the subscriber. CPSI spooler then transforms the print data from the device independent format into a rasterized format by using a printer driver which corresponds to printer . The rasterized print data is then spooled by CPSI spooler of CHE for transmission to STB .

The print data is then ready to be sent directly to CPSI spooler of STB for immediate printing on printer . This is accomplished by establishing a secure connection between CHE and STB in a similar manner to the secure connection between client application and CHE as described above. In the preferred embodiment CHE receives a certificate from STB so that cable head end can verify the identity of STB whereupon a secure connection is established between CHE and STB . As discussed above mutual authentication can also be implemented so that STB can verify the identity of CHE . Once the secure connection is established between CHE and STB CHE sends the rasterized print data to STB . CPSI spooler in STB then automatically passes the rasterized print data to printer for printing thereby providing the confidential data to the subscriber in a secure fashion. It should be noted that although the above description involves confidential print data being sent in a secure manner to only one subscriber the same method may be utilized for providing confidential information from internet client application to many subscribers wherein the confidential print data is unique and customized for each single subscriber unicast . In addition the above method may also be utilized for secure push printing of the same print data to many individual subscribers broadcast multi cast .

In addition to the embodiment for secure push printing as described in secure push printing may also be achieved when CHE is not a considered a trusted environment by client application . Secure push printing can still be accomplished according to the embodiment described in . As can be seen by comparison between and this embodiment is nearly identical to that of except that the connection between client application and CHE and the connection between CHE and STB are not necessarily secure and are treated as though they are not secure. Therefore the print data is transformed from device independent print data to rasterized print data in the client application prior to being sent to CHE for transmission to STB over the digital cable network. Specifically client application has access to a printer driver which corresponds to printer which is locally attached to the subscriber s STB . Client application therefore renders the print data for printing on printer by transforming it from a device independent format to rasterized print data specific to printer of the particular subscriber. The rendering of the print data is performed by client application in client module in this embodiment as opposed to within CHE in the embodiment of because in this embodiment CHE is not know considered a trusted environment by client application and therefore cannot be trusted to render the print data for printing on printer . Preferably client application also encrypts the print data prior to sending it to CHE for subsequent transmission to STB thereby providing additional security to the print data.

Referring again to the rasterized encrypted print data is sent from client application to CHE over the normal connection utilizing CPSI client IPP client IPP server and CPSI client respectively. It should be noted that although a secure connection using SSL is not required in this embodiment it may be used to provide additional security. CPSI spooler of CHE does not render the data because it is already rasterized but instead simply recognizes the destination information provided in a header section of the encrypted rasterized data and then spools the rasterized data for transmission to the appropriate subscriber. The encrypted rasterized data is then sent form CHE to STB via CPSI client IPP client IPP server and IPP server respectively. Similar to the connection between client application and CHE this connection does not need to be secure through the use of the SSL protocol although it may be secure for additional protection. In this manner CPSI spooler of STB receives the encrypted rasterized data from CHE . CPSI spooler then decrypts the rasterized print data and then automatically sends the rasterized print data directly to printer for printing therefore providing the subscriber with the confidential print data in a secure fashion. Unlike the embodiment described in this is accomplished even though CHE is not a trusted environment by sending the print data from client application to STB in an encrypted rasterized format whereby CHE is used as an interim server.

In step S it is determined if a secure connection can be established between CHE and STB as discussed above. If a secure connection cannot be established between CHE and STB the print job is rejected in step S. If a secure connection is established between CHE and STB control proceeds to step S in which the rasterized print data is sent from CHE to STB . Then in step S STB automatically passed the rasterized print data to printer upon which printer prints the rasterized print data step S .

Returning to step S if CHE is not considered a trusted environment control proceeds to step S in which client application rasterizes the print data and also encrypts the print data so that is may be sent to STB via CHE in a secure fashion. Client application sends the encrypted rasterized print data to CHE in step S with a header that indicates the destination information for the print data and which indicated that the print data has already been rasterized. In step S CHE obtains the destination information that was sent with the encrypted rasterized print data spools the encrypted rasterized print data for transmission to STB and then transmits the encrypted rasterized print data to STB . STB then decrypts the encrypted rasterized print data in step S after which STB sends the decrypted rasterized print data to printer step S . Printer then prints the rasterized print data in step S.

Thus whether or not cable head end is considered a trusted environment confidential print data from client application on the internet such as a bank can be sent in a secure manner from client application to set top box on a digital cable network through the cable head end for automatic printing on printer that is locally attached to set top box . In this manner a subscriber on a digital cable network can automatically receive monthly billing statements or bank statements from a corresponding internet application maintained by the billing service or bank in a secure manner thereby preventing misuse or improper access by others of the information contained therein.

The configurations described above for the present invention are provided to allow printing from client module to STB via CHE wherein the print data is formatted for printing on printer either at CHE by CPSI spooler or at the client application of client module . In those configurations the print data is generally provided to STB in a rasterized format required for printing directly to printer without the need for utilizing a printer driver in STB . The utilization of a printer driver in STB is necessary however when a user of STB wishes to print locally such as when printing a web page that the user is viewing on the television to which STB is attached. A printer driver in STB would also be necessary in instances when print data is provided from CHE to STB in a device independent format. In such situations and in others not discussed herein an appropriate printer driver corresponding to printer needs to be provided for use in STB .

Depending on the capabilities of STB a printer driver could be loaded in a variety of ways. For example if the set top box has sufficient memory capacity a number of printer drivers could be pre loaded into the memory of STB for several different printers. In the alternative STB may allow a floppy disk drive or CDROM or the like to be interfaced to STB such that printer drivers could be accessed from a floppy disk or CDROM.

In the set top box environment of the present invention it is appreciated that a user may prefer to utilize the digital cable network in order to obtain and load a printer driver. Therefore the present invention provides a manner in which to provide a remote plug and play service whereby CHE locates and provides an appropriate printer driver to STB upon request by STB thereby supporting the attachment of a local printer to STB .

This feature of the present invention is described in which depicts a sequence of steps for accomplishing a preferred embodiment of the remote plug and play feature for supporting a local printer attached to STB . In step S the subscriber plugs printer into STB via the interface provided by STB for printers. This interface may comprise a universal serial bus USB an RS 232 interface or other printer connection. Next in step S STB determines that a new printer has been plugged in and that STB does not have a printer driver corresponding to the new printer. This detection is achieved via hardware interface and operating system of STB . Client application of STB obtains an indication from operating system that a printer driver is needed for printer . STB client application then sends a request to CHE to obtain a printer driver that corresponds to printer . The request is sent from STB to CHE via the digital cable network but not necessarily through the IPP protocol because print data is not involved in this transaction. Therefore it can be appreciated that any of the underlying transport protocols such as TCP IP may be utilized to send the request from STB client application in STB to CHE application in CHE step S .

It should be noted that the request for printer driver from STB client application preferably includes the information necessary to identify printer such as the manufacturer and model of printer . Next in step S CHE application receives the request for printer driver from STB . CHE application then accesses preferences directory to obtain hardware and operating system information which describes STB step S . This information is necessary to determine which type of printer driver should be obtained and sent to STB . For instance the set top box may comprise one of several currently available set top boxes such as the Explorer 2000 by Scientific Atlanta the DCT 5000 by General Instrument and the Streammaster by Motorola. In addition the appropriate printer driver must correspond to the operating system implemented in the set top box. For instance the Explorer 2000 utilizes the Power TV operating system the DCT 5000 utilizes the WinCE operating system and Streammaster utilizes either the MicroWare or the Open TV operating system.

In step S CHE application obtains a printer driver that is appropriate for the manufacturer and model of printer and for the hardware type and operating system of STB . CHE application may obtain this printer driver from one of many sources. For example the needed printer driver may already be stored in a memory of CHE and accessible via preferences directory for another subscriber on the digital cable network. In the alternative CHE may have several printer drivers available in a memory device such as a hard drive CDROM or the like. In another alternative CHE application may utilize internet proxy to access world wide web so as to obtain the necessary printer driver for STB such as from the printer manufacturer s web site. Once the appropriate printer driver is found by CHE application CHE application then sends the printer driver to STB via the digital cable network step S . As mentioned previously any of the available transport protocols for communication between CHE and STB may be utilized to download the printer driver from CHE to STB . Once STB receives the printer driver STB loads the printer driver in local memory for subsequent use and registers the printer driver with operating system of STB for future reference step S .

In step S CHE obtains another printer driver for use by CHE to send print data to STB . CHE determines which printer driver to obtain for its own use based upon the information describing printer provided by STB and based upon the type of hardware and operating system which comprise CHE . As described above CHE may obtain the printer driver from any one of several resources such as world wide web . CHE application updates preferences directory so as to record the new printer driver that corresponds to printer for use by CHE step S . In this manner CHE maintains a printer driver which corresponds to printer so that CHE may render print data appropriately the next time print data is provided from CHE to STB for printing on printer . In addition this feature of the present invention also provides an easy and transparent plug and play mechanism for the user of STB to connect and utilize printer to STB .

It is emphasized that several changes and modifications may be applied to the above described embodiments without departing from the teaching of the invention. It is intended that all matter contained in the present disclosure or shown in the accompanying drawings shall be interpreted as illustrative rather than limiting. In particular it is to be understood that any combination of the foregoing embodiments may be utilized so that the specifics of any one embodiment may be combined with any of the other or several other embodiments.

