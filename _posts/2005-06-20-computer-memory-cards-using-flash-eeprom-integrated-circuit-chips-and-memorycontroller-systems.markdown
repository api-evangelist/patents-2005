---

title: Computer memory cards using flash EEPROM integrated circuit chips and memory-controller systems
abstract: A very small computer memory card is densely packed with a large number of flash EEPROM integrated circuit chips. A computer memory system provides for the ability to removably connect one or more of such cards with a common controller circuit that interfaces between the memory cards and a standard computer system bus. Alternately, each card can be provided with the necessary controller circuitry and thus is connectable directly to the computer system bus. An electronic system is described for a memory system and its controller within a single memory card. In a preferred physical arrangement, the cards utilize a main circuit board with a plurality of sub-boards attached thereto on both sides, each sub-board carrying several integrated circuit chips.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07106609&OS=07106609&RS=07106609
owner: SanDisk Corporation
number: 07106609
owner_city: Milpitas
owner_country: US
publication_date: 20050620
---
This is a continuation of application Ser. No. 10 628 746 filed Jul. 28 2003 now U.S. Pat. No. 6 947 332 which is a continuation of application Ser. No. 10 197 027 filed Jul. 16 2002 now U.S. Pat. No. 6 628 537 which is a continuation of application Ser. No. 09 888 167 filed Jun. 22 2001 now U.S. Pat. No. 6 434 034 which is a continuation of application Ser. No. 09 473 848 filed Dec. 28 1999 now U.S. Pat. No. 6 252 791 which is a division of application Ser. No. 09 121 348 filed Jul. 23 1998 now U.S. Pat. No. 6 011 741 which is a continuation of application Ser. No. 08 907 111 filed Aug. 6 1997 now U.S. Pat. No. 5 867 417 which is a continuation of application Ser. No. 08 527 254 filed Sep. 12 1995 now U.S. Pat. No. 5 663 901 which is a continuation of application Ser. No. 07 736 732 filed Jul. 26 1991 now abandoned which is a continuation in part of application Ser. No. 07 684 034 filed Apr. 11 1991 now abandoned all of which are hereby incorporated herein by this reference.

This is also related to another patent application filed concurrently with a parent application entitled Device and Method for Controlling Solid State Memory System naming Robert D. Norman Karl M. J. Lofgren Jeffrey D. Stai Anil Gupta and Sanjay Mehrotra as inventors Ser. No. 07 736 733 now U.S. Pat. No. 5 430 859 the disclosure of which is incorporated herein by this reference.

This invention is related to computer memory systems of a type utilizing small compact semiconductor memory cards and particularly to a structure within the cards for densely packing a large number of integrated circuit chips of electrically erasable and programmable read only memory EEPROM to provide a complete memory system.

Currently standard microcomputer systems use a combination of fixed and removable floppy magnetic disk media for long term non volatile memory. Semiconductor random access memory RAM without a battery power supply backup is only temporarily used since it is volatile that is when power to the computer system is disconnected contents of the RAM are lost. A small amount of read only memory ROM is also included for permanent storage of certain computer system parameters that do not change.

There is currently underway an effort to develop non volatile flash EEPROM memory systems to replace either of the existing fixed or floppy magnetic disk systems or both. It is now becoming possible to form a megabyte or more of flash EEPROM on a single semiconductor integrated circuit chip. As a result several megabytes of memory can be formed in a very small package.

Indeed an industry PC Card Standard release 1.0 dated August 1990 of the Personal Computer Memory Card International Association PCMCIA sets mechanical and electrical interface standards for a memory card that is not much larger than an ordinary credit card. Although some physical dimension variations are permitted within the scope of this standard it is less than 6.0 mm in overall outside thickness less than 5.5 cm in width and less than 9.0 cm in length. A female type of pin connector is provided across one of the narrow ends of the card structure. Such PC cards have been commercially implemented primarily with static random access memory SRAM and ROM.

It is a principal object of the present invention to provide a structure for packaging a large number of flash EEPROM integrated circuit chips within such a PC card or other standard structure thereby providing a large memory capacity in an individual card or other industry standard physical configuration.

It is another object of the present invention to provide a complete flash EEPROM system within such an individual card or other standard configuration that emulates a floppy or hard disk system.

It is a further object of the present invention to provide such a PC card structure that is easy to fabricate and test during assembly.

It is yet another object of the present invention to provide an improved computer memory system that utilizes one or more PC cards containing EEPROM integrated circuit chips.

This and additional objects are accomplished by the various aspects of the present invention wherein briefly and generally according to one aspect one or more EEPROM memory chips are directly mounted to a substrate to form a sub board structure and one or more of the sub board structures are then attached to both sides of a main circuit board that extends throughout an interior of the card package and terminates along one side to form the PC card connector. Each of the sub boards has a line of electrical terminals along one side thereof in a pattern that matches a pattern of exposed conductors on the main board.

In specific implementations two three or four such memory chips are provided in a row along a rectangularly shaped sub board having terminals along one of its long dimensions and which is attached to the main board through connection of its terminals with the exposed main board contacts. Several such sub boards can be installed on the main board on one or both sides within the limits of the PC card standard identified above. This sub board structure permits a large number of EEPROM chips to be included within such a card. It also allows testing of the chips attached to each sub board before they are assembled together on the main board thus allowing an early identification of any problems in the mounting and initial interconnection of the circuit chips.

One type of EEPROM PC card contains only EEPROM memory chips with the use of sub boards as discussed above or otherwise which are then interconnected through the card socket to a controller circuit. The controller interfaces between a computer system s main bus and the individual circuit chips. One two or more sockets may be provided in conjunction with a given controller for respectively removably receiving one two or more PC cards at a time. An amount of permanent EEPROM capacity may optionally be serviced by the same controller circuit.

Another type of flash EEPROM PC card contains a large number of individual memory circuit chips either in the sub board structure described above or otherwise plus one or more circuit chips forming a controller. In this embodiment each PC card communicates through its connector in a format of a computer system bus. Such a PC card is self contained and no intervening controller circuit is required.

According to another aspect of the present invention a flash EEPROM system is provided with physical form factors which match those of industry standard floppy and hard disk drives along with an electrical interface that emulates such drives. Such a nonvolatile flash EEPROM system is then easily usable as an alternative in a computer system designed to include such disk drives.

According to yet another aspect of the present invention a flash EEPROM system is provided in a PC card or other industry standard memory system package with a controller for directly interfacing the system with a computer system bus. No extra adaptation is required to use such a non volatile non mechanical mass memory in computer systems whose hardware and software operating systems are designed to accept and use disk systems. The internal controller converts the computer bus interface and signal protocols to those required to operate the flash EEPROM memory.

Additional objects features and advantages of the various aspects of the present invention will become apparent from the following description of its preferred embodiments which description should be taken in conjunction with the accompanying drawings.

Several physical configurations of a memory card system are described with respect to . An example electronic system within such a card including both flash EEPROM and controller integrated circuit chips is described with respect to .

Referring initially to one embodiment of a PC card flash EEPROM memory is illustrated. A structurally rigid printed circuit board contains on one side various circuit components that form a memory controller. The controller circuit is operably connected with a row of connector pins attached to the board . A connector provided at an end of a ribbon cable is adapted to interconnect the conductors of the cable to the row of pins . Another end not shown of the ribbon cable is connectable with a microcomputer system bus. Alternatively the controller board could be provided with a different type of connector that is adapted to fit directly into an expansion slot of a microcomputer system.

On an opposite side of the controller board from the controller circuit chips are two PC card receiving slots and . These slots have respective rows and of conductor pins. The slot and pin arrangement is dimensioned to receive respective PC cards and for mechanical and electrical interconnection therewith. The rows of pins and are connected to the controller circuit . The PC cards and contain a plurality of flash EEPROM memory chips a preferred arrangement thereof being discussed in detail below. The PC cards and conform to the PC Card Standard identified above which is incorporated herein by this reference. Of course other sized cards may be used instead depending upon the particular application.

Although two sockets and are indicated in this embodiment may be varied to contain only one socket or to include three or more sockets. As shows both of the PC cards and can be inserted and electrically interconnected with the controller at one time. If additional sockets are provided additional cards can similarly be simultaneously utilized. The removability of the memory cards allows them to be used much like floppy disks are currently used. As indicated in additional flash EEPROM memory can be provided on the underside of the controller board itself as fixed memory. An example of a controller card having an amount of fixed memory is given in another embodiment shown in .

The main board includes a center core supporting substrate with conductor traces formed on either side. A thin dielectric layer is coated over the entire area of each of the surfaces covering the conductor traces and any exposed portions of the core substrate material surfaces. The insulating material does not cover however various rows of electrical contacts.

One such row of electrical contacts and a similar row on an opposite side of the main board but not visible in is provided across a narrow side of the main board and forms the contacts for the rows of pins and of . Traces beneath the insulation layer not shown then interconnect these edge contacts with various rows of contacts across both surfaces for interconnecting with the sub boards for example a row of contacts provided across the narrow width of the main board . A row of contacts having the same spacing and pattern as the row is provided along a large edge of the rectangularly shaped sub board . Thus when the sub board is positioned on a surface of the main board its contacts line up with the row of contacts. They are attached to one another by soldering or some other technique. Indeed in most cases the soldering of these contacts is the only form of mechanical attachment of the sub board to the main board that is required. This makes the structure quite simple and expedient to assemble. However if additional attachment is believed necessary a dot of epoxy can be applied between each sub board and the main board along a side of the sub board opposite to its row of edge contacts.

Similarly five other rows of contacts are provided for accommodating the other five sub boards shown in the example of . Rows and are on the same side of the main board as the row . All rows on the main board are parallel to each other and to the short edge of the board . Similar rows of contacts and are shown in dotted outline on the opposite surface of the main board . Most of the conductive traces are preferably provided on one side of the core substrate of the main board these conductors then penetrating that sub board to connect with the contacts on an opposite side.

Referring to the cross sectional PC card view of each of the sub boards is shown physically attached to the main board only by its electrical contacts. In either case a plastic ring surrounds its outside edges and forms the narrow sidewalls of the resulting PC card. Rows of holes and are provided at one end to accept socket pins such as the pins of for contact with the edge connector of the main board which includes the row of contacts. Generally rectangularly shaped thin metal plates and are attached to the edge ring to form opposite sides of the PC card. Metal layers are preferred in order to provide highly desirable radio frequency shielding. The outside layers and are generally connected with ground potential of the memory circuit carried therein usually Vof the computer system with which it is interconnected.

With reference to and the structure of the sub boards and attachment of the memory chips to them will now be described. Taking sub board and its attached chip as an example the chip is provided with its interconnecting pads supplied along only one of the chip edges. This edge of each of the chips attached to the sub board is then positioned to face the edge carrying the sub board contacts .

The sub boards are best illustrated by the sectional views of . A central core substrate layer carries conductive traces on both sides. For example in the view of a conductive trace is attached to the top side of the central substrate layer and in the sectional view of taken at a different position a trace is so provided. The traces on the top side of the core substrate layer generally extend across the narrow width of the sub board while conductive traces on the bottom side such as traces and generally extend in the long direction of the sub board. The result is a type of matrix that makes it easy to interconnect the large number of contacts provided by multiple integrated circuit chips and the sub board contacts . An electrical contact is made through the layer when it is desired to interconnect traces on opposite sides thereof such as top trace being connected with bottom trace in the view of and top trace being interconnected with bottom trace in the view of . Both sides of the substrate are covered with respective thin insulating layers and .

Portions of the top side traces along the contact edge of the sub board are exposed however for wire bonding to pads of the chips attached to them. For example in the section of a wire is bonded between one pad of the chip and the trace . In the section of another wire is bonded between a different pad of the chip and an electrically separate trace . In the example section of the trace is connected with an edge contact one of those in the row of sub board contacts . The wire is then connected directly to the pin a very short distance away. Others of the chips on the sub board are similarly interconnected with the pin by bonding to top traces which are interconnected with the bottom trace that has been connected to the pin .

The section of shows a different example wherein the wire is bonded to a top conductive trace that is connected to a bottom trace . Although not shown the bottom trace is connected somehow to one of the conductors of the sub board row of contacts . In the case of a pin is interconnected on the bottom of the central substrate with the trace . That bottom trace then allows a pad not shown of the chip to be electrically connected with it and similarly for the other chips attached to the sub board .

Surrounding the attached integrated circuit chips on a top side of the sub board is a plastic frame . That frame in combination with an overall encapsulation not shown of the chips on the top surface of the sub boards protects those chips.

Referring to a modification of the embodiment of is shown with common elements indicated by the same reference number but with a prime added. In this case a sub board nearest the edge connector contains integrated circuit chips forming a controller. That is one sub board of memory chips is replaced with an on board controller so that the resulting PC card can be operated directly from a computer system bus without having to use the external controller of the embodiment of . Most of the traces interconnecting the edge connector of the main board are connected directly with rows of main board contacts to which the controller sub board is electrically connected. Traces interconnecting the rows of contacts with which primary chip containing sub boards are primarily attached also extend to contacts with which the controller sub board is connected. Indeed depending upon the design enough controller sub board contacts may be required as to have rows along each of the opposing long sides of the sub boards as shown in with corresponding parallel rows of contacts on the top surface of the main board . Alternative to mounting the controller chips on a sub board they can be mounted directly onto the main board in the space shown in to be occupied by the sub board .

Referring to a system utilizing such a card with internal controller is illustrated. Two such cards and are shown to be connectable through a connector to a microcomputer system bus through conductors . Of course any number of such cards from 1 to many can be utilized in a single computer system having one or more such connectors. The connector need not contain any electronic components except perhaps for buffers amplifiers and the like. But no data manipulation or other controller functions need be provided outside of the cards and in this embodiment. Of course more than two such PC cards can be utilized at a time by providing an expanded connector .

Referring to a modification of the controller card illustrated in is shown in orthogonal side and end views respectively. A structurally rigid printed circuit board is provided with a single socket for removably receiving a PC memory card of the type discussed with respect to above. The printed circuit board is wide enough in this embodiment to accept a plurality of packaged integrated circuit chips that form the memory controller. A connector along one edge of the board provides for connection to the computer system through a ribbon cable or the like. Attached under the board are a plurality of sub boards in this case six of the type described earlier with respect to . Each sub board contains a plurality of flash EEPROM chips. The sub boards are connected to exposed contacts on the underside of the controller board in the same manner as utilized in the PC cards as described with respect to .

The controller board embodiment of provides a combination of fixed system flash EEPROM capacity attached to the underside of the board and the ability to use removable PC cards also containing flash EEPROM chips. The controller formed by interconnecting through traces on the controller board the packaged circuits is connected with the computer system bus connector and operates both the fixed and removable EEPROM memory. Of course one or more additional sockets may be provided in order to accommodate multiple PC memory cards at one time.

In addition to packaging the flash memory within the industry standard PC memory card form factor discussed above it is also desirable to be able to package such a memory system within an industry standard floppy disk drive or hard disk drive form factor. This allows the semiconductor memory to be easily physically substituted for a disk drive. An example standard just being formed is for a 1.8 inch hard disk drive with a small form factor. Its dimensions are about 19 mm. in height 54 mm. in width and 73 mm. in length as a maximum. As disk drives evolve over time their packages become smaller. The packaging techniques described above particularly the use of sub boards for mounting circuit chips allow large solid state memory systems to be presented in the same small packages.

It is preferred that the memory system included in a card or other standard package be self sufficient so that it can electronically interface at its connector with a standard computer bus interface. One such standard is an integrated device electronics IDE interface. This interface is being used extensively with hard disk drives that have controller circuits integrated as part of the drive. Thus the packaged EEPROM system as part of the present invention includes controller circuits in order that the unit appears to the computer system as a disk drive.

Referring to the general block diagram of bus interface circuits are shown as providing individual circuit connections according to the IDE interface specifications to a flash EEPROM memory package that includes a controller circuit. The package may be a thin PC card as discussed above with respect to the figures a package having dimensions and capabilities similar to that of a hard disk drive as mentioned previously or various other convenient removable packages. The bus interface is connected with a computer system bus . A typical computer system is shown in to include a microprocessor ROM RAM and input output circuits all connected with the common bus . Of course the memory system of the present invention can be utilized with other specific computer systems.

The IDE signal lines connected to the memory package include as indicated in the 16 bit data bus D D and three lines of an address bus A A. These lines are connected to the corresponding lines of the system bus through buffers and drivers within the interface circuit . Similarly provided are system control signals IOR IOW and RESET. The signals IOR and IOW affect respectively a read or write operation within the memory package when toggling between states.

The IDE signal lines also include control lines CS and CS which serve as two of several address bit lines for the memory within the package . These signals are decoded from the higher level system address lines A and up by appropriate circuits within the bus interface circuitry . Alternatively the necessary address lines may be communicated with the memory package and this decoding circuitry provided within the package. However this occupies more pins within the connector so is usually done in the manner being described.

A number of status signals are also provided by the memory within the package to the computer system through the bus interface . An example is the signal identified as IOCS16 which notifies the system whether the memory module accepts an 8 or 16 bit transfer on the data bus. Another line INTRQ provides an interrupt request from the memory to the computer system. Of course there are additional control and status signals as well as voltage supply and ground lines that are communicated over the connector according to the IDE standard.

The controller of is connected to at least one and preferably a plurality of memory modules of the type illustrated in . Each memory module includes a plurality of EEPROM integrated circuit chips physically connected together on a sub board . Each of the memory chips is connected with the controller over lines . Each of the memory chips is programmed with a unique address by connection with a plurality of pads such as the pads on one of the devices being controlled by selectively grounding them on mount .

Referring to each of the EEPROM integrated circuits is formed on a small substrate chip with memory cells arranged in rows and columns in quadrants and . These individual quadrant arrays are connected through interface circuits to the controller lines and a line . Each of the memory cells within a given quadrant such as the quadrant is addressable by proper voltages applied to intersecting column bit and row driver lines. A sector of such memory cells contiguously arranged such as a sector shown as part of the quadrant is erasable simultaneously by addressing the sector.

Referring to the sector is shown to be formed of four rows of memory cells each row having a length of enough cells to store 128 bytes. Thus the sector stores 512 bytes the same capacity as a sector of disk storage according to prevailing disk standards. A number of such sectors are provided adjacent to each other each of which is separately addressable and erasable by a single command in one clock cycle. An additional byte of disk storage is provided as an extension of each row of EEPROM cells of the sector for the purpose of providing spare EEPROM cells to replace bad cells within the sector . Similarly another byte stores header and other common overhead information required for each sector. Additional details of the memory system operation can be had by reference to published international patent applications of the assignee hereof namely European publication no. 392 895 dated Oct. 17 1990 and PCT publication no. WO 90 12400 dated Oct. 18 1990.

The number of EEPROM cells and thus the number of sectors in each of the quadrants and is preferably made to be the same. A given sector of cells is addressed by first designating the integrated circuit chip its quadrant and then the sector within the quadrant. The highest capacity memory unit is provided when all four quadrants are utilized of course but the quadrant approach allows memory units of lower storage capacity to be manufactured with rejected chips so long as at least one quadrant and the buffer portion of a rejected chip are operable. This thus allows making use of memory chips that would otherwise be discarded and thus the provision of a lower capacity memory unit at a much lower cost.

The circuitry for accomplishing this address translation is illustrated in a part of the controller of . The commercially available peripheral interface chip includes a number of registers which are utilized to perform the translation. One group of registers which responds to a toggle of the IOR signal includes a status register a read head address register read cylinder address registers and allows a 16 bit cylinder address a read starting sector address register and a read sector count register . Similarly another set of registers is written into or read by toggling the IOW signal. These registers include a command register a write head address register write cylinder address registers and a write starting sector address register and a write sector count register . Each pair of registers is addressable by the host computer with a bit pattern indicated to the right of the registers of involving the signals CS CS and A A. Similarly a read buffer memory and a write buffer memory are separately addressable.

The group of registers provide a temporary place for storing commands from the host computer over the interface lines . When the computer system wants to perform a read or write operation it writes a READ or WRITE command into the command register after writing into the respective sets of registers or the address in disk drive terms of the sectors where the data is to be read or written. This is controlled by the basic input output system BIOS that is part of the computer operating system. The microprocessor through a microprocessor port then reads the command from the command register and the address from the appropriate read or write registers and performs the translation and command. Once a command is detected in the register a BUSY signal is written into the status register that the host computer can then read to know that the memory system is in the process of executing a command and cannot receive another. Data is transferred between the buffer memory and the EEPROM memory through a data port . Once a commanded operation has been performed the microprocessor then writes a NOT BUSY indication in the status register . Other registers are provided in the commercially available peripheral interface chips but those of them which are most important to the operation being described herein have been shown.

This operation under control of the microprocessor is illustrated in a general way by a flow diagram of . A first step in the operation is for the command register to be continuously polled in order to detect a command placed there by the host computer system. Such a read operation is indicated by a block and a determination as to whether a new command has been written into the register or not is indicated by a block . If a new command has not been so written since that register was last accessed then the steps and are repeated. When a new command is detected the processing moves to a step where a BUSY status signal is written in the register . The host computer in polling the status register will then not lead another command into the command register until a NOT BUSY status is written into the register at the end of the current operation.

Other than READ and WRITE other commands from the host processor include SEEK and RESTORE. These are commands that are intended to move a disk drive read write head inbetween read and write operations for optimal positioning. If one of these commands is detected as indicated by a block a majority of the processing is skipped proceeding immediately to the writing of the NOT BUSY status in the register as indicated by a block .

If the command is to READ data from the EEPROM system or to WRITE data into it as indicated by a block then one of two paths is taken in the processing. If a READ operation is commanded a step reads the address in disk drive terms stored in the registers by the host computer. A next step translates that disk address into a flash memory address as generally described in with reference to an address translation block . This translation is most easily accomplished by an algorithm calculation or reference to a look up table that have a one to one correspondence between the disk address and the EEPROM address. That one to one correspondence is disturbed of course when a sector is found to have so many bad EEPROM cells that it must be taken out of service and replaced by another sector. The address translation table is then dynamically altered.

After the address has been translated into EEPROM terms a next step reads data from the flash memory and writes it into the read buffer .

Thereafter in a step the read data is compared with an expanded form of an error correction code ECC that has been stored with the data. A common ECC format and algorithm used for disk drives is used. Next in a step the read data is transferred to the host computer. Any error that has been detected during the reading process is written into the status register in a step . Following that the step indicates to the host computer that the operation is complete by writing NOT BUSY into the register . At that time the system computer will know that the read operation is complete and that it may access the buffer read memory over the interconnection lines to transfer the read data to somewhere else in the computer system.

Returning to the decision block the path for a WRITE command is similar to that just described for a READ command. A first step in response to such a command is to read the address from registers which have been written there by the host computer in disk drive terms. A next step translates that address into EEPROM terms in the same way described with respect to the step . A final step is to execute the command by reading data which has been placed into the write buffer memory by the host computer system and then writing that data into the address EEPROM sectors. After that is complete the steps and are executed in the manner discussed above. The process then returns to the beginning steps and to poll the command register for a new command from the host computer system.

Although the various aspects of the present invention have been described with respect to their preferred embodiments it will be understood that the invention is entitled to protection within the full scope of the appended claims.

