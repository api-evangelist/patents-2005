---

title: Method and apparatus for generating an environmental element prediction for a point of interest
abstract: An apparatus for generating environmental element predictions at a point location includes a receiver for collecting broadcast environmental element prediction data. A processor generates at least one environmental element prediction for the point location.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07996192&OS=07996192&RS=07996192
owner: DBLive Corporation
number: 07996192
owner_city: Austin
owner_country: US
publication_date: 20050528
---
This invention relates to the field of forecasting environmental conditions. In particular this invention is drawn to the generation and use of environmental element predictions for a point location.

Environmental conditions for a location or region can be described with various environmental elements and their associated value. The value of a given set of such environmental elements defines the environmental state of interest for the location or region. Accurate predictions of an environmental state are useful for planning a wide range of activities for any number of entities including government military consumer and other commercial enterprises. Groups of environmental elements are frequently categorized for convenience into classifications such as meteorological marine hydrological etc.

Meteorological elements reflect a subset of environmental elements that describe the physical and dynamic behavior of the atmosphere. Weather is a description of short term atmospheric behavior. Weather predictions might be useful for example to determine when to travel a transportation route or a mode of transportation. Longer term atmospheric behavior is generally referred to as climate and falls within the field of climatology. Climate prediction is useful for longer term planning such as determining which crops to plant. Global models have been developed to aid in studying and forecasting some environmental elements particularly meteorological elements and those environmental elements pertaining to the determination of the meteorological elements e.g. hydrological elements .

Generating a global weather forecast requires tremendous computational power. Typically government sponsored organizations develop global weather models collect and maintain data for the models and run the models to generate predictions about the weather in a process referred to as numerical weather prediction. Government sponsorship is prevalent due to the capital intensive nature of the computational resources involved the volume and source of the data required and the benefits afforded on a societal scale.

Numerical weather prediction involves numerically integrating a set of differential equations. This is accomplished by dividing the spatially relevant portion of the atmosphere into a finite number of three dimensional grid elements and performing a time series finite element analysis. Due to the time constraints and the computational resources available the forecast is typically a synoptic scale forecast having a spatial resolution on the order of a hundred or more kilometers latitudinally and longitudinally.

The global weather model becomes the starting point for determining a weather forecast on a finer spatial resolution. For example local weather prediction is often handled by human meteorologists local to the region at issue who rely on numerical weather predictions observation history and their own experience for generating a regional weather forecast. The forecast generated by the meteorologist usually covers a relatively large region e.g. city wide country wide etc. and is typically designated for local landmarks e.g. downtown airport stadium etc. .

One disadvantage of this approach is that a skilled professional is required. The skilled professional typically only address regions near populous areas significant landmarks or observation stations.

Another disadvantage of this approach is that the results are expressed for the entire region even though the weather condition may vary greatly from one location to another within the region. Temperatures at an airport or a city center for example may be extraordinarily elevated when compared with temperatures near a lake within the same region. Thus the regional forecasting approach does not address the anticipated fluctuation in weather that may occur from point to point within the same region.

In view of limitations of known systems and methods various methods and apparatus for generating point environmental element predictions are described. In one embodiment an apparatus for generating environmental element predictions at a point location includes a receiver collecting broadcast environmental element prediction data. A processor generates at least one environmental element prediction for the point location.

Environmental elements may also alternatively be referred to as environmental variables parameters or conditions and generally describe a physical characteristic or attribute of the environment about a given location. Knowledge of the conditions or values for these elements is important to determine whether and to what extent the existence or development of someone or something will be affected. These environmental elements are frequently categorized into groups for ease of use however one element may be in more than one category. Meteorological is one such category of environmental elements. Meteorological elements will frequently be utilized for purposes of example.

The envelope of air surrounding the Earth and bound to the Earth by gravity is referred to as the atmosphere. The structure properties and physical processes of the atmosphere are the subject matter of the field of meteorology.

The term climate is generally used to refer to long term atmospheric behavior. Weather reflects the short term state of the atmosphere particularly those characteristics that tend to affect human activity. Weather generally refers to variations of the atmospheric state over periods of a few minutes to a few weeks.

The weather at a particular place and time may be characterized by a number of meteorological elements. The elements might include for example air temperature pressure wind speed wind direction probability and amount of precipitation humidity cloud cover and visibility.

A human forecaster i.e. meteorological expert familiar with the local area of interest interprets the model predictions observed data and the historical data to generate an inevitably subjective prediction . The human forecaster plays an integral role in revising the model predictions to create subjective predictions that incorporate the forecaster s personal experience or familiarity with regional weather behavior.

An improved NWP process incorporates a forecast engine rather than a human forecaster. illustrates one embodiment of a NWP process incorporating such a forecast engine. As with the model representing the atmosphere is provided to processor . Observed data and historical data serve to establish the initial conditions for the model. The observed data is also recorded into the historical data for future use. Processor solves the aforementioned equations to calculate future states of the atmosphere as model predictions . The model predictions are also recorded as historical data for testing the validity of the model.

In contrast with a forecast engine is used to generate objective predictions from the observed data historical data and model predictions . Although is drawn to numerical weather prediction such a forecast engine can likewise be used to provide environmental element predictions without the human forecaster.

Various aspects of a forecast engine including forecasting processes system architectural implementations e.g. client server broadcast etc. physical implementation e.g. client computer application stand alone device etc. as well as practical applications e.g. irrigation control are described below.

Numerical weather prediction relies upon a meteorological model of the atmosphere to approximate the behavior of the atmosphere over time. Several models for NWP are available. The models typically divide the spatially relevant portion of the atmosphere into a finite number of grid elements.

The NWP model incorporates equations from fluid dynamics including equations of motion thermodynamic and moisture equations and the continuity equation for conservation of mass for each grid element. The equations are then solved in time steps to calculate future states of the atmosphere as a regular grid of meteorological element prediction data. Initial conditions for the grid points are established by interpolation from meteorological element data observed and reported from various observation points. The solution to the aforementioned equations is iteratively derived using the interpolated observed meteorological element data for the initial conditions. The model may be run several times a day as the observations are updated.

Layers of grid elements become layers of grid points . The distance between the grid points is referred to as the grid length. The grid length is representative of spatial resolution. Vertical levels determine the vertical resolution of the model. The result of NWP is thus a three dimensional grid of points each of which is associated with an array of meteorological elements at a specific time or time step. The points are referred to as a grid points. The information e.g. location environmental element prediction data associated with one or more such points is collectively referred to as grid data.

The size of the grid elements determines the spatial resolution of the NWP. Dimensions measured about the surface of the earth i.e. same radius are referred to as horizontal. The horizontal grid length WX may be distinct from the horizontal grid length WY. Dimensions measured perpendicular to the surface of the earth are referred to as vertical or layer. The grid element height is WZ and defines the vertical resolution for the model.

Due to the time constraints the prediction must be available before the targeted time frame for practical use and the computational resources available the prediction is typically a synoptic scale prediction with each grid element having a spatial resolution on the order of hundreds of kilometers 1 1 for a global model or around 20 km by 20 km for a regional model. A NWP model utilizing 10 40 vertical layers is not unrealistic. The computational power required to perform global predictions with so many elements is significant. Generally only very powerful supercomputers are capable of performing this task within the timeframe limitations.

Collectively the grid elements can provide information about weather phenomena operating across areas that span multiple grid elements. NWP cannot resolve meteorological element details within an individual grid element. At best aggregate inferences may be made about the meteorological elements within the grid elements.

Several meteorological models are available for predicting the weather. Examples include North American Mesoscale and variants NAM NAM NMM NAM WRF ETA Global Forecast System GFS Rapid Update Cycle RUC Air Force Weather Agency Mesoscale Model version 5 AFWA MM5 Navy Operational Global Atmospheric Prediction System NOGAPS Coupled Ocean Atmosphere Mesoscale Prediction System COAMPS and Global Environmental Multiscale GEM . Some additional global models include Medium Range Forecast MRF and Aviation Model Forecast AVN . Regional models include the ETA model Regional Atmospheric Modeling System RAMS and Mesoscale Model 5 MM5 .

The models may be differentiated on a number of factors including the organization or entity managing and operating the model the scale regional mesoscale global model structure e.g. number of vertical layers horizontal resolution etc. model physics parameterization for precipitation clouds radiative processes etc. the manner in which various physical processes are approximated and the approximations made when numerically solving the equations governing the physical processes.

The World Meteorological Organization WMO has established a World Weather Watch WWW program to ensure members obtain the appropriate weather data for operational and research purposes. The WWW program includes a global observing system GOS a global data processing system and a global telecommunication system GTS .

The GTS is a co ordinated global system of telecommunication facilities that support the rapid collection exchange and distribution of observational data in the framework of the WWW. GOS is a global network of observational stations and a coordinated system of methods techniques and facilities for making observations on a world wide scale in the framework of the WWW. For reasons to be described later it is important to realize that the observational data provided to the NWP processor does not necessarily correspond to or nicely overlay the three dimensional grid of elements used in the NWP meteorological model. For example there may be large geographic areas for which no observations are available. In other geographic areas the observation points may not be well distributed such that there is considerable information for some regions and little information for other regions in proximity.

Although the grid data may be readily available the grid data does not reflect the large variations in weather that might be experienced within any given region. In other words the grid data might reflect net predictions for the entire region without being particularly representative of any specific point within the region. More accurate weather prediction data for specific points within a given region is highly desirable.

U.S. Pat. No. 6 823 263 of Kelly et al. Kelly discloses subdividing a grid element having a coarse spatial resolution into a plurality of grid elements having a much finer spatial resolution. The NWP techniques previously described may be used to generate weather predictions at the finer spatial resolution. As noted by Kelly however this still requires significant computational power.

Although Kelly s approach might be useful for a few specific pre determined points any other point would be underserved. The prediction associated with one of the pre determined points may become highly unreliable even a short distance from the pre determined point.

An alternative approach is to use a less computationally intensive numerical approach guided by the grid data i.e. coarse spatial resolution prediction data to generate predictions for either pre determined sites or user selected sites. This approach may be applied to predict environmental elements generally and is not otherwise limited to meteorological elements.

In step environmental element observation data is collected. The observation data for a given observation point is the actual environmental element data measured at that site. Thus the observation data for a given observation point may comprise a latitude longitude altitude timestamp i.e. date and time and any number of environmental elements observed values e.g. temperature precipitation etc. 

Point environmental element predictions are interpolated for the observation points using the grid data in step . A prediction error characterizing the error between the environmental element predictions interpolated from the grid and the actual observed values at the observation points is generated in step .

A point environmental element prediction for a point of interest is generated in step . The prediction error from one or more observation points is used to generate a corrected point environmental element prediction in step .

Referring to step only grid data from one altitude at any location is collected in one embodiment. Thus for any X Y cell only one grid point along the Z axis is selected. In one embodiment the grid point associated with the layer or level closest to the surface is selected. The level selected is thus dependent upon the altitude of the topographical features of the location. Referring to any X Y grid location has a plurality of grid points in a vertical column because of the multiple layers of the model. Only one of the layers along the Z axis is chosen for any given X Y cell and the choice is based on the proximity of the layer to the surface as determined by the Earth s topographical features.

In one embodiment the layer or level closest to the topographical surface at a particular X Y location is the layer from which a grid point will be selected for that X Y location. In some grids the grid point might reside within the center of a grid cell. In the illustrated embodiment the grid points are located at the corners of a grid cell and thus may be shared by 4 grid cells. The grid point closest to the ground is chosen.

Referring to three dimensional grid the grid points that meet this qualification include . Referring to two dimensional grid the source grid point mapping from three dimensional grid to each selected grid point of two dimensional grid is as follows and . The result of step is a collection of grid data based on a coarse spatial resolution of grid length WX wherein the grid point at a specific X Y location has an associated altitude Z and prediction data specific to the grid point.

Similarly the proximity of observation points to the point of interest is determinative of the relevance of the observation data. Thus for example with respect to observation points and the data associated with observation points and is presumed to be more relevant than the data associated with observation point .

A point environmental element prediction is generated from the selected grid points in step . In one embodiment the point environmental element prediction is interpolated using a weighted average of the grid points. The weighting is based on the relative distances between the selected point and each selected grid point with closer grid points weighted more heavily than distant grid points. In the event that the co ordinates of the selected point match those of a grid point the grid data associated with that single grid point may be used without interpolation.

In one embodiment the weighting is inversely related to distance by an exponential function of the form e where d corresponds to the distance between the selected point and the selected grid point where k is a factor that may vary for each environmental element parameter i.e. k may have one value for temperature and another value for precipitation . An interpolated environmental element value for a parameter E based solely on distance from relevant grid points might be calculated as follows 

In order to ensure the most relevant grid points are selected and computational simplicity a threshold operation may be performed. The threshold operation for example may examine any of d d kdto determine whether a given corresponding pre determined value is exceeded. Alternatively the threshold operation may determine whether eis less than a pre determined value.

The selected grid points may be at different altitudes than the selected point. For some environmental element predictions an altitude correction may be appropriate. Thus an altitude correction is performed in step if necessary. As with the horizontal displacement the vertically closer grid points are expected to be more relevant than the more distant grid points.

In one embodiment the altitude correction is based on the difference between the altitude of the selected point and an interpolated altitude from the selected grid points. An interpolated altitude may be calculated in any number of ways. In one embodiment the interpolated altitude is calculated as follows 

The varying of a environmental element such as temperature with altitude is referred to as lapse rate . Lapse rate may be used for performing altitude corrections for some environmental elements e.g. temperature . The lapse rate may change throughout the course of a day and from point to point. The change in temperature from one altitude a to another a can be determined by the following where L a is the lapse rate.

In order to perform the altitude correction for temperature the following equation may be applied where Tis the temperature at the selected point Tis the interpolated temperature for the interpolated altitude and L a is the lapse rate in the altitude range from the interpolated altitude A to the altitude A of the selected point. In the event that a standardized constant lapse rate is applicable the equation becomes 

The point environmental element prediction is not limited to a specific number of grid points. Although accuracy and computational resource requirements may vary depending upon the number and location of selected grid points any number of grid points may be used. In one embodiment at least four grid points distributed about the selected point e.g. a point of interest are used e.g. at least one grid point located in each quadrant Q Q of a Cartesian plane having co ordinate axes with an origin centered upon the selected point . The Cartesian plane is the two dimensional horizontal plane of grid points described above.

Referring to the method of may be applied to generate a point prediction for the point of interest step as well as one or more observation points .

The point prediction for the observation point s is useful for estimating prediction errors. Actual observed values can be compared with the values that were previously predicted to determine corrections that would have been needed for the previously predicted values. Although the actual error in the prediction is not known until the time period of interest has passed the use of standard statistical techniques such as regression analysis may be used in conjunction with the historical error to estimate the future prediction errors.

Each day a maximum temperature forecast is calculated from the relevant grid points for up to N days in advance. These maximum temperatures were interpolated from relevant grid points using the process of . The value in the x day column for a given date reflects the maximum temperature that was predicted x days prior to the given date. Thus for example value indicates that the maximum temperature predicted for date May 2 2005 on May 2 2005 was 86 when x 0 the value is the value calculated on the same date . Value indicates that the maximum temperature predicted on May 5 2005 for May 7 2005 i.e. a 2 day forecast on May 5 2005 was 78 . The predicted values are lagging because they refer to predictions made on preceding dates about a subsequent date.

Table illustrates the historical error by date to be used for estimating the prediction errors for a given environmental element. The prediction error for the 1 day prediction may be different from the prediction error for the N day prediction. Thus the prediction errors may be grouped by columns columns to permit separate estimations of the prediction errors i.e. estimation of the 1 day prediction error distinct from the estimation of the 2 day prediction error etc. The prediction errors may also vary amongst different environmental elements such that the error for each environmental element must be distinctly tracked.

Referring to table the prediction error for a given environmental element E at prediction observation point i prediction timeframe t on a given date j is calculated as observed predicted

The actual prediction error is clearly only known after the time period of interest has passed. Once a sufficient history of predicted and observed data is collected various statistical techniques e.g. linear regression average etc. other mathematical techniques or even artificially intelligent approaches e.g. neural networks may be used on the historical prediction errors to estimate the current prediction error for each prediction timeframe e.g. one day two day etc. . In various embodiments 30 60 days of errors are collected for each observation point and each environmental element. The result is that an estimated error of the form EST ERRmay be generated from the historical data for each environmental element m observation point i prediction timeframe t and given date j. Given that the most current estimate is used for correction the date j is omitted for clarity i.e. EST ERR .

Thus for any given date each observation point may have a prediction error associated with each prediction timeframe. These prediction errors are used to correct the corresponding interpolated prediction from the grid data for any point of interest using an estimated prediction error.

In one embodiment the prediction error used to correct a point prediction is estimated from the prediction errors associated with relevant observation points. In particular the prediction error EST ERRfor the point of interest may be interpolated from one or more observation points i as follows

As with the earlier calculations k is a co efficient that may be derived from experience. The co efficient k may be different for different environmental elements as well as for different prediction time frames i.e. the prediction error for 1 day in advance may utilize a different k k than a prediction error for 2 days in advance k such that k k. Moreover the k for temperature may be different than the k for precipitation .

In order to simplify computations for any of the interpolations a subset of the observation points or grid points may be selected based on relevancy. Thus for example a threshold operation such as determining whether eis less than a pre determined threshold may be used to determine whether the robservation point or grid point as the case may be should be included in the computation.

The estimated error for the point of interest is thus the estimated prediction error interpolated from the observation points. This information is used to predict the point of interest s environmental element values at various prediction timeframes as follows where Eis the predicted value for environmental element m and prediction timeframe t at the point of interest.

The number and category of environmental elements to be predicted may vary upon the intended application. Air temperature pressure wind speed wind direction probability and amount of precipitation humidity cloud cover and visibility are a subset of environmental elements generally grouped as meteorological elements. Marine elements might include water temperature wave height wave direction etc. Although the specific calculation for a given environmental element might vary among elements the methods and apparatus described are not intended to be limited to a pre determined set of environmental elements. Examples of other environmental elements might include heat index wind chill drought index soil moisture levels of ultraviolet radiation aerosol dispersion etc.

Centralization of the storage and maintenance of the environmental element prediction grid data and the observed environmental element data is one practical approach for supporting a number of users who may be interested in environmental element prediction data for various locations.

Some of the computers are referred to as host or server computers because they provide services upon request. The computers issuing the requests are referred to as client computers. The network environment of includes multiple N client computers and multiple M host computers . In some cases a plurality of computers e.g. may reside on a common network that shares a common connection e.g. via router to the Internet. The connection between the client computer and the host may include wireless links. Thus handheld devices such as cellular phones personal digital assistants etc. may be client computers or in some cases servers or hosts.

The host computers e.g. and client computers e.g. can be entirely different architectures however to facilitate communication on network they communicate by using a common communication protocol. In one embodiment this protocol is the Transmission Control Protocol Internet Protocol TCP IP .

The client computers can request services from a host computer. Hosts typically support file retrieval services search services communication services and recreational services. A subset of Internet host computers provide multimedia information services. This subset of host computers permit physical access to the abstract body of information referred to as the World Wide Web WWW and are referred to as WWW hosts or WWW servers.

World Wide Web host computers support a protocol that permits users with computers having different architectures operating systems and application programs to share multimedia enhanced documents. In one embodiment this protocol is the Hypertext Transport Protocol HTTP . The multimedia enhanced documents are often referred to as web pages. The application specific to a given hardware platform that permits viewing the web pages is often referred to as a browser.

Uniform Resource Locators URLs provide a standard way of referencing Internet resources including web resources. A URL identifies the protocol as well as the location of the item to be retrieved. The URL is not limited to other World Wide Web sites and may in fact refer to other Internet protocols and services such as Gopher WAIS UseNet news Telnet or anonymous FTP file transfer protocol .

A browser can access a host machine identified by the URL and then retrieve the resource specified by the URL. The resource identified by the URL may be static or dynamic. A static resource is a resource that exists prior to the request and is simply provided upon request. Examples of static resources include document image movie sound or static web page files. Dynamic resources are generated upon request and typically require some type of information from the user e.g. a database query requires search parameters .

This URL identifies the protocol as http Hypertext Transport Protocol . The portion www.infoweather.com is an Internet host address or symbolic representation of an Internet host address. Thus www.infoweather.com identifies a specific host. The portion of the URL identifying the specific host is often referred to as a web site. The remainder is a path for the resource that is being accessed. In the example above the URL causes the application weather to execute with the parameters LAT 30.1 and LON 30.1 for the purpose of dynamically generating a web page containing weather related information at that geographic location. This dynamically generated web page may then be presented to the requesting client effectively permitting a client to request and receive environmental element predictions for a specified point location.

The client communicates a request for environmental element prediction data at a specified point of interest to a server in step . The point of interest may be specified manually or automatically. A GPS locator for example may be used to automatically determine the location of the client and said location is used as the specified point of interest. The advantage of manual entry however is that locations other than the location of the client may be specified.

The server receives the request for environmental element prediction data for the specified point of interest in step . The server generates the point environmental element prediction data for the point of interest from the environmental element prediction grid data in step . Corrected point environmental element prediction data for the point of interest is generated in step using the prediction error associated with one or more selected observation points.

The server communicates the corrected point environmental element prediction data for the point of interest to the client in step . If corrections are not necessary or desired then step may be omitted. The client receives the environmental element prediction data corrected or uncorrected for the specified point of interest in step .

The method of is well suited for clients that have little computational ability. The maintenance of the grid data observation data predicted error data and the computation of the point environmental element prediction data are all handled by the server.

One disadvantage of the method of is that the computational load and contention for the server increases with the increase in client requests. illustrates an alternative embodiment of the client server model that places more of the computational load on the client.

The client communicates a request for environmental element prediction data at a specified point of interest to a server in step . The point of interest may be specified manually or automatically. A GPS locator for example may be used to automatically determine the location of the client and said location is used as the specified point of interest. The advantage of manual entry however is that locations other than the location of the client may be specified.

The server receives the request for environmental element prediction data for the specified point of interest in step . The server communicates environmental element prediction grid data and observation point prediction error data to the client in step . In one embodiment the server provides the data without regard to the point location. In an alternative embodiment the server exclusively makes the determination of relevancy when selecting grid point and observation point prediction error to communicate to the client. In yet another embodiment the server provides data for a region relevant to the point of interest from which the client may select a proper subset. This last embodiment provides a reasonable trade off between communication bandwidth and supporting client discretion in determining relevancy of grid and prediction error data.

The client generates the point environmental element prediction data for the point of interest using environmental element prediction data from selected grid points in step . As noted above the selection of grid points may be determined exclusively by the server exclusively by the client or collectively by both the server and client in various embodiments. The client for example may select a proper subset of the grid points provided by the server.

The client generates corrected point environmental element prediction data for the point of interest in step using the prediction error associated with one or more selected observation points. Selection of observation points may likewise be determined exclusively by the server by strictly limiting data provided exclusively by the client i.e. client receives all data from server or collectively by both the server and client in various embodiments. If corrections are not necessary or desired then step may be omitted.

The client server approach of places a greater computational burden on the client. Although the server load may be reduced on an individual client basis compared to the process of the server load still inherently increases with the number of clients. This approach may become undesirable as the number of clients or the amount of data transferred per client increases. In addition bi directional communication is inherently required for the client server architecture.

An alternative broadcast approach eliminates the contention for the server as well as the requirement for bi directional communication with the server. The term broadcast is generally characterized as a communication from a transmitter to one or more receivers. In a classic broadcast environment e.g. over the air broadcast television radio satellite broadcast etc. the transmission is unidirectional and the broadcaster has no knowledge of the identity or number of receivers receiving the broadcast. Any receiver within the coverage area of the transmitter can receive the broadcast.

More recent broadcasting techniques e.g. NARROWCAST POINTCAST UNICAST ANYCAST MULTICAST etc. such as might be used in a computer network environment permit specifying a group of one or more intended recipients. As with the classic broadcast environment these more recent broadcasting techniques do not require bi directional communication with the receivers. The information is transmitted substantially simultaneously to all members of a specified group of two or more intended recipients individual recipients might ultimately receive the broadcast information at different times depending upon different latencies within the network topology .

The broadcast server collects the environmental element prediction grid data in step . The environmental element observation data is collected in step . Point environmental element prediction data is generated for the observation points using the environmental element prediction grid data in step . Prediction errors for the observation points are calculated in step . The prediction error is determined from the generated point environmental element prediction data and the environmental element observation data. The environmental element prediction data is broadcast in step . The prediction error for the observation points is broadcast in step .

Broadcast environmental element prediction grid data is collected in step . Broadcast observation point prediction error is collected in step . Point environmental element prediction data for a point of interest is generated in step using selected environmental element prediction grid data. Corrected point environmental element prediction data for the point of interest is generated in step using the prediction error from selected observation points.

The broadcast server may broadcast the grid data and prediction error data grouped by geographic regions. Only a selected few of the observation points and grid points are relevant to the calculation of environmental element prediction data at the point of interest. The receiving device must select the relevant observation points and grid points. As previously indicated a threshold operation based on distance may be used to determine whether particular grid points or observation points are relevant.

For computational efficiency step indicates waiting for the broadcast of data associated with a region i.e. region of interest containing the point of interest. Once the data for the region of interest is broadcast the data collection for the point of interest may begin.

In step broadcast data associated with a given site is received as a collected site. In step broadcast data associated with the given site is optionally categorized. Categorization permits subsequent filtering based on various relevance criteria. For example if environmental element grid data or prediction error data from sites distributed about the point of interest are desired the given site may be categorized by its quadrant relative to the point of interest. In one embodiment the quadrants are defined as follows 

The device receiving the broadcast data necessarily has a finite memory. In order to ensure that the most relevant data is considered given the constraints of the device step determines if the number of any collected sites within the same category as the given site exceeds a pre determined threshold. If so a selected collected site that is further from the given site yet in the same category as the given site is eliminated in step . Within each category the most relevant data as determined by distance from the point of interest is retained.

After eliminating less relevant data if necessary step determines whether the broadcast of data associated with the point of interest is completed. If not steps are repeated until the regional broadcast is completed. If all the data for the region of interest has been broadcast the process returns to step to wait until the next broadcast of data for the region of interest.

The process of may be used to collect environmental element prediction grid data and prediction error data most relevant to the point of interest. Once all the information for a given region is broadcast the collected data may be used to generate corrected point environmental element prediction data for the point of interest.

Device includes a memory for storing collected data and for working memory when processor is performing the computations required to generate point environmental element prediction data. The device may generically be referred to as a weather aware device WAD particularly when the environmental elements predicted include meteorological elements.

Device includes an input output I O interface controlling external processes as well as providing an interface between the processor and various peripherals such as a locator or a display . In one embodiment I O interface provides a digital output representative of an on or off signal for control . In an alternative embodiment I O interface provides a proportionate signal for control in either analog or digital form.

In one embodiment I O interface supports communication of data between the device and external processes. I O interface for example may support an application programming interface API for retrieving data collected or computed by the device. I O interface may similarly provide for the receipt of data . In one embodiment programmatic settings for the device are received by I O interface i.e. data . Settings may include for example device region device location thresholds for environmental element predictions e.g. assume rain if probability of precipitation exceeds 60 etc.

In one embodiment device includes a locator to permit automatic determination of its location without user input. Locator for example may determine position of the device by satellite telemetry. In one embodiment locator determines the position of the device through satellite trilateration using a satellite constellation such as the Navstar Global Positioning Satellite system. A display may optionally be provided for displaying the prediction data.

Memory permits storage of collected data and provides working memory when processor is performing the computations required to generate point environmental element prediction data. Device includes an input output I O interface for controlling external processes as well as providing an interface between the processor and peripherals such as a locator or display . In one embodiment I O provides a digital output representative of an on or off signal for control . In an alternative embodiment I O provides a proportionate signal for control in either analog or digital form.

I O interface may also support programmatic access to data stored or calculated by the EEPD. I O interface i.e. data for example may support an API for retrieving data stored or calculated by the EEPD or alternatively for storing data to be used by the EEPD.

In one embodiment programmatic settings for the device are received by I O as data . Settings may include for example device region device location thresholds for environmental element predictions e.g. assume rain if probability of precipitation exceeds 60 etc. In one embodiment device includes a locator to permit automatic determination of its location without user input. Locator for example may determine position of the device by satellite telemetry. In one embodiment locator determines the position of the device through satellite trilateration using a satellite constellation such as the Navstar Global Positioning Satellite system. A display may optionally be provided for displaying the prediction data.

EEPD may be suitable for broadcast or bi directional communication e.g. client server model applications. This EEPD may similarly be incorporated into media device embodiments such as televisions watches radios personal digital assistants electronic navigators etc. or other broadcast reception devices as well as devices capable of supporting bi directional communication e.g. cellular telephones .

In one embodiment the media device and the EEPD share the same receiver e.g. data might be broadcast on a television channel that is otherwise unused or alternatively broadcast during a vertical blanking interval on one or more channels that might otherwise be used . In an alternative embodiment the EEPD may use a receiver distinct from that of the media device e.g. the EEPD incorporates a satellite receiver or a local area network connection distinct from the television receiver of a television .

One device particularly suitable for implementing the EEPD for personal use is a cellular phone. Many cellular phones already incorporate a GPS locator to aid location in the event of an emergency. In addition many such phones provide a programming environment to permit loading software applications and provide support for accessing the Internet.

The introduction of a device capable of determining environmental element predictions for a specific location enables forward looking automated control modification. Heating air conditioning and irrigation systems are just a few examples of systems that might benefit from a control system that is based at least in part on environmental element predictions rather than merely historical or current environmental element data.

For example many municipalities and other legislative bodies have required automated lawn sprinkler systems to be outfitted with a rain sensor in an effort to avoid wasteful irrigation. The rain sensor is used to inhibits or interrupt irrigation cycles during periods of sufficient moisture.

Rain sensors utilize various techniques to measure the moisture. The soil sensor type for example is inserted into the soil and indicates when the moisture content of the earth at the sensor exceeds a pre determined threshold. Other cup type sensors capture actual rainfall and provide an indication when the amount of water exceeds a pre determined threshold level.

Such rain sensors are more accurately termed moisture sensors . When the input variable is moisture the sensors indicate current moisture conditions. The sensor output correlation with rain is less timely.

For example the rain sensor may not inhibit irrigation during actual rainfall until sufficient moisture has penetrated the ground near the rain sensor or entered the rain sensor cup. Conversely the rain sensor may inhibit the irrigation cycle despite the lack of rain simply because the water in the cup or in the ground has not evaporated. However the rain sensor forces the controller to be responsive to weather recently or currently experienced i.e. the ground has a certain moisture content because of recent rainfall or the water level in the cup is still above the threshold and may be interpreted as providing current conditions if moisture is the desired control input. Alternatively the rain sensor may be viewed as a current control input with a time lag or a backwards looking control input if the variable being sensed is actually rain . The term hydrological sensor will be used to include rain sensors soil sensors and moisture sensors collectively.

The introduction of a device that is aware of anticipated weather conditions permits forward looking control inputs for the irrigation or other controller. Irrigation for example may be inhibited or interrupted if the probability of precipitation within a given timeframe exceeds a pre determined threshold. Instead of a binary on off control more sophisticated control may regulate the timing and amount of irrigation based on the time distributed expected amount of precipitation.

Preferably the controller has access to both current conditions as well as predictions for future timeframes. In the absence of an actual current condition sensor e.g. no hydrological sensor the relevant conditions may be estimated or predicted using the predictive environmental element sensor by using the current timeframe predictions. Environmental element prediction data may include predictions or estimates of current conditions i.e. 0 days into the future . Thus current conditions sensors serve as auxiliary sensors. When available the current condition sensor will be relied upon to determine current conditions otherwise the current conditions will be estimated using the predictive environmental element sensor. Generally a control decision is made based on the stress level indicated by the current environmental conditions and the probability of future environmental conditions at that location i.e. point environmental element predictions for the purpose of controlling parameters flow pressure amount of a controlled element water within a particular timeframe.

In one embodiment the controller is an irrigation controller that inhibits or interrupts an irrigation cycle in accordance with a control signal from at least one of the hydrological or the predictive environmental element sensors . In an alternative embodiment the controller varies parameters of the controller schedule i.e. volume of water length of watering time cycle iterations etc. in response to information provided by at least one of the hydrological and predictive environmental element sensors.

If the predictive environmental element sensor is integrated with the hydrological sensor to form an integrated sensor existing automated sprinkler controllers may be retrofitted to consider current and predicted environmental element data by simply plugging the integrated sensor into the already existing rain sensor input on the irrigation controller.

The rain sensor input of irrigation controller is provided with the output of the integrated weather switch . Generally the weather switch provides an output to inhibit or interrupt irrigation if either the predictive environmental element sensor indicates that precipitation is imminent or the hydrological sensor indicates a period of sufficient moisture. The only time that irrigation is not inhibited is if precipitation is not imminent and the existing moisture level is insufficient. Imminence for the predictive sensor may be determined by likelihood of rain and the amount of rain expected. A decision tree implemented in logic may be applied to determine whether to irrigate how much to irrigate and when to irrigate within some pre determined timeframe.

More specifically to broadcast applications illustrates one embodiment of a process implemented by an EEPD utilizing broadcast environmental element data such as the EEPD of . In step the EEPD receives broadcast environmental element prediction data. In step the EEPD generates at least one environmental element prediction for a point of interest. In step the EEPD optionally generates a control signal in response to at least one of a sensed current environmental element condition and the prediction.

The control signals of may be generated as a result of logic applied to the predictions or sensed current conditions. The logic may be implemented for example as a look up table decision tree or any other suitable device or data structure. The control signal may simply be an on off type control. Alternatively the control signal may provide more sophisticated information such as when how long etc. to perform an activity such as irrigation. The EEPD may generate a different control signal for each prediction timeframe. For example the EEPD may interpret the predictions and or the sensed current conditions to provide a control signal for each prediction timeframe.

Examples of parameters that might be controlled or regulated directly or indirectly by the control signal include electrical power temperature fluid flow etc. For irrigation applications the fluid is typically water. In one embodiment the EEPD provides the control based upon at least one of the sensed current conditions if available and the predictions that the EEPD has made about environmental elements for a point location wherein the predictions were derived by the EEPD from the environmental element data it received.

Referring to for example such a control signal might be used with respect to the predictions to select one or more specific icons from a set of icons for visual indication of predicted weather conditions. Referring to step need not rely on sensed current conditions when generating a control signal or code representative of predicted weather conditions . EEPD interprets the predictions to generate a control signal or code for each prediction timeframe. The control signal s may then be used by the EEPD or an external device to select icons corresponding to the control signals. I O interface is utilized to display the selected icon on display thus providing a viewer with a visual indicator corresponding to the predictions for one or more environmental elements and one or more prediction timeframes.

In one embodiment the EEPD determines the appropriate icon to display. In an alternative embodiment an external process uses the I O interface to obtain data received or computed by the EEPD including the control signals or codes generated in response to at least one of the sensed current conditions or the predictions . In this latter embodiment the control signals generated by the EEPD may be embodied as result codes stored within memory for communication as data when requested. The external process then selects an icon associated with the retrieved control signal or result code. The external process then uses the I O interface to display the selected icon s . Each prediction timeframe may have its own control signal to support iconic representation of a plurality of prediction timeframes simultaneously as illustrated by displayed results .

Displayed results may contain textual and iconic representations of various environmental elements for the point location. In one embodiment data retrieved from the EEPD is used in conjunction with other geographic information such as map to map one or more environmental variables over a geographic region as indicated by map .

The various methods described may be implemented using processor executable instructions provided to a processor from a computer readable tangible storage medium. Examples of storage mediums suitable for storing such processor executable instructions include volatile storage mediums such as dynamic random access memory as well as nonvolatile storage mediums such as read only memories optical disks magnetic disks and magnetic tape. Such a storage medium enables distribution and deployment of the various methods for client server broadcast transmitter or broadcast receiver implementations as the case may be.

Although sophisticated methods for predicting environmental elements have been described the EEPD is not limited to such methods. For example the EEPD may predict an environmental element value using 1 one or more scatter points i.e. non grid data 2 one or more grid points or 3 some combination of grid and scatter points. The EEPD may interpolate values from any number of points to arrive at a prediction for the point of interest. The interpolation may be performed using linear logarithmic or other weighting schemes such as those previously set forth. The EEPD may but is not required to perform a correction to account for prediction errors as previously set forth.

In the preceding detailed description the invention is described with reference to specific exemplary embodiments thereof. Methods and apparatus for predicting environmental elements have been described. Various modifications and changes may be made thereto without departing from the broader spirit and scope of the invention as set forth in the claims. The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense.

