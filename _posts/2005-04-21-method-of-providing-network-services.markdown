---

title: Method of providing network services
abstract: A method of providing network services is described. The network includes a number of nodes, each one of which is coupled to at least one other of the nodes by at least one of a number of optical links. The network is preferably capable of supporting a number of virtual circuits. The method begins with the receiving of a request for a virtual circuit between a first node and a second node of the network. Preferably, the request specifies a quality of service of the virtual circuit. Next, the availability of network resources for supporting a virtual circuit at the requested quality of service is determined. Assuming sufficient network resources are available for support of the virtual circuit, the request is then serviced by provisioning (and maintaining) the requested virtual circuit. Servicing the request preferably includes actions such as provisioning, maintaining, and restoring the virtual circuit, using the requested parameters.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07633949&OS=07633949&RS=07633949
owner: Cisco Technology, Inc.
number: 07633949
owner_city: San Jose
owner_country: US
publication_date: 20050421
---
The present patent application is a continuation of U.S. application Ser. No. 09 477 498 filed Jan. 4 2000 now U.S. Pat. No. 6 912 221 issued on Jun. 28 2005 entitled Method of Providing Network Services and having Haig M. Zadikian Steve E. Plote John C. Adler David P. Autry and Ali N. Saleh as inventors which is a continuation in part of U.S. application Ser. No. 09 232 396 filed Jan. 15 1999 now U.S. Pat. No. 6 631 134 issued on Oct. 7 2003 entitled A Method for Routing Information Over a Network and having A. Saleh H. Zadikian Z. Baghdasarian and V. Parsi as inventors. These applications are incorporated by reference herein in their entirety and for all purposes.

This application also claims priority from a Provisional Patent Application No. 60 137 471 filed Jun. 4 1999 and entitled METHOD OF PROVIDING NETWORK SERVICES having H. M. Zadikian S. E. Plote J. C. Adler D. P. Autry and A. Saleh as inventors. This application is hereby incorporated by reference in its entirety and for all purposes.

This application is related to U.S. Pat. No. 6 856 627 issued on Feb. 15 2005 and entitled A METHOD FOR ROUTING INFORMATION OVER A NETWORK having A. N. Saleh H. M. Zadikian Z. Baghdasarian and V. Parsi as inventors U.S. Pat. No. 6 724 757 Apr. 20 2004 and entitled A CONFIGURABLE NETWORK ROUTER having H. M. Zadikian A. N. Saleh J. C. Adler Z. Baghdasarian and V. Parsi as inventors patent application Ser. No. 60 174 323 filed herewith and entitled A RESOURCE MANAGEMENT PROTOCOL FOR A CONFIGURABLE NETWORK ROUTER having H. M. Zadikian A. Saleh J. C. Adler Z. Baghdasarian and V. Parsi as inventors patent application Ser. No. 09 477 166 filed herewith and entitled METHOD AND APPARATUS FOR A REARRANGEABLY NON BLOCKING SWITCHING MATRIX having D. Duschatko and R. Kiecka as inventors U.S. Pat. No. 6 856 600 filed herewith and entitled FAULT ISOLATION IN A SWITCHING MATRIX having H. M. Zadikian R. A. Russell J. C. Adler Z. Baghdasarian and V. Parsi as inventors U.S. Pat. No. 6 801 496 issued on Oct. 5 2004 and entitled NETWORK ADDRESSING SCHEME FOR REDUCING PROTOCOL OVERHEAD IN AN OPTICAL NETWORK having A. Saleh and S. E. Plote as inventors and patent application Ser. No. 09 478 235 filed herewith and entitled A METHOD FOR PATH SELECTION IN A NETWORK having H. M. Zadikian A. Saleh J. C. Adler Z. Baghdasarian and V. Parsi as inventors. These related applications are hereby incorporated by reference in their entirety and for all purposes.

This invention relates to the field of information networks and more particularly relates to the provision of network services.

Today s networks carry vast amounts of information. High bandwidth applications supported by these networks include streaming video streaming audio and large aggregations of voice traffic. In the future these bandwidth demands are certain to increase. To meet such demands an increasingly popular alternative is the use of lightwave communications carried over fiber optic cables. The use of lightwave communications provides several benefits including high bandwidth ease of installation and capacity for future growth.

The synchronous optical network SONET protocol is an example of the protocols employing an optical infrastructure. SONET is a physical transmission vehicle capable of transmission speeds in the gigabit range and is defined by a set of electrical as well as optical standards. SONET s ability to use currently installed fiber optic cabling coupled with the fact that SONET significantly reduces complexity and equipment functionality requirements gives local and interexchange carriers incentive to employ SONET. Also attractive is the immediate savings in operational cost that this reduction in complexity provides.

SONET networks have traditionally been protected from failures by using topologies that dedicate something on the order of half the network s available bandwidth for protection such as a ring or mesh topology. Two approaches in common use today are diverse protection and self healing rings SHR both of which offer relatively fast restoration times with relatively simple control logic but do not scale well for large data networks. This is mostly due to their inefficiency in capacity allocation. Their fast restoration time however makes most failures transparent to the end user which is important in applications such as telephony and other voice communications. The existing schemes rely on 1 plus 1 and 1 for 1 topologies that carry active traffic over two separate fibers line switched or signals path switched and use a protocol Automatic Protection Switching or APS or hardware diverse protection to detect propagate and restore failures.

An alternative to the ring topology is the mesh topology. The mesh topology is similar to the point to point topology used in internetworking. Each node in such a network is connected to one or more other nodes. Thus each node is connected to the rest of the network by one or more links. In this manner a path from a first node to a second node uses all or a portion of the capacity of the links between those two nodes.

Networks based on mesh type restoration are inherently more capacity efficient than ring based designs mainly because each network link can potentially provide protection for fiber cuts on several different links. By sharing the capacity between links a SONET network using a mesh topology can provide redundancy for failure restoration at less than and often substantially less than 100 of the bandwidth capacity originally required. Such networks are even more efficient when traffic transits several links. Unfortunately mesh topologies have exhibited relatively long restoration times often on the order of 10 minutes or more.

The provision of services using such networks has historically been found wanting however due in part to the physical limitations of such networks. Users of such networks have only limited options when requesting service and normally must contend with some or all of the following long delays in the provisioning of service increased costs associated with the large amounts of redundant bandwidth required relatively long restoration times and other such disadvantages.

The present invention overcomes conventional limitations by providing services in a flexible and efficient manner. By employing a network element such as is described herein the present invention allows a service provider to offer services to a customer that can be tailored to that customer s needs. A user can request one of several levels of service from the premium to the basic by defining their needs. Parameters used in defining a level of service include initiation provisioning availability latency and restoration.

Various embodiments of the present invention employ a network that allows a service provider to automatically allocate bandwidth between two of a number of nodes in a network in response to a request by an end user. The circuit provisioned and maintained between the two is referred to herein as a virtual path VP which is provisioned on a physical path. It will be noted that the terms virtual path and virtual circuit and the terms physical path and physical circuit are used interchangeably herein the latter respectively emphasizing the circuit switched nature of a network capable of supporting the present invention. It will also be noted that the term virtual wavelength path may be used to describe a virtual path provisioned using wavelengths of light.

According to one embodiment of the present invention a method of providing network services is described. The network includes a number of nodes each one of which is coupled to at least one other of the nodes by at least one of a number of optical links. The network is preferably capable of supporting a number of virtual circuits. The method begins with the receiving of a request for a virtual circuit between a first node and a second node of the network. Preferably the request specifies a quality of service of the virtual circuit. Next the availability of network resources for supporting a virtual circuit at the requested quality of service is determined. Assuming sufficient network resources are available for support of the virtual circuit the request is then serviced by provisioning and maintaining the requested virtual circuit. Servicing the request preferably includes actions such as provisioning maintaining and restoring the virtual circuit using the requested parameters.

The requested virtual circuit s quality of service is defined by a set of parameters that can include for example a provisioning time a latency time a level of availability and at least one restoration parameter. The provisioning time indicates the time in which the virtual circuit is to be provisioned. The latency time parameters indicates the time within which information is to be communicated between the first and the second nodes. The level of availability indicates the times at which the virtual circuit will be available for use while the restoration parameters indicate the level of service required when restoring the virtual circuit in the event of a failure in the network affecting the virtual circuit. The set of parameters can also include parameters such as a requested bandwidth a requested maximum length a requested maximum number of hops and the like.

The latency time can assume one of a number of values such as a least possible latency time a minimum available latency time or a maximum latency time. The least possible latency time is the lowest latency time that the network can possibly provide. The minimum available latency time is the lowest latency time that the network can provide without deprovisioning any of the virtual circuits already provisioned thereon while the maximum latency time is the longest time.

The level of availability can include for example an up time parameter and a scheduling parameter. The up time parameter specifies at least one period of time during which the virtual circuit is available for use. Values for the up time parameter can include a guaranteed availability value availability for a substantial portion of the times designated by the scheduling parameter and a best efforts availability availability for at least a minimum portion of the times designated by the scheduling parameter . The scheduling parameter can specify for example a schedule of times at which and dates on which the virtual circuit will exist and will be available for use.

The restoration parameter includes one or more of a restoration time a restored latency time and a restoration priority. The restoration time being a time within which the virtual circuit is to be restored in response to a failure in the network affecting the virtual circuit. The restored latency time being a latency time to be exhibited by the virtual circuit once the virtual circuit is restored in response to the failure.

The restored latency time can assume one of a number of values including a least possible restored latency time a minimum available restored latency time and a best effort restored latency time. The least possible restored latency time is the lowest latency time that the network is configured to provide. The minimum available restored latency time is the lowest latency time that the network can provide without deprovisioning any of the presently configured virtual circuits. The best effort restored latency time is a latency that is simply under some maximum value which may be as long as or even longer than the time required to physically install one or more new optical links and or nodes.

The foregoing is a summary and thus contains by necessity simplifications generalizations and omissions of detail consequently those skilled in the art will appreciate that the summary is illustrative only and is not intended to be in any way limiting. Other aspects inventive features and advantages of the present invention as defined solely by the claims will become apparent in the non limiting detailed description set forth below.

The following is intended to provide a detailed description of an example of the invention and should not be taken to be limiting of the invention itself. Rather any number of variations may fall within the scope of the invention which is defined in the claims following the description.

In addition the following detailed description has been divided into sections subsections and so on to highlight the various subsystems of the invention described herein however those skilled in the art will appreciate that such sections are merely for illustrative focus and that the invention herein disclosed typically draws its support from multiple sections. Consequently it is to be understood that the division of the detailed description into separate sections is merely done as an aid to understanding and is in no way intended to be limiting.

The discussion that follows is divided into two sections. The first section describes a network element referred to herein as a router which can serve as the basis for an exemplary network in which a method according to the present invention can be practiced. The second section describes a method according to the present invention. A router such as that described below supports a method according to the present invention by providing relatively fast restoration times control over quality of service relatively high bandwidth and optionally relatively fast provisioning times. Using these and other characteristics of such a network a method according to the present invention is able to provide varying levels of service using different combinations of these characteristics.

Among other benefits router solves three growth related problems often encountered in today s information networks and particularly in SONET networks 

1. Port Capacity growth Router includes for example a scaleable architecture which can provide a large number of ports at a relatively low cost and high density.

2. Bandwidth management The distributed management architecture of one embodiment of exemplary router allows some or all nodes in the network to be managed from a single workstation. Provisioning a new connection is easily accomplished by selecting the source and destination nodes and specifying the desired quality of service QoS . Provisioning can take into consideration parameters such as existing trunk allocations network status the priority and desired quality of the new connection and other such criteria.

3. Efficient and fast restoration Exemplary network preferably uses a mesh topology. Through the use of routers such as router such a network can use bandwidth more efficiently than the existing ring topologies previously described. While providing the efficient bandwidth utilization of a mesh topology a router such as router is capable of supporting the restoration of a majority of network failures within less than 50 ms thus providing the fast restoration times of rings topologies. A protocol such as that according to the related patent application entitled A METHOD FOR ROUTING INFORMATION OVER A NETWORK as previously referenced can be run on such a router and encompasses all aspects of the restoration process alarm gathering path implementation including alternate path discovery and path assurance. In cases where there is insufficient bandwidth to satisfy all failed connections the protocol in one embodiment uses a quality of service QoS metric to prioritize the restoration sequence. In such embodiment connections with the highest QoS are restored first followed in a descending order by those with a lower QoS until either all connections have been restored or all available bandwidth has been used.

Router is a multi rack fully redundant router that in one embodiment supports at least 256 1 1 I O ports and provides 1 plus 1 protection by using multiple copies e.g. two or more of group and main matrices operating in 1 1 mode. Failures within one copy of a given matrix do not require a complete switchover to the backup copy. Only the affected paths through the matrix are switched to the backup copy. This greatly improves switching speed and minimizes the impact of such redundancy on other connections. Preferably the group matrix is a 2 1 reduction stage that selects output signals from one of two line cards also referred to herein as I O modules due to their functionality and connects the selected output signals to the main matrix thus preventing non working channels from consuming any ports on the main matrix.

In one embodiment there are at least three types of processors in a router . The lowest level level 3 resides on the line card and is responsible for all real time aspects of the processing of the physical protocol e.g. SONET . In a SONET implementation every level 3 processor is responsible for a single optical signal e.g. an OC 48 signal and via a protocol processor performs all required SONET SDH section and line termination functions. The fast response time required from the level 3 processor makes a firmware implementation preferable. The firmware which may be written in the C or C programming languages assembler or other programming language is preferably optimized for low latency and resource efficiency. Higher level processing is implemented on a separate module the shelf processor module which is shared by several line cards.

The second level of processors level 2 reside on a shelf and main matrix processor modules. The software on the shelf processor module is responsible for managing and controlling line cards. Only half the line cards supported are active at any one time to support 1 1 protection. A level 2 processor deals with tasks that require a reasonable response time for example on the order of milliseconds but have no direct impact on the data path. In other words missed events such as hardware interrupts do not result in bit errors. Some of the functions handled by the shelf processor include the periodic collection of maintenance data from the line cards receiving and processing periodic keep alive messages from those cards shelf startup and configuration proxy management and other related functions.

The third processor level level 1 resides on a system processor module and provides system wide management and control services. In one embodiment there are preferably two fully synchronous copies of the level 1 processor in the system both of which are simultaneously active and through a dedicated and redundant high speed link keep their run time and stored databases fully synchronized. One of the two processors is designated the master and is responsible for all level 1 processing. An update message is sent to the second processor whenever a change is made to the database and before that change is effected. A periodic keep alive mechanism allows either copy of the system controller to detect failures on the other copy.

Router provides yet another type of processor referred to herein as a route processor. Such a processor is dedicated to the path route discovery and restoration functions. The route processor is responsible for receiving failure indications from the line cards calculating a new route for failed connections and sending reconfiguration requests to all affected nodes including its own.

In one embodiment router is a multi rack communications system capable of terminating at least 8192 signals and cross connecting at least 4096 OC 48 signals. Such a router can be used for example as SONET SDH line terminating equipment LTE capable of terminating the Section and Line overheads of received OC 48 signals and cross connects those signals according to provisioned input output mappings. Some of the terminated signals can optionally be protected using any of the common protection schemes 1 1 1 1 and 1 N .

Overhead processing and generation is performed on the line card by a protocol processor. This protocol processor handles all aspects of the SONET protocol including framing insertion and extraction of embedded data channels error checking AIS detection pointer processing clock recovery multiplexing duplexing and similar duties.

NOTE The variable identifier N is used in several instances in and subsequent use of other variables such as m x k and others to more simply designate the final element e.g. group matrix N line card N N and so on of a series of related or similar elements e.g. group matrices N line cards N N and so on . The repeated use of such variable identifiers is not meant to imply a correlation between the sizes of such series of elements. The use of such variable identifiers does not require that each series of elements has the same number of elements as another series delimited by the same variable identifier. Rather in each instance of use the variable identified by N or m x k and others may hold the same or a different value than other instances of the same variable identifier. For example group matrix N may be the tenth group matrix in a series of group matrices whereas line card N N may be the forty eighth line card in a series of line cards.

Using signal paths as an example data enters the system at one of line cards N N . It is at this point in a SONET based system that the Section and Line overheads are processed and stripped off by a protocol processor not shown . The extracted SONET SDH payload envelope is then synchronized with the system clock and sent to two different copies of a local matrix depicted as group matrices N and N in . In one embodiment group matrices N and N are used mainly as 2 1 reduction stages that select one of two optical signals and pass the selected optical signal to switching matrix . This allows the implementation of a variety of protection schemes including 1 N or 0 1 without having to use any additional ports on main matrix . All protect signals are terminated at group matrices N and N . In order to maximize bandwidth it is preferable that only active signals be passed through to switching matrix .

In one embodiment switching matrix is an errorless rearrangeably non blocking switching network. In one embodiment switching matrix is a 256 256 switching network that consists of three columns and 16 rows of 16 16 switching elements that allow any of their inputs to be connected to any of their outputs. Also preferably a single copy of the matrix is housed in a single rack that contains three shelves one for each column or stage of the matrix. Each shelf contains cards housing the 16 switching elements in each stage. The switching element itself may include for example a 16 16 crosspoint switch with optical transceivers and a microcontroller for controlling the crosspoint switch and providing operational feedback to the level 2 processor. Communications between the two processors may be carried for example over an Ethernet connection. The level 2 processor in turn communicates with the level 1 and route processors using for example a redundant Ethernet connection.

The switching elements in each matrix copy of the exemplary embodiment may be connected using fiber optic cables for example. While copper cabling may also be employed such an option may not offer the speed and number of connections provided by an optical arrangement. After passing through the stages of switching matrix an optical signal may be routed to an I O shelf that optionally splits the optical signal into two signals. One of the signals is sent to an active line card while the other when available is sent to a backup card.

Line cards N N receive optical signals from group matrices N and N which are in turn connected to two separate copies of the main matrix. Line cards N N monitor both signals for errors and after a user defined integration period switch to the backup signal if that signal exhibits better bit error rate BER performance than the prior active signal. This scheme referred to herein as 1 plus 1 allows line cards N N to select between the two copies of the group matrix without any level 1 or level 2 CPU intervention. This helps to ensure that such a switch can be made in 50 ms or less per Bellcore s recommendations in GR 253 GR 253 Common Generic Criteria Issue 2 Bellcore December 1995 included herein by reference in its entirety and for all purposes . The selected signal is then processed by the transmit section of the protocol processor which inserts all required transport overhead bytes into the outgoing stream.

Regarding the signals described herein both above and subsequently those skilled in the art will recognize that a signal may be directly transmitted from a first logic block to a second logic block or a signal may be modified e.g. amplified attenuated delayed latched buffered inverted filtered or otherwise converted etc. between the logic blocks. Although the signals of the embodiments described herein are characterized as transmitted from one block to the next other embodiments may include modified signals in place of such directly transmitted signals with the informational and or functional aspect of the signal being transmitted between blocks. To some extent a signal input at a second logic block may be conceptualized as a second signal derived from a first signal output from a first logic block due to physical limitations of the circuitry involved e.g. there will inevitably be some attenuation and delay . Therefore as used herein a second signal derived from a first signal includes the first signal or any modifications to the first signal whether due to circuit limitations or due to passage through other circuit elements which do not substantively change the informational and or final functional aspect of the first signal.

At the bottom of the hierarchy is what is referred to herein as a group matrix or a Group Ethernet Repeater in a system using Ethernet communications and depicted in as group matrices N and N . Each one of group matrices N and N also referred to herein as a hub a repeater or concentrator is a physical layer device and preferably supports a star network topology such as the IEEE 802.3 10BASE T networking standard. The redundant connections from line cards N N in each of groups N are connected to two repeaters that reside on two separate copies of the group matrix module. Preferably each one of line cards N N supports two network ports e.g. 10BASE T Ethernet ports . The two sets of four signals from each port pass through a relay that selects one of them for connection to the LAN for purposes of redundancy. Groups N represent the first layer of the control bus hierarchy. Group matrices N and N are each controlled by a shelf processor not shown for the sake of clarity and communicate with one of the shelf switches described below via LAN connections.

Shelf switches N and N are the next higher level of the control hierarchy in router and are located on the shelf processor module exemplified by line racks N . Each copy of shelf switches N and N interconnects six connections from the three groups in each shelf another connection from the shelf processor and one connection from system switch and . Shelf switches N and N can be implemented for example using an 8 port Ethernet configured to handle 10 Mbps Ethernet traffic and a single port dual rate switch e.g. 10 Mbps 100 Mbps Ethernet .

The next level of the hierarchy is the system switch of which there are two copies in each router. These are shown as system switches and in . This fully redundant scheme prevents failures on one switch from taking down the entire control bus. In one embodiment a system switch manages connections from the following sources 

System switches and are located in a management bay. As noted the fully redundant switches manage connections from various router elements such as I O and matrix bays level 1 processors and route processors. Each of level 1 processors and and route processors and is preferably connected to system switches and using 100 Mbps Ethernet connections in a configuration that creates an expandable efficient and fully redundant control bus.

An I O bay can support for example a total of 16 slots. Slots may be logically divided into functional groups. In such an embodiment four such functional groups are defined with three of the groups occupying five slots each. In that embodiment the other group which occupies a single slot can be configured to house the shelf processor. Thus the I O bay can contain line cards and group matrices which are controlled by shelf processors. These elements are exemplary of line cards N N group matrices N and N shelf processors N and N and shelf switches N . It will be noted that the various line cards group matrices and shelf processors correspond to similar elements from previous figures.

A group is made up of line cards occupying a number of slots on a shelf. In one implementation the group is 20 line cards that occupy five slots. Four of the slots hold for example 16 line cards at 4 line cards per slot. The same slot can be used with a wide variety of line cards and in various configurations. This architecture provides flexibility to allow any combination of line cards to be installed in each slot.

The fifth slot in the aforementioned embodiment can be configured to accept line cards containing an optical switching matrix and a hub e.g. an Ethernet hub . Preferably two group matrix cards are employed each containing a 2 1 optical reduction stage that selects working channels before the signals leave the shelf. In a 1 1 protection scheme the two inputs to the line cards are classified as active and protect channels. The working channel is one of the active and protect channels that is selected based on bit error rate or other criteria and so implements a redundancy scheme. This prevents the standby line cards from using any bandwidth on switching matrix .

The following describes one embodiment of a backplane and some of the interface signals on that backplane. The backplane in the I O bay shelf carries a variety of signals between line cards and other modules in the shelf. Each I O shelf module is configured to allow an automatic errorless switch from one power bus to the other.

Shelf processor module backplane signals include reset signals clock signals hardware detect signals e.g. card detect copy present and the like slot ID signals and slot communication signals both low and high speed . Line card backplane signals include reset signals clock signals communication signals hardware detect signals and slot ID signals. Group matrix module backplane signals include reset clock signals communication signals both low and high speed detection and hardware detect signals and slot ID signals.

Line card receives optical signals from other network elements via a line side optical receiver and from the local router s system via a system side optical receiver . Each of these receivers implements an optical to electrical O E conversion function. Line card transmits optical signals to other network elements using a line side optical transmitter and to the group matrices using a system side optical transmitter . Each of these transmitters implements an electrical to optical E O conversion function. It will be noted that line side refers to the side of the line card coupled to other network elements and system side refers to the side of the line card coupled to the group matrices.

Line side optical receiver is coupled to a protocol processor which performs clock recovery multiplexing demultiplexing and SONET STE LTE processing in both directions. Similarly system side optical receiver is also coupled to protocol processor to allow protocol processor to receive optical signals. The processed electrical signals from protocol processor are coupled to the transmitters and . The clock recovery functions are combined with demultiplexers and multiplexers to support reception and transmission of the optical data respectively. The multiplexers serialize output data generated in protocol processor by performing parallel to serial conversion on the parallel data. In contrast de multiplexers are used in protocol processor to perform serial to parallel conversion on received data.

In order to add protection channels line side optical transmitter is also coupled to a 1 2 broadcast unit . To receive such optical signals optical receiver is also coupled to a 2 1 selector to select the working channel before the optical signals leave the shelf and thus prevent the standby channel also referred to herein as the protect channel from using any bandwidth on switching matrix .

Protocol processor is coupled to a bus . Protocol processor interfaces the line card to two copies of the matrix in a 1 1 physical protocol. In a SONET implementation protocol processor provides both STE LTE processing according to published industry standards. Also coupled to bus are a memory and a CPU . Memory should be fast enough for efficient operation of CPU .

CPU communicates with other of line cards N N over a control bus not shown using a transceiver that is coupled to CPU . Transceiver is coupled to a transformer which is coupled to a switch . Switch is coupled to the control bus. Switch implements a 1 1 protection scheme for transceiver and couples CPU to two independent ports on the backplane not shown . Each of the two ports connects to one copy of the hub of the group matrix. This allows the software on the line card to switch to the backup link when the line card detects failures on the active link.

Preferably CPU includes numerous integrated peripherals including embedded SCC channels e.g. M band communications and an Ethernet controller for example to support communications with other system modules . In one embodiment CPU provides an onboard communications processor module not shown that handles time critical aspects of the protocols supported.

The group matrix module includes two independent blocks a group matrix and a hub also referred to herein as a repeater .

One or more hubs are also provided to support communication between the group matrices and system switches in router . In an Ethernet communications environment the hub s functions are carried out primarily by repeater interface controllers RICs . Each RIC integrates the functions of a repeater clock and data recovery unit CDR Manchester encoder decoder and transceiver. Each RIC has a set of registers that convey status information and allow a number of configuration options to be specified by the user using for example a microcontroller.

The shelf processor module provides among other elements a shelf processor and switch that interconnect the LAN segments from the groups and the shelf processor to a port on the shelf switch Ethernet switch .

Shelf CPU is also connected to a timer which preferably contains at least three functional blocks a power fail reset block an external reset block and a timer block. Shelf CPU also accesses a memory and a reset latch over a CPU bus . Reset latch supports reset of one or more cards not shown . Shelf CPU is also coupled to an Ethernet switch . The network switch interconnects the lower speed inter processor communication network segments in each shelf. In one embodiment the network switch provides support for 10 Mbps and 100 Mbps segments. In one embodiment an integrated bus master and slave interface allow multiple devices to be interconnected.

Ethernet switch is coupled to a transceiver which via a select allows Ethernet switch to connect to two separate Ethernet segments. Select implements a 1 1 protection scheme that allows shelf processor to recover from failures on the active segment by simply switching to the other segment. Ethernet switch is also coupled to one or more group transceivers exemplified by group transceivers and . Group transceivers and connect ports on Ethernet switch to the groups.

One embodiment of a system capable of interconnecting network segments in a switched configuration allows communications between shelf switches higher level e.g. level 1 processors and shelf processors. In an Ethernet based system the system switch supports both 10 Mbps and 100 Mbps connections. The segments come from the shelf switching in the I O shelf and the matrix switches among others and allow these elements to communicate.

Switching in router is based on a rearrangeably non blocking network. A switching matrix as described herein consists of switch nodes arranged in a staged array. For a 256 256 switching matrix for example switching matrix consists of 48 nodes arranged in an array of 16 rows by 3 columns with each column containing one stage of the switch matrix. All 48 nodes in the switch matrix are substantially similar and consist of a 16 16 crossbar device that allows any of its 16 inputs to be connected to any of its 16 outputs regardless of the current state of the crossbar.

A rack is used to hold one or more matrices and is referred to herein as a matrix rack. In one embodiment a matrix rack is configured to hold 48 switching nodes e.g. switching nodes in a compact physical configuration. The matrix rack thus can support for example switching nodes which each provide 16 input signals and 16 output signals and thus provides switching matrix with 256 input signals and 256 output signals. Matrix shelf processors are configured in redundant pairs to provide fault tolerant control of switch nodes .

The cross connect information i.e. input to output mapping is written into the crosspoint switch by a local microcontroller which receives the information from the local shelf processor over a high speed connection. The three shelf processors in each rack receive such information from the node controller which resides in a different rack. This hierarchy can be extended indefinitely. The crosspoint switch receives a high speed serial data from the optical receivers that perform optical to electrical conversion on the received optical signals. Data from the crosspoint switch is re timed to synchronize the data with the system clock of router using a clock and data recovery CDR unit before being converted back into an optical signal that connects to the next stage of the matrix over fiber optic cables.

The block diagram of switch node in illustrates the main elements of a switch node using a SONET based implementation. The core of the switch node is crosspoint switch which is a 16 16 crossbar switch when implementing a 256 256 matrix. Crosspoint switch is preferably a 2.5 Gbps 16 16 differential crosspoint switch with full broadcast capability. Any of its input signals can be connected to any or all of its output signals. The device is configured through a low speed port that through a two step two stage process allows changes to be made to switch configuration without disturbing its operation.

Assuming 16 input signals indicated in as inputs crosspoint switch is configured to receive optical input signals from optical receivers at switch input signals . Crosspoint switch also provides switch outputs which serve as the source of optical output signals for switch node . Microcontroller is also responsible for detecting and reporting loss of signal LOS and out of lock OOL conditions from the optical receivers and CDRs respectively. Microcontroller communicates with the shelf processor via transceivers and over a bus that carries asynchronous data over a backplane not shown .

Incoming signals are routed to one of switch outputs by crosspoint switch under the control of microcontroller . Switch outputs are coupled to CDRs which in turn drive optical transmitters . Output signals from optical transmitters appear at outputs as optical signals.

Matrix shelf processor module provides local control and management for one of the main matrix shelves. The matrix shelf processor communicates with the level 1 and route processors over a low speed network connection and with the matrix node cards over a multi drop low speed bus.

All of the above modules are fully redundant and communicate with the rest of router over redundant control buses. The placement of individual modules within the rack is not addressed in this document since there are no architectural preferences or restrictions on such choices.

APB may also be connected to a dual channel serial communication controller SCC which is used to communicate with one or more remote Operations Systems OS using for example the X.25 protocol. For more OS links and higher link speeds the user can optionally install one or more WAN Interface Modules in the management bay. Such modules which preferably handle all real time aspects of the OS link including layer 2 of the OSI stack communicate with the level 1 processor.

In one embodiment router implements many functions in software to provide flexibility support for communications protocols and ease of implementation. The software architecture presented here forms a distributed management control and routing layer capable of spanning hundreds or thousands of nodes. The software architecture covers all protocol layers management and control applications and inter node communication protocols and APIs.

The software modules described herein may be received by the various hardware modules of router for example from one or more computer readable media. The computer readable media may be permanently removably or remotely coupled to the given hardware module. The computer readable media may non exclusively include for example any number of the following magnetic storage media including disk and tape storage media optical storage media such as compact disk media e.g. CD ROM CD R etc. and digital video disk storage media nonvolatile memory storage memory including semiconductor based memory units such as FLASH memory EEPROM EPROM ROM or application specific integrated circuits volatile storage media including registers buffers or caches main memory RAM etc. and data transmission media including computer network point to point telecommunication and carrier wave transmission media. In a UNIX based embodiment the software modules may be embodied in a file which may be a device a terminal a local or remote file a socket a network connection a signal or other expedient of communication or state change. Other new and various types of computer readable media may be used to store and or transmit the software modules discussed herein.

The software running the various processors of router normally includes three major components operating system inter processor and inter node communications and management and control applications. The operating system should provide standard facilities for supporting program operation communications and system management tasks.

An important aspect of any software architecture is its underlying inter process communications IPC mechanism. IPCs that provide for the isolation of tasks are preferable. Such IPCs use message passing as their preferred communication. Message passing allows for full but isolated interaction among tasks. To the rest of the system a task no matter how complex is reduced to a simple producer and consumer of messages. The system provides a set of well defined services each accessed through one or more messages. Though sometimes visible to other tasks in one embodiment none of a given task s variables and structures should be accessible outside its context. Limiting task interactions to message passing and keeping runtime variables private to each task allows individual software components to evolve independently and in parallel.

In order to keep code generic i.e. system and processor independent the message based IPC should also provide a consistent application programming interface API that doesn t rely on any system specific features or attributes. The API should have the same syntax and behavior regardless of the underlying operating system processor or message passing mechanism used. With certain generating systems for example message queues are used to implement the IPC while on other kernels pipes might be more appropriate. Preferably then the API should provide the following services to the application code 

The last service name lookup and registration makes it possible for communicating entities to reference one another using names rather than task ID s which are system dependent.

A resource manager RM is the software module responsible for collecting information about available resources and monitoring their status during normal system operation. A resource is used generically in this document to refer to any manageable hardware element that performs one or more system functions. The RM builds its resource list from unsolicited information the RM receives from other modules in the system and from periodic keep alive messages the RM exchanges with those modules. The RM for example is the first system application notified of card failures insertions and removals.

In one embodiment of router there are two RM versions in the system. The first which runs on the level 1 processor is responsible for managing system resources and in some cases network wide resources. The other version which runs on level 2 processors is responsible for managing resources in a single shelf. This multi level hierarchy creates a flexible and expandable system where lower level resource managers are custom designed for the specific shelf controlled.

The RM maintains information about a given resource in a structure called the Resource Control Block RCB . The RCB consists of two main sections a generic section which is the same for all resources regardless of type and a resource specific section that varies according to resource type. All resource managers maintain a hierarchical list of resource control blocks that represents resources under their control. The list is referred to herein as the resource list and reflects the resources hierarchy and their interdependencies. This allows the RM to determine relatively quickly the effect a given resource s failure has on other members of the hierarchy.

The router preferably runs one or more versions of the Unix operating system on the level 1 processor and the level 2 processors in the I O and matrix shelves . Level 2 processors preferably run a real time version of the Unix operating system OS . Other processors e.g. level 3 route quad and matrix node processors preferably run a single task that does not require the services of an operating system or kernel. While Unix operating systems are described herein as being preferable any one or a number of operating systems may be used.

The system controller is responsible for overall system management and control. The system controller uses a variety of protocols to communicate with other nodes in the network including the operating system OS . Some of the protocols satisfy specific requirements e.g. in a SONET based system the transfer of OAM P message across the SONET SDH communications channels DCC while others implement features or functions that are not part of the physical protocol used. To facilitate these functions every router one router two etc. in a network is assigned an ID that uniquely identifies the router within the network. The ID can also serve as a priority metric that determines the node s level within the hierarchy. However the network can be configured to allow the user to override this by manually assigning priorities to network nodes. The system controller supports a number of tasks that perform management control and routing functions including resource management OS interfacing various network protocol servers and operations control and intermediate system services.

The matrix shelf processor is responsible for the overall operation of a single main matrix shelf. The matrix shelf processor communicates with the system controller the route processor and the microcontroller on each of the switch nodes to provide local control and management for the shelf including matrix configuration diagnostics and error reporting. The software on the matrix shelf processor preferably runs under a real time Unix operating system. The RM on the matrix shelf processor is responsible for managing the hardware resources in its shelf. Like other resource managers in the system the level 2 manager on this module uses a combination of hardware and software to discover and maintain a list of available shelf resources. A protocol may be implemented to support such messaging.

The I O Module terminates an input signal from one of the other nodes in the network. For example in a SONET based implementation a single SONET SDH OC 48 signal is terminated by an I O module although other signal levels OC 192 OC 12 and so on may be supported. In one embodiment the software consists of two threads one that runs in the background and is responsible for non time critical tasks. The other thread which runs at the interrupt level is responsible for all real time aspects of the software including limited overhead processing alarm detection and forwarding and fault detection and recovery. The I O module maintains a copy of its firmware and startup code onboard.

When used in an optical networking context for example a router such as router can support the provisioning of network services on a highly customizable basis. This ability opens a new avenue in the provision of information delivery services to Internet backbone providers inter exchange carriers IXCs Internet service providers ISPs long distance carriers private line customers and other such users.

A router and so network in order to support a method according to the present invention preferably supports virtual circuits with various quality of service QoS levels and permits those virtual circuits to be quickly provisioned and deprovisioned as necessary. A virtual circuit s QoS level may be defined for example as a set of separately definable parameters or as one of a set of possible combinations of those parameters. Using separately defined parameters a user defines a virtual circuit s requested QoS using service parameters such as provisioning time latency time availability restoration time bandwidth distance duration of the virtual circuit and other such parameters. These parameters may be tailored to the needs and budget of the user by having the user specify the parameters values separately. Alternatively the user may select one of a number of predefined levels.

Using one of these approaches selections of QoS parameters levels can be priced accordingly. For example pricing for these services can be established on a QoS level basis using the combination of demand during availability requested bandwidth latency provisioning restoration time and the like to arrive at an appropriate price. For example by provisioning virtual circuits for specified durations a service provider is given the flexibility to adapt to the changing demands placed on its transmission infrastructure by the requirements of services such as virtual private networks Internet telephony large numbers of voice channels increasing numbers of Internet users and the like. Such a service would likely vary the available bandwidth with the time of day and have a moderate cost structure. Alternatively virtual circuits can be quickly provisioned to address unforeseen peaks in demand and then terminated when the excess capacity is no longer required for example. Such emergency service would likely be expensive given the immediate need.

If an acceptable physical circuit cannot be provisioned at the time of the request step the service provider indicates to the user requesting service that a virtual circuit having the requested QoS parameters level cannot be provisioned and then indicates to the user that the requested virtual circuit cannot be provided at the requested QoS level or cannot be provided with the requested QoS parameters step . The user must determine if the requested QoS requirements can be relaxed e.g. provision later reduced availability or bandwidth source or destination changed or the like step . If so the process begins anew with the new requirements step . Otherwise the requested virtual circuit cannot be provisioned.

Examples of latency values include least possible including deprovisioning one or more virtual circuits minimum available no deprovisioning and maximum. The availability parameter can include for example an up time parameter e.g. with values of guaranteed availability and best efforts availability and a scheduling parameter. The scheduling parameter specifies at least one period of time per day during which the virtual circuit is available for use and includes availability of at least one period of time per day commencing at a specified time of day during one or more specified days of the week or some other scheduling scheme e.g. a schedule of times days and or dates of availability .

Restoration parameters may include for example one or more of the following a restoration time a restored latency time and a restoration priority. The restoration time is the period of time within which the virtual circuit is to be restored in response to a failure in the network affecting the virtual circuit. The restored latency time is the latency time exhibited by the newly restored virtual circuit. The restored latency time can assume a number of values including a least possible restored latency time a minimum available restored latency time and a best effort restored latency time. The least possible restored latency time is the lowest latency time that the network is configured to provide and may necessitate the deprovisioning of one or more virtual circuits. The minimum available restored latency time is the lowest latency time that the network can provide without deprovisioning any of the virtual circuits. The best effort restored latency time is simply guaranteed to be less than some maximum value. The restoration time can assume one of a number of values including about 50 ms about 250 ms and a maximum restoration time. The restoration priority can assume one of a plurality of values indicating a priority with which a given virtual circuit is restored e.g. should lower priority virtual circuits be deprovisioned . Other parameters and parameter structures will be apparent to those of skill in the art as will the fact that such service parameters may be varied from time to time under user control or automatically under the control of one or more network components . Certain of such parameters will be described subsequently in the discussion regarding service type definition.

The process of begins by determining the period of time between the receipt of the service request to the time that the virtual circuit is available for use by the user referred to herein as the requested provisioning time. In a network employing network elements such as router this provisioning time can be as little as about 50 ms or less depending on the network elements capabilities . Next a determination is made as to the requested latency time step . The requested level of availability for the virtual circuit is then determined step . A user may specify one or more restoration parameters which are later used in restoring the virtual circuit in the event of a network failure affecting that virtual circuit step .

The user may specify other parameters when requesting the provisioning of a new virtual circuit. Among these parameters are the bandwidth necessary to support the traffic expected by the user step the maximum length of the circuit to be created step the maximum number of hops of which the physical circuit that is created may consist step and other QoS parameters as defined by the service provider step . Any of the preceding parameters may be specified separately and in fact the required bandwidth will likely be so specified.

A method according to the present invention supports several path provisioning techniques including manual and fully automatic path provisioning. Manual provisioning allows a user to build the entire path between the source and destination provisioning the intermediate nodes and links one at a time. When automatically provisioning a virtual circuit the user enters the source and destination nodes by for example either entering the node IDs choosing from a list or by selecting the nodes using a GUI. The user then enters the desired number of wavelengths for the path. This number is used when the automatic mode is selected for provisioning the switch ports at the source and destination nodes.

A switch port is the port assigned for the wavelength. The switch port assignment indicates the ports provisioned on router specifically for the wavelengths requested by the user. In one embodiment router automatically assigns the appropriate number of ports to the user based on the number of wavelengths requested. Automatic provisioning allows a user to simply select the source and destination nodes and leave the provisioning of intermediate nodes and links to the network. The latter is the preferable method for provisioning a virtual circuit.

Switch port provisioning can also be performed manually or automatically. When manually provisioning switch ports the user provisions the desired switch ports at the source and destination. The user selects the switch ports for the source and the destination nodes by choosing from a list of available switch ports or by clicking on a graphical representation of the switch ports. In automatic mode the user selects the source and destination nodes and the switch ports are provisioned automatically based on the number of wavelengths desired. Again the latter is the preferable method.

A link must normally be provisioned as well. A link is a connection between two nodes e.g. routers such as router and can include as little as one wavelength between two nodes or as many as are contained in a conduit between the nodes i.e. containing multiple fibers with multiple wavelengths on each fiber . A link may employ any subset of I O ports between two nodes. There can be multiple numbers of links between any pair of nodes although no overlapping of links is normally permitted i.e. two links cannot contain the same wavelength or channel .

Several parameters can be used to define a link. These parameters can include for example node IDs switch ports failure probability cost distance and link diversity among other possible such parameters. To identify the from node the user enters the node ID of the node at one end of the link selects that node from a list or uses a GUI to identify the node. It will be noted that it is possible to identify either end of a link or circuit as the from or to node and that this convention is employed primarily to support concepts used in failure detection and recovery.

The user then enters one or more switch ports that are assigned to that link. The user can select from a list of available switch ports or select the switch ports using a GUI. Next the user identify the to node by enters the node ID of the other end of the link or selects the node from a list or uses a GUI to select the node . The user enters one or more switch ports that are assigned to that link. The user can select from a list of available switch ports or select the switch ports using a GUI. The number of switch ports entered should match that entered for the other end of the link.

The user can also indicate cost distance link diversity and other parameters. Cost is normally given in terms of relative cost comparing one link to another and can range for example from a value of 1 to 10 with 1 being the lowest cost and 10 being the highest cost. The user can also input a distance value e.g. in km and the system will use this to calculate relative latency. If the distance has already been entered e.g. to calculate the probability of failure that same number can be used without the user having to re supply. Link diversity is defined as physical diversity from other links such that damage to one link does not imply damage to another diverse link. Two links are considered non diverse if the links are both subject to damage from the same physical event e.g. a cut node failure or the like even if the following conditions exist the links employ different wavelengths on the same fiber the links employ different fibers in the same sheath or the links employ different fiber sheaths in the same conduit. Normally links are considered diverse only if they are routed over different geographical routes or segments. The user can select links based on their diversity in order to improve the survivability of a given VP or set of VPs.

Once the virtual circuit has been provisioned a network such as described herein maintains virtual circuit a the requested QoS including the desired latency time and with the desired availability step . If a failure affecting the virtual circuit occurs in the network step the service provider attempts to restore the virtual circuit at its present QoS step . If the service provider is successful in restoring the virtual circuit at the requested QoS step the network returns to maintaining the virtual circuit at this QoS step . If the service provider is not successful at restoring the virtual circuit with the present QoS the service provider then determines if another QoS level or different values for the stated QoS parameters would be acceptable step . This may entail discussions with the user referral to alternative QoS levels or QoS parameters or other mechanism to determine such alternatives. If the virtual circuit can be restored using these alternative parameters or alternative QoS levels the restored virtual circuit is maintained at the newly requested QoS step . Otherwise the virtual circuit is not restored.

A service type is made up of a combination of parameters such as initiation availability latency diversity restoration and the like. Virtual circuits can be provisioned and sold at different billing rates depending on the level of service needed based on the QoS parameters selected for the given service type.

A service type name is a name assigned by the user for this service type and is used when provisioning the VP. The service type can be one of a number of default service types the name of a previously created custom service type or a new name. If the service type is new the user is prompted to create the service type using service type provisioning parameters. Initiation can be specified as being immediate even within a matter of milliseconds to an extended period measured in days weeks or months as is appropriate to the user s needs and budget.

Availability can be defined in terms of the percentage amount over 99 availability e.g. 99.xxxxx . A user inputs the minimum required availability desired for a given VP as a percentage over a one year period. The probability of failure information can be obtained for example from link provisioning information. The system calculates availability by an equation such as the following where S is the number of seconds in a year 60 60 24 365 31 536 000 P is the sum of the probability of failures of the links in the given VP . . . D is the number of days in a year 365 and R is the restoration time for the VP upon a failure.

In defining a service type the user also designates a restoration method. Examples of restoration methods include fast reserved fast dynamic medium dynamic and auto re provision. This example assumes a network supporting four quality of service levels 0 3 with 0 being the highest priority and 3 being the lowest priority . If a fast reserved restoration method is chosen a dedicated backup path is used for restoration. The dedicated backup path is preferably a VP that is geographically diverse from the original VP and reserved solely for use in restoring the original VP in the event of a failure. This is the least efficient in terms of bandwidth usage but provides a high level of reliability and so cost . This corresponds to quality of service level 0 QoS0 with a restoration time of about 50 ms or less. A fast dynamic restoration method corresponds to quality of service level 1 QoS1 with a restoration time of about 100 ms or less. A medium dynamic restoration method corresponds to quality of service level 2 QoS2 with a restoration time of about 150 ms or less. An auto re provision restoration method corresponds to quality of service level 3 QoS3 with a restoration time of up to about 1 second. As will be apparent to one of skill in the art other restoration levels times can also be specified such as one minute one hour best effort and so on.

It will also be noted that higher availability e.g. improved probability of successful restoration and lower restoration time can also be achieved using dual VP provisioning. By provisioning one or more backup VPs for use as a restoration path for a given VP the original VP can rely to a certain extent on the backup VP s to provide fast restoration merely by the backup VP s being available for use in restoring the original VP. Although this technique improves the restoration performance of the original VP by providing one or more alternate VPs that traffic can be routed over each VP original and backup is still subject to its own restoration parameters. In fact the situation may occur where the original VP can restore itself as fast or even faster than by switching to a backup VP. The backup VP s may also be restored more quickly than the traffic can be switched to another backup VP. Alternatively this technique also makes possible gradations in service by varying the number of backup VPs and adjusting the restoration time of each VP original and backup . For example the combination of an original VP and multiple backup VPs with relatively slow restoration times may provide service comparable to a similar service employing fewer backup VPs but with each VP having faster restoration times although at different costs . The amount of diversity between the original and backup VPs and between the backup VPs can also be altered to provide varying immunity to failures at varying costs .

Another service type parameter that may be defined is restoration preemption. Normally for restoration purposes available paths are always searched for and used first prior to using preemption of another path. Preemption values indicate whether the virtual circuit in question and or other virtual circuits can be pre empted i.e. deprovisioned or deallocated and include whether the virtual circuit may be pre empted and whether the virtual circuit can pre empt other virtual circuits. Exemplary combinations include 

1. Can pre empt can be pre empted The path can pre empt other paths and can be pre empted by other paths for restoration.

2. Can pre empt cannot be pre empted The path can pre empt other paths but cannot be pre empted by other paths for restoration.

3. Cannot pre empt can be pre empted The path cannot pre empt other paths but can be pre empted by other paths for restoration.

4. Cannot can t be pre empted The path cannot pre empt other paths and cannot be pre empted by other paths for restoration.

The user can also specify network resource usage. In the event that multiple paths are found that meet the specified criteria the various resource usage priorities can be used to locate to appropriate service path cost load leveling hop count and latency. Network resource usage can be based on cost in which case the path with the least cost is chosen. This is the sum of the link costs that make up the path which are assigned during link provisioning. Network resource usage can also be based on load leveling in which case the path with the highest percentage of available bandwidth is chosen. This is the sum of the percentages of available bandwidth of the links that make up the paths. Hop count can also be used to control network resource usage in which case the path that traverses the least amount of links is chosen. Network resource usage can also be based on latency in which case the path with the lowest delay time is chosen. This is calculated from the sum of the distances of the links that make up the path.

After several restoration events or capacity changes caused by new provisioning actions a network may not be optimized as it was upon initial provisioning. Certain embodiments of the present invention provide an optimization wizard to address this possibility. A user has the ability to periodically optimize the network based on the initial parameters set during provisioning. A programmatic construct such as an optimization wizard can be employed by a user as needed to determine better ways to provision the network. The user selects from a number of optimizations that can include for example optimize path optimization network or service type. Such path optimization allows a user to enter a path name or select the path from a GUI. The optimization wizard then searches for a better way to provision that path based on the initial provisioning criteria and network resource usage prioritization. If a better way is found the user is prompted to initiate change or cancel. Once the change is either completed or canceled the user is then requested to select another path.

Network optimization allows a user to optimize the virtual circuits of a given network. The optimization wizard looks at virtual circuits in the network and searches for better ways to provision them based on initial provisioning criteria and network resource usage prioritization. Virtual circuits found needing changes are listed for the user. The user then selects the paths to optimize and either confirms initiates the changes or cancels the changes. When all path changes have been completed the user indicates that network optimization is complete.

For an optimize service type the user enters the service type name for optimization. The optimization wizard examines all paths in the network with that service type and searches for better ways to provision based on the initial provisioning criteria and network resource usage prioritization. All paths requiring changes are listed. The user selects the paths to optimize and either confirms initiates the change or cancels the change. When the path changes have been completed the user is prompted to either select another service type or select DONE.

Using QoS parameters such as those described above a number of service types can be defined. Table 1 illustrates six exemplary service types that vary in application depending in large part on the importance and time sensitivity of the data being transferred. As the service type becomes less mission critical the cost of the service is reduced accordingly. For example the cost of the second three services in Table 1 would be expected to be less than that of the first three services listed.

The first service type mission critical voice video data service requires highly reliable and uninterrupted service. Such applications include the transfer of financial data video conferencing voice transmission for emergency purposes and other such applications. As a result of the time sensitivity of such applications initiation should commence immediately if needed. The availability of such service given the critical nature of such applications should be guaranteed by using the least latency that the network is capable of achieving. In the event of a failure restoration should be quick e.g. a value which will not lead to dropped communications e.g. 50 ms with complete restoration of the virtual circuit and a latency guarantee of the restored virtual circuit. The provision and restoration of such services comprehends deallocating lower priority virtual circuits if that becomes necessary in order to provide the necessary bandwidth.

In contrast a virtual circuit with a premium intranet service type does not require immediate initiation. Given that an intranet will normally carry information important to the business or other organization the intranet s availability is guaranteed however. Because the operation of the intranet is not as time critical as for example mission critical voice video data merely the lowest latency available provides acceptable performance. The difference between least latency possible and lowest latency available is the fact that other virtual circuits will not be deallocated in order to provision a lowest latency available virtual circuit. Given the premium nature of such a service restoration is again expected to be quick e.g. within 50 ms with complete restoration and a guaranteed maximum latency. Again the deallocation of lower priority virtual circuits may be mandated depending upon the user s desires and the costs involved. A premium time of day service can be provided with quick initiation and availability during for example trading hours. Such a service allows entities having communication needs that are well defined in terms of time and duration to purchase communication services that are tailored to those needs. As with premium intranet service the latency and restoration parameters are selected to provide high quality reliable service.

As with other less critical service types a public internet backbone service type provides an n day initiation and best effort latency. This is because the users of such a service normally need 24 hour availability but such service is normally not offered to such users until the service is up and running. Availability of such a service is normally guaranteed as is restoration which is normally transparent to the user . Similarly a disaster recovery service does not require immediate initiation and can accept best effort latency on the provisioned virtual circuit. To reduce costs availability can be limited to certain night time hours e.g. off peak hours . Given that disaster recovery once begun should proceed to completion quick complete restoration with a guaranteed latency is required. The least critical service type described in Table 1 is bulk non mission critical service which can be used for example to transport back up data from one data center to another. Given the low importance of such service and the lack of time sensitivity immediate initiation is not required and best effort availability and latency is sufficient. Likewise there is no restoration guarantee and no guaranteed latency of the restored virtual circuit. While such a service provides only a minimum of reliability and throughput and can be subject to deallocation by higher priority services the cost of such a service would be relatively low.

While particular embodiments of the present invention have been shown and described it will be obvious to those skilled in the art that based upon the teachings herein changes and modifications may be made without departing from this invention and its broader aspects and therefore the appended claims are to encompass within their scope all such changes and modifications as are within the true spirit and scope of this invention. Furthermore it is to be understood that the invention is solely defined by the appended claims.

