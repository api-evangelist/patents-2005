---

title: Dynamic account mapping system for computerized asset trading
abstract: Methods and apparatuses for processing orders in a computerized asset trading system when the order contains trading requirements for trading accounts that do not map to trading accounts recognized by the provider trading system. The invention books trading requirements associated with the unrecognized trading accounts against a default trading account set up for the customer by the provider, thereby allowing the order to be processed instead of rejected merely because one or more of the customer-specified trading accounts has not yet been approved by the provider. The invention also allows providers to specifically block customer trading accounts, and to dynamically create approved trading accounts as they are needed so that subsequent transactions involving the previously unapproved trading accounts will be executed without using the default trading account. The invention also rejects orders for customer trading accounts that have been specifically blocked by the provider.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07634438&OS=07634438&RS=07634438
owner: FX Alliance, LLC
number: 07634438
owner_city: New York
owner_country: US
publication_date: 20051223
---
This application is related to and claims priority under 35 U.S.C. 119 to provisional patent application No. 60 638 115 filed on Dec. 23 2004 which is incorporated into this application in its entirety by this reference.

The present invention relates generally to computerized asset trading systems and more particularly to computerized asset trading systems that allow users to execute orders against default trading accounts when the trading account specified by the customer has not previously been entered into the computerized asset trading system as an approved trading account.

In the asset trading business including for example the foreign exchange FX and money markets customers execute trades through asset dealers typically banks or banking institutions who are referred to as liquidity providers or simply providers. In a typical scenario a customer wishing to buy sell lend or borrow some quantity of assets proposes a trading transaction by sending a request for price quotes referred to as an RFQ to one or more of the providers. The providers respond by returning price quotes for the proposed transaction which indicate the prices the providers are willing to buy or borrow the assets the prices they are willing to sell or lend the assets as well as the size of the order the provider is willing to deal at the quoted prices. If a customer likes a price quote and wishes to enter into a deal with the sending provider then the customer transmits to the provider an offer to trade assets for the price stated in the price quote the offer is typically referred to as an offer to deal . If the price quote is still available i.e. not expired when the provider receives the customer s offer to deal and the provider can meet other terms in the RFQ and offer to deal such as the quantity ordered and the proposed settlement date then the provider typically accepts the offer to deal and the proposed transaction becomes an order which is booked and executed.

Computer automated asset trading systems have been introduced to facilitate faster more efficient and for auditing purposes more traceable trading transactions between customers and providers. Typically these systems comprise a high level trading application program or in some instances a suite of high level trading application programs or a graphical user interface running on a customer s computer system or network which receives input from the user and sends electronic trading instructions to one or more high level trading application programs running on the providers computer systems or networks . The customer s computer system and the providers computer systems talk to each other by exchanging a series of messages via one or more data communication channels established within an interconnected computer network such as the Internet a dedicated wide area network WAN a virtual private network VPN or a corporate intranet. Typically the high level trading application programs and graphical user interfaces create messages and transmit them over the computer network by accessing a predefined collection or library of subroutines and function calls. The collection or library of subroutines and function calls is referred to as an application programming interface API .

With the help of the APIs the messages carrying orders over the data communications links in the computer network may be channeled through an intermediate or centralized online trading server or portal which is also connected to the interconnected computer network. Typically the intermediate online trading server is configured to coordinate compare match error check and or log the orders on behalf of the customers and liquidity providers and communicate responses and order statuses to the parties in real time. In some cases the online trading server is managed and operated by a third party. FX Alliance LLC of New York N.Y. FXall is one example of a third party operator of an online trading server for the FX market. Usually the intermediate or centralized online trading server includes a customer interface which communicates via the interconnected computer network with an API running on the customer s trading system and a provider interface which communicates via the interconnected computer network with another API running on the provider s trading system.

Customers often use a multitude of trading accounts to engage in trading transactions with a multitude of providers. For example a customer trader may place a single order to be executed against three different trading accounts which that customer refers to internally as FUND FUND FUND and so on. The customer s computerized asset trading system will be programmed to use and recognize trading accounts having the names or identifiers FUND FUND and FUND. A problem arises however because there is no standard naming convention for trading accounts. Consequently the provider counterparties for these trades may choose and most often do chose to use different names and identifiers for the trading accounts associated with that customer.

For example if the customer is the ACME Corporation then one provider s computerized asset trading system may be programmed to recognize and use trading account names that are more meaningful from the provider s perspective such as ACMEFF ACMEFF ACMEFF and so on whenever it sends trading instructions to or receives trading instructions from the ACME Corporation. Another provider engaged in trading assets with ACME Corporation may use a completely different set of account names for ACME Corporation s trading accounts such as SA SB and SC. Thus although all of the terms refer to the same physical trading accounts the terms FUND FUND and FUND will have no meaning on the providers trading systems and the terms ACMEF ACMEF ACMEF SA SB and SC will have no meaning on the customer s trading system.

Conventional computerized asset trading systems have attempted to address this problem by allowing the provider to set up mapping tables i.e. mapping databases on the intermediate online trading server which correlate or map the provider s trading accounts on a one to one basis to a set of provider approved customer trading accounts. Using this mapping table or database the trading server can then reconcile the trading account names used by the customer s trading systems with those names used by the providers trading systems. Thereafter as long as the customer trading system uses a trading account name contained in the provider s account mapping database the intermediate online trading server can match the customer specified trading accounts to the provider s list of approved customer trading accounts and execute the order. More particularly the intermediate online trading server can book transactions requested by the customer trading system against the correct trading accounts and execute deals without the customer and provider trading systems knowing using or recognizing each other s trading account names.

Nevertheless there are still significant problems associated with using mapping tables and mapping databases to resolve trading account names. For example if the counterparties have agreed perhaps by letter or telephone that a customer can trade using a certain trading account name and the provider has for one reason or another neglected to enter the new trading account name into the provider s mapping database then orders placed by the customer which are associated with the new trading account will be rejected by the intermediate trading server. Such rejections can result in a very significant loss of business for customers and providers. It is not uncommon for instance for a customer who is a large fund manager for a large number of clients to engage in a large number of trades using fifty one hundred or more separate trading accounts. Moreover a single provider may have hundreds or thousands of counterparty customers.

Under these circumstances the conventional systems require hundreds or sometimes thousands of different mapping table entries in order to account for all of the trading accounts used by all of his customers. This requirement generates a substantial amount of work for providers much of this work comprising manual data entry which can lead to a significant number of keying and typographical errors in the mapping tables. With so many mapping table entries to create and manage providers frequently fall behind in keeping their mapping tables for all of their customers error free and completely up to date.

Accordingly there is considerable need for computerized asset trading systems and methods of executing orders that give customers and providers the ability to execute orders even though the orders contain trading requirements associated with trading accounts that have not been entered into the mapping table or mapping database. There is also a need for such systems and methods to allow providers to dynamically update the mapping databases so that the previously unrecognized customer trading accounts will be recognized in subsequent transactions.

The present invention addresses the above described needs as well as other needs and issues hereinafter described by providing a computer system such as an online trading server for trading assets that will execute orders against default trading accounts if the customer specified trading accounts are not recognized. The computer system comprises a customer interface an account mapping database an account manager and a trading engine. The customer interface receives an order from a customer trading system the order comprising a trading requirement for an approved customer trading account and a trading requirement for an unapproved customer trading account. The account mapping database determines whether there is a first correlation between the approved customer trading account and an approved provider trading account as well as whether there is a second correlation between the unapproved customer trading account and a default provider trading account previously set up by the provider. The account manager typically acting in concert with the account mapping database is configured to supply the trading engine with a confirmation of whether the first and second correlations are contained in the account mapping database. If the confirmation is provided then the trading engine will execute the order booking the requirements for the approved customer account against the approved provider trading account and booking the requirements for the unapproved customer account against the default provider account. However if the account manager does not provide the confirmation then the trading engine will reject the order.

In some instances the order received by the customer interface only contains trading requirements for unapproved customer accounts. In these instances the account manager account mapping database and trading engine cooperate to execute the entire order against the default provider trading account. Thus the invention also provides benefits and advantages over the conventional computerized asset trading systems in cases where the order does not contain trading requirements for provider approved customer trading accounts. In this aspect of the invention the trading engine executes the order after the unapproved trading accounts are correlated i.e. mapped to the default provider trading account and does not require mapping or confirmation of any approved customer accounts. This aspect of the invention comprises a customer interface which receives an order from a customer trading system the order comprising a trading requirement for an unapproved customer trading account an account mapping database which determines whether there is a correlation between the unapproved customer trading account and a default provider trading account an account manager which supplies a confirmation for the correlation and a trading engine coupled to the account manager which executes the order responsive to the confirmation.

Preferred embodiments of the invention also determine whether one or more of the unapproved customer trading accounts in an order has been specifically blocked by a provider specified in the order. If this is the case then the account manager will provide a notice of the blocked status to the trading engine which will reject the entire order responsive to the notice.

Yet another aspect of the invention provides a computer implemented method for processing orders in a computerized asset trading system. The method includes the steps of 1 providing a customer interface for communication with a customer trading system 2 providing a provider interface for communication with a provider trading system 3 receiving an order from the customer trading system via the customer interface the order comprising a first trading requirement for an approved customer trading account and a second trading requirement for an unapproved customer trading account 4 providing an account mapping subsystem comprising for example an account manager and an account mapping database which establishes a first correlation between the approved customer trading account and an approved provider trading account and a second correlation between the unapproved customer trading account and a default provider trading account and 5 providing a trading engine which executes the order responsive to the establishment i.e. confirmation of the first and the second correlations.

Still another aspect of the invention comprises the steps of 1 defining a set of provider approved customer trading accounts for a provider trading system 2 defining a default customer trading account for the provider trading system 3 receiving an order from a customer trading system the order comprising a trading requirement for a customer specified trading account 4 determining whether there is a correlation between the customer specified trading account and a provider approved customer trading account in the set 5 booking the trading requirement against the provider approved customer trading account if the correlation exists and 6 booking the trading requirement against the default customer trading account if the correlation does not exist.

In preferred embodiments of the invention the account manager may be accessed by a human operator to define new approved accounts corresponding to the previously unapproved customer trading accounts that were executed against the default provider trading account. So for example if the provider learns by accessing the account manager for instance that certain orders and requirements were booked against the default provider trading account by the trading engine and that those orders and requirements were associated with an unapproved customer trading account that the customer identified as FUND then the provider can operate the account manager to set up a new approved trading account called ACMEF for instance which will now be used for all subsequent orders containing trading requirements for customer trading account FUND. In other words FUND has now been converted from an unapproved customer trading account into an approved customer trading account. Thereafter there will be no need for the trading engine to use the default provider trading account for transactions involving customer trading account FUND.

If an order contains trading requirements for an unapproved trading account and the provider has not established a default provider trading account for that customer then the entire order will be rejected by the trading engine. Similarly the entire order will be rejected if the order contains trading requirements associated with a provider trading account that has been specifically blocked by the provider.

With reference to the figures a detailed discussion of exemplary embodiments of the invention will now be presented. Notably the invention may be implemented using software hardware firmware or any combination thereof as would be apparent to those of skill in the art upon reading this disclosure.

A customer uses customer trade management system to generate orders containing trading requirements. As shown in customer trade management system typically includes a user interface operatively connected to an order processor which is in turn coupled to a trade database . Order processor generates orders containing trading requirements for customer trading accounts some of which are approved and some of which are unapproved from the perspective of trading server and provider trade management system . Customer trade management system also includes a trade database where order processor stores details about the orders it sends to trading server .

Customer interface receives orders from order processor on customer trade management system and passes the orders to trading engine for processing and or execution. Trading engine executes the orders if it can match the trading accounts specified in the order with provider approved trading accounts or a default provider trading account as defined by account mapping subsystem . But if account mapping subsystem does not contain correlations for the unapproved customer trading accounts in the order and also does not contain a default provider trading account then trading engine will reject the order. Whether an order is executed or rejected preferred embodiments of the invention will typically store details concerning the status of orders in a trade transaction database represented in as trade database .

In the embodiment shown in account mapping subsystem comprises an account manager which is coupled to account mapping database . Account mapping database can be implemented using a variety of well known data repository schemes such as relational or hierarchal database files spreadsheets tables flat files etc. Account manager may be implemented in hardware firmware or software as an interactive or non interactive process or tool which operates in conjunction with or independently from a database management system. In preferred embodiments however account manager comprises a set of graphically illustrated forms containing data input fields the provider user can populate and change as described below with reference to in order to define approved blocked and default trading accounts for any customer. The data input fields on the forms show the trading account names and their correlations as stored in account mapping database .

As shown in provider trading systems generally comprise a pricing engine which supplies prices for the orders a credit engine which tracks the credit status of the provider s customers in relation to pending and executed orders and a trade database which like trade database on the customer trading system stores details about pending and executed trades.

First at step the system receives from a customer trading system a batch order referring to multiple trading requirements and multiple providers. Typically although not necessarily the multiple trading requirements contained in a batch order will be associated with a multiplicity of customer trading accounts. Next at step the system retrieves account mapping data from the account mapping database. Account mapping data includes data concerning correlations i.e. mappings between approved customer trading accounts and provider trading accounts as well as identifiers for the providers default trading accounts for the customer. In preferred embodiments account mapping data also contains data indicating which customer trading accounts if any have been blocked or deactivated by the provider.

The system next determines at step whether any provider has blocked any of the trading accounts for any of the trading requirements in the order. Being able to block specific customer trading accounts gives providers who generally do not have a problem assigning trades to a default trading account a way to temporarily or permanently configure the system to reject trades for certain customer accounts without disabling default account mapping for other trading accounts. A provider may block and account for example when it is determined that a particular customer has exceeded a credit limit or authorization level for that account. This functionality gives providers an extra level of control over the automatic default mapping and trading process.

If the trading account in the order has is blocked then the system rejects the entire order and sends a rejection notice to the customer trading system. See step . If on the other hand it is determined at step that no provider has blocked any of the trading accounts for any of the trading requirements in the order then processing continues at steps and where the system selects the first provider in the order and the first requirement for that provider. As will be described below preferred embodiments of the invention are configured to process all of the requirements in the order that are associated with a selected provider one at a time until all of the requirements for that provider are processed and then proceed to the next provider and process all of the requirements in the order for that next provider. It is noted however that the invention can also be configured to process all of the requirements in the order one at a time without regard to the particular provider.

Next at step the system determines by reviewing the previously retrieved account mapping data for example whether the selected requirement s customer specified trading account is mapped or in some other way correlated to an approved provider trading account that is not blocked. If the answer is yes then the system books the selected trading requirement against the provider trading account which is mapped to the customer specified trading account step .

Continuing with the previous example involving ACME Corporation assume that ACME Corporation has established a set of trading accounts it refers to internally as FUND FUND and FUND. Assume further that Provider No. has created a set of trading accounts for ACME Corporation which correspond to FUND FUND and FUND. But Provider No. refers to these corresponding trading accounts as ACMEF ACMEF and ACMEF. Provider No. has also created a default trading account for ACME Corporation which Provider No. refers to internally as ACMEFXXX. Meanwhile another provider say Provider No. has created a different set of trading accounts for ACME Corporation which also correspond to FUND FUND and FUND but which Provider No. refers to as S S and S . Provider No. however has not created a default trading account for ACME Corporation. In preferred embodiments of the invention all of this information including the customer s trading account names the providers trading account names the mappings between the customer s trading account names and the providers trading account names as well as the default and blocked account names if any are stored in the account mapping database and accessed through the account manager program or user interface.

Based on this set of facts step of would determine that the customer specified trading account FUND has been mapped to Provider No. s trading account ACMEF. Therefore execution of step in would comprise booking the FUND trading requirement against the Provider No. s trading account ACMEF. On the other hand if it is determined at step that the selected trading account is unmapped then processing continues at step where the system determines whether the provider has set up a default trading account for the customer. If no default account has been set up then once again processing jumps to step where the system rejects the entire order and sends a rejection notice to the customer trading system. But if the provider has set up a default trading account then the system books the trading requirement against the default trading account step .

As shown in the next step step is to loop back to step to select the next requirement for the selected provider. But if there are no more requirements for the selected provider then the next step step is to loop back to step to select the next provider in the order. If there are no more requirements and no more providers to select then the entire order has been booked and processing comes to an end.

At the bottom of there are fields the provider may use to designate a default trading account for transactions involving the ACME Corporation. The first field is configured to receive the name of the default trading account and the second field is used to set the activation status for the named default account. In this case the provider has specified and activated the account called ACMEFXXX as the default trading account. Therefore whenever ACME Corporation sends an order to the trading server containing trading requirements associated with a customer specified trading account that is not already contained in the mapping table then the trading server will book those requirements against the default trading account ACMEFXXX.

The present invention has been disclosed and described herein in what is considered to be its most preferred embodiments. It should be noted that variations and equivalents may occur to those skilled in the art upon reading the present disclosure and that such variations and equivalents are intended to come within the scope of the invention and the appended claims.

