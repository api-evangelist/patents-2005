---

title: Code-switching in wireless multi-hop networks
abstract: The present invention relates to the field of code-switching in multi-hop wireless networks. More specifically, the present invention pertains to a method and apparatus that uses orthogonal codes as the forwarding labels in multi-hop forwarding. The processing of the forwarding labels is done at the physical layer. Advantages include reduced processing and energy to forward a packet; reduced latency; reduced bandwidth overhead; and increased security.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07778270&OS=07778270&RS=07778270
owner: HRL Laboratories, LLC
number: 07778270
owner_city: Malibu
owner_country: US
publication_date: 20050831
---
The present invention relates to the field of code switching in multi hop wireless networks. More specifically the present invention pertains to a method and apparatus that uses orthogonal codes as the forwarding labels in multi hop forwarding.

In order to provide a frame of reference for the present invention a few basics of networks and wireless networks are discussed below.

A mobile ad hoc network MANET has several features including that it can be set up anywhere at anytime. There is no need for existing infrastructure. The communication between nodes can be from node to node or multi hop where information starts at a first node and is sent to a at least one other node en route to a destination node. MANET has many applications such as implantation in disaster relief situations where the current infrastructure has been disrupted or placement in remote areas where it is expensive to set up infrastructure.

The implantation of MANET requires different routing protocols than those of non ad hoc networks. For example there is no administrator to monitor and control which node is talking to which node and when. Further MANET implementation has other challenges such as power consumption. One skilled in the art can appreciate that if nodes are deployed in a disaster relief area or a remote area power is something that should not be wasted. Thus it is desirable for each node to expend only the minimum power necessary to accomplish the task of getting information from one node to another.

Network architecture implementation on a particular node comprises several hardware and software layers. These layers are commonly referred to as Open System Interconnection OSI layers. These layers describe how applications running upon network ware devices communicate with each other. The first layer also referred to as the physical PHY layer defines the physical and electrical characteristics of the network. The network interface cards NICs in a computer are an example of hardware which runs at the PHY layer. Essentially they pass the strings of ones and zeros. The second layer known as the data link layer has a sub layer called the medium access control MAC layer and defines the access strategy for sharing the physical medium. Protocols such as point to point protocol PPP operate here. The third layer known as the network NET layer provides a means for communicating open systems to establish maintain and terminate network connections. The interne protocol IP operates at this layer. The fourth layer known as the transport layer ensures data reliability and integrity. The transmission control protocol TCP operates here. The fifth layer known as the session layer provides for two communicating presentation entities to exchange data with each other. The sixth layer known as the presentation layer is where application data is either packed or unpacked. The final layer the seventh layer known as the application layer is where the end user and end application protocols such as telnet operate.

The need to conserve energy and reduce latency during network operations has increased with the advent of small wireless devices such as sensor networks. Further small wireless devices place demands on system longevity because of their limited power capabilities. Many improvements have come from minimizing the required energy per layer but the layered OSI driven paradigm of a network borrowed from the wired networks world has still remained a dominant factor in the design of a wireless network. Most techniques for power efficient network operations do not explicitly address power requirements and routing at the hardware layer itself since the network protocols are easier to implement in software than entirely in hardware at the physical layer.

Therefore what is needed is a technique which does not require the action of all layers of the OSI model but instead utilizes only the physical layer when a node is merely relaying information.

Multi hop wireless networks include mobile ad hoc networks MANET and sensor networks. The networks may be static no topology changes or dynamic with node mobility or environmental changes . Strictly speaking the term routing is often used to mean two different concepts in networking depending on the context message forwarding and network routing. Message forwarding refers to the process of receiving a message packet consulting a table the forwarding table and resending the message towards its destination as determined by that table. Network routing on the other hand refers to the process of building the forwarding table. Message forwarding is a well defined process performed locally at each node whereas network routing involves a complex distributed decision making process commonly referred to as the routing algorithm or the routing protocol. Although these two concepts are often mixed together in the discussions of routing in multi hop wireless networks these concepts are kept separate in the following description.

First a look at forwarding in multi hop wireless networks. There are three fundamental steps involved in forwarding a packet at an intermediate node 1 receive the intermediate node receives the packet from the wireless medium 2 route the node determines the next hop for this packet 3 resend the node resends the packet back to the wireless medium towards the next hop . In today s multi hop wireless network technology these steps generally span across three OSI layers physical data link and network . The physical layer usually resides at the radio frequency RF front end of the NIC the data link layer including MAC usually resides in the NIC firmware and or host computer s operating system OS kernel device driver and the network layer is almost always at the host computer s OS kernel and executed by the host computer s processing unit CPU . Therefore each forwarding action must involve RF NIC and CPU. For example IP forwarding in MANET involves the following when the packet arrives at the intermediate node it traverses all three layers and is received by the IP input routine in OS kernel. The OS kernel then looks up the next hop address from the kernel IP forwarding table often called route table . The packet than traverses all three layers again before being sent out for the next hop.

There are several inefficiencies with respect to energy and latency for this architecture. First each packet must traverse the protocol stack merely to know the identity of the next hop neighbor. The processing involved for these operations at both the NIC and the CPU consume significant power. Second if a node participates in the network it cannot put itself in sleep mode to conserve energy because the NIC and CPU must be powered on all times in anticipation of packet forwarding actions. Third to identify the next hop the packet must be transmitted in some form of data link frame such as MAC header . The framing incurs bandwidth overhead. Finally since the protocol stack process is usually on a packet by packet basis the node must buffer and receive the entire packet before handing it to the next layer. This can cause additional delay in packet forwarding through any intermediate node.

Therefore what is needed is to conduct the entire packet forwarding action in one place the physical layer e.g. the RF module for a wireless network . This way only the RF section needs to be powered on to complete a packet forwarding action. The rest of the node including NIC and CPU can remain in sleep mode and only respond when there is an incoming packet that is destined for that particular node.

MANET routing has been implemented in the art using many different protocols. However these routing protocols require the processing of the received packets in all three layers PHY MAC and NET of each intermediate node. What is needed is a routing protocol that proposes to use packet forwarding that is implemented entirely in the physical layer.

Multi user Code Division Multiple Access CDMA has been studied regarding its applicability for multi hop wireless networks. However the prior art in this area focuses only on using CDMA as a multiplexing and multi access tool. What is needed is using CDMA codes to construct a routing forwarding scheme.

The present invention provides a system and a method that overcomes the aforementioned limitations and fills the aforementioned needs by providing a method and apparatus for code switching in wireless multi hop networks.

In one embodiment the present invention is a network comprising a node capable of communicating with other nodes the node comprising a receiver and a physical layer sub module connected with the receiver the physical layer sub module comprising a modulation processing module and a code switching assignment element the code switching assignment element having orthogonal codes wherein the node receives a signal encoded in an orthogonal code from another node for handling the signal in accordance with the code switching assignment element.

In another embodiment the network further comprises an upper layer sub module connected with the physical layer sub module.

In yet another embodiment the code switching assignment element is stored in a device selected from a group consisting of field programmable gate array flash memory and a microcontroller.

In an additional embodiment the receiver is selected from a group consisting of a radio frequency antenna an optical receiver and a network interface card.

In another embodiment the orthogonal codes are selected from a group consisting of gold codes low density parity check codes and different wavelengths of light.

An additional embodiment of the present invention is a method of transmitting data across a network comprising acts of receiving a signal at a node encoded in a first orthogonal code translating the signal in the first orthogonal code into a signal in a second orthogonal code in a physical layer of the node and transmitting the signal in the second orthogonal code.

In another embodiment the method further comprises acts of receiving a second signal at a node encoded in a third orthogonal code and processing the second signal at a data layer and a network layer of the node.

A further embodiment of the present invention is a method of data forwarding comprising acts of transmitting a first signal modulated by a first orthogonal code receiving the first signal at a first node having a first orthogonal code decoder demodulating the first signal at the first node in a physical layer resulting in a decoded signal modulating the decoded signal with a second orthogonal code resulting in a modulated signal transmitting the modulated signal and detecting the first signal at a physical layer of a second node having a second orthogonal code decoder as noise.

In yet another embodiment the method of data forwarding further comprises acts of receiving the modulated signal at a physical layer of a third node and processing the modulated signal at a data layer and a network layer of the node.

The present invention relates to the field of code switching in multi hop wireless networks. More specifically the present invention pertains to a method and apparatus that uses orthogonal codes as the forwarding labels in multi hop forwarding. The following description taken in conjunction with the referenced drawings is presented to enable one of ordinary skill in the art to make and use the invention and to incorporate it in the context of particular applications. Various modifications as well as a variety of uses in different applications will be readily apparent to those skilled in the art and the general principles defined herein may be applied to a wide range of embodiments. Thus the present invention is not intended to be limited to the embodiments presented but is to be accorded the widest scope consistent with the principles and novel features disclosed herein. Furthermore it should be noted that unless explicitly stated otherwise the figures included herein are illustrated diagrammatically and without any specific scale as they are provided as qualitative illustrations of the concept of the present invention.

One skilled in the art will appreciate that the scope of the terms is intended to be construed with reference to this disclosure as a whole and with respect to the claims below. In order to provide a working frame of reference a brief introduction is provided in the form of a narrative description of the present invention to give a conceptual understanding prior to developing the specific details. The introduction is followed by a detailed description of the elements in order to enable the reader to make and use the various embodiments of the invention without involving extensive experimentation.

In the following detailed description numerous specific details are set forth in order to provide a more thorough understanding of the present invention. However it will be apparent to one skilled in the art that the present invention may be practiced without necessarily being limited to these specific details. In other instances well known structures and devices are shown in block diagram form rather than in detail in order to avoid obscuring the present invention.

The reader s attention is directed to all papers and documents which are filed concurrently with this specification and which are open to public inspection with this specification and the contents of all such papers and documents are incorporated herein by reference. All the features disclosed in this specification including any accompanying claims abstract and drawings may be replaced by alternative features serving the same equivalent or similar purpose unless expressly stated otherwise. Thus unless expressly stated otherwise each features disclosed are one example of a generic series of equivalent or similar features.

Furthermore any element in a claim that does not explicitly state means for performing a specified function or step for performing a specific function is not to be interpreted as a means or step clause as specified in 35 U.S.C. Section 112 Paragraph 6. In particular the use of act of in the claims herein is not intended to invoke the provisions of 35 U.S.C. Section 112 Paragraph 6.

In one embodiment a system and method is capable of utilizing code switching in a multi hop wireless network to enable highly efficient and low energy multi hop routing in ad hoc networks and sensor networks. The basic idea is to use orthogonal codes as forwarding labels in multi hop forwarding. One skilled in the art will appreciate that any set of orthogonal codes can be used such that there is orthogonality between the members of the set. Examples of such orthogonal sets include gold codes low density parity check LDPC codes and different wavelengths of light for fiber based systems. Each source and destination node pair is identified by a unique code which may be pre assigned or dynamically re used in a mobile network. A packet from the source node is first transmitted in a wireless channel by modulating the data stream with that specific orthogonal code. The orthogonality of the codes ensures that only the next hop neighbor as identified in the routing layer can detect the signal transmission by correlating the orthogonal code with the transmitted signal. When this neighbor receives the signal and identifies the particular orthogonal code in use it consults a pre populated code switching assignment element e.g. a code switching table to determine the code to use for the next hop and then proceeds to re transmit the signal using the new code. This code switching procedure is then repeated at each of the next hops until the packet reaches the intended destination which is designated as another entry in the code switching assignment element . One skilled in the art will appreciate that in the art code assignment is generally performed by referencing a table however the code assignment can be implemented in any manner that relates a first code to a second code. The code switching assignment element at every node needs to be properly arranged so that given any route in the network the outgoing code is always a detectable incoming code at the next hop. Thus the packet can route through the network from source to destination by switching codes at every hop along the way.

This entire forwarding process is performed at the physical layer. In one embodiment the entire forwarding process is performed by a radio frequency antenna or front end of a transceiver. However one skilled in the art will appreciate that in a wired network the forwarding process may be performed by the NIC. Further the wired or wireless network may be an optical network. In an optical network different colors of light may be used as the orthogonal coding. Thus the forwarding process may be performed at the optical receiver. Therefore most of the upper processing layers of the intermediate relay nodes can remain in sleep or idle mode resulting in a non trivial conservation of energy. Thus the intermediate nodes behave simply like dump relay radios. In addition this technique has the attractive features of lower latency lower bandwidth overhead and more secure communication.

Orthogonal codes such as gold codes for code division multiple access CDMA systems or low density parity check codes LDPC codes are digital signals or intelligence that have the property that the codes can be mixed or modulated with a binary data stream of interest in such a way that the resulting mixture can only be separated if the same code or decoding signal is present at the receiving end. The codes are orthogonal because streams mixed with separate codes simply appear as noise to each other and do not interfere to destroy the embedded intelligence that is imparted on the signal transmitted from the other. Thus from the point of view of a receiver able to decode Code 1 signals sent with a code other than Code 1 appear as noise. Another example of orthogonal codes is different colors of light in an optical system.

One skilled in the art will appreciate that the actual process of embedding the code differs given the specific technology. For example direct sequence CDMA uses a pseudo nose PN chip code to modulate the data modulated carrier wave. LDPC on the other hand embeds a codeword as part of the channel coding mechanism. Thus irrespective of the actual technique if the codes are reasonably orthogonal physical layer correlation techniques can be used to separate the mixtures. Thus from a network perspective the nodes can distinguish signals that are destined only for it and not others.

The proposed code switching technique assumes that there are many such distinct codes for each reasonable source destination flow i.e. enough to support a network of moderate size. As mentioned earlier many types of codes have these properties and thus any convenient variant can be used to implement code switching as mentioned above.

In one embodiment the modulation processing device modulates binary data with an orthogonal code selected from the code switching assignment element . The output of the modulation processing module is then passed to the receiver . In both nodes and are transmitting while node is receiving. One skilled in the art will appreciate that this depiction is for simplicity only and that nodes may be equipped with RF transceivers to allow them to transmit and receive data.

Node is transmitting data modulated by a first orthogonal code while node is transmitting data modulated by a second orthogonal code. Node comprises a receiver for receiving data transmitted by either node or node . In this example node is programmed with the first orthogonal code. The modulation processing module receives a signal from the receiver and demodulates the signal using the first orthogonal code. Thus the node will be able to decode the signal sent by node since they use the same orthogonal code but the signal from node will look like noise to node

One skilled in the art will appreciate that there are many different ways implement the code switching assignment element . In one embodiment a field programmable gate array FPGA may be used. The FPGA could interface with a custom application specific integrated circuit ASIC and RF components. In one embodiment the FPGA could be software reconfigurable i.e. the code assignments could be dynamically updated via a programmability feature of the FPGA and could execute the code switching essentially at hardware speeds. In another embodiment general purpose flash memories or microcontrollers with memory can perform the code assignment storage switching functions.

The enabling mechanism is a code switching assignment element at the physical layer sub module of any node . This table is a mapping from one code to another. As depicted in the code on the left is the incoming code a code that this node s receiver can detect. The code on the right is the outgoing code a code that can be used in transmitting a packet. Every node will have its own code switching assignment element . Collectively codes will be chained by these assignment elements in such a way that any node can reach any other node assuming a path does exist in the network .

Node has a physical layer sub module as shown in having a code switching assignment element . The physical layer sub module of node detects three codes C C and C. The physical layer sub module of node then utilizes the code switching assignment element to map code C into code C code C into code C and code C into code C node maps code C into code C and if node receives code C it process the information in code C by passing the information to the upper layer sub module shown in .

In the example shown in packet is sent from node to node . Packet leaves node using code C. Node is the only neighbor of node that can detect code C and packet is thus picked up by node . Node then translates code C into code C according it node s code switching assignment element and sends it out again. The same process repeats at node where code C is translated into code C and so on until the packet reaches node . Node assigns a special meaning to incoming code C this packet is for node itself. Thus node accepts this packet and passes it to the upper layer sub module shown in waking up the upper layers and host computer processing unit CPU if necessary. This way packet is forwarded from node to node by switching its code from code C to code C to code C to code C. In another example packet is sent from node to node in the same way switching code from code C to C. One skilled in the art will appreciate that codes may be reused throughout the network provided that the nodes reusing the code are sufficiently far away from the nodes that first used the code so as not to cause an interference problem.

Code switching in physical layer requires a multi user detection receiver for intermediate nodes. This is because an immediate node will forward packets for different next hop neighbors meaning that distinct incoming codes are required in the switching assignment element. Therefore the receiver must be able detect and select multiple codes from input signal.

All codes used in the network must be orthogonal so that a node can separate two signals when they are transmitted simultaneously. Input signal with a code undetectable at a node will not be received or just appear as noise. 

In one embodiment an application programming interface API is provided for a host to update the code switching assignment element at the node only when necessary . For static multi hop networks e.g. sensor networks codes can be pre assigned and all code switching assignment elements pre populated before deployment. However for dynamic networks e.g. ad hoc networks code switching assignment elements may need to be updated to reflect the topology and network routing changes. These code switching assignment elements may be updated through the API when MANET route daemon discovers a route change a less frequent event .

The disclosed system and method has at least four advantages over current state of the art techniques in multi hop routing. First it significantly reduces the processing and energy used to forward a packet. Since activity is limited entirely to the physical layer the other processing functions of the intermediate node such as the NIC back end the host CPU and auxiliaries can remain powered off or in a low power idle mode . Furthermore the processing that would normally be required in the higher layers MAC and NET to accomplish medium access and routing are totally eliminated.

Second the disclosed system and method significantly reduces the latency incurred in forwarding packets through intermediate nodes when compared with current state of art routing techniques. With current architectures the entire packet must be received and processed by all the intermediate nodes involved in the routing and all the layers up to the routing layer before being identified as to the source destination addresses. This incurs processing delays. In contrast the forwarding method proposed herein can be on a symbol by symbol basis a node can immediately resend a data packet after it detects the incoming code and looks up the corresponding outgoing code. That is intermediate nodes need not buffer and wait for the entire packet to arrive to accomplish decoding. As a result using this technique a packet can route across the network with much greater efficiency and minimum delay as opposed to current state of the art.

Third the proposed technique uses much less overhead bandwidth compared with other current techniques because it eliminates link layer framing such as MAC headers . Since the outgoing code implicitly identifies the next hop link layer frames such as preambles and MAC headers are no longer necessary.

Finally the disclosed system and method has an inherently more secure data payload than other state of the art techniques because the code used by the transmitting node is required by the receiving node to detect and decipher a modulated packet symbol and the exact sequence of codes is required to decipher the source destination information. Furthermore the source destination information is not carried in each packet one must know the exact sequence of codes to decipher that information. This means that one must obtain the hardware code switching assignment elements in all nodes along the route which is a forbiddingly difficult task.

