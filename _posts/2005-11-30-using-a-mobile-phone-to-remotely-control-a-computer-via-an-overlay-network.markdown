---

title: Using a mobile phone to remotely control a computer via an overlay network
abstract: Systems and methods are described for using a mobile phone to remotely control a computing device. In one implementation, a communication channel between the mobile phone and the computing device uses an overlay network, such as an instant messaging (IM) service, to exchange communication data packets. An exemplary system includes a flexible layered architectureâ€”which allows tailoring the system for remote control of various applications using various network configurations. Based on the overlay protocol used, a transport protocol layer can provide helpful application programming interfaces (APIs). On top of the transport protocol layer, a remote control protocol defines a framework for packet exchange of extensible commands, customizable for remote control of diverse applications. Use of paired-key encryption, IM accounts, and buddy lists ensure that communications between mobile phone and remote computer are secure.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07792924&OS=07792924&RS=07792924
owner: Microsoft Corporation
number: 07792924
owner_city: Redmond
owner_country: US
publication_date: 20051130
---
Mobile phones play an increasingly significant role in people s daily lives. Mobile phones have become smart devices which users always keep near at hand regardless of where they are. Mobile phones have also become much more compact and easier to carry at all times. Further a mobile phone provides a unique telephone number that can be used as an authenticator to identify each individual owner. Mobile phones have also gained increasing capacity in terms of processing power screen resolution rich applications and connectivity. With global GPRS and CDMA1x networks mobile phones can provide Internet access that is always on regardless of the user s location. Thus mobile phones have become numerous easy to carry powerful reliable and packed with features.

Likewise more people now possess a personal computing device such as a desktop computer in the home or office than ever before. Computers continue to increase in power and rich features in the same manner that mobile phones have. What is needed is a way for mobile phones to interact with computers more fluently in order to become portable central access points for data exchange and remote control of home or office computers especially when the human owners are away from their computers or traveling on the road.

Systems and methods are described for using a mobile phone to remotely control a computing device. In one implementation a communication channel between the mobile phone and the computing device uses an overlay network such as an instant messaging IM service to exchange communication data packets. An exemplary system includes a flexible layered architecture which allows tailoring the system for remote control of various applications using various network configurations. Based on the overlay network used a transport protocol layer can provide helpful application programming interfaces APIs . On top of the transport protocol layer a remote control protocol defines a framework for packet exchange of extensible commands customizable for remote control of diverse applications. Use of paired key encryption IM accounts and buddy lists ensure that communications between mobile phone and remote computer are secure.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

This disclosure describes how to use a mobile phone as a controller and data exchange center for a remote computer using an overlay network. Such a mobile phone can be used to remotely control a home or office computer at long distances even around the globe. In one implementation to make a communication connection between the mobile phone and the remote computer an instant messaging IM service overlay such as the MICROSOFT MSN MESSENGER Service YAHOO IM or AOL IM is used as one part of the communication channel that links the mobile phone and the remote computer.

Generally mobile phones cannot communicate with a personal computer directly or even indirectly. The two technologies mobile phones and computers have evolved somewhat separately using different protocols for communication at a distance communication protocols that are either somewhat alien to each other or blocked by boundaries such as network devices that use network address translation NAT tables or firewalls.

One recent common denominator for both mobile phones and computers is an ability to access the Internet although each technology gains access to the Internet in a different manner. This common ability to access the Internet usually brings to mind the exchange of email and or text messages between mobile phone and remote computer. Exemplary systems and methods described herein however adopt an overlay network such as an instant messaging service to provide a channel through which a mobile phone and a computer can become much more fluent in exchanging commands and data packets. This allows a mobile phone user to control a remote computer much as if the user were operating the computer itself. Some overlay networks such as those constituting instant messaging services happen to have many features that are ideal for linking a mobile phone more intimately to a remote computer.

Example scenarios are now described. Many mobile phones are presently able to access e mail. Using the exemplary systems and methods described herein a hypothetical user Tom is traveling and receives an e mail from one of his colleagues asking for a document which is on Tom s office computer. Tom uses his mobile phone to connect to his office computer and by controlling his computer with the mobile phone Tom can attach the document from the computer s hard drive to an email message being composed on the computer and then send an email from the computer to the colleague with the requested document as an attachment.

Likewise hypothetical user Helen is at a party at her friend s home. She wants to share some photos with her friends but the photos are at home on her computer there. Helen uses her mobile phone to connect to her home computer and by remotely controlling her home computer with the mobile phone she has the home computer send the photos to her friend s computer.

In one implementation an instant messaging IM service is used as the overlay network to provide a communication channel. Instead of establishing a direct connection between the mobile phone and the computer the system uses the overlay network e.g. IM service as the communication channel i.e. the servers of the IM service are used as bridges. The mobile phone and the computer send their commands or acknowledgements to an IM service and the IM service relays these commands and acknowledgements to the other device. Moreover other overlay networks can be used instead of an instant messaging service.

In one implementation to solve the naming problem the system applies an IM account for each mobile phone or computer and uses the account as the unique identity of each device. In one implementation for security considerations an explicit buddy establishing procedure is used before a mobile phone is able to control a computer . A computer may be controlled by only the mobile phones that are in its buddy list.

In one implementation the following hardware and software platforms are used to build a system conforming to the exemplary architecture . An Advanced RISC Machine ARM based SMARTPHONE made by HTC can be used for the mobile phone HTC Corporation Taoyuan Taiwan R.O.C . This mobile phone can run e.g. MICROSOFT WINDOWS MOBILE 2003 for SMARTPHONE and has a GPRS connection. The computer can be an x86 based personal computer running MICROSOFT WINDOWS XP and may have an ADSL or intranet connection. Both the client side remote integration engine and the server side remote integration engine share a similar software structure corresponding to layers of the exemplary architecture .

First a lower level physical transport layer ensures that both the mobile phone and the computer can access the Internet . The underlying network can be GPRS CDMA1x etc. for the mobile phone and ADSL Ethernet etc. for the home or office computer . A TCP IP stack can be used on these networks. This lower layer is typically implemented by the Operation System OS so in one implementation a well defined Application Programming Interface API can be called to establish a connection.

The next layer on top of the physical transport lower layer is an overlay protocol layer . This layer provides a communication channel between the mobile phone and the computer as well as a naming system to identify each communication peer. As mentioned it is difficult or impossible to establish a direct connection between the mobile phone and the computer due to various network boundary entities such as NAT firewall and proxy. Therefore on overlay network such as the IM service is used as the bridge.

The third layer which is built on the layer below is a full fledged transport protocol layer based on the overlay protocol layer . The transport protocol layer encapsulates the overly protocol such as in IM protocol as a reliable and stream oriented data channel and provides a suite of Winsock like application programming interfaces APIs to the upper layers of the architecture .

On top of the transport protocol layer a fourth remote control protocol layer includes a series of control commands to be used between the client side remote interaction engine and the server side remote interaction engine . These commands define the extent and capability of the remote control achieved by the mobile phone .

An applications layer is the fifth and top layer of the exemplary remote interaction architecture . The applications layer includes a variable number of user friendly applications that are based on top of the remote control protocol layer such as a file manager an email client etc. Each application uses a set of application specific control commands to achieve its functionality and can have a user friendly user interface designed especially for the display screen of a mobile phone .

A security layer runs across the other layers and includes multiple mechanisms to ensure that the control procedures are performed in a secure manner. Thus the security layer is not necessarily a discrete layer but may be embedded into the other layers.

The exemplary remote interaction engine includes a physical transport manager an overlay protocol engine a transport protocol engine a remote control protocol engine an applications adapter and a security engine . The transport protocol engine may further expose stream oriented application programming interfaces APIs . The remote control protocol engine further includes an extensible command set and a packet formatter . The applications in the applications adapter may include a file manager an email manager a remote television recording manager a remote camera monitoring manager and a remote document printing manager among others. Finally the security engine may further include an account manager a buddy manager and an encryption key manager .

The physical transport manager typically uses a GPRS or CDMA1x stack in the case of the client side remote interaction engine in the mobile phone or an ADSL stack or intranet link in the case of a server side remote interaction engine .

In one implementation the overlay protocol engine and the security engine may set up a communication channel between the mobile phone and the computer in the following manner. In an IM implementation of the overlay network the account manager of the security engine may create two accounts such as separate passports for the remote control client and server phone and computer respectively and then the buddy manager may set these accounts up as buddies of each other.

The computer may start its remote interaction engine at system startup and then wait in an ongoing manner for new control session to be initiated by a mobile phone on its buddy list. In one implementation the user of the mobile phone starts the client side remote interaction engine e.g. by selecting such an option from the phone s menu. The physical transport manager of the mobile phone establishes for example a GPRS session using a WINDOWS MOBILE Connection Manager API. The overlay protocol engine connects in an IM implementation to an overlay network that is an IM service authenticates itself and sets its presence status using the IM protocol in use e.g. MSN MESSENGER Service protocol.

The overlay protocol engine of the mobile phone opens a chat session to the remote control server that is to the computer and the encryption key manager of the mobile phone and the computer may negotiate security parameters with each other. Thereafter all commands and responses are ideally encrypted using a session key. The mobile phone as client queries the capability of the computer as remote control server and allows the user to decide which application is to be currently launched for remote control. For example if the application selected is the file manager then the mobile phone pops up the file manager user interface on the display of the mobile phone and allows the user to browse and manage the files in the home or office computer .

The transport protocol engine is based on the overly protocol such as an IM protocol in use i.e. uses the communication channel mediated by the overlay protocol engine and implements a fully fledged transport layer protocol. The transport protocol engine encapsulates the overlay protocol that is in use as the underlying communication channel and provides a reliable and stream oriented connection for the upper layer components i.e. the remote control protocol engine and the applications adapter . In one implementation the transport protocol engine supports a suite of APIs similar to WINSOCK WINDOWS Socket so that applications are able to use the transport protocol to transmit their data using the Winsock programming style. The accounts initiated by the account manager of each device are used to identify the communication end points. For example active IM accounts may be logged onto before communication.

The remote control protocol engine using the transport protocol engine described above implements a control protocol that defines how the mobile phone and computer communicate with each other. In one implementation the control protocol is text based and consists of a set of extensible commands . These commands are transmitted in turn by the transport protocol which is based in turn on the overlay protocol in use.

As shown in the remote control protocol engine uses a packet format by which the packet formatter packetizes the command and response data to be exchanged between mobile phone and computer . The command field holds the name of a particular command defined for or by an application. The transaction ID field is used to identify and match the commands and their responses acknowledgements . In this manner the transaction ID field remains identical among the request s and response s in a transaction. The mobile phone may send out several commands at one time and then wait for the responses or acknowledgements. By checking the transaction ID fields the mobile phone matches the responses received to each corresponding original command. The parameters field holds parameters for a command. This field is optional because a command may not need any parameters. In one implementation a white space may be used between multiple parameters. The payload field stores the data for the command and can be optional too as some commands may be self explanatory and not need a data payload.

Returning back to the remote control protocol engine defines only a framework to transmit control commands and their responses. Specific commands including their optional parameters and optional payload are defined by applications in the applications adapter . The remote control protocol is fully extensible by means of the extensible command set so that each application has its own command set built of the extensible commands.

The security engine plays an important role in the remote interaction engine . It is important and sometimes even critical that a home or office computer be controlled only by trusted mobile phones . A mobile phone must be authenticated by the computer which it is trying to control. In one implementation the security concerns are addressed throughout the functioning of the remote interaction engine to ensure that the control procedures are performed in a secure manner.

In an implementation in which the overlay network is an IM service the remote interaction engines and are IM clients and interact directly only with the passport server notification server and switchboard server of the IM service. Therefore in one implementation the security engine trusts only packets from this IM service and packets from other ports and addresses are treated as insecure data and dropped. In addition the security engine does not listen on other ports or accept any incoming connection.

Second in an IM implementation the buddy manager may not allow a computer to accept packets from mobile phones that are not in an IM buddy list. Thus in some implementations an explicit IM buddy establishing procedure must be performed before a mobile phone is able to control a computer .

Lastly after the buddy establishing procedure the encryption key manager may prompt the mobile phone and computer to immediately exchange their public keys before further communication. After that all packets for the remote control session are encrypted by the sender using the receiver s public key and decrypted with the receiver s private key at the receiver. Packets received before exchanging public keys are treated as illegal and are dropped.

The applications adapter allows multiple applications to work through the remote control protocol engine . For example the file manager is one such application that provides an explorer like user interface as shown in that is designed to fit on the display screen of the mobile phone . In one implementation of the user interface a resource explorer main menu on the mobile phone may display the various application options available for remote control on the computer such as storage file maintenance email camera control TV recording document printing etc. If the storage file maintenance option is selected from the main menu then the file manager menu opens from which the user can browse copy rename move and delete files in the home or office computer .

Other applications besides the file manager can be included in the remote interaction engine as shown in . An email manager can allow the mobile phone user to remotely send emails from the home or office computer and optionally attaches a remotely stored file onto the e mail. Likewise the remote TV recording manager the remote camera monitoring manager and the remote document printing manager allow the mobile phone user to have the remote computer perform remote TV monitoring remote camera monitoring and remote printing.

Using the file manager as an example application formats of example commands used by the file manager are shown in Table 1 . The sending and receiving of these commands are from the perspective of the mobile phone . Italic text signifies that the command is sent by the mobile phone client and the normal text signifies that the response is received by the mobile phone i.e. sent by the computer .

In case there are too many files in a directory that cannot be returned in a single response the computer can return a partial list of files and set StartNumber and TotalNumber parameters. The mobile phone can then use the two values of the StartNumber and TotalNumber parameters to retrieve remaining files using a subsequent command.

At block a communication channel is established between a mobile phone and a computer via an overlay network such as an instant messaging service. Establishing the communication channel can include adopting a layered remote interaction architecture stack that includes various stack layers beginning with a low level physical transport layer. Using this low level physical transport layer may include establishing a GPRS or a CDMA1x link between the mobile phone and the Internet. Likewise in a computer side version of the architecture using the low level physical transport layer may include establishing an ADSL or a corporate intranet link between the computer and the Internet.

Providing a communication channel includes adopting an overlay protocol such as an IM protocol that uses the low level physical transport layer. An overlay protocol based transport protocol layer on top of the overlay protocol provides a stream oriented interface to upper layers. Defining a set of extensible commands and a packet framework for exchanging data between the mobile phone and the computer is done at the next upper layer the remote control protocol layer. Establishing an applications layer allows multiple application management modules to each have commands built on the extensible command set of the layer below customized for each particular application to be controlled on the remote computer.

A security layer interfaces with the other layers of the architecture ensuring secured communication by using for example IM accounts a buddy list that excludes data packets from non participants and paired key encryption.

At block one or more applications on the computer are controlled via the mobile phone. The applications may include for example a file management application an email application a multimedia recording application a camera monitoring application a document printing application etc.

A user interface tailored for the mobile phone may offer a root menu of applications on the computer available for remote control. When an application is selected one or more submenus offer the various commands and actions appropriate for the selected application.

When a command is selected from a submenu the above described layers of the remote interaction architecture convert the user friendly version of the command from the mobile phone s user interface into data packets transportable by the overlay protocol layer and the lower level physical transport layer to the computer where the commands are executed. For example the user may select an option that commands the remote computer to attach a document to an email and then send the email and document from the remote computer. The computer sends back responses to the mobile phone via an architecture similar to that of the phone informing the mobile phone of a received command or an executed action.

The subject matter described above can be implemented in hardware software firmware etc. or combination thereof. In certain implementations the subject matter may be described in the general context of computer executable instructions such as program modules being executed by a computing device or communications device. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. The subject matter can also be practiced in distributed communications environments where tasks are performed over wireless communication by remote processing devices that are linked through a communications network. In a wireless network program modules may be located in both local and remote communications device storage media including memory storage devices.

The foregoing discussion describes using a mobile phone to remotely control a computer via an overlay network. Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

