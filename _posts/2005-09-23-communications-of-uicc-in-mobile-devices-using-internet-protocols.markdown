---

title: Communications of UICC in mobile devices using internet protocols
abstract: A mobile device and UICC communication using standard Internet protocols. Such communication allows users access to their UICC information using standard web browsers and allows use of the UICCs to communicate with remote servers and thereby provide secure services for Internet transactions. The mobile device has a communications module to selectively communicate with the UICC processor or with at least one node on a network, the mobile device communications module has an Internet protocol module operable to receive messages issued from a first Internet application as Internet protocol packets, and to transmit the packets to target IP addresses; and operable to receive Internet protocol packets, to process the packets, and to send the messages contained in the packets to the first Internet application.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07454233&OS=07454233&RS=07454233
owner: Gemalto Inc
number: 07454233
owner_city: Austin
owner_country: US
publication_date: 20050923
---
This patent application is a non provisional patent application claiming priority from provisional patent application Ser. No. 60 612 768 filed on Sep. 23 2004 entitled Communications of UICC in Mobile Devices Using Internet Protocols the teachings of which are incorporated by reference herein as if reproduced in full below.

The present invention relates generally to mobile device communication and more particularly to communication with a UICC Universal Integrated Circuit Card .

One of the principal standards for mobile communication is the Global System for Mobile Communication GSM . A central feature of the GSM standard is the Subscriber Identity Module SIM or SIM Card. The SIM card is an integrated circuit card that contains a user s subscription information and phonebook. A SIM card is a small microprocessor card inserted into a mobile device such as a cell phone or a PDA. The chip size of the SIM card is no more than 25 mm. The SIM card is portable secure and tamper resistant. The SIM card is a critical module in a cell phone often called a handset of GSM networks and other current and future cellular networks. A user cannot even turn on a cell phone that does not contain a SIM card. The SIM card enables the user to be authenticated to the cellular network to be associated with an account with the telecom operator and to be authorized to use the network s voice data and other services. The SIM card stores certificates and keys for authentication purposes and stores other personal information for various applications. The owner of the SIM card can access the SIM card via applications in the handset. For example the phone book application can access the phone book stored in the SIM card.

While SIM cards provide many critical functions in their use in GSM handsets there are several important deficiencies in the communication between a user and a SIM card. Because integrated circuit cards including SIM cards lack input and output devices integrated circuit cards rely on some external means for communication with users and other computers. With respect to SIM cards that interaction has several deficiencies. First SIM cards communicate with outside networks through the mobile device that the SIM resides in. Until recently there is no mechanism to create a direct reliable and secure communication channel between a SIM card and a remote server. Second not all mobile devices have the same methods for users to invoke the same or similar SIM applications. For example different devices provide different ways to access their respective phone books. To improve the user experience telecom operators have requested web servers on SIM cards and the ability to access the SIM cards via web browsers in the handsets. This has become one of the tasks addressed by the GSM Association s Smart Card Group SCaG . Third SIM application programs that communicate with the SIM card must be written and loaded to the handset. The embedded software development is a nontrivial process.

Because SIM cards hitherto have had to rely on the handset to act as a proxy for any communication with the user or with other network nodes reliable end to end communication between the SIM cards and users or other network nodes has not been possible.

The prior art does not show a mechanism by which a SIM module can communicate with the outside world using standard Internet protocols thus enabling users to access their SIM cards as network nodes for example using a web browser on the handset.

There have been several attempts to provide some level of Internet capability to SIM cards. WebSIM described in Guthery S. Kehr R. and Posegga J. How to Turn a GSM SIM into a Web Server http www.eurescom.de public webspace P1000 series P1005 websim websim cardis.pdf and in Eurescom P1005 project http www.eurescom.de public webspace P1000 series P1005 websim websim info.htm is a solution to integrate a web server onto a SIM card. With WebSIM any network node on the Internet is able to access the web server using the phone number of the mobile device that holds the SIM card. The approach consists of a web proxy that intercepts HTTP requests from a web client and encapsulates the HTTP requests into SMS messages to send to the mobile phone over the mobile networks. The web server in the SIM card registers itself with the SIM manager to intercept the SMS messages that contain the HTTP requests. The web server extracts and serves the HTTP requests encapsulated in the SMS messages and then encapsulates the HTTP responses into SMS messages to send back to the web proxy that then sends the HTTP responses to the web client. At the current stage the web proxy is also connected to a mobile phone through which the SMS messages are exchanged with the web server on the SIM card of another mobile phone. WebSIM was implemented with the Java SIM card.

Microsoft Corporation of Redmond Wash. announced in 2001 an implementation of a web server called WebCamSIM for SIM cards running the Microsoft operating system. WebCamSIM is described in Microsoft puts Web server on a phone http news.com.com 2100 1033 255352.html legacy cnet. Like WebSIM WebCamSIM uses an SMS gateway to translate HTTP requests and responses into SMS messages which are then sent to the mobile device that holds the WebCamSIM card.

These techniques for providing a web server on a SIM card rely on intermediate software the SMS gateway or proxy on the handset and therefore do not provide end to end secure communication between the web server on the SIM card and other Internet nodes. Furthermore the reliance on SMS messages which are limited to a maximum length of 160 bytes may provide poor performance.

From the foregoing it is apparent that there is a need for improved communication between integrated circuit cards used as SIM cards and associated handsets. In particular such improved communication methods should provide mechanisms for communication using generally available communications protocols thereby providing increased flexibility in the access of SIM cards and information stored thereon and reliable and secure end to end communication between SIM cards and remote Internet nodes.

In a preferred embodiment the invention provides a system and method by which a Universal Integrated Circuit Card UICC and a host mobile device to which the UICC is connected may communicate using standard network protocols such as PPP and TCP IP. Using the communication techniques provided by the invention a user of the host mobile device may access information on the UICC using a standard web browser running on the mobile device. In a further advantage provided by the invention using the communications methods of the invention a UICC located in a host mobile device may engage in direct communication with a remote Internet server using standard networking communications protocols.

A system for communication between a mobile device has a mobile device communications module stored in the mobile device memory and instructions to cause the mobile device processor to selectively communicate with a UICC processor or with at least one node on a network the mobile device communications module having an Internet protocol module operable to receive messages issued from a first Internet application e.g. a web browser running on the mobile device to package the messages as Internet protocol packets and to transmit the packets to target IP addresses and operable to receive Internet protocol packets from the UICC to process these packets and to send the messages contained in the packets to the first Internet application. To determine whether a particular data item should go to the UICC or to the network the mobile device has a routing module operable to receive Internet protocol packets and operable to cause the internet protocol module to transmit the packets selectively to the mobile device to a GPRS network or to the UICC as a function of the target Internet protocol address of the packets.

Each of the UICC and the mobile device include communication modules implementations of a communications stack that include Internet level protocols and Link Layer Protocols the latter supporting communication between the UICC and the mobile device using Internet level protocols over a data link on which data is transmitted according to the protocol used for communication between a UICC and a mobile device. The Link Layer Protocols and their corresponding implementations on the UICC and the mobile device include an intermediate link layer for bridging between the higher level link layer protocols e.g. PPP and the protocol for communication between a UICC and a mobile device e.g. ISO 7816.

In one aspect of the invention a mobile device may provide a mechanism by which a web browser on the mobile device or on an external computer to which the mobile device is connected may be used to access the UICC connected to the mobile device using standard Internet communications protocols.

In another aspect of the invention the sophisticated Internet communications capabilities provided by the network UICC according to the invention and the associated mobile device provide the possibility of the UICC having direct communication with a remote web server thereby allowing the UICC to be used with many Internet based transactions.

Other aspects and advantages of the present invention will become apparent from the following detailed description taken in conjunction with the accompanying drawings illustrating by way of example the principles of the invention.

In the following detailed description reference is made to the accompanying drawings that show by way of illustration specific embodiments in which the invention may be practiced. These embodiments are described in sufficient detail to enable those skilled in the art to practice the invention. It is to be understood that the various embodiments of the invention although different are not necessarily mutually exclusive. For example a particular feature structure or characteristic described herein in connection with one embodiment may be implemented within other embodiments without departing from the spirit and scope of the invention. In addition it is to be understood that the location or arrangement of individual elements within each disclosed embodiment may be modified without departing from the spirit and scope of the invention. The following detailed description is therefore not to be taken in a limiting sense and the scope of the present invention is defined only by the appended claims appropriately interpreted along with the full range of equivalents to which the claims are entitled. In the drawings like numerals refer to the same or similar functionality throughout the several views.

As shown in the drawings for purposes of illustration the invention is embodied in a novel integrated circuit card and mobile terminal e.g. Universal Integrated Circuit Cards and the handsets to which the UICCs are inserted and software for such cards and handsets for allowing a UICC to communicate with other nodes on the network including the handset using standard Internet communications protocols. A system and method according to the invention provides users the ability to communication with their SIM cards as a network node for example by using a web browser on the handset. Furthermore the mechanisms according to the invention provide for reliable and secure end to end connections between the UICCs and any remote Internet services and secure Internet online transactions for mobile commerce using mobile handsets.

A brief note on the nomenclature used herein one aspect of the invention is a Universal Integrated Circuit Card for use in mobile communication devices. One type of such a card is the SIM module integrated circuit card used in GSM handsets. Initially only GSM handsets carried SIMs in order to access GSM networks. Since their initial adoption in GSM many other mobile phones for other networks have SIMs as well. Furthermore SIMs are also used in TV set top boxes and PDAs. The SIMs for 3G networks such as UMTS are called U SIMs Universal SIM . U SIMs are secure devices. Their primary purposes are authentication authorization and accounting. U SIMs also provide other services such as generation of session keys for encryption data encryption and decryption and secure storage for personal information. U SIMs protect identity of users in that the identity is stored in the smart card the U SIM and hence is physically separated from the handset. This separation provides security and portability. A U SIM card is also called the Universal Integrated Circuit Card UICC . Technically the distinction is that the UICC is the physical device whereas SIM or U SIM are applications running in the UICC. Herein UICC refers to an integrated circuit card for use in mobile communications devices. Thus a UICC can be a SIM card a U SIM card or other integrated circuit cards used for similar purposes in mobile communications devices.

This invention pertains both to UICCs and to the mobile devices that make use of UICCs. For the sake of fluidity of the prose used herein the term handset shall be interpreted as any mobile communications device e.g. a mobile telephone or a personal digital assistant or even a television set top box that uses an integrated circuit card to contain user information or applications in a manner similar to the use of SIM card in a GSM telephone handset.

The electronic circuitry provides communications functionality for the handset with a wireless network via a wireless link to a wireless telephony antenna . And the microprocessor provides some of the control functionality of the handset such as managing operations of the handset and managing communications protocols used to communicate with the wireless network . The UICC is connected to the electronic circuitry so as to allow communication between the UICC and the handset .

The wireless network is composed of a complex communications infrastructure for providing connections to other stations for example other mobile stations or land based telephone systems. One such station may be an Internet gateway which gives the wireless network access to the Internet. As commonly known very many computers are connected via the Internet. In the scenario presented herein a user of a handset e.g. a mobile telephone or a PDA uses the infrastructure illustrated in to communicate with the UICC either via the handset or some other computer connected to the Internet . Some aspect of this communication uses direct communication between the UICC and the remote entity for example for the purpose of communicating some information that is stored on the UICC to the remote entity .

In one embodiment of the invention a UICC is a network smart card. A network smart card is a smart card that is capable to act as an autonomous Internet node. Network smart cards are described in co pending patent application Ser. No. 10 848 738 SECURE NETWORKING USING A RESOURCE CONSTRAINED DEVICE filed on May 19 2004 the entire disclosure of which is incorporated herein by reference. A network smart card has Internet protocols TCP IP and security protocols SSL TLS built into the card. The network smart card can establish and maintain secure Internet connections with other Internet nodes. The network smart card does not depend on a proxy on the host to enable Internet communications. More over the network smart card does not require local or remote Internet clients or servers to be modified in order to communicate with the smart card.

Like other smart cards the user information is stored in the network smart card. The smart card only gives out information to the trusted client or server at the user s authorization. The network smart card can be used to secure Internet online transactions and to provide other Internet applications such as a web server.

The ROM would also contain some type of operating system e.g. a Java Virtual Machine. Alternatively the communications module would be part of the operating system. During operation the CPU operates according to instructions in the various software modules stored in the ROM .

Thus according to the invention the CPU operates according to the instructions in the communications module to perform the various operations of the communications module described herein below.

In one aspect the invention is a network smart card with SIM functionality referred to herein as network SIM card or a network UICC. A network connection may be established between a network UICC and a mobile device to which the network UICC has been inserted. With such a network connection one can access the network UICC by using a web browser on the mobile device. This connection also enables outside network connection for the network UICC through the mobile device that connects to outside network via various physical links such as USB GPRS 3G WiFi Bluetooth and Infrared.

The handset has loaded thereon several network applications and . Note The handset physical architecture is much like that of a computer. Thus the handset has a memory and a processor. The memory may be composed of RAM ROM EEPROM etc. The memory contains the software modules that control the behavior of the processor. Thus the various software modules illustrated in as being part of handset are usually stored in some non volatile memory of the mobile device and loaded into the RAM while being executed. From there the software module instructions control the behavior of the processor and causes the mobile device to do certain things e.g. establish network connections. Examples of such applications include web browser and network contacts list application. In the case of a web browser an application may be used to access the network UICC or more accurately communicate with a web server executing on the network UICC e.g. SIM card network application

The handset and the network UICC communicate over several layers of communication protocols. In one embodiment these layers may be represented by several communicating software modules e.g. a TCP IP Module for handling communications at the TCP IP level a PPP module for handling communications at the PPP level and lower level link layer modules such as a Peer I O server the role of which is described in greater detail herein below and a module for communicating according to the standard for communication with smart cards e.g. according to ISO 7816 APDU. is a block diagram illustration of the communications stacks implemented on the handset and the network UICC . The network UICC and the handset have similar protocol stacks in order to communicate with each other. At the lowest level the network UICC and the mobile device communicate according to smart card standard ISO 7816. As discussed in greater detail herein below to enable the half duplex command response protocol ISO 7816 to handle full duplex peer to peer Internet protocols the Peer I O protocol is layered on top of ISO 7816. The handset uses RAS to connect to the network UICC which enables the use of PPP to carry Internet protocols such as TCP IP. The handset may have more than one physical link layer and hence more than one data link layer to connect to the outside network such as GPRS Bluetooth WiFi and USB. Such outside network links make it possible for the network UICC to connect to another Internet node such as a remote server over the Internet.

Returning now to the handset uses a remote access server RAS to establish connection with the outside data network. The application programs on the mobile device uses RAS function calls to establish connections to outside network. Furthermore the application programs on the mobile device use function calls to the RAS to establish a network connection with the network UICC . The RAS communicates with other nodes on the network via a communications module . The RAS communicates through a virtual serial port interface using PPP protocol thereby allowing the RAS module to communicate with the communications module as if the latter were a serial driver. After a PPP connection has been established through further RAS function calls PPP frames carry or encapsulate TCP IP packets. The virtual serial port maps serial communication from the RAS into Internet communications protocols e.g. TCP IP and PPP and lower level protocols expected by the communications module . The physical connection and lower data link layer connection between network UICC and the handset are smart card standard ISO 7816. To bridge between the RAS module and the ISO 7816 module i.e. broadly the UICC Link Layer Module the communications module includes a Peer I O server and a virtual serial port . The Peer I O server implements the Peer I O server finite state machine. Peer I O including the Peer I O server finite state machine is described in greater detail in hereinabove referenced co pending patent application Ser. No. 10 848 738 entitled SECURE NETWORKING USING A RESOURCE CONSTRAINED DEVICE filed May 19 2004 which is incorporated herein by reference. The virtual serial port implements the serial port interface that is defined by the operating system of the handset . The RAS connection is established through this virtual serial port .

Data communication between the handset and the network UICC relies on the ISO 7816 communications protocol. This standard specifies a half duplex serial interface which therefore is not compatible with Internet protocols such as TCP IP PPP which are full duplex communication protocols. RAS on the other hand communicates with another device through a full duplex serial port for example a COM port when using Microsoft OS.

In addition to the full duplex vs. half duplex problem another issue is due to that Internet protocols are peer to peer meaning that the node at either end of the link can initiate communication. On the other hand ISO 7816 specifies command response operation wherein the smart card only responds to commands issued by the terminal.

In a preferred embodiment of the invention to solve these two problems the communication module contains an implementation of the Peer I O protocol the Peer I O server which uses the half duplex command response ISO 7816 protocol to support full duplex peer to peer Internet protocols. Similarly the network UICC communication module implements a Peer I O client . Because the communication module is interfaced to the RAS module through the virtual serial port handset application programs may use RAS calls to the virtual serial port to establish network connections with the network UICC with the Peer I O server as an intermediary.

The Peer I O server is further connected to a UICC Link Layer module . The UICC Link Layer module transmits and receives APDU frames over the physical connection to the UICC . The APDU frames are provided to the UICC link layer module by the Peer I O server and received from the handset .

At the other end of the physical link the network UICC contains a UICC communications module . The UICC communications module contains implementations for the Internet protocols e.g. TCP IP and PPP e.g. card TCP IP module . The UICC communications module also contains the Peer I O client to manage the communication of Internet protocol over the ISO 7816 channel as discussed herein above.

The Peer I O protocol enables the half duplex command response protocol ISO 7816 to handle full duplex peer to peer Internet protocols. Implementations of Peer I O consist of two finite state machines the Peer I O server running inside the mobile device and the Peer I O client running inside the UICC. The Peer I O server forwards the data between the half duplex command response communication module ISO 7816 and full duplex peer to peer communication module PPP . The Peer I O server buffers and controls the data flow but does not examine or change the data passing through it.

One implementation of Peer I O described in the co pending patent application defines a new ISO 7816 command class and three new instructions. This works well and is simple to implement when the software developer has access to the ISO layer. However if the network connection to UICC is to be added to an existing operating system of a mobile device and the operating system of the mobile device does not provide a way to access the ISO layer that solution is not possible. Accordingly in a preferred embodiment of the invention the Peer I O server is implemented using existing ISO 7816 commands. In another alternative embodiment the Peer I O server uses the application programming interface in the mobile device for sending and receiving data.

One way to use existing ISO 7816 commands is to use the ISO 7816 ENVELOP command for putting packets and polling and to use the ISO 7816 GET RESPONSE command for getting packets. The polling can be done by an ENVELOP command with no data or with one byte that never appears in a data stream. For example the PPP layer can be configured that 0 00 never appears in PPP frames. The PPP negotiation can include a method to disallow certain characters from appearing in a data stream. When such characters appear the sender converts them to different characters and the receiver converts them back according to a predefined method.

In an embodiment of the invention using the Microsoft smartphone as the handset the API of the mobile device provide ENVELOP and GET RESPONSE commands. Thus the Peer I O server may make use of those commands to implement the putting and polling of packets.

The handset may disconnect the PPP connection step after a certain period of time has elapsed without network activities decision . is a combination timing sequence diagram and flow chart illustrating the operation of the network UICC and the handset during a PPP disconnect. The handset transmits a PPP disconnect message to the network UICC message . The handset may not provide means to allow a user to disable this auto disconnect feature. After the PPP disconnection the handset cannot communicate with the network SIM using Internet protocols. When an Internet application on the mobile device tries to access the network SIM using Internet protocols for example a web browser executing on the handset attempts to access a web server on the network UICC the RAS module on the handset tries to re establish the network connection with the network UICC by initiating the RAS handshaking i.e. returning to step et seq. The link layer of the network UICC must be reset to properly handle subsequent re connection requests.

The PPP connection and disconnection status caused by the timeout of the handset should be transparent to the upper layers such as TCP IP security and applications of the network UICC . In a preferred embodiment the network UICC contains a module the connection manager which maintains this transparency from the higher level modules and applications. The connection manager provides an interface between the PPP module and the upper layer e.g. the TCP IP module . The connection manager normally forwards the PPP function calls that the connection manager receives from the upper layer modules to the PPP module and vice versa. When the PPP module receives the termination request from the handset the PPP module acknowledges the termination request message performs the appropriate PPP operations to close down the link step and informs the connection manager about the disconnection step . The connection manager re initializes the RAS module on the network SIM step . That resets the RAS module on the network UICC i.e. places the RAS module in a state in which the RAS module is available or the RAS handshaking and would complete any attempted RAS handshake from the handset . When the connection is up the connection manager continues its normal function of forwarding PPP function calls. Through this mechanism the upper layers of the network UICC may remain unaware of changes of PPP connection status and carry on their functions as usual.

As discussed herein above hitherto mobile devices have been end points in network connections. In other words no network communication has passed through the mobile device form one node to another. This characteristic of mobile devices sets them apart from most other computers on a network which typically can route messages in a path along a communication channel. To address this characteristic of mobile devices in one embodiment of the invention the communication module of the handset contains an IP routing module to selectively route incoming IP packets either to the network the network UICC or back to the handset .

The PPP negotiation includes IP address assignment. Typically the RAS client requests an IP address from the RAS server. In one embodiment of the invention the handset requests an IP address from the network UICC during PPP negotiation message . The network UICC also needs an IP address step . One way to assign IP addresses is to use private IP addresses such as 192.168.0.2. Another way to assign IP address is to use auto configuration IP addresses such as 169.254.0.2. However the IP address is assigned the network UICC sends the IP address back to the handset message .

The RAS module on the handset updates the IP routing table after the handset obtains an IP address via PPP negotiation step . This is an existing functionality of the mobile device. Once the IP address of the network UICC is available on the handset a user may access the network UICC through a web browser on the handset by using the IP address of the network UICC for example https 192.168.0.1 .

The network UICC combines the SIM functionality of a traditional SIM card and the networking capabilities of a network smart card. Thus the network UICC contains a SIM module that provides the traditional SIM card functionalities.

A card side UICC link layer module provides the card side ISO 7816 communication with the UICC link layer module on the handset . The card side UICC link layer module handles both Peer I O traffic for network protocol communication and the normal SIM communication. is a flow chart illustrating the dispatching of incoming APDU frames. For incoming APDU data step if the APDU command class indicates that the data is Peer I O traffic decision box the card side UICC link layer module dispatches the ISO 7816 application programming data units APDU to the Peer I O module . If the APDU command class indicates that Peer I O traffic has been received decision block the card side UICC link layer module dispatches the APDU to the Peer I O module step . Otherwise card side UICC link layer module dispatches the APDU to the SIM module . For out going data both the Peer I O module and the SIM module use the ISO 7816 module to send data. This enables the network SIM to be used as a network smart card as well as for normal cell phone operation such as authentication to a cellular network. In one embodiment of the invention instructions for implementing the decision logic of may be implemented as part of an interface between the UICC link layer module and the Peer I O module .

The mechanism described herein above for allowing communication of high level Internet protocol communications between the handset and the UICC further permits a UICC to execute a web server. The web server may be one of the applications . For purpose of discussion the web server will be assumed to be application . Many mobile devices have web browsing capability built in. Thus by virtue of having the web server and the web browsing capability on the handset together with a mechanism for allowing the handset to communicate using high level Internet communications protocols with the UICC a user may access the UICC using a web browser on the handset . Furthermore because the UICC as described herein is capable of acting as an autonomous network node a web browser anywhere on a network to which the UICC is connected via the handset may be used to access the UICC .

According to the invention there are two alternative methods for direct network communication between a computer and network UICC . In a first embodiment illustrated in two proxies a proxy web server running on the computer and TCP proxy server running on the handset facilitate the connection. In the second alternative embodiment illustrated in a RAS connection is made from the computer to the handset . These methods enable the mobile device user to use a web browser on his her desktop computer to access the network UICC . In this way the user has a good human interface provided by the web browser and a keyboard to manage the network UICC . In addition the network UICC can secure the communication between the computer and other networks e.g. Wi Fi networks .

In one embodiment of the invention as illustrated in the mobile device executes the Microsoft Smartphone operating system and makes use of at least two tools provided by the mobile device operating system. One tool is the ActiveSync synchronization software with ActiveSync modules and on the handset and on the computer respectively. The ActiveSync modules provide connection and data synchronization between a computer and a mobile device over a USB cable or an infrared connection. The embodiment of the invention illustrated in also makes use of Remote API RAPI . RAPI is an application programming interface and a library with modules and executing on the handset and on the computer respectively and that provide a means for an application running e.g. web browser on the computer to communicate with an application running on the handset via the ActiveSync modules and . To simplify the figure the link layers for PPP Peer I O and APDU are represented by link layer modules and respectively.

First the computer is operated to configure the DNS service to give a host name to the network UICC step . The user can then use this host name with the web browser on the computer to access the network UICC . With Windows or Linux operating systems one can achieve this by adding a new line in the file named hosts in the system directory for example with Windows 2000 this hosts file is located in the C WINNT system32 drivers etc directory . The new line contains the name of the network UICC for example Axalto Network SIM Card and the local IP address 127.0.0.1 .

Next upon entry of a request by a user the computer operates to determine if the request is directed to the network UICC or to another address step . Typically the operating system of the computer can be configured to determine this. Only the connection to the network UICC is passed through the proxy running on the computer. Other connections to the Internet from the web browser go directly to the Internet without passing to the web proxy on the computer. If the user types Axalto Network SIM Card i.e. the name established for the network UICC in step as the host name in the web browser address bar to connect to the network UICC because the corresponding IP address of the Axalto Network SIM Card is the loopback address 127.0.0.1 i.e. the address pointing to the web server on the local machine here computer the operating system of the computer forwards the HTTP requests to the web proxy server running on the computer and waiting on the web server port step . Assuming that the computer does not have another web server running on it the web proxy server would be invoked as the web server for computer .

The proxy server on the computer uses the RAPI modules and respectively to invoke the proxy server on the mobile device step . The proxy on the mobile device opens a TCP socket connection using the TCP IP layer of the communication module see to connect to the web server on the network UICC step . Thus the HTTP requests and responses are transmitted between the web server on the network UICC and the web browser on the computer with the help of the two proxies and .

In addition to the communications modules described herein above for implementing the various layers of the communications stack supported by the handset the handset contains a USB or IR Driver for receiving and sending data on the USB or IR link between the handset and the computer specifically the computer side USB IR driver .

After establishing the network connection between the mobile device and the computer the utility functions of the RAS modules and are used to configure the routing table on the computer and routing table on the handset steps and respectively. For example a user of the computer may make calls to the route utilities to add entries to the routing table and similarly on the handset . On Windows systems the routing table entries are created using the Route command. With the two routing tables and updated the handset may act as a router between the computer and the network UICC and enables the computer to send packets intended for the network UICC via the handset . A requirement for the RAS method is that the IP address of the network UICC must be routable. Thus private and automatic IP addresses being un routable may not be used. After the routing tables and are configured the user can use the web browser on the computer to access the network UICC in the mobile device . Upon receipt of an http request the TCP IP module on the handset and directed by the IP router using the routing table routes step the request to the network UICC . If the packet is intended for the network UICC as indicated by the packets destination address the IP router directs the TCP IP module to direct the packet to the link layer module . The network UICC receives the TCP IP packets on a communications module implementing a link layer which encompasses the Peer I O client and UICC Link Layer Module a PPP layer and a TCP IP layer .

In another aspect of the invention because the network UICC as described herein above used in conjunction with a handset as described herein above has the ability to act as an autonomous network node it is possible to extend the network UICC and handset to allow a network connection between the network UICC and any webserver on the Internet. Consider the network diagram of . A web server may be located on the remote network node . According to an embodiment of the invention the network UICC may connect directly to that web server.

Usually a mobile device such as a handset connects to the Internet through GPRS WLAN or a desktop computer with USB cable or other type of connection. The handset usually has a private IP address that cannot be seen from the Internet because the handset is usually behind a firewall or a NAT server of the mobile operator or local LAN. The same is true for the network SIM in the handset the network SIM has a private IP address that cannot be seen from the Internet.

If the handset has the Internet connection and the handset has a NAT service the network SIM will have also the Internet connection from to the NAT service in the handset. Hitherto even with the latest version of Microsoft Windows Smartphone 2003 this feature is not available for the Smartphone. Until new versions of mobile phone operating systems will have the NAT service feature enabled other solutions are needed.

Until a connection has been established the web proxy waits on the port 8080 from the web client on the network UICC step .

When the web client in the network UICC wants to establish an SSL connection with a remote server over the Internet for example to the Amazon.com web server the network UICC opens a TCP connection to the handset on the port 8080 where the web proxy listens by issuing the following request on port 8080 step 

From this request the web proxy determines the url of the web server that the web client on the network UICC desires to connect e.g. to the www.amazon.com server and that the connection is to be on the port 443. Having determined the destination the web proxy establishes a new TCP connection to the web server on the port 443 step . Port 443 is the port used for SSL connections. If the TCP connection with the Amazon server is achieved successfully the web proxy answers to the web client on the network UICC with the following response step 

This response indicates that the connection to the remote server has been established. The web client can begin the SSL session with data traffic with the remote server . The web proxy on the handset just moves data back and forth between the web client on the network UICC and the remote server . The tunneling web proxy service merely moves encrypted data between the UICC and the web server and does not affect the secure transaction.

The first request message from the network UICC to the web proxy only has the mission to inform the web proxy the name of the remote server and the port corresponding to the type of the session to follow. The web proxy service can work for the normal HTTP session between the web client on the network UICC and the remote web server on the Internet as well. In this case the port followed by the remote server name is 80 instead of 443 the following data sent by the web client in the network UICC is the normal HTTP request.

With the HTTP proxy tunneling service described above the web client in the network UICC can establish a direct secure SSL or TLS or a normal HTTP session to any web server on the Internet. In the case of SSL TLS connection the security is the same as without the tunneling service.

Mobile payments play an important role in e commerce because of the popularity of mobile devices and the integration of mobile networks into the Internet. In addition the mobile device is a personal device that users carry with them all the time. In these mobile devices the SIM card is the most secure place to store important personal information. For example the SIM card can store the user s bank credit card information to make a mobile payment.

The invention provides a method that turns the SIM card in the mobile device into a real autonomous network node. The network UICC with its own IP address and an IP TCP HTTP protocol stack is a true network node on the Internet. So enabled the network UICC may make use of network security protocols for secure communication with other network nodes. In addition the network UICC can support other applications on top of the Internet protocols.

With a network UICC on the handset a user can use the web browser on the handset or on a host computer to buy goods or services on the Internet but the payment can always be done directly between the network UICC and the merchant server. This provides a secure mobile payment method.

Users can use the web browser on the mobile device or on the computer to access the network UICC to customize personal information such as the data held in a phone book or a calendar or SMS messages. The mobile network operators can use the HTTP protocol to update or modify services and information in the SIM of the mobile device. Deploying the applications on the network UICC will be the same as normal web server applications.

With the web server on the network UICC web pages accessed by the web browser in the handset can embed some script codes e.g. Java script that open another HTTP connection to the network UICC to take the necessary personal information of the user to fill in some web forms. Therefore the user will not need to enter it manually and the information can be encrypted before passing to the server.

Applications on the mobile devices that communicate with the SIM can use the socket API to open a network connection to the SIM rather than using a limited SIM manager API or some specific API provided by a specific mobile device operating system. Because most of the operating systems on the smart mobile device support socket interface these applications using socket API will be the same for most mobile devices.

The network UICC can carry complete user interface in the handset . Thus the handset users can have the same user interface regardless of which handset they have.

Although specific embodiments of the invention have been described and illustrated the invention is not to be limited to the specific forms or arrangements of parts so described and illustrated. The invention is limited only by the claims.

