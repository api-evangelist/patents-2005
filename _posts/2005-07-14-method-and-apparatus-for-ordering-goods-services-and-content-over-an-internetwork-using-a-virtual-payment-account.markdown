---

title: Method and apparatus for ordering goods, services and content over an internetwork using a virtual payment account
abstract: A virtual payment system for ordering and paying for goods, services and content over an internetwork is disclosed. The virtual payment system comprises a commerce gateway component () and a credit processing server component (). The virtual payment system is a secure, closed system comprising registered sellers and buyers. A buyer becomes a registered participant by applying for a virtual payment account. Likewise, a seller becomes registered by applying for a seller account. A buyer can instantly open an account on-line. That is, the credit processing component () immediately evaluates the buyer's virtual payment card application and assigns a credit limit to the account. Once an account is established, a digital certificate is stored on the registered participant's computer. The buyer can then order a product, i.e., goods, services or content from a seller and charge it to the virtual payment account. When the product is shipped, the seller notifies the commerce gateway component (), which in turn notifies the credit processing server that applies the charges to the buyer's virtual payment account. The buyer can settle the charges using a prepaid account, a credit account, or by using reward points earned through use of the virtual payment card. A buyer may create sub-accounts.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07908226&OS=07908226&RS=07908226
owner: eCharge Corporation
number: 07908226
owner_city: Seattle
owner_country: US
publication_date: 20050714
---
This application is a divisional of U.S. patent application Ser. No. 10 663 443 filed Sep. 16 2003 which is a continuation of U.S. patent application Ser. No. 10 338 133 filed Jan. 6 2003 which is a continuation of U.S. patent application Ser. No. 09 578 395 filed May 25 2000 which is a continuation in part of U.S. patent application Ser. No. 09 370 949 filed Aug. 9 1999 priority from the filing date of which is hereby claimed under 35 U.S.C. 120. U.S. patent application Ser. No. 09 370 949 also claims the benefit of provisional U.S. Patent Application No. 60 140 039 filed Jun. 18 1999 the benefit of which is hereby claimed under 35 U.S.C. 119.

This invention generally relates to a method and apparatus for ordering goods services and content from one or more other computers connected via common communications links and more particularly to a method and apparatus for ordering goods services and content from computers connected to the Internet using a virtual payment account.

Communication networks are well known in the computer communications field. By definition a network is a group of computers and associated devices that are connected by communications facilities or links. Network communications can be of a permanent nature such as via cables or can be of a temporary nature such as connections made through telephone or radio links. Networks may vary in size from a local area network LAN consisting of a few computers or workstations and related devices to a wide area network WAN which interconnects computers and LANs that are geographically dispersed to a remote access service RAS which interconnects remote computers via temporary communication links. An internetwork in turn is the joining of multiple computer networks both similar and dissimilar by means of gateways or routers that facilitate data transfer and conversion from various networks. A well known abbreviation for the term internetwork is Internet. As currently understood the capitalized term Internet refers to the collection of networks and routers that use the Transmission Control Protocol Internet Protocol TCP IP to communicate with one another.

A representative section of the Internet is shown in Prior Art in which a plurality of local area networks LANs and a wide area network WAN are interconnected by routers . The routers are generally special purpose computers used to interface one LAN or WAN to another. Communication links within the LANs may be twisted wire pair or coaxial cable while communication links between networks may utilize 56 Kbps analog telephone lines or 1 Mbps digital T 1 lines and or 45 Mbps T 3 lines. Further computers and other related electronic devices can be remotely connected to either the LANs or the WAN via a modem and temporary telephone link. Such computers and electronic devices are shown in as connected to one of the LANs by a dotted line. It will be appreciated that the Internet comprises a vast number of such interconnected networks computers and routers and that only a small representative section of the Internet is shown in .

The Internet has recently seen explosive growth by virtue of its ability to link computers located throughout the world. As the Internet has grown so has the World Wide Web WWW . The WWW is a vast collection of interconnected or hypertext documents also known as Web pages written in HyperText Markup Language HTML that are electronically stored at Web sites throughout the Internet. A Web site is a server connected to the Internet that has mass storage facilities for storing hypertext documents and that runs administrative software for handling requests for those stored hypertext documents. A hypertext document normally includes a number of hyperlinks i.e. highlighted portions of text that link the document to another hypertext document possibly stored at a Web site elsewhere on the Internet. Each hyperlink is associated with a Uniform Resource Locator URL that provides the exact location of the linked document on a server connected to the Internet. Thus whenever a hypertext document is retrieved from any Web server the document is considered to be retrieved from the WWW.

A user is allowed to retrieve hypertext documents from the WWW i.e. a user is allowed to surf the Web via a Web browser. A Web browser such as NETSCAPE NAVIGATOR or MICROSOFT Internet Explorer is a software program implemented by a Web client i.e. a user s computer to provide a graphical user interface to the WWW. Upon request from the user via the Web browser the Web client accesses and retrieves the desired hypertext document or Web page from the appropriate Web server using the URL for the document and a protocol known as HyperText Transfer Protocol HTTP . HTTP is a higher level protocol than TCP IP and is designed specifically for the requirements of the WWW. It is used on top of TCP IP to transfer hypertext documents between servers and clients.

At the advent of the WWW the information stored on the Internet was freely transferred back and forth between those parties interested in the information. However the WWW is quickly becoming a channel of commercial activity whereby a vast number of companies have developed their own Web sites for advertising and selling their goods and services. Commercial activity that takes place by means of connected computers is known as electronic commerce or e commerce and can occur between a buyer and a seller through an on line information service the Internet a bulletin board system BBS or between buyer and seller computers through electronic data interchange EDI . A buyer also referred to as a user consumer or purchaser in the context of e commerce may visit the Web site of a company or seller i.e. retrieve the hypertext documents located on the Web server of a particular seller and order any good or service that the seller has to offer. If that good or service is in the form of electronically stored information such as a book a video a computer game etc. the buyer may simply download the good or service from the company s Web site to his or her computer for immediate consumption and use. If the good or service is of a more tangible nature such as an appliance or article of clothing ordered from an on line catalog a more conventional method of delivery e.g. the postal service or a common carrier is used.

A common method of payment for e commerce purchases is electronic credit or e credit. E credit is a form of electronic commerce often involving credit card transactions carried out over the Internet. Traditional e credit purchases are paid for by a major credit card wherein the buyer is required to transmit his or her credit information for example an account number and expiration date over the Internet to the company s Web site. Many buyers are concerned about the security and confidentiality of such electronic transmissions. Furthermore many buyers do not have a major credit card with which to make such purchases. Alternative billing systems such as providing credit information by facsimile or postal service are much less convenient and often prove enough of a barrier to prohibit the sale altogether. Finally the traditional methods of billing and payment do not adequately protect the seller or buyer from fraudulent purchases.

Accordingly a more effective method and apparatus for ordering and billing for goods services and content over a network and ultimately the Internet is needed. The method and apparatus should protect the seller and buyer from fraudulent purchases. Additionally the method and apparatus should provide an element of non repudiation to all transactions. The method and apparatus should also prevent buyers with histories of nonpayment from purchasing additional goods services and or content. Finally the method and apparatus should allow a buyer without a major credit card to purchase goods services and content over the network.

The present invention provides a computer program for ordering products from computers connected to the Internet wherein the buyer is automatically billed for the ordered good service or content based on a virtual payment account maintained by a commerce gateway.

In accordance with other aspects of the present invention a commerce gateway interfaces with a credit processing server to handle the monetary aspects involved in purchasing goods services and or content. The credit processing server interfaces with one or more financial institutions that physically handle the buyer s account. For example a buyer can pay for purchases electronically by transferring finds from a bank account held by the buyer at a financial institution or by prepaying for the purchases by sending a check to the provider of the commerce gateway. Alternatively reward points earned by using the virtual payment account can be applied towards purchases.

In accordance with still other aspects of the present invention the credit processing server or commerce gateway communicates with one or more identity bureaus in order to determine a buyer s identity before creating a virtual payment account.

In accordance with still other aspects of the present invention the credit processing server communicates with one or more credit bureaus in order to determine a credit limit for a buyer s virtual payment account.

In accordance with yet other aspects of the present invention a virtual payment account can have associated sub accounts. A sub account can have a credit limit that is less than the main account credit limit. A sub account can limit the seller sites from which goods services and or content can be purchased.

In accordance with further aspects of the present invention purchases must be made by a registered buyer from a registered seller. Security is ensured via authentication of the parties to a transaction. Authentication can be performed by verification of a digital certificate or a digital signature or by alternate authentication methods.

As previously described and shown in the Internet is a collection of local area networks LANs wide area networks WANs remote computers and routers that use the Transmission Control Protocol Internet Protocol TCP IP to communicate with each other. The World Wide Web WWW on the other hand is a vast collection of interconnected electronically stored information located on servers connected throughout the Internet . Many companies are now selling goods services and access to their premium content over the Internet using the WWW. In accordance with the present invention a buyer orders goods services and or content referred to interchangeably herein as products over the Internet via a Web browser and is automatically billed for the purchase using his or her virtual payment account without transferring sensitive account information such as account number and expiration date over the Internet . The virtual payment account allows a buyer to settle transactions of the virtual payment account using a prepaid or credit account. In one actual embodiment of the present invention the virtual payment account uses bank electronic funds transfers for example using the Automated Clearing House ACH standard which is maintained by the National Automated Clearing House Association NACHA the standards group promoting electronic commerce standards. In another embodiment the virtual payment account can be funded using a traditional paper check with the buyer mailing a check e.g. via the postal service to the providers of the virtual payment account system. Alternatively funds transfer services and electronic bill payment services such as CHECKFREE may be used. Reward points earned through use of the virtual payment account can also be applied to the buyer s virtual payment account to pay for products.

More specifically as shown in the buyer purchases goods services and or premium content from a seller server i.e. a computer owned by the seller which sponsors or sells the product by placing an order with the seller server from a computer connected to the Internet . The order is processed and confirmed by a commerce gateway connected to a LAN located elsewhere in the Internet . The commerce gateway is also connected to a credit processing server via the LAN . The credit processing server communicates with one or more identity bureaus to verify the identity of the buyer. After verifying the identity of the buyer the credit processing server communicates with one or more credit bureaus in order to determine the credit worthiness of a buyer.

In one actual embodiment of the present invention described herein the identity bureau is a server provided and maintained by an agency for verifying the identity of the buyer and the credit bureau is a server provided and administrated by a credit agency for processing credit reports for buyers. The identity bureau and credit bureau can be located on the LAN or elsewhere on the Internet .

In yet another embodiment the credit processing server can establish a point to point connection with a remote identity bureau or credit bureau that is not connected to either the LAN nor the Internet . It will be appreciated that other methods of communication between the credit processing server and identity bureau or credit bureau may be used for example a secure Virtual Private Network VPN maintained and operated by the identity bureau or credit bureau exclusively for the purpose of identity checking or credit rating respectively.

Finally in yet other embodiments the identity and credit bureaus may not actually offer a server at all. Rather a customer service representative for the identity or credit bureaus may process the identity or credit report and manually provide the report to an administrator of the present invention who manually enters the report to the credit processing server .

The credit processing server also communicates with one or more financial institutions for the purpose of obtaining the buyer s payment i.e. a transfer of funds for the purchase of products. As is the case with the identity and credit bureaus the financial institutions may be other servers in electronic communication with the credit processing server customer service representatives in more traditional communication with the credit processing server or some combination thereof.

Finally in addition to the commerce gateway the LAN includes an administrative computer used to administer buyer and seller information and services provided by the commerce gateway and credit processing server .

In the exemplary embodiment of the present invention shown in the LAN is insulated from the Internet by a firewall that tracks and controls the flow of all data passing through it. The firewall protects the LAN from malicious in bound data traffic. The LAN is a bus network interconnecting the various computers and servers. The LAN shown in can be formed of various coupling media such as glass or plastic fiberoptics cables coaxial cables twisted wire pair cables ribbon cables etc. In addition one of ordinary skill in the art will appreciate that the coupling medium can also include a radio frequency coupling media or other intangible coupling media. Any computer system or number of computer systems including but not limited to workstations personal computers laptop computers personal data assistants servers remote computers etc. that is equipped with the necessary interface hardware may be connected temporarily or permanently to the LAN and thus the Internet . However if temporarily connected via a telephone link to another device connected to the LAN the interface hardware of both the remote computer and the device to which it is connected must contain a modem.

Also shown in is an exemplary authentication device whose purpose will be described in more detail below. In one embodiment of the current invention the authentication device may be a personal data assistant PDA with a wireless modem. However those of ordinary skill in the art will appreciate that the authentication device may be a laptop computer a cellular telephone a pager or any device capable of receiving a remote message.

Finally those of ordinary skill in the art will recognize that while only one buyer computer and one seller server are depicted in numerous buyer computers and seller servers equipped with the hardware and software components described below may be connected to the Internet . It will also be appreciated that the term buyer used herein can be applied to any purchaser of goods and or services and can be applied equally to an individual non commercial purchaser a business or a commercial purchaser. In other words the term buyer can apply to any purchaser and the term seller can apply to any vendor or merchant be they on individual non commercial seller a business or a commercial seller.

The buyer s computer also includes a processing unit a display and a memory . The memory generally comprises a random access memory RAM a read only memory ROM and a permanent mass storage device such as a disk drive. The memory stores the program code and data necessary for ordering and paying for a product over the Internet in accordance with the present invention. More specifically the memory stores a Web browser component such as NETSCAPE NAVIGATOR or MICROSOFT Internet Explorer and a buyer authenticator component formed in accordance with the present invention for authenticating a buyer as a registered participant of the virtual payment system prior to performing any virtual payment account transactions. It will be appreciated that these components may be stored on a computer readable medium and loaded into memory of the buyer computer using a drive mechanism associated with the computer readable medium such as a floppy or DVD CD ROM drive.

As will be described in more detail below the products ordered by the buyer are supplied by a seller server described next following authorization from a remote server i.e. a commerce gateway described later located elsewhere on the Internet e.g. on LAN illustrated in . depicts several of the important components of the seller server . Those of ordinary skill in the art will appreciate that the seller server includes many more components than those shown in . However it is not necessary that all of these generally conventional components be shown in order to disclose an illustrative embodiment of practicing the present invention. As shown in the seller server includes a network interface for connecting to a LAN or WAN or for connecting remotely to a LAN or WAN. Those of ordinary skill in the art will appreciate that the network interface includes the necessary circuitry for such a connection and is also constructed for use with the TCP IP protocol the particular network configuration of the LAN or WAN it is connecting to and a particular type of coupling medium.

The seller server also includes a processing unit a display and a memory . The memory generally comprises a random access memory RAM read only memory ROM and a permanent mass storage device such as a hard disk drive tape drive optical drive floppy disk drive or combination thereof. In one actual embodiment of the present invention the memory contains a product database that includes the electronically stored good or service ordered by the buyer. In other embodiments of the present invention the product database stores the premium content ordered by the buyer i.e. the hypertext documents or other electronically stored information considered of monetary value by the seller. In yet other embodiments of the present invention the goods may be tangible goods not capable of being electronically stored in which case the product database includes descriptive information of the products.

The memory also contains a commerce engine component for purchasing a product from a seller Web site. The commerce engine component may be an existing commerce engine such as MICROSOFT Site Server which allows for the payment of products ordered over the Internet using a major credit card e.g. VISA or MASTERCARD . A commerce gateway adapter component is also provided to allow the commerce engine component to interface with the commerce gateway . The commerce gateway adapter component uses and provides application programming interface API calls to interface with the commerce engine . Also included in memory is a seller authenticator component for verifying that the seller is an authorized or registered seller of the virtual payment system of the present invention. It will be appreciated that the product database the commerce engine component the commerce gateway adapter component and the seller authenticator component may be stored on a computer readable medium and loaded into memory of the seller server using a drive mechanism associated with the computer readable medium such as a floppy or CD ROM drive. Finally memory stores a Web server component for handling requests for stored information received via the Internet and the WWW.

The commerce gateway also includes a processing unit a display and a memory . The memory generally comprises a random access memory RAM a read only memory ROM and a permanent mass storage device such as a hard disk drive tape drive optical drive floppy disk drive or combination thereof. The memory stores the program code and data necessary for authorizing a seller server to supply products to buyers and obtaining payment for the products via a credit processing server in accordance with the present invention. More specifically the memory stores a transaction server component formed in accordance with the present invention for authorizing a seller to supply the ordered product and obtaining payment for the ordered product from the credit processing server . Memory also contains an identity bureau adapter formed in accordance with the present invention for verifying a buyer or seller s identity. Also stored in memory is an enrollment server component formed in accordance with the present invention for determining the credit worthiness of an applicant. An account identification container generator component is also stored in memory for determining an internal account identification. A report server is also stored in memory for processing request for reports and consolidating information for requested reports. Also stored in the memory is a credit processing server adapter component for communicating with a credit processing server described below. It will be appreciated that the transaction server component the credit processing server adapter component the account identification container generator component and the enrollment server component may be stored on a computer readable medium and loaded into memory of the commerce gateway using a drive mechanism associated with the computer readable medium such as floppy or CD ROM drive. The memory also stores a Web server component for handling requests for stored information received via the Internet and the WWW.

The credit processing server also includes a processing unit a display and a memory . The memory generally comprises a random access memory RAM a read only memory ROM and a permanent mass storage device such as a hard disk drive tape drive optical drive floppy disk drive or combination thereof. The memory stores the program code and data necessary for authorizing and securing payment for products purchased using a virtual payment account in accordance with the present invention. More specifically the memory of the credit processing server stores credit processing sub systems including an account billing sub system for billing a buyer for products purchased using a virtual payment account a payment processing sub system for communicating with a financial institution in order to process payments received for purchases made using a virtual payment account and an account enrollment sub system for determining the credit limit for an applicant as determined by information received from one or more credit bureaus .

Also stored in memory are an account database and a financial database used to store data required for the account billing sub system the payment processing sub system identity bureau adapter and the account enrollment sub system to perform their required functions. It will be appreciated that the account billing sub system the payment processing sub system the account enrollment sub system the account database identity bureau adapter and the financial database may be stored on a computer readable medium and loaded into memory of the credit processing system using a drive mechanism associated with the computer readable medium such as floppy or DVD CD ROM drive. It will also be appreciated that the account billing sub system the payment processing sub system and the account enrollment sub system can comprise either in full or in part existing traditional credit card payment systems.

Once a VPA is set up the virtual payment system of the present invention is a closed system that provides buyers a secure method for purchasing products over the Internet. The closed system includes only a registered buyer s computer a registered seller server the commerce gateway administered by the provider of the virtual payment system and the credit processing server which can also be administered by the provider of the virtual payment system . Since the account information necessary for charging the buyer for the purchase is already in the possession of the commerce gateway and the credit processing server the closed system of the present invention allows registered buyers to purchase products from registered sellers without transferring sensitive account information to the sellers over the Internet. In order to become a member of the virtual payment system of the present invention a buyer becomes a registered user by obtaining a virtual payment account. illustrates the actions taken by the buyer s computer the commerce gateway the credit processing system and the credit bureau to create a virtual payment account for a buyer. The interactions of the various components are illustrated and described in detail later for various transactions performed by the present invention with reference to the diagrams shown in and . As shown in the process of applying for a virtual payment account is initiated when a buyer requests an application form via the Internet using the Web browser installed on the buyer s computer . The buyer may apply for a virtual payment account directly from a virtual payment account Web site located at the commerce gateway or indirectly from a registered seller site located at the seller server . Once the request for the application form is received by the commerce gateway the commerce gateway provides buyer computer the application form so that the buyer can complete the form displayed in the Web browser of the buyer computer .

Upon completion of the application form the buyer computer submits the completed application form to the commerce gateway . The commerce gateway then submits the application data from the completed form to the credit processing server for account and credit limit authorization. The credit processing server verifies the application data by requesting identity information from an identity bureau . The identity bureau provides the requested identity information and if the provided identity information corresponds to the application data then the credit processing server requests credit information about the buyer from a credit bureau . However in one actual embodiment of the present invention if the application data does not conform to the identity information from the identity bureau then no virtual payment account is created and the application is forwarded to customer service for review for possible fraud detection. As noted above in the actual embodiment of the present invention the identity bureau is a server provided and maintained by a agency for verifying identity and the credit bureau is a server provided and administrated by a credit agency for processing credit reports. Hence the credit processing server requests the desired identity and credit information electronically e.g. via appropriate database queries etc. from the identity bureau and credit bureau .

Returning to the illustrated embodiment the credit bureau provides the requested credit information to the credit processing server via the connection with the credit processing server . The credit processing server then evaluates the application identity and credit information by combining the identity information from the identity bureau and the credit information received from the credit bureau with application data in order to determine a credit score . If the score exceeds a certain threshold a credit limit is set and the virtual payment account is created . If the score falls below the threshold a virtual payment account may still be created however all purchases must be prepaid and the account information is forwarded to a customer service representative for review for a possible later grant of credit.

Once the virtual payment account is created the credit processing server returns the result of the evaluation e.g. approval denial prepaid account only credit limit etc. to the commerce gateway . The commerce gateway then requests that the buyer authenticator on the buyer computer generate a public key encryption key pair comprising a secret key and a public key. The buyer authenticator then submits the public key to the commerce gateway . The commerce gateway digitally signs the public key to generate a digital certificate . As will be appreciated by those of ordinary skill in the art a digital certificate comprises a public key digitally signed by a trustworthy entity. The commerce gateway sends the digital certificate and an application result page to the buyer computer for display via the buyer computer s Web browser . Finally the buyer computer stores the digital certificate for use later with the virtual payment account.

It will be appreciated that the digital certificate may be stored in the memory of the buyer computer or on some form of device capable of interfacing with the buyer computer such as but not limited to a secure token smart card or as an encrypted file on some other computer readable medium. It will be appreciated by those of ordinary skill in the art that the order of the operations in may be altered without substantially affecting the operation of the present invention. For example the buyer may be notified of the application results before generating the public key encryption pairs.

After the buyer completes the application form contained in the Web pages and shown in and the application is processed by the credit processing server a Web page as shown in is transferred to and displayed by the buyer computer s Web browser which notifies the buyer of the results of the application process i.e. account approval and details of his or her virtual payment account including the account credit limit. Once the account approval is complete and the account accepted by the buyer the commerce gateway then transmits the buyer authenticator component which as described above generates a public key encryption key pair to the buyers computer for installation as shown in . shows an exemplary Web page that allows the buyer to activate their virtual payment account.

Once a virtual payment account has been approved and a credit limit set as described above the account can be customized by the buyer. Account information is then stored in the account database of the credit processing server . illustrate an exemplary set of Web pages downloaded from the commerce gateway and displayed by the Web browser of the buyer s computer for customizing the buyer s virtual payment account. illustrate Web pages and for main account customization. As shown in the buyer may customize his or her virtual payment account contact information and preferences. illustrates that the main account holder is able to configure access controls for their account and all sub accounts as shown in Web page .

As shown in the buyer may also customize sub accounts for his or her own use or for use by a business partner spouse and or children. As will be described in more detail below the buyer may then impose his or her own spending limits on the sub accounts. In one actual embodiment reward points accrue in the main account so that the buyer can transfer the reward points to sub accounts. It will be appreciated that in other embodiments reward points could accrue to individual sub accounts if the buyer so desires. Reward or reward points can later be used for example to make a payment for a purchase to receive seller discounts to purchase frequent flyer miles etc. It will be appreciated by those of ordinary skill in the art that reward points can be earned by the buyer and applied to his or her virtual payment account in a myriad of different ways.

It will also be appreciated that a similar process is performed for a seller to become an authorized or registered seller. In one embodiment a seller can apply to become a participant by completing an application form on line. In another embodiment a seller applies to become a participant of the system using a more traditional manual application procedure. In yet another embodiment some combination of an on line and manual process is used. It will be appreciated that if the seller application process is performed in whole or in part on line a Web browser component not shown in is used to display Web pages on the seller s computer display . The seller forms a contract with the provider of the commerce gateway . In one exemplary embodiment this contract includes terms such as the billing period and the fee that will be paid to the commerce gateway provider. Since a seller is selling a product to a buyer who has a virtual payment account the seller will not have sub accounts in the same sense that a buyer has sub accounts. However a seller selling different types of data can have different accounts. For example a book store may have a general account and one or more restricted accounts for example the restricted accounts may prohibit sales of adult products to minors. This can be in the form of a rating system e.g. G PG PG13 NC17 R etc. . In a similar manner to the buyer application process once a seller has been approved and the seller account customized a digital certificate is installed on the seller s computer to identify the seller as a registered seller in the virtual payment system. The digital certificate is used in combination with a secret key generated by the seller server and a public key generated by the seller server and sent to the gateway to encrypt decrypt messages for greater security.

It will be appreciated as described earlier that a seller can apply for a buyer account. In other words a seller can purchase products as the owner of a virtual payment account.

The illustrated embodiment also allows a buyer to create a custom package of sub accounts. As will be readily recognized by those of ordinary skill in the art the buyer may be provided with any number type or combination of sub accounts depending on the desires of those providing and administrating the virtual payment system of the present invention.

The buyer can add sub accounts e.g. supplemental users young shoppers etc. via the Web pages shown in . Sub accounts can be customized for young shoppers as shown in for example by setting spending limits for the young shopper and identifying only those seller Web sites from which the young shopper can purchase products.

As will be described in more detail below once the virtual payment account has been authorized and customized a digital certificate is transferred by the commerce gateway and installed on the buyer computer . The digital certificate is then used in subsequent transactions as a unique credential to identify the buyer as a registered holder of a virtual payment account. In an actual embodiment of the present invention a buyer or seller is identified as a registered user of the virtual payment system by the commerce gateway verifying the commerce gateway s digital signature on the digital certificate associated with the buyer s virtual payment account

It will be appreciated that several levels of security can be imposed on on line transactions. Moving from the lowest level to the highest level there can be 1 no security restrictions imposed 2 minimal security such as account name and password verification 3 intermediate security such as a digital certificate or secret key 4 high security such as a transaction signed with a digital signature using the buyer s secret key or 5 maximum security such as a digital signature and additional access controls such as an account number a last purchase verification smart cards secure tokens or some combination thereof. As will be described later in the actual embodiment of the virtual payment system described herein the term digital certificate is used to describe the authorization used however it will be appreciated that a higher level of security such as a digital signature or a digital signature with additional access controls may be desired in order to ensure the highest level of security for all parties involved i.e. the buyer the seller the commerce gateway and the credit processing server in virtual payment account transactions.

In one exemplary embodiment of the security transaction the seller server digitally signs a purchase offer with a certificate issued by the commerce gateway and sends it to the buyer computer the buyer computer digitally signs the purchase offer with a certificate issued by the commerce gateway and sends it back to the seller server the seller server then forwards the doubly signed purchase offer to the commerce gateway the commerce gateway verifies both signatures and if they are both valid and the transaction is permissible then signs the doubly signed offer and returns the resulting triply signed purchase offer to the seller server the seller server verifies the commerce gateway s signature and if it is valid then the purchase transaction is complete. In the aforementioned example the seller server may notify the buyer computer or they may not.

Once a buyer has created and customized his or her virtual payment account he or she can immediately order products via the Internet if he or she was granted credit during the account application process. If however the buyer s virtual payment account is only a prepaid account prepayment must be made before the buyer can order products. In an alternate embodiment the buyer with only a prepaid account can order products however shipment of the product will be held until the prepaid account is sufficiently funded to cover the purchase. More specifically this would allow any registered buyer to have a form of digital layaway and by ordering products directly from the Web site of any registered seller. It will be appreciated that in yet another embodiment buyer and seller will use the same type of virtual payment accounts and that any buyer can therefore act as a seller and vice versa. Additionally it will be appreciated that a seller can be an auction Web site in which a buyer uses his or her virtual payment account to pay for the goods services and or content purchased from the auction Web site.

In one actual embodiment of the present invention depicted in the buyer may surf the Web and visit a registered seller s Web site such as Virtual Store using the Web browser . Once the buyer visits a registered seller s Web site the buyer may order and pay for products offered from that Web site using his or her virtual payment account. More specifically a buyer using buyer computer and Web browser may retrieve the Web page shown in from the seller Web site fictitiously known as Virtual Store. The buyer makes a selection of a particular product by manipulating a graphics cursor with a pointing device such as a mouse above the selection and single clicking. It will be appreciated that other pages for example a query page in which the buyer requests products by a keyword may be displayed. It will also be appreciated that the Web page shown in is a simplified example. It is common for a seller site to allow a buyer to select multiple products and place them in a shopping cart. The buyer can then view the items in the cart and if desired remove items from the cart. Once the buyer has selected the desired items for purchase the buyer indicates a desire to purchase the selected items for example by clicking an OK or a Buy button. In the simplified example shown in the buyer selects an item such as the Virtual Store Personal Computer and presses the Order button to initiate the purchase transaction.

After initiating the purchase transaction the seller server provides the Web browser of the buyer s computer with the Web page shown in which requests shipping information such as a street address from the buyer. Additionally the Web Page includes various payment options i.e. major credit cards such as VISA or MASTERCARD with electronic transmission of credit information. In accordance with the present invention a virtual payment account option is also displayed as a payment option for registered sellers. After entering the shipping and payment information and selecting the virtual payment option the buyer can continue by clicking on the Purchase option . In an actual embodiment of the present invention the buyer authenticator displays a window requesting the buyer to select their choice of accounts along with an authenticating pass phrase . After selecting an account and entering the correct pass phrase the buyer clicks Continue to proceed with the purchase. In response the seller server calculates the total cost of the order including tax and shipping and handling and the buyer is presented with a confirmation screen as shown in . After authorizing the purchase the buyer may be presented with a payment confirmation screen as shown in . Additionally the buyer may be presented with an order confirmation screen as shown in .

The buyer authenticator determines whether a buyer is a registered holder of a virtual payment account or put another way a registered participant in the closed virtual payment system of the present invention. The logic of begins in a block and proceeds to a block where an authentication request and container are received from the Web browser . The container includes transaction information such as purchase detail identification of the parties such as a buyer identification which identifies the buyer e.g. the digital certificate previously issued to the buyer when he or she created the virtual payment account as described above and a seller identification e.g. the digital certificate issued to the seller upon creation of a seller account and context such as transaction date and time. It will be appreciated that the container is initially empty and data is then added to the container by various components. As stated earlier embodiments of the invention implement the buyer authenticator in the Web browser . In one actual embodiment the buyer authenticator is an applet operating from within the Web browser .

Next in decision block a test is made to determine if a digital certificate is installed on the buyer computer . The digital certificate may be stored in the buyer computer memory or one some other device associated with the buyer computer such as a secure token a smart card or encrypted on some computer readable medium. It will be appreciated that other methods of digital identification can be used. If the digital certificate is installed the digital certificate identification is inserted into the authentication container and the authentication request and container are returned to the Web browser in blocks and . The container can be any one of a variety of data formats for example one embodiment of the present invention a proprietary protocol is used. In an actual embodiment of a present invention a public key generated by the buyer s computer and signed by the commerce gateway thereby forming a digital certificate is also inserted into the container. The secret key is never transmitted anywhere in the virtual payment system of the present invention. The combination of the secret key and the digital certificate provides a heightened level of security to the buyer authentication process. A digital signature is generally a document that has been encrypted by the secret key of a public key pair. Only the public key of the same key pair will be able to decrypt the document to its original form. This is particularly useful in demonstrating that only the holder of the secret key is able to sign encrypt the document. In practical terms signing a large document using public key cryptography can be very time consuming. Almost equally effective is creating a cryptographic message digest of the document and then encrypting the digest with the secret key. Therefore those of ordinary skill in the art will appreciate that anyone knowing the corresponding public key and the digest algorithm will be able to verify that the message was not altered and that it originated from the holder of the corresponding secret key. It will be appreciated that the digital certificate as used herein refers to an authentication identifier that is recognized by the provider of the virtual payment account that adheres to the provider s non repudiation purchase policies.

If however in decision block it is determined that a digital certificate is not installed on the buyer computer the logic proceeds to a decision block where a test is made to determine if certificate not present processing should be performed. Certificate not present processing allows a buyer to manually enter identification information when a digital certificate is not present. The identification information can include information such as an e mail address a password and personal information for example a mortgage payment amount. If the result of decision block is positive the logic proceeds to an alternate authentication in block . The alternate authentication is shown in more detail in and described next.

The logic of begins at a block and proceeds to block where the authorization options are displayed to the buyer. Next it is determined in a block if the buyer requested an authorization code as the alternate authorization mechanism. If the buyer did choose to receive an authorization code then the Web browser on the buyer computer is sent an authorization code entry form in a block and the authorization code is sent to an authentication device in a block . Exemplary authentication devices or are shown in respectively. After receiving the authorization code the buyer enters the code in the authorization code entry form in a block .

If however at block the buyer decides not to request an authorization code then from block the logic flows to a block where an interactive authentication Web form is sent to the Web browser on the buyer s computer . An exemplary interactive authentication Web form is shown in . Next in a block the buyer completes the interactive authentication Web form .

Next the completed authorization entry form from block or is transmitted to the commerce gateway in a block . The logic then proceeds to a block where it is determined whether the authentication was successful. If the authentication was successful the logic ends at a block returning a successful authentication. If the authentication was unsuccessful the logic ends at a block returning an unsuccessful authentication.

Returning to the logic then moves to a block where the information from the alternate authentication process is passed back through the buyer authenticator and the logic ends at block . If there is no digital certificate installed No in decision block and certificate not present processing is not going to be performed for example by a user selecting cancel in the certificate not present authorization Web page shown in or No in decision block the buyer likely does not have a virtual payment account. Accordingly the logic of proceeds to a decision block where a test is made to determine if the buyer wishes to apply for a virtual payment account. If the buyer wishes to apply for a virtual payment account the logic proceeds to a block in which the buyer is allowed to apply for a virtual payment account as shown in and described next. Otherwise the buyer authenticator returns an unsuccessful authorization message to the Web browser in a block and the logic ends in block .

Next in a block the completed account application form is sent to the commerce gateway and processed by an enrollment server component as shown in and described next. In another embodiment the account application is sent to the transaction server component that handles financial transactions and also handles non financial transactions such as enrollment.

The logic of the enrollment server shown in begins in a block and proceeds to a block where a completed application form is received from the Web browser. Next in a block identity information such as name employer current residence etc. is requested from an identity bureau via the identity bureau adapter whose logic is shown in and described next.

Accordingly the logic of begins in a block and proceeds to a block where the identity request is received. The request is then formatted to be compatible with the particular identity bureau in a block . Next the logic proceeds to a block where the formatted request is then sent to identity bureau . The result of the request is received from the identity bureau in a block . Next in a block the result is then returned to requester. The logic of then ends in a block .

Returning to if in a block which in this case is the enrollment server it is determined that the identity information received from the identity bureau via the identity bureau adapter corresponds to the information in the application received in block then processing continues to a block where the enrollment server requests credit information such as income length of time with current employer length of time at current residence etc. from a credit bureau via the credit processing server adapter as shown in and described later with reference to a purchase authorization request.

Upon receipt of the credit information the logic proceeds to a block where the application is scored based on the identity bureau information and credit bureau information in combination with internal criteria. The internal criteria provide a score for the various pieces of credit information. For example incomes will be broken down into ranges with a point value assigned to each range. Similarly point values will be assigned based on the time the applicant has lived at his or her current residence etc. The points for each piece of credit information are combined to determine a score for the applicant. The score equates to the credit worthiness of the buyer and is used to determine if the applicant will receive a credit account or if the score falls in an intermediate range a prepaid account and if so to establish a credit limit for the applicant i.e. buyer. Next if the score is above a threshold logic ends with a successful enrollment result returned to the Web browser in a block . However if the score is below a certain threshold or if the identity information provided by the identity bureaus does not correspond to that of the buyer s application then an unsuccessful result is returned in a block . Processing then returns to .

In once a response is received from the enrollment server a block examines whether an account was created. If it was then a request is sent to the buyer computer to generate a public key encryption pair in block and to submit the public key to the enrollment server on the commerce gateway . The enrollment server then signs the public key to create a digital certificate and returns a successful enrollment Web page as shown in which is received in a block along with the digital certificate in a block . If at block it was determined that an account was not created then an unsuccessful application Web page is displayed not shown at a block . In the case of applying for a virtual payment account the result page provides details of the new account for the buyer or contains a message informing the buyer that there was an error creating the account. The logic of of applying for a virtual payment account then ends in a block and processing returns to .

Referring again to after the buyer has applied for a virtual payment account the logic returns to decision block where the test to determine if a digital certificate is installed on the buyer computer is repeated. Depending on the results of decision block either blocks or blocks are repeated for the recent applicant of a virtual payment account. The logic then ends in a block .

While the logic of authenticating a buyer as shown in and described herein uses a digital certificate as the primary means for authenticating a buyer it will be appreciated that other methods are possible. For example a lesser level of security could be employed whereby a user could be required to enter identifying information such as the information entered in alternate authentication shown in . Alternatively a greater degree of security could be employed whereby a digital certificate is required and certificate not present processing is not allowed. Or an even greater level of security could be used requiring a digital signature and other verifying information from the buyer.

Returning to after buyer authentication is completed in block the logic proceeds to a decision block where a test is made to determine if the buyer authentication was successful. If not the logic proceeds to a block where an error message is displayed on the buyer computer by the Web browser notifying the buyer of the failed authentication. The logic of ends in a block .

However if the buyer was successfully authenticated the logic proceeds to a block where a virtual payment account selection Web page as shown in is displayed. Included in the requested information of the virtual payment account selection Web page is an identification of the applicable account or sub account to which the purchase should be applied. Next in a block sub account and password information used to unlock the buyer s digital certificate are obtained from the buyer from the information entered in the virtual payment account selection Web page of when the buyer indicates that the information has been entered by selecting Continue . The logic of then proceeds to a block where the sub account and an authentication container are sent to the commerce gateway and processed by the account identification container generator shown in and described next.

The logic of begins in a block and proceeds to a block where the sub account and authentication container are received from Web browser of the buyer computer . The logic then proceeds to a block where an internal account identification associated with authentication container is determined. An empty account identification container is then created in a block . Next in a block internal account identification and sub account information is added to the empty account identification container. The logic then proceeds to a block where an internal digital signature is applied to the account identification container. For example message digest logic can be used by applying an algorithm that takes a variable length message and produces a fixed length digest as output using a one way hashing algorithm that establishes the message as cryptographically secure. Finally the account identification container is returned to the Web browser in a block . The logic of then ends at a block and processing returns to .

Returning to after the sub account and authentication container are sent to the commerce gateway the logic then proceeds to a block where the logic waits to receive the account identification container from the account identification container generator component of the commerce gateway . Once the account identification container is received from the commerce gateway the logic proceeds to a block where a purchase request is sent to the commerce engine in the form of a request and account identification container for processing as shown in and described next.

The commerce engine is the component of the seller server that determines whether or not the order will be processed and whether the requested product will ultimately be provided to the buyer. It will be appreciated that commerce engines are well known in the art. The commerce engine component used in conjunction with the commerce gateway adapter component allows the virtual payment system of the present invention to expand existing technology that is currently used for traditional credit systems to encompass the virtual payment account of the present system. It will be further appreciated that while the embodiment shown and described modifies the commerce engine to achieve this functionality which may be possible through existing API calls of the commerce engine other embodiments are possible. This expanded commerce engine functionality is shown in .

The logic of begins in a block and proceeds to a block where a purchase request and account identification container are received from the Web browser of the buyer computer . The logic then proceeds to a decision block where a test is made to determine whether the purchase request should be forwarded to the commerce gateway adapter . If the purchase request is to purchase products using a virtual payment account the request should be forwarded to the commerce gateway adapter for processing in accordance with the virtual payment system of the present invention. In another embodiment only the request without the account identification container is received from the Web browser in block and if it is determined in decision block that the purchase request should be forwarded to the commerce gateway adapter the account identification is then obtained from the Web browser . In either case if it is determined in decision block that the purchase request should be forwarded to the commerce gateway adapter the logic proceeds to a block where the request is forwarded to the commerce gateway adapter. The commerce gateway adapter is shown in more detail in and described next.

The commerce gateway adapter is a component residing on the seller server that allows the seller server to communicate directly with the transaction server component of the commerce gateway in order to expand the authorization function of the commerce engine to include virtual payment account transactions. Accordingly the logic of begins in a block proceeds to a block where the forwarded purchase request and account identification container are received from the commerce engine . Next in a block the purchase request and account identification container are sent to the transaction server in the form of a transaction request for further processing as shown in and described next.

The transaction server component of the commerce gateway is responsible for interfacing with the other components of the system and determining whether or not a requested transaction should be applied to a buyer s virtual payment account. The logic of begins in a block and proceeds to a block where the transaction request is received. Next in a block the account identification container is decoded and verified. The origin or source of the request as well as the context i.e. date and time of the request are then recorded in memory of the commerce gateway in a block . Next the logic proceeds to a decision block where a test is made to determine whether the requested transaction is permissible. A variety of factors can be considered in making the determination of whether a requested transaction is permissible. For example spending limit cannot be exceeded and user imposed limitations such as those put on a young shopper account e.g. sites from which the young shopper can make purchases and hours during which the young shopper can make purchases as shown in cannot be violated.

If the transaction is not permissible the logic proceeds to a block where an impermissible transaction message is sent to the requester e.g. the commerce gateway adapter in the context of a purchase request . The logic of then ends in a block . If however the transaction is permissible the logic proceeds from decision block to a block where the transaction request is sent to a credit processing server adapter for further processing as shown in and described next.

The credit processing server adapter is the component residing on the commerce gateway that allows commerce gateway components such as the transaction server and the enrollment server to communicate directly with the various sub systems of the credit processing server which provide for the application of the requested transaction to the buyer s actual payment account. Accordingly the logic of begins in a block and proceeds to a block where the request is received. For example a purchase authorization request or a refund request is received from the transaction server and a credit information request is received from the enrollment server . The request is then formatted to be compatible with the appropriate credit processing sub system i.e. the account billing sub system the payment processing sub system and or the account enrollment sub system on the credit processing server in a block . Next the logic proceeds to a block where the formatted request is then sent to credit processing server for processing by the appropriate credit processing sub system as shown in and described next.

For any credit processing sub system the logic of begins in a block and proceeds to a block where the transaction request is received from the credit processing server adapter . Next account data and sub account data are retrieved in blocks and respectively from the appropriate database e.g. account database and financial database . Standard credit transaction processing is then performed in a block . Examples of standard transactions for the account billing sub system include creating and maintaining accounts including holding account information and account holder information such as name and address calculating interest calculating minimum monthly payments generating electronic monthly statements and calculating other charges known as discounts. The discount is the portion of the transaction amount that will go to the provider of the commerce gateway and can be determined on a fixed amount per transaction basis or a percentage of transaction amount basis. Examples of standard transactions for the payment processing sub system include collecting payments from buyers and applying the payments to the buyer s account transferring funds between sellers and buyer for example by interfacing with financial institutions for ACH transactions. Examples of standard transactions for the account enrollment sub system include obtaining credit information from credit bureaus providing the credit information to the commerce gateway for scoring determining a credit score based on the credit information and providing the score to the commerce gateway and providing scoring information to the account billing sub system for account creation.

The logic then proceeds to a block where necessary account adjustments are applied if applicable. For example the account balance will be reduced by the amount of an authorized purchase transaction. In one embodiment of the present invention reward points are accrued at the time of purchase but committed later for example during the periodic e.g. monthly statement preparation process. Alternatively reward points may not accrue until payment is made for the product to which the points are attributed. Next the transaction result such as the credit information or the purchase authorization is sent to the credit processing server adapter in a block . The logic of then ends in a block and processing returns to .

Returning to the result of the transaction request is received from the credit processing sub system or in a block . Next in a block the result is then returned to requester e.g. the result of a purchase authorization request is returned to the transaction server and credit information for example a credit limit is returned to the enrollment server in response to request for a credit information request to be used for establishing a buyer s account. The logic of then ends in a block and processing returns to the requester e.g. transaction server or enrollment server .

Returning to once the transaction server receives the response to its transaction request e.g. authorization result of a purchase request from the credit processing adapter in a block the logic proceeds to a block where the transaction record for example purchase information including amount of purchase is stored in memory of the commerce gateway . The logic then proceeds to a decision block where a test is made to determine if the transaction was successfully processed. If so the logic proceeds to a block where a transaction response with a valid status is then sent to the requester e.g. the commerce gateway adapter or the Web browser whichever the case may be . If the transaction was not successfully processed the logic proceeds from decision block to a block where a transaction response with an error status is then returned to the requester in a block .

After a valid transaction response an error transaction response or an impermissible transaction response is sent to the requester the logic of ends in block and processing returns to the requester. In the case of a purchase request the requester is the commerce gateway adapter . In one exemplary embodiment a record of all transactions is stored in the financial database .

Returning to after the response to the purchase request made by the commerce gateway adapter is received from the transaction server in a block the logic proceeds to a block where the response including the transaction status is formatted to be compatible with the commerce engine . The formatted response is then forwarded to the commerce engine in a block . The logic of then ends in a block and processing returns to the commerce engine in .

Returning to once a response is received by the commerce engine from the commerce gateway adapter in a block the authorized and ordered product is shipped to the buyer in a block . It will be appreciated by those of ordinary skill in the art that if the ordered product is capable of being downloaded e.g. the product is an electronically stored good a URL for a premium content Web site etc. the product will simply be transferred by the seller server to the buyer computer . Otherwise the product will be shipped or provided by more traditional methods e.g. regular mail hand delivery etc. Once shipment is complete the logic then proceeds to a block where a settlement request is sent to the commerce gateway in order to initiate movement of funds. In an actual embodiment of the present invention the seller submits the transaction into a settlement batch for payment when the settlement batch for that seller is next processed. The timing of the processing could be that night or at a later date based on the contract i.e. terms of the purchase transaction. illustrates an exemplary Web page for designate when batches should be processed. Settlement transactions are described in in more detail below with reference to .

Returning to in a block a response confirming fulfillment of the order is sent to the Web browser of the buyer s computer . The logic of then ends in a block .

However if at decision block it is determined that the purchase request should not be forwarded to the commerce gateway the logic proceeds to a block where standard commerce engine processing is performed. More specifically in block traditional credit or debit card authorization is performed such as approval or denial for the use of a credit card e.g. VISA or MASTERCARD for the specified purchase amount. Next the authorized goods are shipped in a block . The logic then proceeds to a block where a settlement request is sent to the traditional credit provider e.g. VISA or MASTERCARD . A response confirming fulfillment of the order is then sent to the Web browser of the buyer computer in a block . The logic of then ends in block and processing returns to .

Returning to once the Web browser of the buyer computer receives a response to its purchase request in a block the logic proceeds to a block where an order confirmation Web page is displayed as shown in . The logic of then ends in block .

If the seller is an auction Web site the authorization sent by the commerce gateway to the seller server includes information such as a buyer account identification a seller identification a seller sale offering a buyer authentication a seller authentication and a master identification i.e. identification of the commerce gateway provider. Particular to this type of response is an expiration date time that is used to signal the shorter of the maximum times that the buyer and the seller are willing to reserve finds associated with this transaction. If the transaction i.e. settlement request is not received by the commerce gateway before the expiration date time of the transaction the products and or finds will be released back to their owners. At a later time once the buyer has committed to the purchase the buyer releases an authorization to the provider of the commerce gateway knowing that the seller has proven ability to ship the products on demand without delay. This initiates the actual settlement of funds and triggers payment to the seller in the next settlement batch without any further interaction with the seller. This payment method supports buyer initiated pre approved purchases with expiration date time such as auction and gift certificate purchases.

It will be appreciated that illustrates processing of a valid purchase transaction. If there is an error at any time during the processing e.g. buyer is not authorized because he or she is not a registered buyer has exceeded his or her spending limit etc. processing will terminate after an appropriate error response has been returned to the buyer computer for display to the buyer via the Web browser .

When a seller establishes a seller account a contract is formed defining the relationship between the seller and the commerce gateway provider. That contract defines the terms such as when payments will be funded and what fee shall be given to the commerce gateway provider. The commerce gateway fee can be a per transaction fee or a percentage fee based on the amount of a transaction. The logic for settlement transactions for a virtual payment account is similar to the logic used for processing standard credit card settlement transactions. After the seller ships the product the seller sends a settlement transaction to the commerce gateway as shown in . It will be appreciated that the logic performed by the seller server can be performed by the commerce engine component or some other component for example a Web browser not shown residing on the seller server .

If the seller authenticator process is successful the logic proceeds from decision block to a block where a settlement request is sent to the transaction server on the commerce gateway . As shown and described in the transaction server forwards the request to the credit processing server adapter which in turn forwards the transaction request to the appropriate credit processing sub system. In the case of a settlement transaction request the payment processing sub system processes the transaction. The payment processing sub system forwards the settlement request to the financial institution . The financial institution funds the transactions into the commerce gateway provider s account. The commerce gateway provider takes its percentage and pays the sellers their portion. The financial institution waits for their billing cycle e.g. monthly and then charges the buyers for their purchases plus interest charges. The financial institution waits for the buyer payments. If the buyer does not pay standard late payment processing such as late notices finance charges etc. is performed.

The logic of begins in a block and proceeds to a block where the settlement request is received. The origin or source of the settlement request as well as the context i.e. date and time of the request are then recorded in memory of the commerce gateway in a block . Next the logic proceeds to a decision block where a test is made to determine whether the requested settlement is permissible. A variety of factors can be considered in making the determination of whether a requested settlement is permissible. Some factors might include a settlement request for a transaction that did not have a purchase confirmation from a buyer that had a purchase confirmation from a buyer whose account did not hold sufficient funds for an auction settlement whose time had expired or whose credentials were no longer valid. It will be appreciated that yet other factors may cause a settlement transaction to be impermissible. If the transaction is not permissible the logic proceeds to a block where an impermissible settlement request message is sent to the requester i.e. the seller in this case. If however the transaction is permissible the logic proceeds from decision block to a block where the transaction request is sent to a credit processing server adapter for further processing as shown in and described above. Continuing in once the transaction server receives the response to its transaction request e.g. authorization result of a settlement request from the credit processing adapter in a block the logic proceeds to a block where a transaction record for example purchase information including amount of purchase is stored in memory of the commerce gateway . The logic then proceeds to a decision block where a test is made to determine if the transaction was successfully processed. If so the logic proceeds to a block where a transaction response with a valid status is then sent to the requester i.e. the seller in this case. If the transaction was not successfully processed the logic proceeds from decision block to a block where a transaction response with an error status is then returned to the requester.

After a valid transaction response an error transaction response or an impermissible transaction response is sent to the requester the logic of ends in block and processing returns to the requester.

Referring back to after the transaction server has processed the settlement transaction and provided the results of the settlement transaction to the seller s computer the result of the settlement transaction is displayed on the seller s display for example via the seller server s Web browser. The logic of then ends in block .

Referring to the logic begins in a block and proceeds to a block where the refund information including account sub account and amount is obtained. The refund transaction information is then sent to the transaction server by the administrative computer in a block in the form of a refund request. Transaction server processing is shown and described with reference to .

As also noted above in processing the refund request the transaction server will forward a transaction request to the credit processing server for processing by the account billing sub system as shown in . A refund applied to a buyer s virtual payment account causes the buyer s balance to decrease by the amount of the payment. Still referring to after the transaction server has processed the refund transaction the result of the transaction processing is received and displayed by the administrative computer . The logic of then ends in a block . Unlike the purchase transaction the refund transaction is not initiated by the buyer via the Web browser therefore the buyer is notified by other means for example by sending an e mail message to the buyer s computer . It will also be appreciated that in yet other embodiments of the present invention the seller server may initiate the refund request as opposed to the administrative computer .

Other transactions normally associated with an account such as a standard credit card account are also applicable to the virtual payment account of the present invention. illustrate some examples of Web pages used by a buyer with a virtual payment account. Processing of these transactions is similar to other transaction processing as illustrated in flow diagrams and described above and therefore will not be discussed in further detail herein. illustrates a Web page containing details of a primary account along with sub accounts . illustrates an exemplary Web page summarizing the sub accounts for a master account . illustrates a transaction summary Web page for the sub accounts for a given master account.

It is often desirable for seller s to have detailed reports available to judge the current state of their business. Accordingly the present invention maintains records of transactions in readily retrievable formats. It is also desirable that competitors not have access to the same reports on the details of a seller s business. Accordingly the present invention provides for secure authenticated access to a seller s reports. illustrates the logic for generating seller reports. The logic starts at a block and proceeds to a block that establishes a secure connection between the seller computer and the commerce gateway . The logic then proceeds to a block where the seller is authenticated much as the buyer authenticator illustrated in . The flow continues to a block where a test is performed to see if the seller has been authenticated. If the authentication was successful the logic continues to a block where the seller requests the transaction server to generate a report. At a block the transaction server retrieves relevant information and generates a report which in a block is received by the seller computer for viewing by the seller. The logic ends in a block .

In one actual embodiment of the present invention the commerce gateway requests report information from the credit processing server in particular from the financial database stored on the credit processing server. It will be appreciated by those of ordinary skill in the art that a financial database may be used to store information for report generation yet may also store information relevant for other purposes.

While the preferred embodiment of the invention has been illustrated and described it will be appreciated that various changes can be made therein without departing from the spirit and scope of the invention. For example it will also be appreciated that there are other transactions applicable to a virtual payment account of the present invention e.g. account closure credit limit modification overdue account notification etc. It will be appreciated that these transactions can be initiated by various components of the system for example a financial institution may institute a change in a credit limit by sending a request to one of the sub systems on the credit processing server. One of ordinary skill in the art will recognize that the requests for such transactions are processed by the virtual payment system of the present invention in a manner similar to the processing of the purchase settlement and refund transactions described in detail above.

