---

title: Frequency-dependent voltage control in digital logic
abstract: An electronic circuit comprises at least one digital logic circuit; and a power control circuit. The power control circuit is operable to adjust the voltage of a power signal supplied to the at least one digital logic circuit in response to a change in a clock frequency provided to the at least one digital logic circuit. In a further embodiment, the power controller is operable to increase the voltage of the power signal applied to the digital logic circuit before a frequency increase is made, and is operable to decrease the voltage of the power signal applied to the digital logic circuit after a frequency decrease is made.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07603575&OS=07603575&RS=07603575
owner: 
number: 07603575
owner_city: 
owner_country: 
publication_date: 20050630
---
The invention relates generally to computerized system power management and more specifically to controlling voltage in conjunction with frequency change in a computerized system.

A wide variety of devices including personal digital assistants cellular telephones and appliances now incorporate sophisticated processors monitors or displays and other elements once found only in expensive computers. Incorporation of processors has enabled cellular telephones to do more than just serve as a telephone it is now common for such cell phones to include phone directories digital cameras music playback video games and to offer a high degree of programmability or customization to the cell phone end user or service provider. Similarly personal digital assistants or PDAs commonly include software including calendar e mail word processing and other traditional computer functions.

But while traditional computers are usually plugged in to a wall socket or outlet that provides electric power on a continuous basis many portable devices such as cell phones and PDAs are powered by rechargeable batteries incorporated into the electronic computerized device. This limits the amount of time one can use such a portable device to the amount of time the rechargeable battery can provide adequate power to operate the device. One could simply use bigger batteries in situations where long lasting operation was desirable but battery size and performance is often traded off for smaller overall device size lighter weight and lower cost.

Engineers have addressed this issue by developing electronic devices that require less power to operate or that can operate at reduced speed to conserve power. Such methods are also sometimes employed in other systems such as normal desktop computers and laptop computers particularly where significant power savings can be realized. Reduced power consumption in desktop computers results in a reduction in utility bills energy demand and pollution and is particularly desirable when it can be implemented across a wide number of systems without a significant reduction in performance.

It is therefore desirable that computerized devices have power management capability such that power can be conserved.

In the following detailed description of example embodiments of the invention reference is made to specific examples by way of drawings and illustrations. These examples are described in sufficient detail to enable those skilled in the art to practice the invention and serve to illustrate how the invention may be applied to various purposes or embodiments. Other embodiments of the invention exist and are within the scope of the invention and logical mechanical electrical and other changes may be made without departing from the subject or scope of the present invention. Features or limitations of various embodiments of the invention described herein however essential to the example embodiments in which they are incorporated do not limit the invention as a whole and any reference to the invention its elements operation and application do not limit the invention as a whole but serve only to define these example embodiments. The following detailed description does not therefore limit the scope of the invention which is defined only by the appended claims.

The examples of the invention presented here serve to illustrate how power can be managed in a digital logic circuit such as a computer processor to conserve energy. In some embodiments power is managed by adjusting the voltage of a power signal supplied to one or more digital logic circuits in response to a change in a clock frequency provided to the digital logic circuits. In a further embodiment the power controller is operable to increase the voltage of the power signal applied to the digital logic circuit before a frequency increase is made and is operable to decrease the voltage of the power signal applied to the digital logic circuit after a frequency decrease is made.

In a further embodiment the device is a portable wireless device powered by a battery and having an antenna such as a monopole antenna a stripline antenna or any other type of antenna. The processor is coupled to a power controller which is operable to control a frequency of a clock signal provided to at least one digital logic circuit in the processor . The power controller is further operable to control a power supply signal voltage provided to the digital logic circuit within the processor . In some embodiments the power signal voltage and clock signal frequency are controlled based on selection between two or more power modes for the computerized system.

In operation the processor executes program instructions loaded into memory from nonvolatile random access memory or another nonvolatile data storage device such as a hard disk drive. The processor also works with other data such as information provided by the user via the keyboard and information conveyed to the user through display or other user interfaces such as a speaker. The executing program in many circumstances is not a stream of constantly executing program instructions but comprises bursts of program operation followed by periods of inactivity. Devices such as cellular phones and wireless personal digital assistants PDAs use an antenna coupled to an RF module to communicate wirelessly with other devices or communications networks.

When the processor is not actively executing program instructions part or all of the processor can be brought to a state which provides a lower degree of processing capability but in which one or more digital logic circuits consume less power. In some embodiments this occurs by reducing the frequency of the clock signal provided to processor or to a portion of the digital logic circuits within the processor. Each time the clock signal provided to a processor or other digital logic circuit changes state many transistors within the processor change state requiring a significant expenditure of energy even when no program instructions are being executed. The fewer times per second such state changes occur the less power the digital logic circuit consumes. Reducing the clock frequency or stopping the clock signal altogether can therefore result in a reduction in power consumption.

The power controller is in some embodiments operable to reduce the clock frequency provided as described above and is further operable to vary the voltage of the power signal applied to the processor based on the clock frequency provided to the digital logic circuits within the processor. For example when the frequency of the digital logic circuits is reduced from a normal operating frequency of 400 MHz to 50 MHz the processor may be brought from a normal high voltage level of 3.3 Volts down to a lower voltage level such as 2.5 Volts or 1.5 Volts or from another normal operating voltage to a lower voltage to further conserve power.

Although the processor can issue commands to the power controller to reduce the clock frequency supplied to the digital logic circuits in some embodiments it does not directly alter the voltage of the power signal supplied to the same digital logic circuits. The voltage of the power signal is changed from a voltage supplied by a battery or another power source to a desired voltage based on the frequency of the clock signal supplied to the logic circuits the temperature of the logic circuits the semiconductor process or performance characteristics of the logic circuits and other such parameters.

In one example one or more logic circuits in a processor are provided a reduced clock frequency such as a reduction in frequency from 400 MHz to 50 MHz as part of a change in power mode. The power controller reduces the voltage applied to the logic circuits in response to the reduction in power mode taking into account factors such as the new frequency the process parameters and the temperature of the circuit so that the voltage applied will allow the logic circuits to continue to be fully functional. Because a lower voltage is required to sustain normal operation of the logic circuits at lower operating frequencies the voltage is reduced to conserve power after the frequency is reduced.

In other examples different combinations of parameter changes may cause the supplied voltage to rise even though the clock frequency is reduced. For example in a situation where the operating frequency is reduced by half but the circuit has experienced a substantial increase in temperature the supplied voltage can actually increase to compensate for the change in voltage required by the higher temperature circuit

Although the digital logic circuits can typically operate at a lower voltage when operating with a lower clock frequency care should be taken to provide a sufficient operating voltage to the circuit during transitions between frequency levels. illustrates how this is managed in one example embodiment. The curve shows how voltage varies over time in response to changes in the operating frequency of one or more digital logic circuits. At the frequency of the clock signal provided to the one or more digital logic circuits is reduced from a high speed operating frequency to a lower speed operating frequency. The voltage is subsequently reduced to a lower operating voltage selected based on the performance characteristics of the digital logic circuits and on the selected operating frequency. At a frequency change is desired and the power controller responds by raising the operating voltage from the lower operating voltage back to the higher operating voltage before the frequency change is made at . This diagram illustrates how the voltage in one or more digital logic circuits can be managed such that the voltage remains at a high enough level to power the digital logic circuits as frequency changes are made.

At a power mode change is desired or is triggered in a circuit or device containing the digital logic circuit or circuits. The power mode change in this example is a result of inactivity in a processor integrated circuit and results in a reduction in clock frequency from a normal operating frequency of 400 MHz to 25 MHz at . Because the digital logic circuits in the processor are now operating at a lower clock frequency the power controller is able to provide a reduced power signal voltage to the digital logic circuits based on the digital logic circuit characteristics measured and stored at and on the new clock frequency. In a further example the reduced voltage is also dependent on the measured temperature of the digital logic circuits because the various digital logic circuit characteristics measured at can vary with variations in temperature.

In one example the parameters are used in conjunction with a lookup table at to select a new voltage and the voltage is reduced after the clock frequency change has been made. The circuit then operates at a reduced clock frequency and reduced voltage until an event such as an increase in processor load a keystroke or button actuation or some other event causes a return to a higher power mode at . The high power mode is entered by first increasing the power signal s voltage at and subsequently increasing the clock s operating frequency at .

The circuit characteristics used to select the new voltage in some embodiments are circuit parameters derived from measuring the performance of one or more circuits after manufacture. For example the leakage current of a transistor that is switched off may vary from circuit to circuit even in situations where the same semiconductor fabrication equipment and methods are used to build the same circuit twice. Similarly other parameters such as switching speed and metal loss in the circuit can be measured or characterized resulting in a profile of the circuit that characterizes the performance capabilities of a specific lot die or circuit. The circuit characteristics are then in various embodiments stored for application to formulas used to derive appropriate operating voltages and frequencies or used to derive voltage and frequency data stored in a table for use in selecting appropriate voltage levels when the clock frequency is changed. In a further example the table also includes other parameters such as circuit temperature and in alternate embodiments the circuit characteristics are derived or measured using other processes.

A more detailed example of a computerized system employing clock frequency dependent power signal voltage control is shown in which illustrates a typical portable electronic device integrating various functions such as cellular telephone camera and personal digital assistant PDA capability. The wireless communications component of the device includes an RF board that is operable to receive and transmit radio frequency data and to communicate with cellular telephone towers or base stations. The RF board is coupled to a processor board which has a processor a power controller memory and a voice data coder decoder CODEC . The processor executes instructions loaded into system memory from the flash nonvolatile memory to perform various functions such as placing or receiving calls managing a directory managing e mail and managing sounds and images such as ringtones and images taken with an onboard camera.

A system board is coupled to the processor board and provides interfaces from the processor to a variety of components such as a graphics processor PCMCIA Personal Computer Memory Card International Association format port and USB Universal Serial Bus port and IRDA Infrared Data Association port . The system board s peripheral bus also couples the processor to user interface devices such as keypad speaker camera and microphone . A video display is also coupled to the graphics processor and to the processor and is operable to display color graphics through its red green and blue liquid crystal display LCD elements.

In operation the processor executes software instructions loaded into the system memory from nonvolatile memory and operates in a power state managed by power controller . The processor oversees receiving and sending voice data compressed via voice codec and other data via the RF module and controls other functions of the device such as directory functions e mail operation of the camera selection of telephone ringtones and interaction with other devices or peripherals via interfaces such as IRDA port USB port and PCMCIA interface .

If the demands placed on the processor are significantly lower than its peak capacity such as when very few instructions are being executed to perform functions such as those described above the processor s digital logic circuits and other circuits within the cellular phone can be brought to a lower power state by reducing the clock frequency of the digital logic circuits and reducing the voltage powering the digital logic circuits. This is performed by methods such as those previously described and as shown in .

For example consider a state where the cellular phone is on and fully operational but the user has not performed any action and the cell phone is not actively executing processor instructions. The power controller in this example first reduces the clock frequency of the processor to reduce the number of state transitions made by transistors within the processor to conserve power. The voltage is then reduced to a level that takes into account the process parameters of the circuits the temperature of the circuits and the new operating frequency of the digital logic circuits. The digital logic circuits can be brought back to a normal operating state by increasing the power supply voltage and increasing the clock frequency back to normal levels or after a period of inactivity can make the processor inactive and reduce the voltage even further to a level where the processor isn t able to change state but is able to retain it s present state. Voltage is increased and the processor is brought out of such a low power mode when triggered by a hardware event such as a timer actuation of a user input such as keyboard or a scroll wheel or receipt of an incoming phone call. In further embodiments other circuits such as the graphics processor and interface controllers such as USB controller are operated under the control of the power manager and are supplied a reduced clock frequency and operated at a reduced voltage when in a reduced or low power state.

In some embodiments the power controller s control over the circuitry in the electronic device is configurable via software such as via an application programming interface API and via registers in the power controller. For example some bits can be used as multiplier or divider bits to control the clock frequency and can control the clock frequency of different circuit such as memory and processor independently. Similarly a voltage level register can be used to track the voltage and to coordinate the timing of the voltage change so that the voltage remains high enough for the digital logic circuits to remain operational as was described in conjunction with the discussion of . Further embodiments include registers identifying voltage levels linking voltage changes with frequency changes and other such variations on the examples presented here.

The power modes in the various examples discussed here are used to illustrate transition from a fully operational high power mode with a high clock frequency to a fully operational but reduced clock frequency and reduced power supply voltage low power mode and from the low power mode back to the high power mode which in some embodiments are transitions between two of many different power modes. In a specific example a normal mode idle mode deep idle mode standby mode sleep mode and deep sleep mode are all supported by the power management controller. Normal mode is a state in which all internal power domains and external power supplies are fully powered and functional and the processor clock is running at a normal speed. In idle mode the clocks to the CPU are substantially reduced in frequency and the power supply voltage to the CPU is reduced to a lower level dependent on factors such as the new clock frequency the operating temperature of the circuits within the processor and the circuit process parameters. When normal operation resumes the clock is brought back to a substantially higher speed through a hardware control signal such as a hardware interrupt after the power supply voltage is brought back to a normal operating level. Deep idle mode is entered only after the processor s core frequency has been set to a frequency substantially lower than its normal operating frequency and CPU clocks are disabled until resumption is triggered by a hardware event.

Standby mode further involves placing all internal power domains other than clock and oscillator signals into a low power mode where state is retained but no activity is allowed. The clock source is in some further embodiments disabled and internal or external events such as actuation of a button trigger a wake up to a higher power state. The low power mode in which state is retained in some embodiments includes reduction of a voltage supplied to the circuit under control to a voltage level lower than operating voltage but higher than a zero voltage level. The voltage level is sufficient to keep the transistors of the logic circuits in their present states but not sufficient to enable full operation of the digital logic circuits.

In sleep mode the power domains internal to the processor other than clock and oscillator circuits used by the power manager and real time clock are powered off and only select external domains are retained in a low voltage state in which their states are retained. Because core elements of the processor such as the pipeline registers and program counter are invalid after being powered down completely resuming operation requires rebooting the cellular phone.

A further low power mode known as deep sleep mode is also employed in a further embodiment which is essentially the same as sleep mode but in which the cell phone s states are maintained by the backup battery rather than by the main system battery or external power source. This mode is used for example when the phone is programmed and packaged for delivery to the end user and may not have a main system battery attached.

These modes serve to illustrate how various logic circuit elements whether internal or external to the processor can be operated at a reduced clock frequency and powered with a reduced voltage power signal. It also illustrates how a reduced clock frequency and reduced power supply voltage mode can be used as a part of a sophisticated power management scheme in a portable electronic device to conserve battery power and provide greater energy efficiency.

Although specific embodiments have been illustrated and described herein it will be appreciated by those of ordinary skill in the art that any arrangement which is calculated to achieve the same purpose may be substituted for the specific embodiments shown. This application is intended to cover any adaptations or variations of the example embodiments of the invention described herein. It is intended that this invention be limited only by the claims and the full scope of equivalents thereof

