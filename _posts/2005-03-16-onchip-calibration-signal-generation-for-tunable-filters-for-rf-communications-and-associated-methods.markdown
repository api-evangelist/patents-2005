---

title: On-chip calibration signal generation for tunable filters for RF communications and associated methods
abstract: On-chip calibration signal generation circuitry is disclosed for filter tuning for radio-frequency communications and associated methods. On-chip circuitry generates a calibration signal that is used to help set a tuning control signal that is received by a tunable front-end filter. In one embodiment, local oscillator (LO) generation circuitry is used to generate the calibration signal. In operation of this embodiment, the LO generation circuitry is tuned to the desired receive channel, or to a frequency at some offset value from the desired receive channel, and the output of the LO generation circuitry is then used as a calibration input signal for a tunable front-end filter. This calibration signal is passed through the receive path circuitry, and the resulting signal is then analyzed to help set a tuning control signal for the tunable front-end filter.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07127217&OS=07127217&RS=07127217
owner: Silicon Laboratories Inc.
number: 07127217
owner_city: Austin
owner_country: US
publication_date: 20050316
---
This application is a continuation in part application of the following co pending application application Ser. No. 10 881 926 entitled INTEGRATED LOW IF TERRESTRIAL AUDIO BROADCAST RECEIVER AND ASSOCIATED METHOD which was filed on Jun. 30 2004 the entire text and all contents for which is hereby expressly incorporated by reference in its entirety.

This invention relates to input filter circuitry for radio frequency communications. More particularly the present invention relates to antenna filter calibration for radio frequency receivers.

Radio frequency RF receivers are used in a wide variety of applications such as television cellular telephones pagers global positioning system GPS receivers cable modems cordless phones radios and other devices that receive RF signals. RF receivers typically require frequency translation or mixing. For example with respect to FM audio broadcasts FM radio receivers may translate one broadcast channel in the FM frequency band to an intermediate frequency. Within the United States FM radios will typically translate FM audio signals which are broadcast in 200 KHz channels in the frequency band from 88 MHz to 108 MHz to an intermediate frequency of 10.7 MHz. FM demodulators and stereo decoders can then convert this 10.7 MHz IF signal to demodulated left and right audio signal that can be sent to stereo speakers. Although other countries will have different frequency bands and channel spacing the reception of audio broadcast signals such as FM audio broadcasts is similarly accomplished using RF receivers.

The majority of typical RF receivers perform frequency translation or mixing using an oscillator and an analog multiplier or mixer. An oscillator will typically output a local oscillator LO signal in the form of a sine wave or periodic wave having a tuned frequency f. A mixer then mixes the RF input signal spectrum which includes desired spectral content at a target channel having a particular center frequency f with the LO signal to form an output signal having spectral content at frequencies equal to the sum and difference of the two input frequencies namely f fand f f. One of these components forms the channel center frequency translated to the desired IF frequency and the other component can be filtered out. The oscillator can be implemented with a variety of circuits including for example a tuned inductor capacitor LC oscillator a charge relaxation oscillator or a ring oscillator.

With respect to prior systems that receive terrestrial audio broadcasts external circuitry is often used to filter out unwanted parts of a signal spectrum that is received through an antenna. This external filter circuit therefore acts to tune at least in part the incoming signal to a desired channel or portion of the RF signal spectrum. For example with respect to FM terrestrial audio broadcasts this external filter will help tune the receiver to the desired FM channel. Typical solutions for this external filter circuitry include external LC filters including inductors that provide the inductance L and varactor diodes that provide a variable capacitance C .

The present invention provides on chip calibration signal generation circuitry for front end filter tuning for radio frequency communications and associated methods. In one embodiment on chip circuitry generates a calibration signal that is used to help set one or more tuning control signals that are used to tune a tunable front end filter. Local oscillator LO generation circuitry can be used to generate the calibration signal. In operation for such an embodiment the LO generation circuitry can first be tuned to the desired receive channel or to a frequency at some offset value from the frequency of the desired receive channel and the output from the LO generation circuitry can then be used as the calibration input signal for the tunable front end filter. This calibration signal is processed by receive path circuitry where it is mixed with a mixing signal from the LO generation circuitry. The resulting signal is then analyzed by calibration control circuitry to set a tuning control signal for the tunable front end filter. At least part of the calibration signal generation circuitry and the calibration control circuitry can also be integrated on the same integrated circuit. Still further the tunable filter can be an LC filter formed by an inductor coupled to tunable capacitance circuitry. As described below other features variations and architectures can be implemented if desired and various related methods can be utilized as well.

The present invention provides calibration signal generation circuitry for front end filter tuning in integrated radio frequency communication devices.

As an initial matter it is noted that the on chip calibration signal generation circuitry of the present invention can be used with respect to a wide variety of integrated communication devices that utilize a filtered input signal. The low intermediate frequency low IF integrated receiver embodiments discussed below with respect to represent example integrated communication devices that can take advantage of the on chip calibration signal generation tuning circuitry of the present invention. B A B and provide example embodiments describing the on chip calibration signal generation circuitry. It is noted that the present invention is not limited to the low IF architectures depicted in and is equally applicable to other receiver architectures as well. It is further noted that the discussion below focuses on embodiments for terrestrial broadcasts receivers and for FM or AM receivers in particular and that these broadcast spectrums should be viewed only as examples.

Looking back to the embodiment in a low noise amplifier LNA receives the RF signal spectrum f . The output of the LNA is then applied to mixer and mixer generates real I and imaginary Q output signals as represented by signals . To generate these low IF signals the mixer uses phase shifted local oscillator LO mixing signals f . The LO generation circuitry includes oscillation circuitry and outputs the two out of phase LO mixing signals f that are used by the mixer . The outputs of mixer are at a low IF which can be designed to be fixed or may be designed to vary for example if discrete step tuning is implemented for the LO generation circuitry . An example of large step LO generation circuitry that utilizes discrete tuning steps is described in the co owned and co pending U.S. patent application Ser. No. 10 412 963 which was filed Apr. 14 2003 which is entitled RECEIVER ARCHITECTURES UTILIZING COARSE ANALOG TUNING AND ASSOCIATED METHODS and which is hereby incorporated by reference in its entirety

Low IF conversion circuitry receives the real I and imaginary Q signals and outputs real and imaginary digital signals as represented by signals . The low IF conversion circuitry preferably includes band pass or low pass analog to digital converter ADC circuitry that converts the low IF input signals to the digital domain. And the low IF conversion circuitry provides in part analog to digital conversion signal gain and signal filtering functions. Further digital filtering and digital processing circuitry with the digital signal processing DSP circuitry is then used to further tune and extract the signal information from the digital signals . The DSP circuitry then produces baseband digital output signals . When the input signals relate to FM broadcasts this digital processing provided by the DSP circuitry can include for example FM demodulation and stereo decoding. And the digital output signals can be left L and right R digital audio output signals that represent the content of the FM broadcast channel being tuned as depicted in the embodiment of . It is noted that the output of the receiver can be other desired signals including for example low IF quadrature I Q signals from an analog to digital converter that are passed through a decimation filter a baseband signal that has not yet be demodulated multiplexed L R and L R audio signals L and R analog audio signals and or any other desired output signals.

It is noted that as used herein low IF conversion circuitry refers to circuitry that in part mixes the target channel within the input signal spectrum down to a fixed IF frequency or down to a variable IF frequency that is equal to or below about three channel widths. For example for FM broadcasts within the United States the channel widths are about 200 kHz. Thus broadcast channels in the same broadcast area are specified to be at least about 200 kHz apart. For the purposes of this description therefore a low IF frequency for FM broadcasts within the United States would be an IF frequency equal to or below about 600 kHz. It is further noted that for spectrums with non uniform channel spacings a low IF frequency would be equal to or below about three steps in the channel tuning resolution of the receiver circuitry. For example if the receiver circuitry were configured to tune channels that are at least about 100 kHz apart a low IF frequency would be equal to or below about 300 kHz. As noted above the IF frequency may be fixed at a particular frequency or may vary within a low IF range of frequencies depending upon the LO generation circuitry utilized and how it is controlled.

It is further noted that the architecture of the present invention can be utilized for receiving signals in a wide variety of signal bands including AM audio broadcasts FM audio broadcasts television audio broadcasts weather channels and other desired broadcasts. The following table provides example frequencies and uses for various broadcast bands that can be received by the integrated terrestrial broadcast receiver of the present invention.

As indicated above the architectures of the present invention are advantageous for small low cost portable devices and are particularly advantageous for such devices that need to receive terrestrial audio broadcasts such as FM broadcasts. In particular the LO generation circuitry the mixer the low IF conversion circuitry and the DSP circuitry are preferably all integrated on the same integrated circuit. In addition the LNA and other desired circuitry can also be integrated into the same integrated circuit. This integrated circuit can be made for example using a CMOS process a BiCMOS process or any other desired process or combination of processes. In this way for example a single integrated circuit can receive a terrestrial broadcast signal spectrum and output digital or analog audio signals related to a tuned terrestrial broadcast channel. Preferably the integrated circuit is a CMOS integrated circuit and preferably an integrated CMOS terrestrial broadcast receiver of the present invention is configured in a 4 4 mm 24 pin micro lead frame MLP package to provide advantageous cost size and performance features for small portable devices such as cellular handsets portable audio devices MP3 players portable computing devices and other small portable devices.

Power consumption is an additional concern with such small portable devices. The integrated receiver architecture of the present invention advantageously provides for reduced power consumption and allows for the use of power supplies with different ranges to power the integrated receiver. In particular the present invention allows for low current consumption of less than or equal to 30 mA milli Amps of supply current. In addition the level of integration provided by the present invention allows for a small package size and reduced number of external components that is less than or equal to about six 6 external components.

As with the outputs of the LNAs A and B are processed by mixer to generate real I and an imaginary Q signals. These signals are then processed by a programmable gain amplifier PGA which is controlled by the automatic gain control AGC block . The output signals from the PGA are then converted to digital I and Q values with I path ADC and Q path ADC . DSP circuitry then processes the digital I and Q values to produce left L and right R digital audio output signals that can be provided to the digital audio block . In addition these left L and right R digital audio output signals can be processed with additional circuitry as represented by digital to analog conversion DAC circuits and to produce left LOUT and right ROUT analog output signals. These analog output signals can then be output to listening devices such as headphones. Amplifier and speaker outputs A and B for example can represent headphones for listening to the analog audio output signals. As described above with respect to FIG. iB the DSP circuitry can provide a variety of processing features including digital filtering FM and AM demodulation DEMOD and stereo audio decoding such as MPX decoding. Low IF block includes additional circuitry utilized to control the operation of the DSP circuitry in processing the digital I Q signals.

A digital control interface can also be provided within integrated receiver to communicate with external devices such as controller . As depicted the digital communication interface includes a power down PDN  input signal reset RST  input signal a bi directional serial data input output SDIO signal a serial clock input SCLK signal and a serial interface enable SEN input signal. As part of the digital interface digital audio block can also output digital audio signals to external devices such as controller . As depicted this communication is provided through one or more general programmable input output GPIO signals. The GPIO signals represent pins on the integrated receiver that can be user programmed to perform a variety of functions as desired depending upon the functionality desired by the user. In addition a wide variety of control and or data information can be provided through the interface to and from external devices such as controller . For example a RDS RBDS block can report relevant RDS RBDS data through the control interface . And a receive strength quality indicator block RSQI can analyze the receive signal and report data concerning the strength of that signal through the control interface . It is noted that other communication interfaces could be used if desired including serial or parallel interfaces that use synchronous or asynchronous communication protocols.

Looking back to the mixer of LO mixing signals are received by mixer from a phase shift block that produces two mixing signals that are 90 degrees out of phase with each other. The phase shift block receives an oscillation signal from frequency synthesizer FREQ SYNTH . Frequency synthesizer receives a reference frequency from reference frequency REF block and a control signal from automatic frequency control AFC block . An external crystal oscillator operating for example at 32.768 kHz provides a fixed reference clock signal to the reference frequency REF block through connections XTAL and XTAL. The AFC block can receive tuning error signal from the receive path circuitry within the integrate receiver and provide a correction control signal to the frequency synthesizer . The use of such an error correction signal is discussed in further detail below.

In the embodiment depicted the tunable LC filter receives an input from antenna circuitry and outputs signal to the integrated receiver circuitry. The inductor and the tunable capacitance circuit are coupled in parallel between signal line and ground to form an LC filter. The tunable capacitance circuit is controlled by one or more control signals provided by calibration control circuitry . This control signal can be for example an N bit digital control signal as depicted in . The calibration control circuitry also provides a control signal that opens or closes switch in order to inject a calibration signal f to the LNA during calibration operational modes. The injected calibration signal f can be generated as desired and once injected the tunable LC filter is adjusted so that the filter response tends to maximize the strength of the injected signal. As depicted the calibration signal f is generated using the mixing signals from the LO generation circuitry . In particular one of these signals is passed through a transconductance amplifier g and then through switch to provide the calibration signal f . The receive path circuitry processes this injected signal resulting in a DC offset feedback signal being generated as an output from the DSP circuitry . This feedback signal provides an indication of the signal strength of the injected signal . It is noted that a differential implementation could also be utilized if desired. It is further noted that the transconductance amplifier g is included in the example of to provide a high impedance drive circuit to connect the calibration signal to the LC filter . The transconductance amplifier therefore acts as calibration signal drive circuitry that drives the calibration signal through switch to signal line and the tunable filter . Other amplifier topologies could be utilized as desired to generate calibration signal .

In a calibration mode of operation for the integrated receiver the calibration control circuitry sets the tuning control signal to a nominal or selected value and activates control signal to close the switch . In addition the LO generation circuitry is operated to produce the mixing signals for the desired channel to be tuned. The amplifier g then drives the calibration signal f . And this calibration signal f is injected into the receive path through switch . The calibration control circuitry then receives back the DC offset feedback signal as an indication of signal strength for the injected calibration signal f . The calibration control circuitry then adjusts the tuning control signal and determines what affect the adjustments had on the signal strength as represented by feedback signal . The calibration control circuitry continues these tuning adjustments until the signal strength has been adjusted improved and or optimized. At this point the calibration mode is complete and the calibration control circuitry deactivates control signal thereby opening the switch and disconnecting the calibration signal f from the receive path circuitry.

It is noted that for this embodiment the calibration signal f is configured to match the frequency of the mixing signals provided by the LO generation circuitry which may be set to the desired channel frequency to a frequency offset by some selected value from the desired channel frequency or any other desired frequency. It is noted that the calibration signal f could be generated using different internal circuitry and techniques if so desired. In other words although the LO generation circuitry provides an efficient source for this on chip calibration signal f other on chip circuitry could be used to generate this calibration signal if desired. In operation therefore the calibration signal f is input to LNA and then provided to mixer . Calibration signal f which is configured such that it matches the mixing signals is in effect mixed with itself by mixer so as to produce a DC output. This DC output can then be analyzed using other circuitry such as conversion circuitry and DSP circuitry to adjust improve and or optimize the tuning for the tunable filter . For example when the DC output from the mixer is maximized it can be concluded that that center frequency for the tunable filter has been tuned to the mixing signals . It is again noted that a wide variety of tuning algorithms could be implemented as desired within the calibration control circuitry .

It is also noted that calibration signal f does not have to match the desired channel to be tuned. In other words if the tunable filter is desired to be tuned for a particular channel frequency the calibration signal f can be brought to a frequency that is offset from the desired channel frequency by some amount. For example the calibration signal f can be made to fall within the 3 db point for the tunable filter while still maintaining performance. Other modifications could be made as well depending upon the circuitry implemented for the receiver architecture and the tunable filter. With respect to the low IF architecture discussed above with respect to the LO mixing signals from the LO generation circuitry that would be used to receive the desired channel can also be utilized as the calibration signal without adjusting the frequency. For example where the IF is 100 kHz and where the tunable filter has a 3 db point that is wider than 100 kHz the mixing signals that would be used to receive a desired channel can be used as the calibration signal. In this way the calibration signal f will be 100 kHz from the desired channel frequency but performance will still be acceptable.

It is noted that the calibration mode could be entered each time a new channel is tuned. It is further noted that any desired tuning algorithm could be implemented for adjusting the tuning control signal . For example successive approximation techniques could be utilized if desired. In addition it is noted that the initial state for the tuning control signal may be selected as desired. For example a nominal value in the middle of the tuning range could be used. In addition data points could be stored that represent the last tuning value utilized for a particular channel. When that channel is again selected the tuning value stored for that channel can be used. Still further it is noted that the inductor could be configured as a tunable circuit as well. In such case the calibration control circuitry would also control the tunable inductor through an appropriate control signal. It is noted other implementations and circuitry could be utilized if desired.

The algorithm for utilizing the on chip calibration signal f can be implemented as desired. One example algorithm utilizing LO generation circuitry to provide the calibration signal is the following 

It is noted that provide example embodiments. A wide variety of other configurations and implementations could be utilized with the present invention. For example differential implementations could be implemented where signal line and signal line would be coupled as inputs to an LNA. It is also noted that the coupling capacitor in is not required and can be eliminated if desired. And it is noted that additional on chip or off chip inductances and capacitances could be utilized to make up an LC tank either alone or in combination with the inductor and the on chip tunable capacitance circuit according to the present invention. In addition control signals for the inductance and capacitance circuits can be provided from on chip or off chip circuitry as desired. It is further noted that portions of the circuitry are preferably integrated on a single integrated circuit. For example the mixer the LO generation circuitry the conversion circuitry the DSP circuitry the calibration signal drive circuitry and or the calibration control circuitry can be at least in part integrated on the same integrated circuit.

It is noted that the capacitors A B . . . N can be weighted in such a way as to facilitate the tuning of the tunable capacitance circuit . Possible weighting schemes for these capacitors A B . . . N include identical weights x x x etc. geometric weighted 2 4 8 etc. or any other desired weighting scheme. It is also noted that one or more on chip and or external capacitors such as capacitor may be coupled in parallel between signal line and ground such that these capacitors are always included within the capacitance of the LC filter circuit. It is further noted that other on chip or off chip variable capacitances such as varactor diodes or MOS capacitors could also be utilized to provide a variable capacitance and capacitance circuits with analog or variable control signals could also be utilized. Examples of a variable capacitance circuitry including such circuitry that is tunable both through the use of a multiple bit digital control signal and a plurality of analog control signals is described in U.S. Pat. No. 6 760 575 which is hereby incorporated by reference in its entirety. It is further noted that other variable or tunable capacitance circuits and associated control signals could also be utilized if desired without departing from the present invention.

Further modifications and alternative embodiments of this invention will be apparent to those skilled in the art in view of this description. It will be recognized therefore that the present invention is not limited by these example arrangements. Accordingly this description is to be construed as illustrative only and is for the purpose of teaching those skilled in the art the manner of carrying out the invention. It is to be understood that the forms of the invention herein shown and described are to be taken as the presently preferred embodiments. Various changes may be made in the implementations and architectures. For example equivalent elements may be substituted for those illustrated and described herein and certain features of the invention may be utilized independently of the use of other features all as would be apparent to one skilled in the art after having the benefit of this description of the invention.

