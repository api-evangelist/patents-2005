---

title: Method and arrangement relating to messaging
abstract: An arrangement for handling control signal messaging in a distributed system comprising a number of sending nodes and a number of receiving nodes and implementing a control signaling communication protocol. The sending and/or the receiving node is adapted to send and/or receive the current message as a compressed message comprising only the difference portion between a selected or preferred previous message and the current message and the unique identity of said previous message.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07746880&OS=07746880&RS=07746880
owner: Telefonaktiebolaget LM Ericsson (Publ)
number: 07746880
owner_city: Stockholm
owner_country: SE
publication_date: 20051115
---
The present invention relates to an arrangement for handling control signalling messaging in a distributed system comprising a number of sending nodes and a number of receiving nodes and which implements a control signalling communication protocol.

The invention also relates to a node in a distributed communication system adapted to at least send control signalling messages with a given syntax to other nodes and implementing a control signalling protocol.

Furthermore the invention relates to a method for sending a control plane signalling current message from a first sending node to a second node in a distributed communication system implementing a control plane signalling communication protocol. Further yet the invention relates to a method of receiving a control plane signalling current message from a first sending node in a second receiving node in a low transport layer of an implemented control plane signalling protocol in a distributed communication system.

Distributed communication systems of different types rely on both data and control signalling between the subsystem nodes of a system. A node is here taken to mean an arbitrary node or a base station a mobile station a client server different boards in a base station or more generally a sender and a receiver. Depending on the particular system requirements and the design of the system the control plane signalling may actually constitute a performance bottleneck. In the art is known to prevent or reduce the negative effects to the largest possible extent of such bottlenecks through improving the hardware for example through using higher bus speeds or alternative communication channels for example replacing a serial interface by a shared memory interface or by designing more optimized protocols for control signalling.

It is however not always possible or not even desirable for different reasons for example for keeping down the costs or in order not increase the complexity etc. to provide any hardware modifications. The only way to handle increasing requirements in control plane signalling or to avoid the occurrence of bottlenecks is then to optimize or modify the communication protocol or to perform general software optimization which normally is not sufficient. However many distributed communication systems are very complex such as for example radio base stations server client database systems etc. and it can be very difficult and involve high costs to optimize the communication protocol and it may also affect many other system components which affects the system design as a whole. It is also highly important that the control plane signalling is stable and well tested in order to assure a reliable and stable performance of the system. Actually modification of the design of a control plane communication protocol might involve redesign of a major part of the communication system and as referred to above potentially affect many system components since the control plane communication protocols normally are common for many components included in the system.

In today known systems a lot of redundant or highly redundant information is normally sent which means that the available control plane signalling bandwidth is not efficiently exploited and that bottlenecks easily result.

What is needed is therefore an arrangement as initially referred to through which bottlenecks to a large extent can be avoided or through which the occurrence of bottlenecks can be reduced considerably a compared to in hitherto known systems.

An arrangement is also needed through which the control plane signalling can be optimized. Further an arrangement is needed through which the usage of the bandwidth available for control plane signalling can be optimized. Most particularly an arrangement is needed through which the above can be achieved without affecting or requiring modification of used protocols over even the creation of new signalling protocols. Most particularly an arrangement is needed through which control plane signalling can be optimized and bandwidth saved in an efficient manner and bottlenecks to a high extent can be avoided without affecting involved components. Even more particularly an arrangement as referred to above is needed which does not require any hardware modifications or particularly no substantial hardware modifications. Still further an arrangement through which one or more of the above mentioned objects can be achieved is needed which can be applied to even very complex systems. Still further an arrangement is needed which is easy to install and implement which is flexible and which is non expensive.

Most particularly an arrangement as referred to above is needed which does not require any redesign of the system or at least not of any considerable part of the system. Most particularly an arrangement is needed through which sending of redundant information can be avoided to a high extent.

A node as initially referred to is also needed through which one or more of the above mentioned objects can be achieved. Particularly a node acting as a sender or a node acting as a receiver or most particularly a node acting both as a sender and as a receiver is needed. A node is here taken to mean any sending or receiving node or device for example a board in a base station a client server a mobile station a web server or any server etc or more generally a sending receiving subsystem. Communication within one node is then communication between subsystems. It should however be noted that the concept node should not be configured with nodes in the syntax tree as discussed below which also are denoted nodes or syntax tree nodes.

A method as initially referred to through which one or more of the above mentioned objects can be achieved is also needed.

Therefore an arrangement as initially referred to is provided in which at least a number said sending nodes comprise message compression selection means for based on one of more criteria determining or selecting which messages are to be compressed or can be compressed message compression means for compressing selected messages where said message compressing means are adapted to use a syntax of the control signalling protocol for compression unique identity assigning means for at least assigning messages which are to be compressed with a unique identity and message information storing means for example a cache but also any other appropriate storing means for example comprising a table in which messages are sorted depending on type i.e. depending on which type they are of under said assigned unique identity and message recognition means for recognizing previous messages of the same type stored in said storing means and message distinguishing means for establishing the difference portion or portions between one or more previous messages and a current message of the same type. Only the difference portion or portions between the current message and a selected previous message and the unique identity of said selected previous message is sent as a compressed current message.

Particularly a node at least acting as a sending node comprises unique identity assigning comprising unique identity calculation means for at least assigning messages which are to be compressed with a unique identity whereby the unique identity particularly comprises a hash value. Particularly the storing means further comprises means for establishing and storing message type description information which is based on the syntax of the message and for linking the unique identity of a message to the type and to the message type description.

Even more particularly the node at least acting as a sending node comprises calculating means for calculating the difference between one or more previous messages of the same type preferably all messages of the same type in the storing means and the current message. Particularly criterion defining means are provided for giving or keeping criteria concerning which previous messages that are to be used for calculation of the difference and even more particularly the criterion defining means are controllable. In one embodiment no further differences are calculated when a criterion has been fulfilled. Alternatively it is searched for the best smallest difference. Most particularly the criterion defining means at least comprise criteria relating to establishing the amount and or kind of difference that is acceptable i.e. in order to select or establish which previous message that should be used as a previous message for admitting only the difference to be adhered to the unique identity of the previous message to form a compressed current message to be sent to a receiving node.

Particularly the criteria defining means comprise previous message selecting means adapted to select a preferred previous message. Most particularly the preferred previous message is a message between which and the current message the difference is the smallest. The size in bytes may for example be used as a measure for the size of the difference. It should be clear that also other criteria are possible.

In an advantageous embodiment a sending node also acts as a receiving node. Then it comprises reconstruction means for mapping a received compressed message to the corresponding previous message using the information in the message information storing means by implementing the unique identity contained the compressed message that is received from the sending node. Particularly when acting as a receiving and or sending node it comprises message storing decision means for determining or establishing if or when information concerning a received message is to be stored into the message information storing means.

In a particularly advantageous implementation the message distinguishing means comprises difference calculation means for performing a message difference calculation based on a syntax representation of a current message and one or more previous messages.

In a preferred embodiment for message compression decompression a particular message layer is introduced between higher level protocol layers and the transport layer of the communication protocol such that message compression decompression is integrated transparently into an existing computing system.

Particularly the receiving and or sending nodes comprise a radio base station a board e.g. a board in for example a Radio Base Station a mobile station a server a web server a client or similar.

In order to solve one or more of the problems as referred to above and to achieve one or more of the objects of the invention a node in a distributed communication system as initially referred to is also provided. The meaning of node in this specification has already been discussed above and node should hence be interpreted broadly.

The node comprises control signalling message compression means message compression selection means for determining or selecting based on one or more criteria which messages are to be compressed. Said compression means are adapted to use the syntax of a control signalling for compression of selected control signalling messages. Is also comprises message unique identity assigning means for providing messages to be stored in message information storing means with a unique identity and message information storing means for example comprising a table in which storing means messages are sorted depending on message type by means of the assigned unique identity and each message is linked to a message type description. I.e. the unique message type but sorting is done depending on one hand e.g. first on message type and on the other hand second depending on the assigned unique message ID. First and second is here merely given as a non limiting example. Further message recognition means are preferably provided for recognizing messages of the same type and message distinguishing means for establishing the difference portion or portions between a current new message and a number of previous messages of the same type. It is further adapted to if one or more given criteria are met send a current message as a compressed message comprising only the difference portion and the unique identity of the selected previous message.

In a particular embodiment the message selection means comprises a selection algorithm. The algorithm may be static but it may also be dynamic. Preferably the storing means comprises a cache for example adapted to hold a given number of messages only or to hold messages for a given time period or based on both these criteria. In a very specific embodiment it might also be so constructed that it holds messages of a certain type for a given time period or a given amount of messages of one or more other types or messages may be held according to other criterias. It is also possible to hold all messages for a given time period.

Particularly the identity assigning means comprises a unique identity calculation means for calculating a hash value for each message. Particularly said message type descriptions are based on message syntax and said storing means comprises means for linking each message to a message type description.

Particularly the message type description specifies which type or types of parameters a message comprises and optionally one or more of the order in which the parameters are provided or to be sent or the allowed or prohibited values of said parameters. The message distinguishing means particularly comprises calculating means for calculating the difference between current messages and any or at least a given number of previous messages of the same type. Criterion defining means are provided which are adapted to give keep criteria concerning amount and or type of difference that is required to determine whether a message can be sent as a compressed message or not. Particularly if a given criterion is met the difference is added to the unique identity of a selected or preferred previous message and the message is sent as a compressed message comprising the difference and the unique identity of the previous message. The criteria may also or alternatively relate to e.g. for how many messages the difference should be calculated when calculation is to be stopped due to an acceptable difference having been found etc.

In a particular embodiment the selected or preferred previous message is the or one of the messages differing the least from the current message i.e. where the difference is smallest.

In advantageous implementations the node further comprises a message reconstruction means in order to be able to also handle the reception of compressed messages. Hence said message reconstruction means comprise recognition and decompressing means for detecting a received compressed message and for mapping the difference and the unique identity to the appropriate previous message using said message information storing means and adding the difference to the found previous message. p The invention also discloses a method for sending a controlplane signalling current message rom a first sending node to a second node in a distributed communication system implementing a control plane signalling communication protocol. The method comprises the steps of determining or selecting based on a number of given decision criteria if the message is compressible if not sending the message if yes establishing an unique identity for the message establishing the type of the message storing the message with a unique identity the message type and a message description in message information storing means establishing if there is any entry in the message information storing means relating to previous messages of the same type as a current message if not sending the message if yes calculating the difference between the current message and one or more previous messages of the same type selecting based on a given selection criteria the closest previous message or preferred previous message generating a compressed message comprising the unique identity of the closest previous message and the difference between the current message and the selected closest or preferred previous message and sending the compressed message.

The decision criteria are particularly given by a decision criterion mechanism and may comprise a list of compressible message types. The decision criterion mechanism may also be based on a criterion stating that all messages are compressible. The decision criterion mechanism may comprise a dynamic or static algorithm for determining whether a message is compressible for example based on length and or type.

In an advantageous implementation the step of establishing the unique identity comprises calculating a hash value said hash value uniquely defining the message. Moreover advantageously the step of generating a compressed message comprises using the syntax of the control plane signalling to provide a message description.

Also advantageously the step of calculating the difference comprises representing the messages using a syntax tree comprising numbered nodes using a rewriting scheme to express the difference based on said numbered nodes and for reconstruction of the message from the difference and a previous message. The difference calculation between a current and a previous message will result in a sequence of operations on the syntax tree which transforms the first current message to a second compressed message. The sequence constitutes the difference.

Still further the invention suggests a method for handling reception of a control plane signalling current message from a first sending node in a second receiving node in a low transport layer of an implemented control plane signalling protocol in a distributed communication system. The method comprises the steps of receiving a current message establishing if the message is compressed if yes establishing the unique identity contained in the compressed message using the unique identity to find the corresponding previous message particularly using a message information storing means decompressing the compressed current message using the previous message and the received difference based on the use of a syntax based message description in message information storing means establishing based on predetermined criteria if the current decompressed message is to be stored in the message information storing means if not sending the current message to a higher protocol layer if yes establishing a unique identity of the current message and storing the message with message type and unique identity into the message information storing means and passing the current message to a higher protocol layer.

It is a requirement that the receiving node comprises a message information storing means in which previous messages are stored and organized depending on message type and the unique identity uniquely defining each message similar to the sending node or when a node act as both sender and receiver the same message information storing means is used for implementation of both the compression and decompression.

It should be clear that a node here is taken to mean a node capable to act as a send for sending to other nodes and or as a receiver for reception from other nodes but also as a node within which sending and or receiption can take place between node sub systems or nodes acting as sub nodes .

It should be clear that the nodes shown in by no means are complete and they merely contain those means that are necessary for the inventive concept other properties or means normally included in a sending node or a receiving node are not shown for reasons of clarity but also because the sending and receiving nodes may be of many different kinds.

Hence the sending node here comprises message compression selection means which for example may include a dynamic or a static selection algorithm to select messages which are likely to be well compressible or which should be compressed. It may be based on one or more criteria. The criteria generally relate to the length of the messages and possibly also to the redundancy of the messages. It is also possible to select all messages as compressible and the actual criteria solely being whether there are any other messages of the same type etc. as will be more thoroughly explained below in the message information storing means . Normally however long messages with a high redundancy are selected. If a message is regarded as well compressible or selected as a compressible message a message unique identity assigning means is adapted to calculate a unique identity for the message. It is also possible to calculate unique identities for all messages irrespectively of their being compressible or not which however constitutes a less advantageous solution but which should not be excluded. In a preferable implementation a hash value is calculated which allows unique identification of each message and a hash value is used as a message id.

An incoming compressible message or alternatively also other messages are then stored into message information storing means which are adapted to sort the messages depending on type. The calculated unique identity preferably the hash value is then used as a message id under which the messages are stored in the message information storing means . The message information storing means for example comprising a table also links each message to a message syntax based message type description specifying how the message is built up e.g. all the parameters that are sent as well as type of parameters and their allowed values order of parameters limits etc. also referred to as the message body. Message storing decision means may be provided as a separate means not shown or incorporated in the message information storing means are provided for in any appropriate manner to enable building up of the table of message information storing means .

The sending node also comprises message recognition and distinguishing means . By recognition is here meant that the type of the message is recognized and distinguishing is here meant the establishment of the difference between the message and previous messages of the same type. To perform these steps the message recognition and distinguishing means are required to cooperate with the message information storing means i.e. to locate messages of the same type as a current message. For at least a number of the located message or messages a difference is calculated between the stored message and a current message to be sent. Different criteria may be set to determine for which previous messages the difference is to be calculated or for how many. Further it does according to given criterias select one of the messages as closest message or the preferred message. Normally it is the message which differs the least from a current message although also other criteria may be implemented for example if a message is found and the difference does not exceed a given value such message can be selected as a preferred message or if the difference falls under a given limit it may be used as a preferred message etc. Thus if a preferred message is found if for example the difference is small enough the calculated difference the difference is calculated by means comprising or constituting the distinguishing means the calculated difference is attached to the corresponding message unique identity i.e. the previous preferred message found in the message information storing means .

The message compressing means are here seen substantially as an assembling means taking the difference from the recognition and distinguishing means and the unique identity from the message information storing means . This is merely a conceptual distinction that is made the message compression means can also be seen as message compressing means in communication with or comprising the message recognition and distinguishing means and possibly also with the message information storing means which preferably is a cache although it also may be some other storing means.

The hence compressed message is then forwarded to a sending means for sending it to for example a receiving node which e.g. may be a receiving subsystem. Hence a compressed message MSGconsisting of the unique identity of the selected previous message and the calculated difference is sent to a receiving node .

In this very simplified embodiment it is supposed that the receiving node only assumes the functionality of a receiving node and hence only the means and functionalities required in order to support such a functionality are shown in the figure. Thus the receiving node comprises compression detection means receiving the message from receiving means . It is here supposed that the compression detection means are adapted to detect whether a message is compressed or not. In an alternative implementation a message may go directly to a message reconstruction means in which if it is established that it is not a compressed message the message is simply forwarded. However in this particular embodiment it is supposed that the message reconstruction means comprises means for with the use of a message information storing means similar to the one discussed with reference to the sending node finding the previous message using the unique identity thereof and adding the difference to said previous message.

Preferably the receiving arrangement also comprises storing decision means for determining whether a new reconstructed message should be stored under the relevant type in message information storing means or not. It may also be used to determine whether a non compressed received message should be stored into a message information storing means or not. Alternatively all messages are stored. Many variations are possible. If however the storing decision means decide that the message is to be stored it has to communicate with unique identity assigning or calculation means similar to the message unique identity assigning means of the sending node . Decompressed or reconstructed messages can be stored under a unique identity in the message information storing means. As referred to above the process is applicable either in both directions or in one direction only.

The message recognition and distinguishing means particularly comprises difference calculation means. Preferably the difference calculation is based on a syntax tree representation of the messages. Nodes in a syntax tree are numbered and a rewriting scheme is used to express the difference as well as for reconstructing the message from the difference and a previous message. For difference calculation and rewriting the following operations on the syntax tree are defined operation here rewrite node N I D replacement node NID here means node ID i.e. a node address. Description of the operation replace the contents of the referenced node N I D with replacement. Operation Delete node N I D Description delete the node N I.D Operation add node N I D content . Description adding of a node containing content after under node NID.

In order to minimize the size of the difference operations should particularly be identified by a short numberic code e.g. rewrite 1 delete 2 add node 3. It should be clear that this merely relates to one particular example. There are of course many other possibilities particularly as far as the representation is concerned. The operations require referencing of the nodes of the syntax tree representation. In one particular non limiting implementation a two dimensional addressing scheme is used wherein the first dimension is the depth e.g. starting with 1 for the root node and increased with 1 for every level of children added. The second dimension may be a left to right numbering of all children on a specific level. The left to right ordering of the children needs to be deterministic and supported by the message syntax which in practice particularly means that information elements of messages are ordered. It should however be clear that the invention is not limited to such a numbering scheme but that of course also other numbering schemes are possible.

It should be clear that the operations defined above require an unambiguous way to identify the content of a message i.e. a way to address a node in a syntax tree.

First with references to a signal flow scenario with message compression is illustrated between a sending side here comprising a client dispatcher for example a board in a base station and a receiving side here comprising a server receptor which for example may be a board in a base station. It is here supposed that a message for example CarConfigure of type B is incoming to the client dispatcher . It is here supposed that it is a message which is not compressible or that it is the first message of a given type etc the figure merely intends to show that the message CarConfigure is sent to the server receptor. There the required action is performed . In the sender a hash value is calculated here for example with a unique identity ID 2347 and a storing operation is performed wherein the ID and type of the message or messages is stored in storing means . Simultaneously or later the same operation is performed on the receiving side .

At a later occasion it is supposed that a new or current message of type B arrives to the client dispatcher . This message is denoted CarConfigure . In the client dispatcher the difference is then calculated between the first message MSG and the current message both of type B . The calculated difference is as described above together with the unique identity of message sent to the server receptor i.e. the compressed current message with ID 2347 difference CarConfigure CarConfigure . On the receiving side the message ID 2347 is looked up and in the storing means message MSG is found. The current message is calculated through adding the difference to message i.e. CarConfigure . Subsequently the action in question is performed here configure car .

Often the message syntax restricts the range of allowed parameters in the messages. Such parameter ranges may be used to generate code books for message elements and thus reduce the number of bytes needed to transfer parameters. This can be applied to minimize the size of the transferred difference messages. It can also be applied to message sending without difference calculation.

The inventive concept is very advantageous for applications with a considerable amount of complex control plane signalling specially under conditions where communication bandwidth is a limiting factor. As examples can be given Web services over Wireless Wide Area Networks such as for example 3GPP third Generation Partnership Project . Web Services use an XML based protocol transported over HTTP for interaction between for example a mobile station and an application or a database server. Even if Web Services often mix control plane signalling and data traffic in a single message pure or dominantly control plane signalling scenarios do also exist for example for remote configuration of devices or exporting of device API s Application Programming Interfaces to remote devices etc. Bandwidth in 3G networks is a very scarce resource while typically today s mobile devices have abundant computing resources both in terms of memory and MIPS. This is a gap which probably will increase even more in the soon future. An introduction of the inventive concept in such scenarios would lead to the required bandwidth over the air interface being reduced considerably especially as an XML data protocol has a very large potential for signal compression. As an example a mobile application based on web services may access a server via some kind of a wireless connection for example a 3G packet based service. The access comprises commands for example search commands to a data base server and data transfer for example transmission of retrieved search results . The inventive concept can be applied on sending receiving of commands and search commands may for example be redundant over time when new searches are modifications of previous searches. I.e. the concept may be implemented for a mobile device and a remote database.

Other possible applications are in radio base stations. Radio base stations are complex distributed systems with an enormous amount of control plane signalling between subsystems. Especially configuration signals for radio links often carry many parameters most of which are not altered between subsequent signals. The inventive concept can provide for considerable bandwidth savings in such scenarios.

In one embodiment schematically illustrated in message compression is integrated into the sending stack for layer control plane signalling transparent integration of message compression higher layer level layer whereas lower layer is layer of the main processor and it is used in signalling to the transmitter and receiver boards. User data flows are normally not suited for application of the inventive concept.

Hence in it is supposed that a message is received in a node acting as a sending node. It is supposed that the message is denoted current message. Then it is determined whether the message to be transmitted is compressible or not . This can be done in many different ways. In one implementation all messages are considered as compressible. A list may also be provided stating which message types that are compressible. Still further an algorithm may be used to select compressible messages for example based on length and or type. If however it is determined that the message is not compressible the current message is sent as a conventional message A. If however it is determined that the message is compressible a unique identity is assigned to the message in this particular implementation a hash value is calculated for the message. The message i.e. the current message is stored in message information storing means with a unique identity e.g. a hash value the message type and message information or the message body . Then it is established whether the current message type already is present in a message storing means i.e. if there already are one or more messages of the same type stored in the storing means. If not the message is sent as it is A. If however there are messages of the same type as the current message differences are calculated between the current message and such already existing also denoted previous messages . This can be done in different manners differences between the current message and all such previous messages may be calculated or some particular criteria can be given such that if a difference is found and the difference is small enough no further calculations are performed etc. In any case somehow a previous message is selected for example the previous message with the smallest difference from the current message i.e. the closest previous message. Then the compressed message or a delta message is built as the unique identity of the closest previous message or of the preferred message and the calculated difference . Then the in this way assembled current message is sent as a compressed or delta message .

The procedures described above considerably reduce the load related to sending and reception of control plane signalling but adds a memory and CPU time consuming processing step to the sending and receiving subsystem. This means that advantageously an a priori or a dynamic selection of which messages are to be processed by the inventive concept can be provided for as well as the memory available for message cache needs to be provided for or taken into consideration. Generally the more parameters a message carries the larger the optimization potential will be. The message cache could be dimensioned to only hold one or a very few disparate messages of each type. Moreover if computing power and memory are available but communicating capacity for example via an air interface is limited the inventive concept is potentially very efficient. However also other factors may be taken into consideration or be disregarded etc.

In a preferred implementation it is provided for storing means or particularly cache coherency which means that mechanisms are introduced to secure cache coherency on a sending and on a receiving side. Still further in an advantageous implementation an error handling mechanism is provided for in order to handle the situation of unexpected cache incoherency.

Further for the difference calculation computational activity may be more important than minimizing the size of the calculated difference information.

It should be clear that the invention can be varied in a number of ways and applied to different kinds of senders and receivers one directionally or two directionally. Further it can be implemented in many different manners using different algorithms and storing means and be based on different criterias for selection of compressibility and for selection of closest message etc. Also in other aspects the invention is not limited to the explicitly illustrated embodiments but it can be varied in a number of ways within the scope of the appended claims.

