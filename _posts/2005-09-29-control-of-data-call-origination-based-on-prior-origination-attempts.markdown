---

title: Control of data call origination based on prior origination attempts
abstract: A wireless device receives a request to originate a data call, e.g., from the user or a higher layer application. If origination control is not to be applied, then the wireless device originates the data call immediately. Otherwise, the origination of the data call is controlled based on prior data call origination attempts that are applicable to the data call. For example, the wireless device may originate the data call immediately if (1) the most recent origination attempt was successful or (2) the most recent origination attempt was unsuccessful but a predetermined time period has elapsed since this unsuccessful origination attempt. If the most recent origination attempt was unsuccessful and the predetermined time period has not elapsed, then the wireless device may (1) wait until this predetermined time period elapses and then originate the data call or (2) reject the data call.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08660527&OS=08660527&RS=08660527
owner: QUALCOMM Incorporated
number: 08660527
owner_city: San Diego
owner_country: US
publication_date: 20050929
---
The present Application for Patent claims priority to Provisional Application No. 60 654 771 entitled Throttling of the Data call originations based on Failure reasons filed Feb. 17 2005 and assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The present disclosure relates generally to communication and more specifically to techniques for originating data calls in a wireless communication network.

Wireless communication networks are widely deployed to provide various communication services such as voice data video broadcast messaging and so on. These networks may be multiple access networks capable of supporting communication with multiple users by sharing the available system resources. Examples of such multiple access networks include Code Division Multiple Access CDMA networks Time Division Multiple Access TDMA networks Frequency Division Multiple Access FDMA networks and Orthogonal Frequency Division Multiple Access OFDMA networks. A CDMA network may implement a radio access technology RAT such as cdma2000 Wideband CDMA W CDMA and so on. cdma2000 covers IS 2000 and IS 95 standards. A TDMA network may implement a RAT such as Global System for Mobile Communications GSM . These various RATs and standards are known in the art.

A wireless device may originate a data call in order to obtain data service from a wireless network. The process to originate a data call is referred to as data call origination. The wireless device performs a sequence of tasks with one or more network entities for data call origination. The data call may succeed or fail for various reasons. If the data call fails then the wireless device may originate the data call once more. Depending on the outcome of each origination attempt the wireless device may repeat the data call origination any number of times possibly automatically without regards to the causes of the call failures. Each failed origination attempt consumes valuable radio link resources without achieving any useful result or benefit.

There is therefore a need in the art for techniques to control data call origination in a manner to conserve radio link resources.

Techniques for controlling origination of data calls based on a history of prior data call origination attempts or a call history are described herein. A wireless device may maintain the call history in a call history table. Each entry in the table may be for a different combination of wireless network network zone and data call type as described below. Each entry may contain information such as whether the last data call origination attempt was successful or unsuccessful the number of failed origination attempts since the last successful origination attempt and so on. The wireless device may use the call history to control subsequent data call originations so that radio link resources are conserved.

In an embodiment of the techniques a request to originate a data call is received e.g. from the user or a higher layer application and a determination is made whether to control origination of the data call. Origination control may be applied to certain types of data calls and not applied to other types of data calls. If origination control is not to be applied then the wireless device originates the data call immediately. Otherwise the origination of the data call is controlled based on prior data call origination attempts that are applicable to this data call. For example the wireless device may originate the data call immediately if 1 the most recent origination attempt was successful or 2 the most recent origination attempt was unsuccessful but a predetermined time period has elapsed since this unsuccessful origination attempt. If the most recent origination attempt was unsuccessful and the predetermined time period has not elapsed then the wireless device may 1 wait until this predetermined time period elapsed and then originate the data call or 2 reject the data call. The predetermined time period may be a fixed duration or a variable duration. The variable duration may be dependent on various factors such as the number of unsuccessful origination attempts since the last successful origination attempt e.g. a longer duration for more failed origination attempts the type of failure encountered for the most recent origination attempt and so on. If the data call is originated then the call history is updated based on the outcome for this origination attempt.

The word exemplary is used herein to mean serving as an example instance or illustration. Any embodiment or design described herein as exemplary is not necessarily to be construed as preferred or advantageous over other embodiments or designs.

The techniques described herein for controlling origination of data calls may be used for various wireless communication networks and systems. For example these techniques may be used for a cdma2000 network a 1xEV DO network a Universal Mobile Telecommunications System UMTS network a GSM network a GSM EDGE network that implements GSM and General Packet Radio Service GPRS a wireless local area network WLAN such as an IEEE 802.11 network and so on. For clarity much of the description below is for cdma2000 and 1xEV DO networks. A cdma2000 network implements IS 2000 and or IS 95 and can provide voice and data services. A 1xEV DO network implements IS 856 and is optimized for data service.

Wireless network is composed of a radio network and a packet data network. Radio network includes base station and packet control function and supports radio communication. The packet data network includes PDSN and supports packet switched communication between radio network and IP network . Wireless network typically includes other network entities that are not shown in for simplicity. The network entities shown in may also be referred to by other terminology. For example in a UMTS network base station is called a Node B packet control function is called a serving GPRS support node SGSN and PDSN is called a gateway GPRS support node GGSN .

Wireless device may be fixed or mobile and is also called a mobile station cdma2000 terminology an access terminal 1xEV DO terminology a user equipment UMTS terminology a terminal a subscriber unit or some other terminology. Wireless device may be able to communicate with a cdma2000 network or a 1xEV DO network or both networks.

Wireless network may support Simple IP and or Mobile IP. Simple IP refers to a service in which a wireless device is assigned an IP address and is provided IP routing service by the wireless network. The wireless device retains its IP address as long as it is served by a radio network that has connectivity to the same serving PDSN. Mobile IP refers to a service in which a wireless device is able to maintain a persistent IP address even when handed off between radio networks connected to different PDSNs. Data call origination is different for Simple IP and Mobile IP.

Data call originations for both Simple IP and Mobile IP in cdma2000 are described in 3GPP2 X.S0011 002 C entitled cdma2000 Wireless IP Network Standard Simple IP and Mobile IP Access Services August 2003. PPP establishment is described in RFC 1661 entitled The Point to Point Protocol PPP July 1994. Mobile IP registration is described in RFC 2002 entitled IP Mobility Support October 1996. These documents are publicly available.

Wireless device may be in a Null state a dormant state or an active state at any given moment. In the Null state PPP is not established and a traffic channel has not been assigned. In the dormant state PPP is established but a traffic channel has not been assigned. In the active state PPP is established a traffic channel has been assigned and the wireless device can exchange data with the wireless network. The wireless device can originate a data call in the Null state and can re originate a data call in the dormant state.

A scenario for invalid data subscriber may be as follows. The wireless device originates a data call. The base station communicates with the PDSN and typically also communicates with the RADIUS server for Simple IP or the home agent for Mobile IP . The RADIUS server or the home agent determines whether the wireless device has subscribed for the requested data service and if not informs the base station that the wireless device is not a valid data subscriber. The base station then rejects the data call origination with a reason.

Some scenarios for authentication failure may be as follows. The wireless device originates a data call from the Null state. The base station assigns a traffic channel to the wireless device. PPP is then negotiated between the wireless device and the PDSN. For Simple IP authentication e.g. CHAP or PAP during PPP negotiation may fail. For Mobile IP authentication during MIP registration may fail.

Some scenarios for network unavailability may be as follows. In one scenario the wireless device originates a data call from the Null state. The data call may fail if the radio network is not able to establish the A10 A11 connections between the packet control function and the PDSN and hence rejects the data call. The data call may also fail if the radio network successfully establishes the A10 A11 connections but the PPP negotiation fails due to the PDSN being in a bad state. In another scenario the wireless device re originates a data call from the dormant state. The data call may fail if the radio network could not communicate with the PDSN and hence rejects the data call. The data call may also fail if the radio network accepts the data call but the PDSN is in a bad state and discards the data call.

Data call originations for Simple IP and Mobile IP may also fail due to PPP negotiation failures resulting from an LCP timeout an IPCP timeout PPP setup failure and so on. An LCP timeout occurs if a response for an LCP Configure Request packet is not received within an LCP timeout period. An IPCP timeout occurs if IPCP negotiation is unsuccessful after an IPCP timeout period. PPP setup may fail due to mismatch in options at the wireless device and the PDSN for initial data call setup or for PPP resynchronization following a handoff. For Simple IP PPP negotiation failure may also result from PPP authentication failure.

Data call origination for Mobile IP MIP may also fail for the following reasons a MIP agent solicitation timeout a MIP RRQ Registration Request timeout MIP foreign agent failure and MIP home agent failure. A MIP agent solicitation timeout occurs if a response for an Agent Solicitation message is not received within a timeout period. A MIP RRQ timeout occurs if a reply for a Registration Request is not received within an RRQ timeout period. MIP foreign agent failure occurs if a Registration Reply message with a foreign agent failure code is received from the home agent. MIP home agent failure occurs if a Registration Reply message with a home agent failure code is received from the PDSN.

The wireless device may maintain a history of prior data call origination attempts e.g. in a call history table. Each entry in the call history table may be for a different combination of wireless network network zone and data call type as described below. Each entry may include information such as whether the last data call origination attempt was successful or unsuccessful the number of failed data call origination attempts or call failures since the last successful origination attempt and so on. The call history may be maintained for certain types of call failures that are indicative of the likelihood of success for future data call originations. The wireless device may use this call history to control subsequent data call originations so that radio link resources are conserved. The use of prior origination attempts to control future data call originations is referred to as call throttling .

In an embodiment the following types of call failures result in throttling of future data call originations 

PPP negotiation is not performed if the wireless device re originates a data call from dormancy. The PDSN may be in a bad state and may discard the data from the wireless device. The wireless device would not know that data is not passing through. Thus if the wireless device re originates a data call from dormancy and the radio network accepts the data call but data it not properly exchanged then the wireless device may rely on applications running at higher layer to throttle future data calls.

In an embodiment call throttling is achieved based on a back off timer that indicates the amount of time to wait after a call failure before originating the data call again. The timer may be set to an increasingly larger value after each call failure and may be reset if the data call is successful. The timer may be set to Wminutes after the first call failure Wminutes after the second call failure Wminutes after the third call failure and Wminutes after the fourth call failure where in general W

In order to avoid overloading the wireless network due to many wireless devices backing off and originating data calls at the same time different time offsets may be used for the timers for different wireless devices. For example a random offset may be generated for each wireless device based on a mobile device number MDN which is a phone number for the wireless device. The timer for the wireless device would then be offset from system time by this random offset.

The call history may include various types of information and may be maintained in various formats. In an embodiment the call history is maintained separately for each network zone in each wireless network. For cdma2000 each larger system is identified by a system identification SID value each smaller network within a given system is identified by a network identification NID value and each PCF coverage area within a given SID NID area is identified by a packet zone identification PZID value. Each network zone in the cdma2000 network may thus be identified by a SID NID PZID triplet. For 1xEV DO the systems and smaller networks are identified using a subnet ID which may be up to 128 bits long and follow IPv6 representation format described in RFC2460 entitled Internet Protocol Version 6 IPv6 Specification December 1998. Each network zone in the 1xEV DO network may thus be identified by a subnet ID. Similar network identifiers may be used for other wireless networks such as GSM GSM GPRS UMTS and 802.11 networks. The reason for keeping the call history separately for each network zone is because call failures in one network zone may not be indicative of the likelihood of success for data call originations in other network zones.

In an embodiment the call history is maintained separately for each data call type of interest. For cdma2000 the call history may be maintained for the following data call types 1 service option 33 SO 33 for high speed packet data service 2 service option 12 SO 12 for low data rate circuit switched packet data service 3 service option 15 SO 15 for medium data rate packet data service in IS 95A and 4 service option 25 SO 25 for medium data rate packet data service in IS 95B. Alternatively all of the service options in cdma2000 may be considered as belonging to one data call type and the call history may be maintained for this one data call type. For 1xEV DO the call history may be maintained for one data call type which is packet data. In general the call history may be maintained for any number of data call types and any given data call type. The reason for keeping the call history separately for each data call type is because call failures for one data call type may not be correlated with the likelihood of success for data call originations for other data call types.

The call history may keep track of only certain types of call failures for which call throttling applies. The call history may also keep track of the type of failure encountered for a failed data call. For example the call history may keep track of whether a call failure was due to radio network rejection authentication failure PPP negotiation failure Mobile IP setup failure and so on. The same or different sets of timer values may be used for different call failure types. For example a first set of smaller timer values may be used for call failures due to radio network rejection a second set of larger timer values may be used for PPP negotiation failures and a third set of even larger timer values may be used for Mobile IP setup failures. In general the timer values may be matched to the expected amount of time in which the causes of the call failures will be remedied. The timer values may be determined based on field measurements computer simulation or by some other means. In an embodiment the call history keeps track of whether call failures are due to radio network PDSN or Mobile IP. In another embodiment all call failures are treated as being of the same type and the call history does not keep track of the failure type for each call failure. In general the call history may keep track of any number of call failure types and any given call failure type.

For the embodiment shown in one entry may be generated in table for each different combination of network type network zone and data call type. For each entry the throttle enable may be set to either 1 Yes to indicate that throttling is to be performed for origination of data calls covered by that entry e.g. data calls of the same data call type network zone and wireless network as the entry or 2 No to indicate that throttling is not to be performed. Alternatively a timer value of zero W 0 may be used to indicate that throttling is not to be performed.

Entries in table may be generated and deleted in various manners. In an embodiment the table initially contains no entries. Whenever a call failure occurs the call failure type data call type network zone and wireless network for the call failure are ascertained. If an entry does not already exist in the table for this combination of data call type network zone and wireless network then a new entry is generated in the table for this call failure. If an entry already exists in the table for this combination then this entry is updated with this call failure. Whenever a call success is encountered the data call type network zone and wireless network for the data call are ascertained. The entry in the table for this combination of data call type network zone and wireless network is identified and updated with this call success. For the above embodiment entries are generated as call failures occur and may be deleted as call successes are encountered. In another embodiment entries are generated for all or many of the possible combinations of data call type network zone and wireless network and are updated based on call failures and successes.

In an embodiment table stores the following information for each entry 1 the status e.g. success or failure of the most recent data call origination attempt for that entry and 2 the number of failed origination attempts since the last successful origination attempt for that entry. These two pieces of information may be conveniently expressed by a timer value used for the back off timer for the most recent call failure if any for that entry. The timer value for an entry may be initialized to zero and may also be reset to zero if call success is encountered for the entry. The timer value for the entry may be increased to the next value in set W e.g. from zero to W from Wto W from Wto W or from Wto W if call failure is encountered. Thus a timer value of zero indicates that the most recent origination attempt was successful a timer value of Windicates one failed origination attempt since the last successful origination attempt a timer value of Windicates two failed origination attempts since the last successful origination attempt a timer value of Windicates three failed origination attempts since the last successful origination attempt and a timer value of Windicates at least four failed origination attempts since the last successful origination attempt.

In an embodiment table also stores the time of the last origination attempt for each entry. This last attempt time may be used to implement a timer for the entry e.g. the timer is deemed to be expired if the current time minus the last attempt time is equal to or greater than the current timer value. The last attempt time may also be used to purge old entries in the table. For example if the table is limited in size then an entry for a new combination of data call type network zone and wireless network may overwrite the entry with the oldest last attempt time in the table.

If throttling is to be applied to the data call then the wireless device determines whether the timer applicable to the data call has expired block . If the most recent origination attempt was successful then the timer will not be running and considered as expired. If the most recent origination attempt was unsuccessful then the timer will have been started by this unsuccessful origination attempt and may or may not have expired. If the timer has not expired then the wireless device waits for the timer to expire block . After the timer expires the wireless device originates the data call block .

A determination is then made whether call failure is encountered for the data call block . If the answer is Yes then the wireless device increases the timer value from Wto W unless Wis already the maximum value in set W block . The wireless device then starts the timer with the current timer value block . Otherwise if the data call is successful and the answer is No for block then the wireless device clears the call history and resets the timer value to zero block .

If origination control is to be applied to the data call then the origination of the data call is controlled based on prior data call origination attempts that are applicable to the data call block . These prior origination attempts may be stored in the table entry that covers the data call. For block a determination is first made whether the most recent origination attempt for the data call was successful block . If the answer is Yes then the wireless device originates the data call immediately block . Otherwise if the most recent origination attempt was unsuccessful then the wireless device originates the data call after a predetermined time period has elapsed since the last unsuccessful origination attempt block . This predetermined time period may be a fixed duration or a variable duration. The variable duration may be dependent on various factors such as the number of unsuccessful origination attempts since the last successful origination attempt e.g. a longer duration for more failed origination attempts the data call type the call failure type and so on. Alternatively in place of block the data call may be rejected if the predetermined time period has not elapsed.

After originating the data call the history of prior data call origination attempts is updated based on the outcome for the current origination attempt block . If the current origination attempt is successful then this origination attempt becomes the last successful origination attempt. Conversely if the current origination attempt is unsuccessful then the number of unsuccessful origination attempts is incremented.

Processes and are for two embodiments of the techniques described herein. These techniques may also be implemented in other manners and this is within the scope of the invention.

In certain circumstances the wireless device may originate a data call immediately after a failed data call even if throttling is enabled. For example MIP to SIP fallback may be allowed which means that the wireless device can originate a Simple IP data call if a Mobile IP data call fails. The wireless device may originate the Simple IP data call immediately after the Mobile IP call failure without applying throttling to the Simple IP data call. If the Simple IP data call also fails then the wireless device may apply throttling to subsequent data call originations. Alternatively the wireless device may apply throttling to the Simple IP data call due to the Mobile IP call failure.

The wireless device may be multi mode hybrid and may be able to communicate with both the cdma2000 and 1xEV DO networks. The wireless device may originate a data call on the 1xEV DO network and may encounter call failure. The wireless device may then originate a data call on the cdma2000 network with or without throttling. The cdma2000 and 1xEV DO networks may be considered as independent networks so that call failure on one network does not provide any information on the likelihood of call success on the other network. In this case the wireless device can originate a data call on the cdma2000 network immediately after encountering call failure on the 1xEV DO network. Alternatively the cdma2000 and 1xEV DO networks may be considered as correlated so that call failure on one network indicates greater likelihood of call failure on the other network. This correlation may be due to both networks having similar loading profile sharing some network entities and so on. In this case the wireless device may originate a data call on the cdma2000 network after waiting a normal or reduced back off period due to call failure on the 1xEV DO network.

Controller directs the operation of various units within wireless device . Controller may implement process in and or process in to control origination of data calls. Memory unit stores program codes and data used by controller and other units. Timer provides timing information used to implement the back off timers for call throttling.

Call manager may perform various functions to control the origination of data calls. For example call manager may provide application programming interfaces APIs to allow other entities to enable and disable the throttling of data calls and to reset the back off timers. Call manager receives from call control module indications of success or failure for data calls and the type of failure for each failed data call. Call manager or some other entity can maintain call history table .

The techniques described herein may be used for various types of data calls such as e.g. sockets and tethered data calls Simple IP and Mobile IP data calls and so on. A tethered data call is a data call made by a terminal equipment e.g. a laptop computer that is coupled to the wireless device and using the wireless device to obtain data service. In general these techniques may be used for any type of data call in which the wireless device has knowledge of call failures and possibly the causes of these call failures.

The techniques described herein may be implemented by various means. For example these techniques may be implemented in hardware software or a combination thereof. For a hardware implementation the processing units used to control origination of data calls e.g. controller or call manager may be implemented within one or more application specific integrated circuits ASICs digital signal processors DSPs digital signal processing devices DSPDs programmable logic devices PLDs field programmable gate arrays FPGAs processors controllers micro controllers microprocessors electronic devices other electronic units designed to perform the functions described herein or a combination thereof.

For a software implementation the techniques may be implemented with modules e.g. procedures functions and so on that perform the functions described herein. The software codes may be stored in a memory unit e.g. memory unit in and executed by a processor e.g. controller . The memory unit may be implemented within the processor or external to the processor.

The previous description of the disclosed embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the invention. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

