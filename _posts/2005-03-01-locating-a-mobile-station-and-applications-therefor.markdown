---

title: Locating a mobile station and applications therefor
abstract: A location system is disclosed for wireless telecommunication infrastructures. The system is an end-to-end solution having one or more location systems for outputting requested locations of hand sets or mobile stations (MS) based on, e.g., AMPS, NAMPS, CDMA or TDMA communication standards, for processing both local mobile station location requests and more global mobile station location requests via, e.g., Internet communication between a distributed network of location systems. The system uses a plurality of mobile station locating technologies including those based on: (1) two-way TOA and TDOA; (2) home base stations and (3) distributed antenna provisioning. Further, the system can be modularly configured for use in location signaling environments ranging from urban, dense urban, suburban, rural, mountain to low traffic or isolated roadways. The system is useful for 911 emergency calls, tracking, routing, people and animal location including applications for confinement to and exclusion from certain areas.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07812766&OS=07812766&RS=07812766
owner: TracBeam LLC
number: 07812766
owner_city: Golden
owner_country: US
publication_date: 20050301
---
The present invention is directed generally to a system and method for locating people or objects and in particular to a system and method for locating a wireless mobile radio station in a macro base station distributed antenna or home base station environment.

Wireless communications systems are becoming increasingly important worldwide. Wireless cellular telecommunications systems are rapidly replacing conventional wire based telecommunications systems in many applications. Commercial mobile radio service provider networks and specialized mobile radio and mobile data radio networks are examples. The general principles of wireless cellular telephony have been described variously for example in U.S. Pat. No. 5 295 180 to Vendetti et al filed Apr. 8 1992 which is incorporated herein by reference. There is great interest in using existing infrastructures for wireless communication systems for locating people and or objects in a cost effective manner. Such a capability would be invaluable in a variety of situations especially in emergency or crime situations. Due to the substantial benefits of such a location system several attempts have been made to design and implement such a system. Systems have been proposed that rely upon signal strength and trilateralization techniques to permit location include those disclosed in U.S. Pat. No. 4 818 998 filed Mar. 31 1986 and U.S. Pat. No. 4 908 629 filed Dec. 5 1988 both to Apsell et al. the Apsell patents and U.S. Pat. No. 4 891 650 to Sheffer the Sheffer patent filed May 16 1988. The Apsell patents disclose a system employing a homing in scheme using radio signal strength wherein the scheme detects radio signal strength transmitted from an unknown location. This signal strength is detected by nearby tracking vehicles such as police cruisers using receivers with directional antennas. Alternatively the Sheffer patent discloses a system using the FM analog cellular network. This system includes a mobile transmitter located on a vehicle to be located. The transmitter transmits an alarm signal upon activation to detectors located at base stations of the cellular network. These detectors receive the transmitted signal and transmit to a central station data indicating the signal strength of the received signal and the identity of the base stations receiving the signal. This data is processed to determine the distance between the vehicle and each of the base stations and through trilateralization the vehicle s position. However these systems have drawbacks that include high expense in that special purpose electronics are required. Furthermore the systems are generally only effective in line of sight conditions such as rural settings. Radio wave surface reflections refractions and ground clutter cause significant distortion in determining the location of a signal source in most geographical areas that are more than sparsely populated. Moreover these drawbacks are particularly exacerbated in dense urban canyon city areas where errors and or conflicts in location measurements can result in substantial inaccuracies.

Another example of a location system using time of arrival and triangulation for location are satellite based systems such as the military and commercial versions of the Global Positioning Satellite system GPS . GPS can provide accurate position determination i.e. about 100 meters error for the commercial version of GPS from a time based signal received simultaneously from at least three satellites. A ground based GPS receiver at or near the object to be located determines the difference between the time at which each satellite transmits a time signal and the time at which the signal is received and based on the time differentials determines the object s location. However the GPS is impractical in many applications. The signal power levels from the satellites are low and the GPS receiver requires a clear line of sight path to at least three satellites above a horizon of about 60 degrees for effective operation. Accordingly inclement weather conditions such as clouds terrain features such as hills and trees and buildings restrict the ability of the GPS receiver to determine its position. Furthermore the initial GPS signal detection process for a GPS receiver is relatively long i.e. several minutes for determining the receivers position. Such delays are unacceptable in many applications such as for example emergency response and vehicle tracking.

Differential GPS or DGPS systems offer correction schemes to account for time synchronization drift. Such correction schemes include the transmission of correction signals over a two way radio link or broadcast via FM radio station subcarriers. These systems have been found to be awkward and have met with limited success.

Additionally GPS based location systems have been attempted in which the received GPS signals are transmitted to a central data center for performing location calculations. Such systems have also met with limited success due for example to the limited reception of the satellite signals and the added expense and complexity of the electronics required for an inexpensive location mobile station or handset for detecting and receiving the GPS signals from the satellites.

The behavior of a mobile radio signal in the general environment is unique and complicated. Efforts to perform correlation between radio signals and distance between a base station and a mobile station are similarly complex. Repeated attempts to solve this problem in the past have been met with only marginal success. Factors include terrain undulations fixed and variable clutter atmospheric conditions internal radio characteristics of cellular and PCS systems such as frequencies antenna configurations modulation schemes diversity methods and the physical geometry of direct refracted and reflected waves between the base stations and the mobile. Noise such as man made externally sources e.g. auto ignitions and radio system co channel and adjacent channel interference also affect radio reception and related performance measurements such as the analog carrier to interference ratio C I or digital energy per bit Noise density ratio E and are particular to various points in time and space domains.

Before discussing real world correlation between signals and distance it is useful to review the theoretical premise that of radio energy path loss across a pure isotropic vacuum propagation channel and its dependencies within and among various communications channel types.

Over the last forty years various mathematical expressions have been developed to assist the radio mobile cell designer in establishing the proper balance between base station capital investment and the quality of the radio link typically using radio energy field strength usually measured in microvolts meter or decibels.

One consequence from a location perspective is that the effective range of values for higher exponents is an increased at higher frequencies thus providing improved granularity of ranging correlation.

Actual data collected in real world environments uncovered huge variations with respect to the free space path loss equation giving rise to the creation of many empirical formulas for radio signal coverage prediction. Clutter either fixed or stationary in geometric relation to the propagation of the radio signals causes a shadow effect of blocking that perturbs the free space loss effect. Perhaps the best known model set that characterizes the average path loss is Hata s Empirical Formula for Propagation Loss in Land Mobile Radio M. Hata VT 29 pp. 317 325 August 1980 three pathloss models based on Okumura s measurements in and around Tokyo Field Strength and its Variability in VHF and UHF Land Mobile Service Y. Okumura et al Vol 16 pp 825 873 September October 1968.

Although the Hata model was found to be useful for generalized RF wave prediction in frequencies under 1 GHz in certain suburban and rural settings as either the frequency and or clutter increased predictability decreased. In current practice however field technicians often have to make a guess for dense urban an suburban areas applying whatever model seems best then installing a base stations and begin taking manual measurements.

In 1991 U.S. Pat. No. 5 055 851 to Sheffer filed Nov. 29 1989 taught that if three or more relationships have been established in a triangular space of three or more base stations BSs with a location database constructed having data related to possible mobile station MS locations then arculation calculations may be performed which use three distinct Pmeasurements to determine an X Y two dimensional location which can then be projected onto an area map. The triangulation calculation is based on the fact that the approximate distance of the mobile station MS from any base station BS cell can be calculated based on the received signal strength. Sheffer acknowledges that terrain variations affect accuracy although as noted above Sheffer s disclosure does not account for a sufficient number of variables such as fixed and variable location shadow fading which are typical in dense urban areas with moving traffic.

Most field research before about 1988 has focused on characterizing with the objective of RF coverage prediction the RF propagation channel i.e. electromagnetic radio waves using a single ray model although standard fit errors in regressions proved dismal e.g. 40 80 dB . Later multi ray models were proposed and much later certain behaviors were studied with radio and digital channels. In 1981 Vogler proposed that radio waves at higher frequencies could be modeled using optics principles. In 1988 Walfisch and Bertoni applied optical methods to develop a two ray model which when compared to certain highly specific controlled field data provided extremely good regression fit standard errors of within 1.2 dB.

In the Bertoni two ray model it was assumed that most cities would consist of a core of high rise buildings surrounded by a much larger area having buildings of uniform height spread over regions comprising many square blocks with street grids organizing buildings into rows that are nearly parallel. Rays penetrating buildings then emanating outside a building were neglected.

After a lengthy analysis it was concluded that path loss was a function of three factors 1. the path loss between antennas in free space 2. the reduction of rooftop wave fields due to settling and 3. the effect of diffraction of the rooftop fields down to ground level.

However a substantial difficulty with the two ray model in practice is that it requires a substantial amount of data regarding building dimensions geometry street widths antenna gain characteristics for every possible ray path etc. Additionally it requires an inordinate amount of computational resources and such a model is not easily updated or maintained.

Unfortunately in practice clutter geometry and building heights are random. Moreover data of sufficient detail is extremely difficult to acquire and regression standard fit errors are poor i.e. in the general case these errors were found to be 40 60 dB. Thus the two ray model approach although sometimes providing an improvement over single ray techniques still did not predict RF signal characteristics in the general case to level of accuracy desired 

Work by Greenstein has since developed from the perspective of measurement based regression models as opposed to the previous approach of predicting first then performing measurement comparisons. Apparently yielding to the fact that low power low antenna e.g. 12 25 feet above ground height PCS microcell coverage was insufficient in urban buildings Greenstein et al authored Performance Evaluations for Urban Line of sight Microcells Using a Multi ray Propagation Model in IEEE Globecom Proceedings December 1991. This paper proposed the idea of formulating regressions based on field measurements using small PCS microcells in a lineal microcell geometry i.e. geometries in which there is always a line of sight path between a subscriber s mobile and its current microsite . Additionally Greenstein studied the communication channels variable Bit Error Rate BER in a spatial domain which was a departure from previous research that limited field measurements to the RF propagation channel signal strength alone. However Greenstein based his finding on two suspicious assumptions 1 he assumed that distance correlation estimates were identical for uplink and downlink transmission paths and 2 modulation techniques would be transparent in terms of improved distance correlation conclusions. Although some data held very correlation other data and environments produced poor results. Accordingly his results appear unreliable for use in general location context.

In 1993 Greenstein et al authored A Measurement Based Model for Predicting Coverage Areas of Urban Microcells in the IEEE Journal On Selected Areas in Communications Vol. 11 No. 7 September 1993. Greenstein reported a generic measurement based model of RF attenuation in terms of constant value contours surrounding a given low power low antenna microcell environment in a dense rectilinear neighborhood such as New York City. However these contours were for the cellular frequency band. In this case LOS and non LOS clutter were considered for a given microcell site. A result of this analysis was that RF propagation losses or attenuation when cell antenna heights were relatively low provided attenuation contours resembling a spline plane curve depicted as an asteroid aligned with major street grid patterns. Further Greenstein found that convex diamond shaped RF propagation loss contours were a common occurrence in field measurements in a rectilinear urban area. The special plane curve asteroid is represented by the formula 

x y r. However these results alone have not been sufficiently robust and general to accurately locate an mobile station due to the variable nature of urban clutter spatial arrangements.

At Telesis Technology in 1994 Howard Xia et al authored Microcellular Propagation Characteristics for Personal Communications in Urban and Suburban Environments in IEEE Transactions of Vehicular Technology Vol. 43 No. 3 August 1994 which performed measurements specifically in the PCS 1.8 to 1.9 GHz frequency band. Xia found corresponding but more variable outcome results in San Francisco Oakland urban and the Sunset and Mission Districts suburban .

The physical radio propagation channel perturbs signal strength frequency causing rate changes phase delay signal to noise ratios e.g. C I for the analog case or E RF energy per bit over average noise density ratio for the digital case and Doppler shift. Signal strength is usually characterized by 

The cell designer increases the transmitted power Pby the shadow fading margin Lwhich is usually chosen to be within the 1 2 percentile of the slow fading probability density function PDF to minimize the probability of unsatisfactorily low received power level Pat the receiver. The Plevel must have enough signal to noise energy level e.g. 10 dB to overcome the receiver s internal noise level e.g. 118 dBm in the case of cellular 0.9 GHz for a minimum voice quality standard. Thus in this example Pmust never be below 108 dBm in order to maintain the quality standard.

Additionally the short term fast signal fading due to multipath propagation is taken into account by deploying fast fading margin L which is typically also chosen to be a few percentiles of the fast fading distribution. The 1 to 2 percentiles compliment other network blockage guidelines. For example the cell base station traffic loading capacity and network transport facilities are usually designed for a 1 2 percentile blockage factor as well. However in the worst case scenario both fading margins are simultaneously exceeded thus causing a fading margin overload.

In Roy Steele s text IEEE Press 1992 estimates for a GSM system operating in the 1.8 GHz band with a transmitter antenna height of 6.4 m and a mobile station receiver antenna height of 2 m and assumptions regarding total path loss transmitter power would be calculated as follows 

Steele s sample size in a specific urban London area of 80 000 LOS measurements and data reduction found a slow fading variance of 7 dB assuming log normal slow fading PDF and allowing for a 1.4 slow fading margin overload thus 2 14 dB The fast fading margin was determined to be L 7 dB

In contrast Xia s measurements in urban and suburban California at 1.8 GHz uncovered flat land shadow fades on the order of 25 30 dB when the mobile station MS receiver was traveling from LOS to non LOS geometries. In hilly terrain fades of 5 to 50 dB were experienced. Thus it is evident that attempts to correlate signal strength with mobile station ranging distance suggest that error ranges could not be expected to improve below 14 dB with a high side of 25 to 50 dB. Based on 20 to 40 dB per decade Corresponding error ranges for the distance variable would then be on the order of 900 feet to several thousand feet depending upon the particular environmental topology and the transmitter and receiver geometries.

Although the acceptance of fuzzy logic has been generally more rapid in non American countries the principles of fuzzy logic can be applied in wireless location. Lotfi A. Zadeh s article Fuzzy Sets published in 1965 in vol. 8 Pg 338 353 herein incorporated by reference established the basic principles of fuzzy logic among which a key theorem the FAT theorem suggests that a fuzzy system with a finite set of rules can uniformly approximate any continuous or Borel measureable system. The system has a graph or curve in the space of all combinations of system inputs and outputs. Each fuzzy rule defines a patch in this space. The more uncertain the rule the wider the patch. A finite number of small patches can always cover the curve. The fuzzy system averages patches that overlap. The Fat theorem was proven by Bart Kosko in a paper entitled Fuzzy Systems as Universal Approximators in Pages 1153 1162 in San Diego on March 1992 herein incorporated by reference.

Fuzzy relations map elements of one universe say X to those of another universe say Y through the Cartesian product of the two universes. However the strength of the relation between ordered pairs of the two universes is not measured with the characteristic function in which an element is either definitely related to another element as indicated by a strength value of 1 or is definitely not related to another element as indicated by a strength value of 0 but rather with a membership function expressing various degrees of strength of the relation on the unit interval 0 1 . Hence a fuzzy relation R is a mapping from the Cartesian space X Y to the interval 0 1 where the strength of the mapping is expressed by the membership function of the relation for ordered pairs from the two universes or x y .

Just as for crisp relations the properties of commutativity associativity distributivity involution and idempotency all hold for fuzzy relations. Moreover DeMorgan s laws hold for fuzzy relations just as they do for crisp classical relations and the null relations O and the complete relation E are analogous to the null set and the whole set in set theoretic from respectively. The properties that do not hold for fuzzy relations as is the case for fuzzy sets in general are the excluded middle laws. Since a fuzzy relation R is also a fuzzy set there is overlap between a relation and its complement hence.

As seen in the foregoing expression the excluded middle laws for relation do not result in the null relation O or the complete relation E. Because fuzzy relations in general are fuzzy sets the Cartesian product can be defined as a relations between two or more fuzzy sets. Let A be a fuzzy set on universe X and B be a fuzzy set on universe Y then the Cartesian product between fuzzy sets A and B will result in a fuzzy relation R which is contained within the full Cartesian product space or

Fuzzy composition can be defined just as it is for crisp binary relations. If R is a fuzzy relation on the Cartesian space X Y and S is a fuzzy relation on the Cartesian space Y Z and T is a fuzzy relation on the Cartesian space X Z then fuzzy max min composition is defined in terms of the set theoretic notation and membership function theoretic notation in the following manner max min 

The fuzzy extension principle allows for transforms or mappings of fuzzy concepts in the form y f x . This principle combined with a compositional rule of inference allows for a crisp input to be mapped through a fuzzy transform using membership functions into a crisp output. Additionally in mapping a variable x into a variable y both x and y can be vector quantities.

It is an objective of the present invention to provide a system and method for determining wireless location using one or more commercial mobile radio telecommunication systems for accurately locating people and or objects in a cost effective manner. Related objectives for the present invention include providing a system and method that 

Yet another objective is to provide a low cost location system and method adaptable to wireless telephony systems for using simultaneously a plurality of base stations owned and or operated by competing commercial mobile radio service providers within a common radio coverage area in order to achieve FCC phase 2 or other accuracy requirements and for synergistically increasing mobile station location accuracy and consistency.

Yet another objective is to provide a low cost location system and method adaptable to wireless telephony systems for using a plurality of location techniques In particular at least some of the following mobile station location techniques can be utilized by various embodiments of the present invention 

 4.3 adaptive wireless signal processing techniques having for example learning capabilities and including for instance neural net and genetic algorithm processing 

 4.4 signal processing techniques for matching MS location signals with wireless signal characteristics of known areas 

 4.6 enhancement of MS location estimates through the use of both heuristics and historical data associating MS wireless signal characteristics with known locations and or environmental conditions.

Yet another objective is to provide a system and method for flexible delivery of location information to Public Safety Answering Points end users centralized dispatchers as well as to agents either human or mechanized associated with trigger based inventory and tracking systems. Flexible delivery used here indicates providing location via various two dimensional closed form shapes such as polygons ellipses etc. which bound the location probabilities. In cases where height location information is known the bounding shape may be three dimensional.

Yet another objective is to provide a system and method for a variety of new location based services for public and private group safety including family support functions.

Yet another objective is to provide a system and method for National Scale Wireless Location capability. Although the primary focus of this patent is to provide wireless location with accuracy to meet the FCC phase two requirements a system and method is provided that also utilizes roaming signaling to determine in which city is a particular wireless mobile station located.

Yet another objective is to provide and system and method for Parametric driven intelligent agent based location services. Parameters may include time location and user specific and or group specific criteria.

Yet another objective is to provide a system and method for determining and or enhancing wireless location using one or more of the following a. CDMA based Distributed Antenna technology b. Home Base Stations and AIN technology.

Yet another objective is to provide notification messages and or voice synthesized call or text paging function to a plurality of other mobile station users when a mobile station user travels into or away from one or more zones or are within short distances of shopping malls stores merchandising dealers etc.

Yet another objective is to provide notification messages and or voice synthesized call or text paging functions to a plurality of other mobile station users when a mobile station dials a redefined telephone number such as 911 or a type of mild emergency cry for help number.

Yet another objective is to provide notification messages and or voice synthesized call or text paging function to a plurality of other mobile station users when a mobile station user dials a predefined telephone number such as 311 or a type of mild emergency cry for help number wherein the plurality of other mobile station users are within a particular distance or a minimum distance to the mobile station user who dialed the predefined number.

Yet another objective is to provide notification messages and or voice synthesized call or text paging function to a plurality of other mobile station users when a mobile station user dials a predefined telephone number such as 311 or a type of mild emergency cry for help number wherein the plurality of other mobile station users are within a particular distance or a minimum distance to the mobile station user who dialed the predefined number and wherein the other mobile station users are provided individualized directional or navigation information from their current locations to reach to the mobile station user who dialed the predefined number.

Yet another objective is to provide automatic home office vehicle and boat security functions which are activated and deactivated based on a mobile station user s location to or away from a location associated with the security functions.

Yet another objective is to provide notifications e.g. via fax page e mail text paging or voice synthesized call message or to setup a group conference call capability to a plurality of predefined individuals based on a mobile station user s call to 911 or based on a mobile station user s traveling into or away from a location zone or area or based upon a sensor input signal to the user s mobile station such as a sudden change in G forces such as falling down having the car hit another object suddenly air bag deployment etc.

Yet another objective is to provide location information to a searcher mobile station user who then further refines or narrows the scope of the location search for a target mobile station or the mobile station to be located using a small microwave dish in communication with or to supplement replace the searcher mobile station antenna whose physical orientation is used to further determine the target mobile station location relative to the searcher s mobile station position orientation.

Yet another objective is to provide a means to allow more flexible storage inventory and enhanced user accessibility of rental vehicles by combining location technology of rental car driver carrying his her own mobile station along with a mobile station which remains always active and fixed to a rental car. By maintaining accurate location records of rental car locations and automatic remote control of rental cars or smart cars which use the mobile station to telemeter control data to and from the car whose doors door locks and general accessibility are controlled by a centralized computer system rental cars can be dropped off at convenient shopping center malls airport parking lots hotels and at other convenient locations.

Yet another objective is to provide location estimates to users carrying mobile stations via voice synthesis data circuit messaging or text paging.

Yet another objective is to provide a mechanism whereby mobile station users may access and control their subscriber profile for location purposes. The location subscriber profile is a persistent data store which contains logic regarding under what criteria will that mobile station user allow his her location to be made known and to whom. The mobile station user may access the location profile via several methods including Internet means and mobile station handset keypad entry and voice recognition circuits.

Yet another objective is to utilize signaling detection characteristics of other CDMA base stations and systems in a given area owned and operated by an another commercial mobile radio service provider CMRS provider . By including other CMRS providers infrastructure in the location estimation analysis process improvements in location accuracy can be realized.

The following definitions are provided for convenience. In general the definitions here are also defined elsewhere in this document as well.

The location system of the present invention accomplishes the above and other objectives by the following steps 

 1. receiving signal data measurements corresponding to wireless communications between a mobile station to be located herein also denoted the target mobile station and a wireless telephony infrastructure wherein the mobile station MS and or mobile switch center may be enhanced in certain novel and cost effective ways so as to provide an extended number of values characterizing the wireless signal communications between the target mobile station and the base station infrastructure such infrastructure including multiple distinct CMRS where base stations share a common coverage area 

 2. organizing and processing the signal data measurements received from a given target mobile station and surrounding base stations so that composite wireless signal characteristic values may be obtained from which target mobile station location estimates may be derived. In particular the signal data measurements are ensembles of samples from the wireless signals received from the target mobile station by the base station infrastructure and from associated base stations wherein these samples are subsequently filtered using analog and digital spectral filtering.

 3. providing the resultant location estimation characteristic values to a mobile station location estimate model wherein each such model also denoted a first order model or FOM subsequently determines the estimate of the location of the target mobile station based on for example the signal processing techniques 1. through 2. above.

Accordingly steps 1. and 2. above are performed by a subsystem of the invention denoted the Signal Processing and Filtering Subsystem or simply the Signal Processing Subsystem . In particular this subsystem receives samples of wireless signal characteristic measurements such as a plurality of relative signal strengths and corresponding signal time delay value pairs wherein such samples are used by this subsystem to produce the component with the least amount of multipath as evidenced in the sample by the short time delay value wherein each such value pair is associated with wireless signal transmissions between the target mobile station and a particular base station of a predetermined wireless base station infrastructure. Extremely transient signal anomalies such as signal reflection from tree leaves or the passing of a truck are likely to be filtered out by the Signal Processing Subsystem. For example such an ensemble of data value pairs can be subjected to input cropping and various median filters employing filtering techniques such as convolution median digital Fast Fourier transform Radon transform Gabar transform nearest neighbor histogram equalization input and output cropping Sobel Wiener and the like.

It is a further aspect of the present invention that the wireless personal communication system PCS infrastructures currently being developed by telecommunication providers offer an appropriate localized infrastructure base upon which to build various personal location systems employing the present invention and or utilizing the techniques disclosed herein. In particular the present invention is especially suitable for the location of people and or objects using code division multiple access CDMA wireless infrastructures although other wireless infrastructures such as time division multiple access TDMA infrastructures and GSM are also contemplated. Note that CDMA personal communications systems are described in the Telephone Industries Association standard IS 95 for frequencies below 1 GHz and in the Wideband Spread Spectrum Digital Cellular System Dual Mode Mobile Station Base Station Compatibility Standard for frequencies in the 1.8 1.9 GHz frequency bands both of which are incorporated herein by reference. Furthermore CDMA general principles have also been described for example in U.S. Pat. No. 5 109 390 to Gilhousen et al filed Nov. 7 1989 and CDMA Network Engineering Handbook by Qualcomm Inc. each of which is also incorporated herein by reference.

In another aspect of the present invention in environments where a home base station capability exists then wireless location can be provided under certain circumstances wherein when a mobile station user is within a predetermined range of for example 1000 feet of his her premises the user s mobile station is detected through mobile station receiving electronics provided in for example cordless telephone units as being at home. Thus the local public telephone switching network may be provided with such information for registering that user is at home and therefore the mobile station may be allowed to function as a cordless home telephone utilizing the local public telephone switching network instead of the base station infrastructure. According to this aspect of the present invention the location center of the present invention receives notification from the local public switched telephone network that the mobile station is at or near home and utilizes this notification in outputting a location estimate for the mobile station.

For example in one embodiment the present invention includes low cost low power base stations denoted location base stations LBS above providing for example CDMA pilot channels to a very limited area about each such LBS. The location base stations may provide limited voice traffic capabilities but each is capable of gathering sufficient wireless signal characteristics from an MS within the location base station s range to facilitate locating the MS. Thus by positioning the location base stations at known locations in a geographic region such as for instance on street lamp poles and road signs additional MS location accuracy can be obtained. That is due to the low power signal output by such location base stations for there to be communication between a location base station and a target MS the MS must be relatively near the location base station. Additionally for each location base station not in communication with the target MS it is likely that the MS is not near to this location base station. Thus by utilizing information received from both location base stations in communication with the target MS and those that are not in communication with the target MS the present invention can substantially narrow the possible geographic areas within which the target MS is likely to be. Further by providing each location base station LBS with a co located stationary wireless transceiver denoted a built in MS above having similar functionality to an MS the following advantages are provided 

 4.1 assuming that the co located base station capabilities and the stationary transceiver of an LBS are such that the base station capabilities and the stationary transceiver communicate with one another the stationary transceiver can be signaled by another component s of the present invention to activate or deactivate its associated base station capability thereby conserving power for the LBS that operate on a restricted power such as solar electrical power 

 4.2 the stationary transceiver of an LBS can be used for transferring target MS location information obtained by the LBS to a conventional telephony base station 

 4.3 since the location of each LBS is known and can be used in location processing the present invention is able to re train and or re calibrate itself in geographical areas having such LBSs. That is by activating each LBS stationary transceiver so that there is signal communication between the stationary transceiver and surrounding base stations within range wireless signal characteristic values for the location of the stationary transceiver are obtained for each such base station.

In yet another aspect the present invention includes a capability for locating a target mobile station within areas of poor reception for infrastructure base stations by utilizing distributed antennas. A distributed antenna system as used herein is a collection of antennas attached in series to a reduced function base station wherein the antennas are distributed throughout an area for improving telephony coverage. Such distributed antenna systems are typically used in indoor environments e.g. high rise buildings or other areas wherein the signal to noise ratio is too high for adequate communication with standard infrastructure base stations. Also a distributed antenna system may be located such that its coverage pattern overlaps the area of coverage of another distributed antenna system. In such cases each of the overlapping distributed antenna systems includes purposeful delay elements to provide different signal delays for each of the overlapping antenna systems and thereby provide multipath signals with sufficient delay spread for signal discrimination as one skilled in the art will understand. Accordingly the present invention receives and utilizes location information communicated from distributed antenna systems for locating a target mobile station. That is the present invention may receive information from the base station infrastructure indicating that a target mobile station is communicating with such a distributed antenna system and provide distributed antenna signal characteristic values related to the distributed antenna system. Accordingly to process such target mobile station location signal data the present invention includes a distributed antenna system for generating target mobile station location estimate derived from the location signal data obtained from the distributed antenna system.

The location system of the present invention offers many advantages over existing location systems. The system of the present invention for example is readily adaptable to existing wireless communication systems and can accurately locate people and or objects in a cost effective manner. In particular the present invention requires few if any modifications to commercial wireless communication systems for implementation. Thus existing personal communication system infrastructure base stations and other components of for example commercial CDMA infrastructures are readily adapted to the present invention. The present invention can be used to locate people and or objects that are not in the line of sight of a wireless receiver or transmitter can reduce the detrimental effects of multipath on the accuracy of the location estimate can locate people and or objects located indoors as well as outdoors and uses a number of wireless stationary transceivers for location. The present invention employs a number of distinctly different location computational models FOMs for location which provides a greater degree of accuracy robustness and versatility than is possible with existing systems. For instance the location models provided include not only the radius radius TOA and TDOA techniques but also adaptive neural net techniques. Further the present invention is able to adapt to the topography of an area in which location service is desired. The present invention is also able to adapt to environmental changes substantially as frequently as desired. Thus the present invention is able to take into account changes in the location topography over time without extensive manual data manipulation.

Moreover there are numerous additional advantages of the system of the present invention when applied in CDMA communication systems. The location system of the present invention readily benefits from the distinct advantages of the CDMA spread spectrum scheme namely the exploitation of radio frequency spectral efficiency and isolation by a monitoring voice activity b management of two way power control c provision of advanced variable rate modems and error correcting signal encoding d inherent resistance to fading e enhanced privacy and f multiple rake digital data receivers and searcher receivers for correlation of signal multipaths.

Additionally note that this architecture need not have all modules co located. In particular it is an additional aspect of the present invention that various modules can be remotely located from one another and communicate with one another via telecommunication transmissions such as telephony technologies and or the Internet. Accordingly the present invention is particularly adaptable to such distributed computing environments. For example some number of the location center modules may reside in remote locations and communicate their generated hypotheses of mobile station location estimates each such hypothesis also denoted a location hypothesis herein via the Internet.

In an alternative embodiment of the present invention the processing following the generation of location estimates by the modules may be such that this processing can be provided on Internet user nodes and the modules may reside at Internet server sites. In this configuration an Internet user may request hypotheses from such remote modules and perform the remaining processing at his her node.

Additionally note that it is within the scope of the present invention to provide one or more central location development sites that may be networked to for example dispersed location centers or systems providing location services according to the present invention wherein the modules may be accessed substituted enhanced or removed dynamically via network connections with a central location development site. Thus a small but rapidly growing municipality in substantially flat low density area might initially be provided with access to for example two or three modules for generating location hypotheses in the municipality s relatively uncluttered radio signaling environment. However as the population density increases and the radio signaling environment becomes cluttered by for example thermal noise and multipath additional or alternative modules may be transferred via the network to the location center for the municipality.

Of course other software architectures may also to used in implementing the processing of the location center without departing from scope of the present invention. In particular object oriented architectures are also within the scope of the present invention. For example the modules may be object methods on an mobile station location estimator object wherein the estimator object receives substantially all target mobile station location signal data output by the signal filtering subsystem . Alternatively software bus architectures are contemplated by the present invention as one skilled in the art will understand wherein the software architecture may be modular and facilitate parallel processing.

One embodiment of the present invention includes providing the location of a mobile station MS using the digital air interface voice channel and an automatic call distributor device. This embodiment provides location information to either the initiating caller who wishes to learn of his location using the voice channel and or location information could be provided to another individual who has either a wireline or wireless telephone station.

Another embodiment of the present invention includes providing the location of a mobile station using the digital air interface voice channel and a hunt group provided from a central office or similar device. This embodiment provides location information to either the initiating caller who wishes to learn of his location using the voice channel and or location information could be provided to another individual who has either a wireline or wireless telephone station.

Another embodiment of the present invention includes providing the location of a mobile station using the digital air interface text paging or short message service channel and a hunt group provided from a central office or similar device. This embodiment provides location information to either the initiating caller who wishes to learn of his location using the voice channel and or location information could be provided to another individual who has either a wireline or wireless telephone station.

Another embodiment of the present invention includes providing the location of a plurality of mobile stations using the public Internet or an intranet with either having the ability to further use push or netcasting technology. This embodiment provides location information to either the initiating Internet or Intranet user who wishes to learn of one or more mobile station locations using either the Internet or an intranet. Either the mobile station user to be located can initiate a request for the user to be located or an Internet intranet user may initiate the location request. Optionally the location information could be provided autonomously or periodically or in accordance with other logic criteria to the recipient of the location information via the Internet or a intranet. As a further option location information can be superimposed onto various maps e.g. bit raster vector digital photograph etc. for convenient display to the user.

Yet another embodiment of the present invention includes providing a multicast notification to a group of mobile station users based on distress call from a particular mobile station wherein the group of mobile station users are relatively nearby the distress caller. The multicast notification provides individual directions for each group mobile station user to direct each user to the fastest route to reach the distressed caller.

 A2 second activating said location estimator a second time for providing a second estimate of a location of the mobile station when supplied with additional location information from said receiving means said additional location information related to the second data 

Further description of the advantages benefits and patentable aspects of the present invention will become evident from the accompanying drawings and description hereinbelow. All novel aspects of the invention whether mentioned explicitly in this Summary section or not are considered subject matter for patent protection either singly or in combination with other aspects of the invention. Accordingly such novel aspects of the present invention disclosed hereinbelow and or in the drawings that may be omitted from or less than fully described in this Summary section are fully incorporated herein by reference into this Summary. In particular all claims of the Claims section hereinbelow are fully incorporated herein by reference into this Summary section.

Various digital wireless communication standards have been introduced such as code division multiple access CDMA and Time Division Multiple Access TDMA e.g. Global Systems Mobile GSM . These standards provide numerous enhancements for advancing the quality and communication capacity for wireless applications. Referring to CDMA this standard is described in the Telephone Industries Association standard IS 95 for frequencies below 1 GHz and in J STD 008 the Wideband Spread Spectrum Digital Cellular System Dual Mode Mobile Station Base station Compatibility Standard for frequencies in the 1.8 1.9 GHz frequency bands.

Additionally CDMA general principles have been described for example in U.S. Pat. No. 5 109 390 Diversity Receiver in a CDMA Cellular Telephone System by Gilhousen et al filed Nov. 7 1989. There are numerous advantages of such digital wireless technologies such as CDMA radio technology. For example the CDMA spread spectrum scheme exploits radio frequency spectral efficiency and isolation by monitoring voice activity managing two way power control provision of advanced variable rate modems and error correcting signal design and includes inherent resistance to fading enhanced privacy and provides for multiple rake digital data receivers and searcher receivers for correlation of multiple physical propagation paths resembling maximum likelihood detection as well as support for multiple base station communication with a mobile station i.e. soft or softer hand off capability. When coupled with a location center as described herein substantial improvements in radio location can be achieved. For example the CDMA spread spectrum scheme exploits radio frequency spectral efficiency and isolation by monitoring voice activity managing two way power control provision of advanced variable rate modems and error correcting signal design and includes inherent resistance to fading enhanced privacy and provides for multiple rake digital data receivers and searcher receivers for correlation of multiple physical propagation paths resembling maximum likelihood detection as well as support for multiple base station communication with a mobile station i.e. soft hand off capability. Moreover this same advanced radio communication infrastructure can also be used for enhanced radio location. As a further example the capabilities of IS 41 and AIN already provide a broad granularity of wireless location as is necessary to for example properly direct a terminating call to a mobile station. Such information originally intended for call processing usage can be re used in conjunction with the location center described herein to provide wireless location in the large i.e. to determine which country state and city a particular mobile station is located and wireless location in the small i.e. which location plus or minus a few hundred feet within one or more base stations a given mobile station is located .

 1 a location system or center which is required for determining a location of a target mobile station using signal characteristic values as measured by the target mobile station not shown and nearby base stations not shown further including of the following modules or subsystem components 

 1.1 an application programming interface having a controller also denoted by the label 14 for physically interfacing with and controlling the messaging to and from each CMRS mobile switch center service control points and receiving location requests from either the mobile switch center or or the Internet and providing connection to the signal processing subsystem 

 1.2 a signal processing subsystem which is in communication with the application programming interface L API . The signal processor receives queues filters and processes signal measurement messages into various formats suitable for the location estimate modules DA and TOA TDOA 

 1.3 a TOA TDOA location estimate module in communication with the signal processing subsystem . The TOA TDOA module provides a location estimate result using a time of arrival or a time difference of arrival technique based on conditioned signals from the signal processing subsystem in addition the TOA TDOA module may also process signals from the distributed antenna module in order to provide a location estimate within environments containing distributed antenna systems 

 1.4 a distributed antenna DA module which receives signals related to distributed antennas from the signal processor in communication a location estimating capability for utilizing one or more distributed antenna systems as shown in wherein each such system provides wireless location information for an MS within the area in communication with one or more distributed antenna system .

 1.5 a home base station module HBS in which receives signals from the application programming interface controller and determines wireless location i.e. providing a location estimate result based on registration principles of the wireless user s mobile station when in communication with the user s home base station not shown in communications with a given service control point or containing a home base station application not shown .

Since home base stations and distributed antenna systems can be located on potentially each floor of a multi story building in such cases where infrastructure is installed the wireless location technology described herein can be used to perform location in terms of height as well as by Latitude and Longitude.

Referring to additional detail is provided of typical base station coverage areas sectorization and high level components used in the present invention s scope including the mobile switch center a mobile station in communication with a home base station and communication between the location system and the public Internet via an Internet service provider interface . A novel aspect of this invention includes providing wireless location estimate information to various designated users via the public Internet. Although base stations may be placed in any configuration a typical deployment configuration is approximately in a cellular honeycomb pattern although many practical tradeoffs exist such as site availability versus the requirement for maximal terrain coverage area. To illustrate such exemplary base stations BSs through are shown each of which radiate referencing signals within their area of coverage to facilitate mobile station MS radio frequency connectivity and various timing and synchronization functions. A given base station may contain no sectors not shown thus radiating and receiving signals in a 360 degree omnidirectional coverage area pattern or the base station may contain smart antennas not shown which have specialized coverage area patterns.

Alternatively and generally most frequent are base stations having three sector coverage area patterns. Shown in each sector for base station through contains three sectors labeled a b and c which represent antennas that radiate and receive signals in an approximate 120 degree arc from an overhead view. As one skilled in the art will understand actual base station coverage areas generally are designed to overlap to some extent thus ensuring seamless coverage in a geographical area. Control electronics within each base station are used to communicate with a given mobile station . Further during communication with the mobile station the exact base station identification and sector identification information are known and are provided to the location center .

The base stations located at their cell sites may be coupled by various transport facilities such as leased lines frame relay T Carrier links optical fiber links or by microwave communication links.

When the mobile station is powered on and in the idle state it constantly monitors the pilot signal transmissions from each of the base stations located at nearby cell sites. As illustrated in base station sector coverage areas may often overlap both in the context of a single CMRS base station network and also in the context of multiple CMRS base station networks thus enabling mobile stations to detect and in the case of certain technologies communicate simultaneously along both the forward and reverse paths with multiple base stations sectors either with a single CMRS network or in the case of hand offs and roaming multiple CMRS network equipment. In the constantly radiating pilot signals from base station sectors and are detectable by mobile station at its location. The mobile station scans each pilot channel which corresponds to a given base station sector ID and determines which cell it is in by comparing signals strengths of pilot signals transmitted from these particular cell sites.

The mobile station then initiates a registration request with the mobile switch center via the base station controller not shown . The mobile switch center determines whether or not the mobile station is allowed to proceed with the registration process except in the case of a 911 call wherein no registration process is required . At this point calls may be originated from the mobile station or calls or short message service messages can be received from the mobile switch center

As shown in the mobile switch center communicates as appropriate with a class 4 5 wireline telephony circuit switch or other central offices with telephone trunks in communication with the public switch telephone network PSTN . Such central offices connect to wireline stations such as telephones or any communication device compatible with the line such as a personal or home base station. The PSTN may also provide connections to long distance networks and other networks.

The mobile switch center may also utilize IS 41 data circuits or trunks which in turn connects to a service control point using for example signaling system 7 SS7 signaling link protocols for intelligent call processing as one skilled in the art will understand. In the case of wireless advanced intelligent network AIN services such trunks and protocols are used for call routing instructions of calls interacting with the mobile switch center or any switch capable of providing service switching point functions and the public switched telephone network PSTN with possible termination back to the wireless network. In the case of an mobile station in communication with a corresponding home or office base station HBS the HBS controls processes and interfaces the mobile station to the PSTN in a manner similar to a cordless telephone system except that added AIN logic within for example the service control point SCP is used to determine if the mobile station is being controlled by the HBS or a wireless base station . Regarding non HBS calls the mobile switch center may direct calls between mobile stations via the appropriate cell site base stations a through since such mobile stations do not typically communicate directly with one another in such wireless standards as CDMA TDMA NAMPS AMPS and GSM.

Referring again to the Location system interfaces with the mobile switch center either via dedicated transport facilities using for example any number of LAN WAN technologies such as Ethernet fast Ethernet frame relay virtual private networks etc. or via the PSTN not shown . The location system receives autonomous e.g. unsolicited or command response messages regarding for example a the wireless network states including for example the fact that a base station has been taken in or out of service b mobile station and BS radio frequency RF signal measurements c notifications from a SCP indicating that an HBS has detected and registered with the SCP the mobile station corresponding to the HBS and d any distributed antenna systems . Conversely the location system provides data and control information to each of the above components in a d . Additionally the Location system may provide location information to a mobile station via a BS using for example the short message service protocol or any data communication protocol supported by the air interface between the base station and the mobile station. Interface connecting the location system with the service control point may also be required in the event the home location register and or the home base station AIN function is located in the SCP .

Assuming the wireless technology CDMA is used each BS through uses a time offset of the pilot PN sequence to identify a forward CDMA pilot channel. Furthermore time offsets in CDMA chip sizes may be re used within a PCS system thus providing efficient use of pilot time offset chips thus achieving spectrum efficiency.

The use of distributed antennas is another technique for improving or extending the RF coverage of a radio coverage area of a wireless system. Such distributed antennas are typically used in buildings or other areas of dense clutter such as numerous walls partitions and or similar structures causing substantial signal attenuation. As shown in and distributed antennas are typically connected together in a serial fashion for communicating with one or more infrastructure base stations . Distributed antennas may be connected to the mobile switch center via various air interfaces as shown in or alternatively distributed antennas may be connected to the MSC via a directed connection to a base station as shown in or via a private branch exchange PBX as shown in .

Referring to distributed antennas are useful particularly in wireless system configurations involving microcells and potentially indoor environments such as wireless systems in communication with private branch exchange systems reference in business offices and in wireless local loop applications not shown as one skilled in the art will understand. Additionally a distributed antenna embodiment can provide significant improvements in decreasing location error as compared with an indoor mobile station reference user with a wireless connection to an outdoor infrastructure base station as illustrated in and .

As an example of a mobile station such a mobile station will be described using CDMA technology. illustrates a typical block diagram of the functional components of a CDMA mobile station MS based on the patent Diversity Receiver in a CDMA Cellular Telephone System U.S. Pat. No. 5 109 390. The MS contains an antenna coupled through diplexer to analog receiver and transmit power amplifier . Antenna and diplexer permit simultaneous transmission and reception of signals through an antenna . Antenna collects transmitted signals and provides them through diplexer to analog receiver . Receiver receives the RF frequency signals typically either in the 800 900 MHZ or 1.8 1.9 GHz band from diplexer for amplification and frequency down conversion to an intermediate frequency IF . Translation is accomplished through the use of a frequency synthesizer of standard design which permits the receiver to be tuned to any of the frequencies within the designated receive frequency band. The IF signal is passed through a surface acoustic wave bandpass filter typically of 1.25 MHZ bandwidth to match the waveform of the signal transmitted by a base station . Receiver also provides an analog to digital converter not shown for converting the IF signal to a digital signal. The digital signal is provided to each of four or more data receivers and one of which is a searcher receiver with the remainder being data receivers as one skilled in the art will understand.

Analog receiver also performs a open loop type of power control function for adjusting the transmit power of the mobile station on the reverse link channel. Receiver measures the forward link signal strength of the signals from base stations then generates an analog power control signal to circuitry in the transmit power amplifier which can effect a range up to about 80 dB. The power control for the transmit power amplifier is also supplemented by a closed loop power control or mobile attenuation code MAC control parameter sent to the mobile station via the air i.e. wireless interface from a BS with either the CMAC or VMAC command as one knowledgeable in CDMA standards will understand . The MAC can take on one of eight values 0 through 7 which effect a closed loop to raise or lower the power correction. The transmit amplifier may utilize one of three transmit power classes when transmitting within a transmitted power control group in the 800 900 MHZ cellular band class I 1 to 8 dBW class II 3 to 4 dBW or class III 7 to 0 dBW for a close 32 dB. In the PCS 1.8 1.9 GHz band five classes are defined class I 2 to 3 dBW class II 7 to 0 dBW class III 12 to 3 dBW class IV 17 to 6 dBW class V 22 to 9 dBW for a closed loop range of about 40 dB. The mobile station power class and transmit power level for a communicating mobile station is known to the wireless infrastructure network and may be utilized for location estimation as is described hereinbelow.

The digitized IF signal may contain the signals from several telephone calls together with the pilot channels and multipath delayed signals from each of several pilot channels. Searcher receiver under control of control processor continuously scans the time domain around the nominal time delay offsets of pilot channels contained within the active candidate neighboring and remaining sets of pilot channels. The initial sets of pilot channels and a defined search window size for each set are provided by a control message from a BS via the air interface to the mobile station . The searcher receiver measures the strength of any reception of a desired waveform at times other than the nominal time and measures each pilot channel s arrival time relative to each pilot s PN sequence offset value. Receiver also compares signal strength in the received signals. Receiver provides a signal strength signal to control processor indicative of the strongest signals and relative time relationships.

Control processor provides signals to control digital data receivers and such that each of these receivers processes a different one of the strongest signals. Note as one skilled in the art will understand the strongest signal or finger may not be the signal of shortest arrival time but rather may be a reflected and therefore delayed signal such reflected denoted collectively as multipath . Data receivers and may track and process multipath signals from the same forward channel pilot channel offset or from a different forward channel pilot offset. In the case where a different pilot channel offset signal is of greater strength than the current cell site or more specifically the current base station pilot channel offset then control processor generates a control message for transmission on a reverse channel from the mobile station to the current BS requesting a transfer of the call or a soft hand off to the now strongest cell site Base station . Note that each of the four receivers and can be directed independently from each other. The three data receivers and are capable of tracking and demodulating multipath signals from of the forward CDMA pilot channel. Thus data receivers and may provide reception of information via separate multipath signals from one BS e.g. in particular an antenna face of a sectored antenna at the BS or reception of signals from a number of sectors at the same BS or reception of signals from multiple BSs or their antenna faces of sectored antennas. Upon receiving a CDMA pilot measurement request order command or whenever a the mobile station detects a pilot signal of sufficient strength not associated with any of the assigned forward traffic channels currently assigned or b the mobile station is in preparation for a soft or hard hand off then the searcher receiver responds by measuring and reporting the strengths of received pilots and the receiver s definition of the pilot arrival time of the earliest useable multipath component of the pilot in units of PN chips one chip 0.813802 microseconds . The receiver computes the strength of a pilot by adding the ratios of received pilot energy per chip E to total received spectral density I of at most k useable multipath components where k is the number of data receivers supported in the mobile station .

The outputs of data receivers and are provided to diversity combiner and decoder circuitry i.e. simply diversity combiner . The diversity combiner performs the function of adjusting the timing of a plurality of streams of received signals into alignment and adds them together. In performing this function the diversity combiner may utilize a maximal ratio diversity combiner technique. The resulting combined signal stream is then decoded using a forward stream error detection contained within the diversity combiner. The decoded result is then passed on to the user digital baseband circuitry .

The user digital baseband circuitry typically includes a digital vocoder which decodes the signals from diversity combiner and then outputs the results to a digital to analog D A converter not shown . The output of the D A serves as an interface with telephony circuitry for providing mobile station user analog output information signals to the user corresponding to the information provided from diversity combiner .

User analog voice signals typically provided through an mobile station are provided as an input to baseband circuitry . Baseband serves as an interface with a handset or any other type of peripheral device to the user for audio communication. Baseband circuitry includes an analog to digital A D converter which converts user information signals from analog form into a digital form. This digital form is then input to a vocoder not shown for encoding which includes a forward error correction function. The resulting encoded signals are then output to transmit modulator .

Transmit modulator modulates the encoded signal on a PN carrier signal whose PN sequence is based on the assigned address function for a wireless call. The PN sequence is determined by the control processor from call setup information that was previously transmitted by a cell site BS and decoded by the receivers as one skilled in the art will understand. The output of transmit modulator is provided to transmit power control circuitry . Note that signal transmission power is controlled partially by an open loop analog power control signal provided from receiver . In addition control bits are also transmitted by the controlling BS in the form of a supplemental closed loop power adjustment command and are processed by data receivers . In response to this command control processor generates a digital power control signal that is provided to the transmit power amplifier . Transmit power control also provides the digitized and encoded user information signals in an IF format to output to the transmit power amplifier . The transmit power amplifier converts the IF format signals into an RF frequency by mixing this signal with a frequency synthesizer not shown output signal for providing a corresponding signal at the proper output transmission frequency signal. Subsequently transmit power amplifier amplifies the signal to the final power output level. The transmission signal is then output from the transmit power amplifier to the diplexer . The diplexer then couples the transmission signal to antenna for air interface transmission to the infrastructure base stations .

Additionally note that control processor is also responsive to various control and information request messages from the controlling BS including for example sync channel messages the system parameters messages in traffic system parameters messages paging alert messages registration messages status requests power control parameters messages and hand off direction messages as one skilled in the art will understand.

Referring still to a CDMA mobile station in one embodiment of the present invention the above described standard CDMA mobile station architecture in an mobile station is sufficient. However in a second embodiment this architecture may be modified in minor cost effective ways so that additional information may be transmitted from an mobile station to the BS . The modifications for this second embodiment will now be described. The following modifications either together or in any combination provide improvements in location accuracy from the perspective of capturing RF measurement data 1 increasing measurement quantity 2 improving measurement transmission 3 extending the pilot set and search 4 extending the pilot signal reporting capabilities 5 decreasing the Quantization size of the units used to report the pilot PN phase arrival time 6 improving the accuracy of the mobile and base station time reference and 7 increasing the number of data receivers and related circuitry for correlation tracking of a larger plurality of pilot channels and each of their multipath signals.

Using the standard system parameters overhead message in the paging channel as one method of reporting to the base station the signal strengths and delays of detectable pilot channels a mobile station has various timers indicating the upper bounds of time needed to respond to a request and to bid for access to the forward channel if not already using it s assigned traffic channel . These timers restrict the frequency of measurement reporting and thus limit the aggregate amount of measurement data which can be sent in a given time period.

For example CDMA standard timer Testablishes the maximum time of a mobile station to enter the update overhead information substate of the system access state to respond to messages received while in the mobile station idle state typically 0.3 seconds. Timer T the maximum time for the mobile station to respond to one service option request is typically 0.2 seconds. Thus during a period of about five seconds this measurement reporting method would provide for a maximum of about fifteen measurements.

However the same CDMA receiver design infrastructure with slight circuitry modification can be used to support improved measurement transmission.

In order to collect a data ensemble of RF measurements that represents a statistically significant representation of data values in a geographical area of interest it is the intention that the second CDMA mobile station embodiment be capable of sending to the network base station infrastructure approximately 128 samples of each multipath peak signal strength and its relative delay for each detectable pilot channel in less than a preferred period of about five seconds. In order to transmit this amount of data other means are needed to efficiently send the needed data to the network i.e. from the mobile station to the base station and then to forward data to the wireless switch and then to forward data to the Location Center .

The CDMA air interface standard provides several means for transmitting data at higher rates. The Data Burst message can be used or various blank and burst dim and burst multiplex options can be used and well as selecting various service options 2 through 9 through the setup of a normal voice or data telephone call. In one embodiment the user dials a speed number representing a data type call to the Location Center which initiates a command to the mobile station responsive by the mobile station which then provides the location center via the base station mobile switch center with the needed measurement data.

Referring to in one embodiment a software controllable data connection or path is established between the control processor and the user digital baseband functional components in the mobile station a much larger quantity of RF measurements on the order of 128 data samples can be transmitted as a data burst multiplexed or sent by other means such as a data circuit call back to the network and to the Location Center. Note that the existing connection between the control processor and the transmit modulator may also be used as well via any other virtual path such as software register to register move instructions as long as sufficient signal measurement content and data samples can be sent to the wireless network and the location center via the associated interfaces. Those skilled in the art will understand the wireless network consists of the base station mobile switch center and related infrastructure equipment interfaces and facilities circuits to telemeter the measurement content and data samples to the location center . Additional design issues include for example the fact that existing memory in the mobile station must be allocated to the temporary storage of RF sample measurements and new control means such as selecting a future use control bit pattern in the CDMA air standard are required to telemeter preferably upon command RF measurement sample data to the Location Center in . In the case where a location request is received by the location engine in the location center the location engine initiates a message to the mobile station via a signal processing subsystem and the location center mobile switch center physical interface the location applications programming interface e.g. L API MSC for the mobile switch center and the wireless network infrastructure.

The addition of a controllable data connection or path can be easily performed by CDMA application specific integrated circuit ASIC manufacturers. In the case of one ASIC manufacturer known to the authors the Qualcomm ASIC chip mobile station modem model number MSM 2300 provides both the control processor function and the user digital baseband functions or the same chip thus the external pinout physical configuration would not have to change to accommodate the wireless location software controllable data connection or path modification.

If the mobile station searcher receiver detects 4 pilots with 4 multipaths each with each measurement consisting of a pilot index finger identification multipath signal strength and multipath arrival time then about 480 bytes are needed per measurement. Assuming the searcher receiver performs one measurement every 10 microseconds about 1 second is needed to compile and buffer each sample of 128 measurements per sample or about 48 kilobytes. Using a typical 9600 kbps CDMA data channel between the mobile station and a BS and assuming a 50 percent overhead the mobile station can complete the collection and transmission of a location measurement sample in less than ten seconds which is within a reasonable period for satisfying a location request.

The implementation of the data services required to telemeter the necessary signal measurements may be performed in any of several embodiments. In one embodiment the location signal measurements request response application message set utilizes the air interface services provided by the spare bits and digital control words not currently in the air interface standards IS 95 and ANSI J STD 008. Such bits and control words can be reserved for the purpose of requesting and providing the required location signal measurements discussed herein. Using this embodiment the base station and mobile switch center must be modified to support the interworking function required between the location center and the mobile station. In a second embodiment the location signal measurements request response application message set is implemented using service options and which provides asynchronous data transmission capability as defined in 45 document number TIA EIA IS DATA. 4. Using this second embodiment the mobile station control processor provides or would interface with a function emulating mobile termination or services at the Rnetwork reference point. The L API then provides or would interface with a function emulating the physical interface connecting a data circuit terminating equipment DCE to the PSTN at the W network reference point in communication with the PSTN which is also in communication with reference point Ai which is in communication with reference point U which is in turn in communication with reference point R. An advantage of this embodiment is that no ASIC or circuit board modifications are needed in the mobile station.

The ANSI standards J 008 and IS 95 provide several means for the base station to establish and to extend the search window size that the mobile station should use in its scanning process and to identify further pilots. For location purposes either existing standard parameters can be extended or a location message request from the Base station can inform the searcher receiver of the mobile station to extend its search range as necessary to capture all relevant base station pilots and their multipath fingers in order to complete the location measurement sample.

The search performance criteria defined in ANSI IS 98 Recommended Minimum Performance Standards for Dual Mode can be increased as appropriate to accommodate a larger set of potentially detectable base stations including Location Base stations and Mobile Base stations. Additionally the search window table size for various search window values must be increased to accommodate new pilot channel pn offsets associated with Location Base Stations and Mobile Base stations.

Existing standard parameters include for example using the In traffic System Parameters Message the values SRCH WIN A for active and candidate set SRCH WIN N for neighboring set and SRCH SIN R for remaining set can be used to cause the searcher receiver to increase its search area to detect and thus measure as many pilots as can be detected in the area. Extending the range of T ADD and T DROP parameters can also be used to facilitate the mobile to retain data on additional pilots in the area. The extended neighbor list message is used to inform the mobile station of the necessary characteristics of neighboring pilot signals. For example if location base stations are used on a different frequency assignment and or utilize unique non public pilot PN sequence offset indices for example in using increments other than 64 PN chips then the extended neighbor list message can be used to instruct the mobile station to scan for those types of base stations accordingly.

There can be several combinations of delay spread signal strength measurements made available to the location center from the mobile station . In some cases the mobile station may detect up to three to four pilot channels representing 3 4 base stations or as few as one signal from one pilot channel.

For each pilot channel detection case multiple up to three to four fingers or multipath signals may be detected per pilot channel.

Note that multiple multipath signals or multiple fingers could exist from a less strong BS pilot signal or in any of several combinations which can depend widely upon the mobile station s location within the base station environment.

By modifying the CDMA Base station mobile station and controller capabilities to provide the location center with data that exceeds the 1 1 fingers to data receiver correspondence additional information can be collected and processed in order to further improve the accuracy of the location estimate. A control message from the location center and carried through the network is sent to the control processor in the mobile station requiring the searcher receiver in the mobile station to transmit to the location center via the network all detectable delay spread fingers related to each detectable pilot channel.

In one embodiment the control message is implemented in the CDMA receiver via a multiplexing technique including appropriate manipulation of the hand off parameters T ADDs T DROPs search window and the active neighbor and remaining pilot sets held within the mobile station memory.

Although the CDMA ANSI J STD 008 requires reporting of the pilot channel arrival time in a time period of units of one chip size or 813.802 nanoseconds typical CDMA receivers contain an internal Quantization interval of one eighth chip size.

Within the mobile station by modifying the time of arrival message response message to output the delay value in unit increments of one eighth chip size the precision of location accuracy can be increased from about 800 feet in radius to about 110 feet. At the base station the arrival time measurement is forwarded in one eighth units to the Location Center. A multiplier function applied to the received measurement at the base station rescales the measurement for routine CDMA control and monitoring purposes in order to be consistent with the CDMA standard. In order to distinguish among several mobile station models which report arrival time in either one eighth chip units or one chip unit sizes an encoding can be used in the mobile station s hardware or software identifications telemetered to the base station and Location Center in order to determine the arrival time measurement units. In one embodiment the analog receiver in the mobile station utilizes a clock signal which runs eight times faster than the clock originally disclosed in the Gilhousen patent U.S. Pat. No. 5 109 390. In this manner the digital signal provided to the data receivers and the searcher receiver will include an improved resolution in ability to detect delay spread signals which are directly used to improve wireless location.

Although the CDMA air interface standard only requires a 1 000 nanosecond tolerance accuracy within respect to the base station location accuracy can be improved if manufacturing calibration precision s are held to within tighter tolerances such as less than 250 nanoseconds. However in any given location request as long as the base station to base station tolerances are tuned properly to an amount less than 500 nanoseconds then very good location estimates can be performed due to the self canceling time effect geometries typically present in multi pilot channel detection found in urban and suburban areas.

Increasing the typical number of data receivers in either the mobile station or base station provide added capabilities to lock and track more delay spread fingers and respective base station pilot channels. The resulting additional information if available in a given radio coverage area in can be used for enhanced location estimate accuracy due to confluence or voting methods which can be deployed at the Location system .

In certain cases wireless location signals are received representing distributed antennas or other base stations across building floor boundaries being received from a specific floor on a multi storied building. As a specific example consider signals are being received from both the 40th and the 41floor the objective is to resolve the ambiguity of the situation. Fuzzy logic is used to resolve this ambiguity. The determination as to which floor the user of the mobile station is on is based on the strength of the signal S and the past reliability of the information associated with the two antennae R. The spaces of S and R are discretized using fuzzy sets. The strength is defined as being 1 VERY STRONG VS 2 STRONG S 3 WEAK W and 4 VERY WEAK VW as defined by membership functions. The reliability of information is defined as being 1 VERY RELIABLE VR 2 RELIABLE R and 3 NOT RELIABLE NR again as defined by membership functions. A fuzzy relation or mapping is described which descretizes how confident it is that the signal is coming for a given floor e.g. the 40th floor using the following notation 

The above relation matrix is read for example that when the signal information is RELIABLE and the strength is WEAK then the confidence that the signal is coming from the 40th floor is 0.4. A similar fuzzy relation matrix is established for the distributed antenna on the 41st floor and thus the result would be a confidence factor associated with the mobile station being located on either floor. A single solution that is whether the mobile station is on the 40th or 41st floor is determined using a compositional rule of inference. The compositional rule of inference is a function that prescribes a mechanism for consolidating membership function values into a single crisp function. This function can take a variety of forms including max min composition max product composition. etc. The compositional rule of inference can be implemented for example by a summing junction which collects the results of each firing rule. The summing junction s output is then provided to a centroidal defuzzier which provides the discretized output.

Note that the confidence associated with the location of the mobile station can be considered a function of several variables not just the two S and R described above. For instance it would not be unreasonable to segregate the reliability information by time signal delay as determined within this invention. The fuzzy relation is capable of handling a variety of such situations. Thus which floor the mobile station is on can be considered to be a function of numerous variables the ultimate decision can be made based on a great deal of information.

A location application programming interface or L API is required between the location system s signal processor and the mobile switch center network element type in order to send and receive various control signals and data messages for wireless location purposes. The L API is implemented using a preferably high capacity physical layer communications interface such as IEEE standard 802.3 10 baseT Ethernet although other physical layer interfaces could be used such as fiber optic ATM frame relay etc. Two forms of API implementation are possible. In the first case the control signals and data messages are realized using the mobile switch center vendor s native operations messages inherent in the product offering without any special modifications. In the second case the L API includes a full suite of commands and messaging content specifically optimized for wireless location purposes which may require some although minor development on the part of the mobile switch center vendor. A minimum set of L API message types includes 

A first message type an autonomous notification message from the mobile switch center to the location system is required in the event a wireless enhanced 9 1 1 call has been sent to the mobile switch center from a mobile station including the mobile identification number MIN along with various CMRS identification and mobile station detected active candidate neighbor and remaining pilot set information pilot strength measurements message.

A second message type forward path request response message from location system to mobile switch center is required to request a mobile station MS for signal measurements and hand off information with a response message back from the mobile switch center to the location system along with various CMRS identification.

A third message type Reverse path request response message from location system to mobile switch center to a BS for signal measurements received at the BS and hand off information for a given mobile station MIN along with various CMRS identification. It is preferable for the received signal strength measurements performed at the mobile station along the forward path and at the base station along the reverse path to be reported in a variable length data structure as follows for each pilot channel offset include the phase of the earliest arriving usable multipath component pilot PN sequence relative to the zero offset pilot PN sequence of this pilot termed pilot PN phase or pilot arrival in units of one eighth PN chip instead of units of one PN chip as stated in the standards. Furthermore in accordance with the standards the pilot strength shall be included measured based on at most k usable components where k is the number of demodulating elements supported by the receiver system. In addition the total number of each detectable multipath components shall be reported. In addition each multipath component for a given pilot shall be identified by both its delay component and signal strength for inclusion in the signal measurements to the location system . Regarding each individual multipath component signal strength is expressed as is commonly known by adding the ratios of received pilot multipath component energy per chip E to total received spectral density noise and signals iof at most that one multipath component i.e. k is equal to one .

A fourth message type an autonomous notification message from the mobile switch center to the location system is required in the event of a mobile station hand off state change along with various CMRS identification.

In order to implement additional location functions such as wide area location wherein location is determined across roaming boundaries out of coverage area conditions or mobile station turned off and home base station applications the L API must include access to and receive data from a data store contained in the home location register HLR network element type associated with the mobile switch center .

A fifth message type is required which provides the location system with the mobile station MIN hand off along with various CMRS identification information e.g. old and new state changes old and new BS identifications and hand offs to another CMRS roaming location and status changes. A typical communications protocol such as Signaling System number 7 running on a V.35 communications channel could be used for implementation but numerous other protocols e.g. TCIP IP ROSE CMISE etc. could be used to implement this capability. If the home location register is local to the mobile switch center then the LC mobile switch center communications link could be used otherwise a separate communications link is used between the location system and the home location register.

A sixth message type an autonomous notification message type issued from the location system to the home location register is required for those location applications that rely on an alert from the home location register when ever a particular mobile station state change occurs along with various CMRS identification. Consider the case wherein an mobile station whose location is to be tracked constantly. In such cases a history of locations is maintained in the location system . Should the mobile station user turn off the power or exit from the coverage area then by using previous location values a vector and approximate velocity can be determined. This sixth message type provides a notification message from the home location register to the location system whenever a previously identified mobile station MIN has a state change. Examples of state changes include cases where the base station discovers the mobile station has traveled to another base station or that the current primary base station can no longer communicate with the mobile station i.e. no power or that a new registration has occurred. In general this message type should support the notification from the home location register to the location system of all messaging and data associated with the nine types of registration in the case of CDMA. Specifically these include power up power down timer based distance based zone based parameter change ordered implicit and traffic channel registration. The location system should also be informed of the registration enablement status of each type of registration which can be provided to the location system via a redirection of the systems parameters message. It should also be possible in a seventh message type for the location system to initiate an ordered registration through an order message from the location system to the mobile switch center . The mobile switch center then shall route the message to the appropriate base station and then to the mobile station. The location system should also be able to receive the results of the message.

In order to implement additional location functions such as providing users with location information and routing instructions to certain locations via the wireless short message text paging service an L API is required between the location system and the network element type used to implement the short message service. Such network elements may be termed an intelligent peripheral or a service node. A number of existing paging interfaces have been proposed in standards bodies and one or more modifications can be made to accommodate L API content. In any case the following L API addition is required an eighth message type which allows the location system to send a text message containing location information or instructions to a particular mobile station MIN and a related message to verify response. Optionally in another ninth message type an autonomous message may be provided to alert the location system under conditions wherein a state change occurs on a previously pending text message. This last message type provides improved quality feedback to the initiating party regarding the acceptance situation of the attempted to send page.

As a consequence in practical deployment situations that base stations are not placed in a uniform manner in a geographical area and the fact that variable and fixed clutter introduce a variety of signal measurements which can result in the provision of an ambiguous location estimation a novel aspect of this patent includes the utilization of the inherent ability of the wireless protocol and receiver design to request and receive signal measurements along the forward and reverse air interface communications path with a given mobile station and other commercial mobile radio service providers in cases where multiple service providers share a common coverage area. Thus in a coverage area shared by two service providers A and B utilization of received signal measurements from both service provider A and service provider B can be used by the location center as unique orthogonal information to both resolve ambiguous location estimates and to further improve the location estimate accuracy.

The CDMA air interface for example provides a soft hand off capability for the mobile station to hand off a voice communication channel to another base station and even to another CMRS provider termed a hard hand off.

Referring to assume three sectored base stations and in communication with mobile switch center A are owned and operated by CMRS provider A. Further assume three sectored base stations and in communication with mobile switch center B are owned and operated by CMRS provider B and that the coverage area with CMRS A and CMRS B substantially overlap. In order to locate a mobile station whose subscriber normally does business with CMRS provider A assume that the receiver of mobile station can detect signals from base stations and as well as from base stations and although normal mode use would preclude such measurements from being initiated. Assume further that the resulting location estimate generated from the location center contains either an ambiguous location estimate value pair or otherwise cannot render a location estimate with the desired range of accuracy.

From an inspection of the overall base station geometry of base stations owned by CMRS A and CMRS B it is evident that a strong possibility exists that either 1. the receivers in mobile station have the possibility to detect the pilot channels associated with base stations and 2. the receivers in base stations and have the possibility to detect the transmitter signal from mobile station . The location system contains a data store of both CMRS provider s base station geometries and is in communication with each mobile switch center A and mobile switch center B . An application in the location system sends a control message to the mobile station instructing the mobile station to tune its searcher receiver to listen for and report back signal measurement data regarding the pilot channel information associated with base stations and in addition to a request to report of pilot signals relative to base stations and . Similarly the application in the location system sends messages to each of base stations and with instructions to take signal measurements and report back the resulting information regarding the mobile stations transmitter . Since the signaling information from base stations and are based on a substantially different location geometry the resultant information is orthogonal and thus can be used by the location center to provide enhanced location estimates.

If appropriate a variation of the above process includes a location center initiated forced hard hand off of the mobile station from a primary base station e.g. associated with CMRS A to a new primary base station associated with CMRS B e.g. . A forced hand off will further provide improvements in reducing systemic timing errors which may be inherent among base stations owned by different CMRS. After the appropriate signal measurements have been reported the location system can revert the hand off back to the original CMRS. Other location system components shown in include the L API which includes the location applications programming interface L API MSC as a communications interface with multiple CMRS mobile switching centers via physical interfaces and

In order to provide the most economically efficient and accurate wireless location service capabilities among multiple CMRS providers in a shared coverage area a common location applications programming interface L API is highly desirable. A common interface also supports the natural competitive behaviors among wireless consumers and CMRS by providing flexible relationships among consumers who may want to switch service providers yet retain consistent wireless location services for public safety. This approach minimizes the L API design and deployment costs among infrastructure vendors and location service providers in a shared coverage area. Based on a L API between a wireless location center and the mobile switch centers of multiple CMRS a novel aspect of this invention further includes a method and process that provides account management clearing house and revenue settlement capability with appropriate security management controls. This capability is implemented as wireless location control accounting and security mediation agent functions to compensate CMRS providers for providing various location specific network services as described herein.

As wireless location requests are sent to the location center for a given CMRS operated by a wireless location service provider WLSP the location center 1. assesses the appropriateness of soliciting additional signal and control measurements from another CMRS base station in the same coverage area in order to improve the quality of the location estimate 2. accesses requests and receives signal and control information with another CMRS base station infrastructure 3. provides as appropriate a record of compensation entitlement between or among multiple CRMS and WLSPs and 4. provides security management controls that protect the privacy needs of wireless customers and the unauthorized sharing of information between or among CMRS. Security controls also include audit trails and controls regarding customer access of their location subscriber profile and the administration of network security processes and related base station parameters and inventory.

Referring to Location Center base station access multiple CMRS an alternative embodiment is provided to extract the wireless location signal measurement data from each base station associated with each of multiple CMRS. Given base station and are operated by CMRS A and base station and are operated by CMRS B a communication circuit provides connectivity with the location application programming interface base station L API BS not shown . The L API BS is in communication with the L API in the location center . The communications circuit can be any of several conventional transport facilities such as a private line circuit a DS or T carrier circuit frame relay circuit microwave circuit or other data communications circuit.

The advantage of this embodiment is that no modifications are required by the infrastructure vendor in terms of the embedded operations circuit and related functions and systems which otherwise would be needed to telemeter wireless location signal measurement data from the base station to the location center . The termination equipment not shown in communication with the transport facilities within each base station typically includes a small computer with an in circuit connection such as an ASIC clip on device with connections to the control processor circuitry with the base station in the receiver section. The small computer provides a conversion of the signals provided on the in circuit connection to the ASIC chip for serialization and transmission to the location center via the transport facilities.

The Home Base station HBS concept in the PCS wireless network environment allows a user s mobile station to be also used as a low cost cordless phone whenever the mobile station is physically near generally within 700 1 000 feet of a Home Base station Device HBSD . This enables the user to avoid the typically higher cost air time charges associated with traditional wireless service.

The HBSD is similar to ordinary cordless phone transceiver devices in current use today but is modified to function with a PCS wireless mobile station. Although the HBSD has been typically used at a residential consumer s home the HBSD could also be used in business settings and other environments.

When a mobile station MS is near the HBSD as shown in and the HBSD detects the presence of a mobile station over the cordless phone air interface the HBSD signals the Home Location Register HLR software in the Service Control Point in the AIN network associated with the mobile station and mobile station s home mobile switch center. The home location register redirects mobile station terminating calls from the network away form the mobile station s mobile identification number in the mobile switch center and to the AIN SSP wireline class V switch which connects the wireline number associated with the HBSD. Similarly the HBSD upon detecting a mobile station call origination attempt redirects the mobile station signal from a PCS network fixed base station to the control of the HBSD. The HBSD redirects the mobile station originating call through the wireline network similar to any other wireline network call.

A reverse scenario occurs whenever the mobile station and HBSD lose communication the mobile station registers in a wireless PCS network fixed base station causing redirection of calls to the wireless network. The cordless phone air interface may be of a vendor proprietary design or it may be a similar design as the CDMA air interface.

In order to perform a location estimate in the HBS concept a connection is used between the Location Center LC and the home location register HBS application in the SCP. In addition a new process termed a Location Notification Process LNP within the home location register SCP is used to send a message to the LC autonomously whenever a state change occurs in the mobile station either via a specific list of mobile identification numbers or all mobile identification numbers registration registering either to a fixed Base station in the Wireless PCS network or to a HBSD.

Alternatively the process may respond to an on demand message from the LC to the LNP within the home location register HBS application. In either case a response message from the LNP to the LC provides the information regarding whether or not a mobile station is within range of its or a designated HBSD. In either case the response message contains a message header information which provides the signal processing subsystem equivalently this may be known by signal filtering subsystem with the ability to determine and distribute the information to the HBS First Order Location Estimate Model.

CDMA distributed antennas are useful particularly in system configurations involving microcells and potentially indoor environments such as CDMA PBX private branch exchange systems in business offices and in wireless local loop applications. From a mobile station location perspective the distributed antenna configuration can provide significant improvements in location error as compared with an indoor mobile station user with a wireless connection to an outdoor macrocell Base station. Wireless location can be achieved provided certain methods and procedures M Ps are followed during the installation process. Data related to these M Ps is then used by various location processes discussed elsewhere in this invention.

First a general description of CDMA distributed antennas is presented followed by the M Ps necessary to support wireless location.

In the CDMA distributed antenna concept a set of simple antennas placed apart in a given area similarly to any other cell placement arrangement for coverage objectives are fed by a common radio signal. Antennas are usually placed such that their coverage patterns are substantially or completely overlapped in area of coverage. From a wireless location perspective completely overlapping coverage is preferred this approach also improves perceived signal quality by the end users .

The importance of understanding and characterizing the aggregate system delay elements is shown in Distributed Antenna Delay Characterization. For any given Pilot Channel offset l additional delay is introduced by the microwave propagation channel Point A and any internal repeater amplifier equipment Point B . Each of four delay elements tthrough tintroduce further delay. A mobile station detecting all four DA antennas delayed signals would determine various sets of cumulative system propagation delays. Since each delay is essentially fixed in a location such information can be used to determine the mobile station location within the building. illustrates the effective system timing among the delay elements relative to the GPA system time along each point in the diagram shown in .

The CDMA Base station transmitter common output signal is fed through a distribution coaxial cable system optical fibers or other means to a string of two or more antennas. Each antenna is connected to the distribution cable via a transmission line tap or delay element which may or may not provide further broadband gain. The transmission system normally consists of two media channels one for transmit and one for receive signals. illustrates an Alternative DA Configuration using multi point microwave antennas connected to individual delay elements and their respective radiating antennas.

The main concept is to introduce purposeful delay and multipath signals with sufficient delay spread for signal discrimination. Each antenna radiates a signal which is substantially delayed with respect to any other antenna in the area. If two or more paths are available for the mobile station receivers with greater than one eighth microsecond differential path delay or whatever resolution is available in the CDMA mobile station receivers then two or more PN receivers in the same mobile station can be employed to separately receive and combine these signals and thus achieve processing gains through path diversity. Antennas may be omni directional or directional.

Delay elements may be simple delay lines such as lengths of coaxial cabling or other active or passive delay elements such that the combination of components provides the needed delay. The transmission line between the CDMA Base station PBX and the distributed antennas may be via a pair of dedicated beam focused high gain antennas and or a repeater system. Provided sufficient delay exists between the multipath signals from separate distributed antennas exists each Data Receiver within the mobile station tracks the timing of the received signal it is receiving. This is accomplished by the technique of correlating the received signal by a slightly earlier reference PN and correlating the received signal with a slightly late local reference PN. Further distributed antenna details can be seen from Gilhousen et al U.S. Pat. No. 5 280 472 assigned to Qualcomm Inc.

The total measured delay of both forward and reverse link signals between the BS and the mobile station are thus determined naturally by the CDMA radio receiver designs as a part of the multipath tracking process and can be made available to a location entity for performing location estimates of the mobile station.

However the measurements of delay between a particular distributed antenna and the mobile station will include the aggregate delay components of several mechanisms beyond the BS pilot PN offset delay. In the case of distributed antenna configurations the simple TOA or TDOA model which is based solely of the speed of light must now be adjusted to account for the purposefully introduced delay.

The mobile station measures the arrival time T for each pilot l reported to the BS. The pilot arrival time is the time of occurrence as measured at the mobile station antenna connection of the earliest arriving usable multipath of the pilot. The arrival time is measured relative to the mobile station time reference in units of PN chips. The mobile station computes the reported pilot PN phase fas 64 PILOT PN mod 2 

Reference which illustrates a typical distributed antenna configuration consisting of a repeater amplifier and four distributed antennas. The total system delay Tis 

During the installation phase of the high gain antenna if required repeater if required and the distributed antennas if the system delay is measured at each distributed antenna and the values stored in a location database including each antenna identification and exact physical location in three dimensions then during a location request all fixed delays will be known thus the TP value can be determined by subtracting the fixed known delay values from Ti the measured time of arrival. The TP value can now be used to determine a TOA and or a TDOA value in a manner similar to the non distributed antenna case thus location can be determined based on these TOA TDOA ranging values.

The required installation methods and procedures required to support wireless location are illustrated in Methods and Procedures for DA Installation. By following these methods the Location Center LC will contain a database populated with the necessary data values to perform accurate location estimates within the building containing the distributed antennas. Table B illustrates typically data element types and values required in the DA location estimate model database. Table DA 11 below illustrates how a simple TOA location estimate model can be used to determine wireless location in a DA environment. Based on the known geometry and coverage areas of each DA cell and the percentage of maximum radius determined by the above classification it is possible to construct radius radius circles of the DA cells. The intersection of the three circles in this case provides the location estimate.

In order for the TOA and TDOA location calculations to be determined it is a necessary condition that during distributed antenna installation the minimum values of the Delay Elements be set to each exceed the maximum practical i.e. within the coverage area TP values be at least of a PN chip duration about 500 nanoseconds to easily allow for the CDMA Data Receivers to be able to correlate between the delay element values and the TP delay values. DA Delay Spread Ranges illustrates typical maximum ranging variable delay values e.g. up to 1 960 feet if 500 nanosecond guard zones t are used. If larger ranging values are required then guard zone delays must be increased proportionally.

It should also be noted that a maximum upper bound exists for the maximum amount of cumulative system propagation delay which can be tolerated by the CDMA mobile station. The total delay cannot exceed an amount that would interfere with the next pilot PN offset or substantially delay the scanning time of the search receiver in the mobile station. In any case 30 to 40 microseconds of total delay is acceptable and would allow for a relatively large number of distributed antenna components to be included thus no unusual impacts are required of the system to accommodate location methods.

By purposefully introducing a relatively large amount of delay in the distributed antenna delay elements relative to the maximum permissible TP delay values it is possible to utilize the large Delay Element values to uniquely identify the distributed antenna ID and thus via the distributed antenna database to determine the antennas exact location. Knowing the antenna s location and TP value last stage of propagation delay TOA and TDOA ranging can be achieved and thus mobile station location within a distributed antenna configuration can be determined.

Assume that the mobile station detects and telemeters three CDMA finger RF measurements as shown in the table A below New Message Type Data Structure Content.

Note that the measurements may be averaged over a sample space of 128 individual measurements. Referring now back to it can be seen that the first finger is associated with the DA cell range 0 to 1.96 microseconds and DA cell range 2.46 microseconds to 4.42 microseconds uS and DA cell range 7.38 to 9.34 microseconds. Since the DA cell antennas are fixed with known locations correlation s can be derived and established to relate actual measurements with locations. Any one of several location estimating models may be used using the radius radius method or multiple invocations of different modules may alternatively be used to form a location estimate of the mobile station within the DA environment.

It is now possible to classify the above actual measurements as propagation delayed signals for the DA cells and since each DA cell delay range is known and sufficient guard zones exist between delay spread ranges to unambiguously classify the measurements and thus to determine mobile station location. The following table illustrates a typical database containing the classification columns for each DA cell and their corresponding location in an x y plane.

Translating the actual delay measurements into a percentage of the maximum radius of each cell i.e. cell radius actual is 88 cell radius actual is 78 and cell radius actual is 91 provides wireless location using familiar radius radius calculations.

Depending upon the combinations of embodiments the Location Center and Gateway may contain from one to three interfaces into the digital PCS network shown as interfaces X Y and Z in Location and CTIA TR45 Network Reference Model. Network interface reference points Um A Ai B C D and H are part of the Cellular Telecommunications Industry of America CTIA Technical Reference 45 standards and are not discussed further.

Network interface reference point X provides a direct connection to the mobile switch center used for transferring RF measurement signals from the mobile station and BS to the LC and for transferring location control between the LS and mobile station and between the LC and BS. This interface can be implemented via any number of data communications circuit configurations and protocols in current use such as a T carrier data circuit with DSU CSUs at each end using an intranet internet protocol suite such as TCP IP RPC messaging or other middleware solutions such as Pipes IBM MQ series world wide web protocols such as JAVA VRML scripts hypertext markup language HTML links and may also include various firewall schemes and data encryption mechanisms etc. in order to communicate asynchronous messaging among the endpoints and in particular in reference to the final distribution of the location information to the desired end user.

Network interface reference point Y is used in the embodiment wherein a public switched telephone network interface is required or desired. This interface is a straightforward method to support location applications wherein for example a mobile station user dials a telephone number in order to initiate a location request and could also be used to telemeter RF measurement and location control messages between the LC and the mobile station BS. Alternatively a timer initiated process internal to the LC may be used to start a location request or via any number of events external to the network. Point Y also has the advantage of not requiring a direct connection to a commercial radio mobile service providers network elements thus affording a convenient interface for use by third party location service providers unrelated to the commercial radio mobile service provider.

By utilizing specific data items used in the Home Location Register in the Advanced Intelligent Network it is possible to determine the mobile station location on a national scale i.e. location within the context of a state and in which city.

Referring now to network interface reference point Z is used in the embodiment wherein a gross location must be determined. A gross location is defined as an area associated with a particular mobile switch center coverage area. Mobile switch center coverage areas are typically bounded by a large metropolitan area such as a city. The Home Location Register HLR contains gross location information. The Z interface allows the LC to query the home location register to determine if the user is in their home area or whether the user is roaming to another mobile switch center coverage area such as another city. IS 41 Cellular Radio Telecommunications intersystem operations communications protocols provide mechanisms that allow a user to roam into authorized areas outside of their home area.

If the user is roaming in another area then the LC can use that information to initiate location control messages toward the CDMA network currently hosting the mobile station user. illustrates how a user based in Los Angeles Calif. for example may roam to a CDMA system in New York City and be located within that metropolitan area through a data communications network and a national Location Center Clearinghouse system.

The signal processing subsystem receives control messages and signal measurements and transmits appropriate control messages to the wireless network via the location applications programming interface referenced earlier for wireless location purposes. The signal processing subsystem additionally provides various signal identification conditioning and pre processing functions including buffering signal type classification signal filtering message control and routing functions to the location estimate modules.

There can be several combinations of Delay Spread Signal Strength sets of measurements made available to the signal processing subsystem within the Location Center System shown in . In some cases the mobile station may be able to detect up to three or four Pilot Channels representing three to four Base Stations or as few as one Pilot Channel depending upon the environment. Similarly possibly more than one BS can detect a mobile station transmitter signal as evidenced by the provision of cell diversity or soft hand off in the CDMA standards and the fact that multiple CMRS base station equipment commonly will overlap coverage areas. For each mobile station or BS transmitted signal detected by a receiver group at a station multiple delayed signals or fingers may be detected and tracked resulting from multipath radio propagation conditions from a given transmitter.

In typical spread spectrum diversity CDMA receiver design the first finger represents the most direct or least delayed multipath signal. Second or possibly third or fourth fingers may also be detected and tracked assuming the mobile station contains a sufficient number of data receivers. Although traditional TOA and TDOA methods would discard subsequent fingers related to the same transmitted finger collection and use of these additional values can prove useful to reduce location ambiguity and are thus collected by the Signal Processing subsystem in the Location Center .

For each pilot channel detection case multiple fingers up to three or four may be detected and thus reported to the Location system as shown in for dense urban and rural settings respectively. From the mobile receiver s perspective a number of combinations of measurements could be made available to the Location Center. Table SP 1 illustrates the available combinations for three and four receiver cases respectively.

The above Table SP 1 scenario assumes that the mobile station design and data collection structure only permits a 1 1 correspondence to exist between the number of base stations detected and the number of data receivers reporting multipath CDMA fingers.

Table SP 1 illustrates the potential combinations of detected CDMA signals representing multipath fingers and total number of detectable base station pilot signals in a given location within the radio coverage area . Due to the disperse and near random nature of CDMA radio signals and propagation characteristics traditional TPO TDOA location methods have failed in the past because the number of signals received in different locations are different. In a particularly small urban area say less than 500 square feet the number of RF signals and there multipath components may vary by over 100 percent.

Now consider more practical less ideal cases. Due to the large capital outlay costs associated with providing three or more overlapping base station coverage signals in every possible location most practical digital PCS deployments result in fewer than three base station pilot channels being reportable in the majority of location areas thus resulting in a larger more amorphous location estimate. illustrate a typical relative error space wherein a mobile station detects only two base station pilot channels and only one pilot channel respectively. This consequence requires a family of location estimate location modules or models each firing whenever suitable data has been presented to a model thus providing a location estimate to a backend subsystem which resolves ambiguities.

In one embodiment of this invention using backend hypothesis resolution by utilizing existing knowledge concerning base station coverage area boundaries such as via the compilation a RF coverage database either via RF coverage area simulations or field tests the location error space is decreased. Negative logic Venn diagrams can be generated which deductively rule out certain location estimate hypotheses.

Base Station Cell site planning tools which utilize antenna gain radiation patterns environmental clutter such as buildings dense forests terrain heights etc. can provide reasonable training data to bootstrap the initial operation of the LC.

An example of the types of data typically collected during field tests runs is shown in the following database table SP 2 below 

Although the forward link mobile station s received relative signal strength RRSS of detected nearby base station transmitter signals can be used directly by the location estimate modules the base station s reverse link received relative signal strength RRSS of the detected mobile station transmitter signal must be modified prior to location estimate model use since the mobile station transmitter power level changes nearly continuously and would thus render relative signal strength useless for location purposes.

One adjustment variable and one factor value are required by the signal processing subsystem 1. instantaneous relative power level in dBm IRPL of the mobile station transmitter and 2. the mobile station Power Class. By adding the IRPL to the RRSS a synthetic relative signal strength SRSS of the mobile station signal detected at the BS is derived which can be used by location estimate model analysis as shown below in dBm 

SRSS a corrected indication of the effective path loss in the reverse direction mobile station to BS is now comparable with RRSSand can be used to provide a correlation with either distance or shadow fading because it now accounts for the change of the mobile station transmitter s power level. The two signals RRSSand SRSScan now be processed in a variety of ways to achieve a more robust correlation with distance or shadow fading.

Although Rayleigh fading appears as a generally random noise generator essentially destroying the correlation value of either RRSSor SRSSmeasurements with distance individually several mathematical operations or signal processing functions can be performed on each measurement to derive a more robust relative signal strength value overcoming the adverse Rayleigh fading effects. Examples include averaging taking the strongest value and weighting the strongest value with a greater coefficient than the weaker value then averaging the results. This signal processing technique takes advantage of the fact that although a Rayleigh fade may often exist in either the forward or reverse path it is much less probable that a Rayleigh fade also exists in the reverse or forward path respectively. A shadow fade however similarly affects the signal strength in both paths.

At this point a CDMA radio signal direction independent net relative signal strength measurement is derived which is used to establish a correlation with either distance or shadow fading or both. Although the ambiguity of either shadow fading or distance cannot be determined other means can be used in conjunction such as the fingers of the CDMA delay spread measurement and any other TOA TDOA calculations from other geographical points. In the case of a mobile station with a certain amount of shadow fading between its BS the first finger of a CDMA delay spread signal is most likely to be a relatively shorter duration than the case where the mobile station and BS are separated by a greater distance since shadow fading does not materially affect the arrival time delay of the radio signal.

By performing a small modification in the control electronics of the CDMA base station and mobile station receiver circuitry it is possible to provide the signal processing subsystem reference within the Location system with data that exceed the one to one CDMA delay spread fingers to data receiver correspondence. Such additional information in the form of additional CDMA fingers additional multipath and all associated detectable pilot channels provides new information which is used to enhance to accuracy of the Location Center s location estimate location estimate modules.

This enhanced capability is provided via a control message sent from the Location system to the mobile switch center and then to the base station s in communication with or in close proximity with mobile stations to be located. Two types of location measurement request control messages are needed one to instruct a target mobile station i.e. the mobile station to be located to telemeter its BS pilot channel measurements back to the primary BS and from there to the mobile switch center and then to the location system . The second control message is sent from the location system to the mobile switch center then to first the primary BS instructing the primary BS searcher receiver to output i.e. return to the initiating request message source the detected target mobile station transmitter CDMA pilot channel offset signal and their corresponding delay spread finger peak values and related relative signal strengths.

The control messages are implemented in standard mobile station and BS CDMA receivers such that all data results from the search receiver and multiplexed results from the associated data receivers are available for transmission back to the Location Center . Appropriate value ranges are required regarding mobile station parameters T ADD T DROP and the ranges and values for the Active Neighboring and Remaining Pilot sets registers held within the mobile station memory. Further mobile station receiver details have been discussed above.

In the normal case without any specific multiplexing means to provide location measurements exactly how many CDMA pilot channels and delay spread fingers can or should be measured vary according to the number of data receivers contained in each mobile station .

As a guide it is preferred that whenever RF characteristics permit at least three pilot channels and the strongest first three fingers are collected and processed.

From the BS perspective it is preferred that the strongest first four CDMA delay spread fingers and the mobile station power level be collected and sent to the location system for each of preferably three BSs which can detect the mobile station .

Table SP 3 illustrates the resulting extended combinations of BS signals pilot channels and finger measurements potentially available based on the above preferred conditions. The philosophy is to collect as much reasonable data as is practical given the constraints of CDMA receivers search times receiver memory storage and available CPU and data transmission bandwidth in order that sufficient orthogonal information can be processed to minimize location estimate error.

As can be seen from the table a much larger combination of measurements is potentially feasible using the extended data collection capability of the CDMA receivers. In the case of the last row shown additional combinations are also possible using a similar scheme of allocating the number of CDMA fingers detected at the first or strongest BS followed by the second strongest base station then the third strongest base station etc.

Input queue s are required in order to stage the rapid acceptance of a significant amount of RF signal measurement data used for either location estimate purposes or to accept autonomous location data. Each location request using fixed base stations may in one embodiment contain from 1 to 128 radio frequency measurements from the mobile station which translates to approximately 61.44 kilobytes of signal measurement data to be collected within 10 seconds and 128 measurements from each of possibly four base stations or 245.76 kilobytes for all base stations for a total of approximately 640 signal measurements from the five sources or 307.2 kilobytes to arrive per mobile station location request in 10 seconds. An input queue storage space is assigned at the moment a location request begins in order to establish a formatted data structure in persistent store. Depending upon the urgency of the time required to render a location estimate fewer or more signal measurement samples can be taken and stored in the input queue s accordingly.

The signal processing subsystem supports a variety of wireless network signaling measurement capabilities by detecting the capabilities of the mobile and base station through messaging structures provided by the location application programming interface in . Detection is accomplished in the signal classifier by referencing a mobile station database table within the signal processor database which provides given a mobile station identification number mobile station revision code other mobile station characteristics. Similarly a mobile switch center table provides MSC characteristics and identifications to the signal classifier filter . The signal classifier filter adds additional message header information that further classifies the measurement data which allows the digital signal processor and image filter components to select the proper internal processing subcomponents to perform operations on the signal measurement data for use by the location estimate modules.

Regarding service control point messages autonomously received from the input queue the signal classifier filter determines via a signal processing database query that the message is to be associated with a home base station module. Thus appropriate header information is added to the message thus enabling the message to pass through the digital signal processor unaffected to the output queue and then to the router distributor . The router distributor then routes the message to the HBS module shown in . Those skilled in the art will understand that associating location requests from Home Base Station configurations require substantially less data the mobile identification number and the associated wireline telephone number transmission from the home location register are on the order of less than 32 bytes. Consequentially the home base station message type could be routed without any digital signal processing.

Output queue s are required for similar reasons as input queues relatively large amounts of data must be held in a specific format for further location processing by the location estimate modules.

The router and distributor component is responsible to directing specific signal measurement data types and structures to their appropriate modules. For example the HBS module has no use for digital filtering structures whereas the TDOA module would not be able to process an HBS response message.

The controller is responsible for staging the movement of data among the signal processing subsystem components input queue digital signal processor router distributor and the output queue and to initiate signal measurements within the wireless network in response from an internet location request message in via the location application programming interface .

In addition the controller receives autonomous messages from the MSC via the location applications programming interface or L API and the input queue whenever a 9 1 1 wireless call is originated. The mobile switch center provides this autonomous notification to the location system as follows By specifying the appropriate mobile switch center operations and maintenance commands to surveil calls based on certain digits dialed such as 9 1 1 the location applications programming interface in communication with the MSC and or in receives an autonomous notification whenever a mobile station user dials 9 1 1. Specifically a bi directional authorized communications port is configured usually at the operations and maintenance subsystem of the MSC and or in or with their associated network element manager system s with a data circuit such as a DS 1 with the location applications programming interface in . Next the call trace capability of the mobile switch center is activated for the respective communications port. The exact implementation of the vendor specific man machine or Open Systems Interface OSI commands s and their associated data structures generally vary among MSC vendors however the trace function is generally available in various forms and is required in order to comply with Federal Bureau of Investigation authorities for wire tap purposes. After the appropriate surveillance commands are established on the MSC such 9 1 1 call notifications messages containing the mobile station identification number MIN and in FCC phase 1 E9 1 1 implementations a pseudo automatic number identification a.k.a. pANI which provides an association with the primary base station in which the 9 1 1 caller is in communication are communicated. In cases where the pANI is known from the onset the signal processing subsystem avoids querying the MSC in question to determine the primary base station identification associated with the 9 1 1 mobile station caller.

After the signal processing controller receives the first message type the autonomous notification message from the mobile switch center to the location system containing the mobile identification number and optionally the primary base station identification the controller queries the base station table in the signal processor database to determine the status and availability of any neighboring base stations including those base stations of other CMRS in the area. The definition of neighboring base stations include not only those within a provisionable hop based on the cell design reuse factor but also includes in the case of CDMA results from remaining set information autonomously queried to mobile stations with results stored in the base station table. Remaining set information indicates that mobile stations can detect other base station sector pilot channels which may exceed the hop distance yet are nevertheless candidate base stations or sectors for wireless location purposes. Although cellular and digital cell design may vary hop distance is usually one or two cell coverage areas away from the primary base station s cell coverage area.

Having determined a likely set of base stations which may both detect the mobile station s transmitter signal as well as to determine the set of likely pilot channels i.e. base stations and their associated physical antenna sectors detectable by the mobile station in the area surrounding the primary base station sector the controller initiates messages to both the mobile station and appropriate base stations sectors to perform signal measurements and to return the results of such measurements to the signal processing system regarding the mobile station to be located. This step may be accomplished via several interface means. In a first case the controller utilizes for a given MSC predetermined storage information in the MSC table 31 to determine which type of commands such as man machine or OSI commands are needed to request such signal measurements for a given MSC or in . The controller generates the mobile and base station signal measurement commands appropriate for the MSC and passes the commands via the input queue and the locations application programming interface in to the appropriate MSC and using the authorized communications port mentioned earlier. In a second case the controller communicates directly with the base stations as discussed above and shown in Location Center base station access multiple CMRS. In this second case an alternative embodiment is provided to directly extract the wireless location signal measurement data from each base station associated with each of the multiple CMRS networks having to interface directly with the MSC for signal measurement extraction.

Upon receipt of the signal measurements the signal classifier examines location application programming interface provided message header information from the source of the location measurement for example from a fixed BS a mobile station a distributed antenna system or message location data related to a home base station provided by the location applications programming interface L API via the input queue and determines whether or not device filters or image filters are needed and assesses a relative priority in processing such as an emergency versus a background location task in terms of grouping like data associated with a given location request. In the case where multiple signal measurement requests are outstanding for various base stations some of which may be associated with a different CMRS network an additional signal classifier function includes sorting and associating the appropriate incoming signal measurements together such that the digital signal processor processes related measurements in order to build ensemble data sets. Such ensembles allow for a variety of functions such as averaging outlier removal over a time period and related filtering functions and further prevent association errors from occurring in location estimate processing.

Another function of the signal classifier low pass filter component is to filter information that is not useable or information that could introduce noise or the effect of noise in the location estimate modules. Consequently low pass matching filters are used to match the in common signal processing components to the characteristics of the incoming signals. Low pass filters match Mobile Station base station CMRS and MSC characteristics as well as to classify Home Base Station messages.

The signal processing subsystem in contains a base station database table which captures the maximum number of CDMA delay spread fingers for a given base station containing information structures as shown in table SP 4 below 

The base station identification code or CLLI or common language level identification code is useful in identifying or relating a human labeled name descriptor to the Base Station. Latitude Longitude and elevation values are used by other subsystems in the location system for calibration and estimation purposes. As base stations and or receiver characteristics are added deleted or changed with respect to the network used for location purposes this database table must be modified to reflect the current network configuration.

Just as an upgraded base station may detect additional CDMA delay spread signals newer or modified mobile stations may detect additional pilot channels or CDMA delay spread fingers. Additionally different makes and models of mobile stations may acquire improved receiver sensitivities suggesting a greater coverage capability. The table below establishes the relationships among various mobile station equipment suppliers and certain technical data relevant to this location invention.

Although not strictly necessary the MIN can be populated in this table from the PCS Service Provider s Customer Care system during subscriber activation and fulfillment and could be changed at deactivation or anytime the end user changes mobile stations. Alternatively since the MIN manufacturer model number and software revision level information is available during a telephone call this information could extracted during the call and the remaining fields populated dynamically based on manufacturers specifications information previously stored in the signal processing subsystem . Default values are used in cases where the MIN is not found or where certain information must be estimated.

A low pass mobile station filter contained within the signal classifier low pass filter of the signal processing subsystem uses the above table data to perform the following functions 1 act as a low pass filter to adjust the nominal assumptions related to the maximum number of CDMA fingers pilots detectable and 2 to determine the transmit power class and the receiver thermal noise floor. Given the detected reverse path signal strength the required value of SRSS a corrected indication of the effective path loss in the reverse direction mobile station to BS can be calculated based on the SP 5 table data contained within the mobile station table in the signal processing database .

The effects of the maximum Number of CDMA fingers allowed and the maximum number of pilot channels allowed essentially form a low pass filter effect wherein the least common denominator of characteristics are used to filter the incoming RF signal measurements such that a one for one matching occurs. The effect of the Transmit Power Class and receiver Thermal Noise floor values is to normalize the characteristics of the incoming RF signals with respect to those RF signals used.

A location application programming interface L API CCS to the appropriate CMRS customer care system provides the mechanism to populate and update the mobile station table within the database . The L API CCS contains its own set of separate input and output queues or similar implementations and security controls to ensure that provisioning data is not sent to the incorrect CMRS. The interface to the customer care system for CMRS A provides an autonomous or periodic notification and response application layer protocol type consisting of add delete change and verify message functions in order to update the mobile station table within the signal processing database via the controller . A similar interface is used to enable provisioning updates to be received from CMRS B customer care system

Although the L API CCS application message set may be any protocol type which supports the autonomous notification message with positive acknowledgment type the T1M1.5 group within the American National Standards Institute has defined a good starting point in which the L API CCS could be implemented using the robust OSI TMN X interface at the service management layer. The object model defined in Standards proposal number T1M1.5 96 22R9 can be extended to support the L API CCS information elements as required and further discussed below. Other choices in which the L API CCS application message set may be implemented include ASCII binary or any encrypted message set encoding using the Internet protocols such as TCP IP simple network management protocol http https and email protocols.

Referring to the digital signal processor DSP in communication with the signal classifier LP filter the DSP provides a time series expansion method to convert non HBS data from a format of an signal measure data ensemble of time series based radio frequency data measurements collected as discrete time slice samples to a three dimensional matrix location data value image representation. Other techniques further filter the resultant image in order to furnish a less noisy training and actual data sample to the location estimate modules.

Referring now to digital signal and image filter processing by way of example a forward path CDMA mobile station delay spread RF measurement sample is illustrated in for the mobile station reception of one sample of transmission signal related to BS located at 16th and Stout Streets. In this sample three fingers or groups of RF energy relative signal strength is indicated along the vertical axis were detected. A first CDMA finger was found at a delay of about 3.4 microseconds and relative signal strength of about 80 dBm. A second finger was found at a delay of about 5 microseconds and peak strength of about 55 dBm followed by a third finger at 6.5 microseconds and a strength of about 92 dBm. Two other base stations were detected BS and BS along with their respective three CDMA delay spread fingers.

Refer now to the left image shown in Delay Spread Profile Image. After 128 samples of data are collected of the delay spread relative signal strength RF data measurement sample mobile station RX for BS and grouped into a Quantization matrix where rows constitute relative signal strength intervals and columns define delay intervals. As each measurement row column pair which could be represented as a complex number or Cartesian point pair is added to their respective values to generate a Z direction of frequency of recurring measurement value pairs or a density recurrence function. By next applying a grid function to each x y and z value a three dimensional surface grid is generated which represents a location data value or unique print of that 128 sample measurement. illustrates the result of image generation when a number of data samples or an ensemble of signal strength delay pairs of values are added within a given bin area or matrix to thus create a type of three dimensional image representing a particular RF signaling behavior at a given location.

Refer now to the right image shown in . In the general case where a mobile station is located in an environment with varied clutter patterns such as terrain undulations unique man made structure geometries thus creating varied multipath signal behaviors such as a city or suburb although the first CDMA delay spread finger may be the same value for a fixed distance between the mobile station and BS antennas as the mobile station moves across such an arc different finger data are measured. In the right image for the defined BS antenna sector location classes or squares numbered one through seven are shown across a particular range of line of position LOP .

A traditional TOA TDOA ranging method between a given BS and mobile station only provides a range along the arc thus introducing ambiguity error. However a unique three dimensional image can be used in this method to specifically identify with recurring probability a particular unique location class along the same Line Of Position as long as the multipath is unique by position but generally repeatable thus establishing a method of not only ranging but also of complete latitude longitude location estimation in a Cartesian space. In other words the unique shape of the mountain image enables a correspondence to a given unique location class along a line of position thereby eliminating traditional ambiguity error.

Although man made external sources of interference Rayleigh fades adjacent and co channel interference and variable clutter such as moving traffic introduce unpredictability thus no mountain image would ever be exactly alike three basic types of filtering methods can be used to reduce matching comparison error from a training case to a location request case 1. select only the strongest signals from the forward path BS to mobile station and reverse path mobile station to BS 2. Convolute the forward path 128 sample image with the reverse path 128 sample image and 3. process all image samples through various digital image filters to discard noise components.

The strongest signal technique has been discussed previously in the data filter section. Convolution of Forward and Reverse Images illustrates one method that essentially nulls noise completely even if strong and recurring as long as that same noise characteristic does not occur in the opposite path.

The third technique of processing CDMA delay spread profile images through various digital image filters provides a resultant image enhancement in the sense of providing a more stable pattern recognition paradigm to the neural net location estimate model. For example image histogram equalization can be used as illustrated in before equalization and after equalization to rearrange the images intensity values or density recurrence values so that the image s cumulative histogram is approximately linear.

Other methods which can be used to compensate for a concentrated histogram include 1 Input Cropping 2 Output Cropping and 3 Gamma Correction. Equalization and input cropping can provide particularly striking benefits to a CDMA delay spread profile image. illustrate the three dimensional grid images of the before and after input cropping filter example. As shown in input cropping removes a large percentage of random signal characteristics that are non recurring.

Other filters and or filter combinations can be used to help distinguish between stationary and variable clutter affecting multipath signals. For example it is desirable to reject multipath fingers associated with variable clutter since over a period of a few minutes such fingers would not likely recur. Further filtering can be used to remove recurring at least during the sample period and possibly strong but narrow pencils of RF energy. A narrow pencil image component could be represented by a near perfect reflective surface such as a nearby metal panel truck stopped at a traffic light.

On the other hand stationary clutter objects such as concrete and glass building surfaces adsorb some radiation before continuing with a reflected ray at some delay. Such stationary clutter affected CDMA fingers are more likely to pass a 4 4 neighbor Median filter as well as a 40 to 50 percent Input Crop filter and are thus more suited to neural net pattern recognition. illustrate five pencils of CDMA finger energy that passed a simple 50 percent Input Crop filter. However as shown in when subjected to a 4 4 neighbor Median filter and 40 percent clipping all five pencil shaped fingers have been deleted. illustrates the further simplified result of a 50 percent cropping and 4 4 neighbor median filtering. Other filtering methods include custom linear filtering adaptive Weiner filtering and custom nonlinear filtering.

The DSP may provide data ensemble results such as extracting the shortest time delay with a detectable relative signal strength to the router distributor or alternatively results may be processed via one or more image filters with subsequent transmission to the router distributor . The router distributor examines the processed message data from the DSP and stores routing and distribution information in the message header router distributor then forwards the data messages to the output queue for subsequent queuing then transmission to the appropriate location estimators DA module TOA TDOA module or the HBS module in .

Upon receiving a message from the Data Capture Gateway or the signal processing subsystem the HBS location estimate model examines a Home Base Station Table which defines relationships among a wireless MIN and wireline telephone number characteristics of the HBSD and the possibility to use various signal types in order to further define the location within the address area of the fixed location HBSD. The following table populated by the commercial mobile radio service provider at HBSD installation time is used by the HBS model to determine location whenever the mobile station is located within communication range of the HBSD 

In the event RF signals are available for telemetry from the HBSD to the location system such information may be solicited from the location system to the HBSD in the form of a request response message scheme using for example a data under voice technique. In such cases the SSP provides a data connection with the location system via the PSTN. The home base station may interact with the mobile station in the same manner as a cordless telephone transceiver interacts with a cordless telephone when the mobile station is within an acceptable range.

The HBS module in outputs the Latitude and Longitude location estimates to either the PSTN or to the Internet depending upon the source of the originating location request.

Upon receipt of one or more data ensemble messages from the signal processing subsystem in the distributed antenna DA module queries a previously populated distributed antenna database to determine the locations of distributed antennas associated with the measured DA antenna pilot delays so that the detected signal measurement delay signal values received from the mobile station receivers and base station receivers can be input to the TOA TDOA module. The TOA TDOA module then utilizes the radius radius method or time difference method in order to provide location estimates within the building or area containing the distributed antennas.

As a practical matter it may be necessary in some network conditions to add base stations in areas to permit improved estimates to be achieved in wireless location. An aspect in this invention includes daisy chaining communication circuits or transport facilities between or among base stations in order to simplify the installation and operation of such base stations. Base stations normally communicate with the mobile switch center using T carrier transport facilities in order to carry voice and data bearer traffic and to transport bi directional control signals. However for various economic or other reasons it may not be justifiable to install such transport facilities. At the base station by essentially originating a plurality of mobile telephone calls using the data communications option and terminating such calls at the mobile switch center appropriately the outputs of the base station transport multiplex circuits are re directed into the data communication circuits normally intended for use by mobile stations in establishing a data circuit communication call to the network. Circuits at the mobile switch center used to terminate these data calls redirect the communication to those circuits normally used to terminate the T carrier facilities from the base stations. In this manner existing wireless channels can be used to provide transport via this daisy chaining method between certain base stations and the mobile switch center thus simplifying connectivity in cases where the installation of transport facilities would either be impossible or impractical.

Particular distinctions over the current state of the art include utilizing essentially the native electronics antennas and standards and opposed to overlay solutions supervisor functions which control a hybrid set of techniques including Time Of Arrival TOA Time Difference of Arrival TDOA in both the forward and reverse paths pilot signal strengths power control mobile stations mobile station state conditions stochastic features of environmental clutter multipath detection and mitigation and robustness supporting a variety of conditions including degraded faulty equipment distributed and SMART antennas various registration modes and various call processing conditions such as soft hard and idle hand off conditions location during the idle state traffic bearing states and location during cases of severe multipath such as that experienced in urban canyon environments as well as location in suburban and rural cases.

Since each base station is required to emit a constant signal strength pilot pseudo noise PN sequence on the forward link channel identified uniquely in a network system by a pilot sequence offset and frequency assignment it is possible to use the pilot channels of active candidate neighboring and remaining sets of pilots associated with neighboring base stations stored in the mobile station for TOA and TDOA measurements performed by the mobile station.

Based on the arrival time measurement estimates and the speed of propagation ranges or range differences between the base stations and the mobile station can be calculated. TOA and or TDOA measurements can then be input to either the radius radius multilateration or the time difference multilateration algorithms.

By utilizing the known base station positions location of the mobile station can be determined. Since measurements and base station positions can be sent either to the network or the mobile station location can be determined in either entity.

Since not all measurements can provide accurate location results at all times and conditions a variety of supervisory logic processes can be invoked to resolve or litigate the problem area.

As those familiar with the EIA TIA IS 95 and T1P1 JTC CDMA standards specifications know mobile station call processing consists of four states 

At power up an IS 95 or T1P1PCS CDMA compliant mobile station enters Initialization State as described in IS 95 section 6.6.1. During the System Determination substate the mobile station refers to its internal memory to acquire preferences for system carrier A or B or the preferred carrier at 1.8 2.0 GHz and for other types of service including advanced mobile phone service or AMPS as well as narrow band advanced mobile phone service or NAMPS.

A CDMA preferred mobile station then transfers to the Pilot Acquisition Substate. The mobile station tunes to the CDMA Channel number equal to CDMACHthen sets its Walsh code always W0 for the Pilot channel where it begins searching for pilot energy in terms of energy per bit per spectral density.

Once a sufficiently strong as defined by the T ADD threshold parameter pilot channel has been identified within Tseconds the mobile station enters the Sync Channel Acquisition Substate where the mobile station receives a Sync channel Message that includes among other information system time and the unique PN offset index for that particular BS. In the Timing Change substate the mobile station adjusts its internal timing to match the BS s CDMA system time. At the completion of the Timing Change substate the mobile station is completely synchronized to the CDMA system s BS time.

After satisfactory synchronization the mobile station then enters the stable Idle State where the paging channel begins to be monitored.

In cases where Distributed Antennas DAs and or Home Base Stations HBS are used each location of these devices can be sent to the mobile station. There are at least three format types possible in conveying this type of location information in the GeoLocation Message. First a unique identifier can be assigned to each DA HBS such as a fully distinguished name. An example of location information could be Within the USA State of Colorado city of Denver with Service Provider xyz BS ID 129 Distributed Antenna number 8. Or more compactly the location string is structured as USA.CO.DEN.xyz.129.DA8 . Secondly an easy to understand human style data message can be sent such as You are near the 30th floor of the Sears Tower building . Third data values for Latitude Longitude and possibly altitude and accuracy could be sent from the BS or Location Center to the mobile station LU. In order to be most easily useful to and end user in the first and third cases a database would be needed within the mobile station or a Personal Digital Assistant device which performs a translation of numerical data into a form useful for human understanding.

The mobile station thus maintains a list of location pilot offsets where the list is ranked based on a weighted combination of received signal energy and BS location. The mobile station selects the best candidate BSs for location estimate purposes which may be slightly different from the Active candidate and remaining lists.

Additionally the mobile station may send a Data Burst message back to the BS or Location Center informing that no other Pilot Channels were detected. This negative Venn diagram information may be useful with various heuristics for location estimate deduction for example to note where the mobile station is not located.

It is the difference of system time values as opposed to their absolute values that is important. Note that for purposes of location any communication back to a BS would require re synchronizing onto that BS s system time. Although not specified in either IS 95 or T1P1 JTC s PCS CDMA standards most mobile station manufacturers build correlators with resolutions of approximately PN chip which is about 125 nanoseconds nS . A location equipped mobile station will provide 125 nS. accuracy which is about 125 feet.

The mobile station or location entity can process the arrival time estimates in at least two ways. first the mobile station may difference the measurements preferred to form time difference of arrivals TDOA or second the mobile station may determine absolute time of arrival TOA by solving for the clock bias between the mobile station and other CDMA system time reports. TOA requires very well calibrated BS system clocks among each other.

The following procedure illustrates significant capabilities hidden in the CDMA standards which provide a substantial enabling base with which to provide the measurements and data for this inventions location methods.

First the BS sends the Neighbor List Update Message containing a complete list of the neighboring pilot PN sequence offset indices i.e. via the NGHBR PN field associated with candidate BSs in the area with which the mobile station could possibly scan for detecting usable earliest arriving neighboring useable BS multipath components. This list should typically be a complete list as opposed to the presumed candidate subset. If the mobile station is not already in the Traffic Conversation State it could invoke this state by calling a dialable telephone number in the network e.g. a designed Quiet Line This approach also allows a billing record to be generated according to routine wireless telephony practice. If the network is to determine location then the network pages the mobile station connecting the mobile station to a Quiet Line Voice message upon mobile station answer. Note that it may be desirable to suppress the mobile station ringer sounding for certain location applications. Other methods may also be possible.

During installation each BS in a particular area is provisioned with the locations of all possible neighboring BSs in its area. The BSs use this information to populate a list of all Latitudes and Longitudes which can be sent to the LUs using the Neighbor List Update message. Second assuming that the mobile station does not currently have this data or if unknown then the BS shall send a series of Mobile Station Registered Messages each message containing the latitude and Longitude values i.e. the BASE LAT and BASE LONG fields associated with a neighboring BS pilot PN offset sent with the first message. Note that the constants N Supported Traffic Channel Candidate Active Set size normally set to 6 and N Supported Traffic Channel Candidate Set size normally set to 5 and N the Minimum Supported Neighbor Set size normally set to 20 should be sufficient for most location purposes however these constants could be changed if the need arises.

Third the BS saves the current T ADD and T DROP values in the BS memory associated with the In Traffic LU and sends the In Traffic System Parameters Message which includes reduced T ADD and T DROP parameter values useable for location purposes. The value for T ADD would typically be set to a value near the lower end of the IS 98 specification possibly below the 80 dB dynamic range requirement close to but not including the thermal noise power level of the LU receiver. Note that if the LU is using restricted battery e.g. a portable then the time for keeping T ADD and T DROP at a low value for location estimates purposes should be kept short to delay adverse consequences such as increased current drain and noise.

Reduced T ADD and T DROP values sent to the mobile station will cause the LU to scan all conceivable neighboring BS pilots provided to it by the BS and to measure the strengths of each received pilot and to determine the pilot arrival time for each pilot offset. Note that the signal strengths now measured may not be sufficient for carrying traffic but may be sufficient for location purposes.

Assuming the network is to determine location then the mobile station reports the arrival time PILOT ARRIVAL for each pilot reported to the base station. According to the standard the arrival time is measured relative to the mobile station s time reference which was previously determined from the active BS in units of PN chips 1 2288 microseconds or about 814 nanoseconds as follows PILOT PHASE PILOT ARRIVAL 64 PILOT mod 2 

where PILOT PN is the PN sequence offset index of the pilot associated with the BS pilot indices in the neighbor list.

In order to achieve location accuracy estimates on the order of a few hundred feet or nanoseconds a higher resolution than 1 PN chip is required. Although not specified directly in IS 95 most mobile manufacturers use correlators with resolutions of approximately PN chip or about 102 nS suggesting that if no other systemic errors are present about 102 feet of error is expected . Note that the search window size SRCH WI Afor each pilot may need to be increased if there are substantial delays experienced from the environment. It is desirable for the mobile station to report the second and third arrival time or the second and third fingers and their relative signal strengths corresponding to each detectable Pilot Channel.

If more than one PILOT ARRIVAL is available then a basic TDOA multilateration algorithm may be invoked at either the LU or the network. In the network case the active BS must send a Pilot Request Order for Pilot Measurement Request Order ORDER code 010001 which causes the mobile station to forward its measurements to the BS and consequently the network as appropriate .

At this point a minimally sufficient number of measurements are available to perform a location estimate. Thus the BS should restore the original T ADD and T DROP values previously saved in the BS memory to the mobile station via the In Traffic System Parameters Message.

Additional information may be desirable such as the active BS TOA measurement as well as associated BS measurements of the mobile station s TOA to their BS location. This added information may be sent to the mobile station if the mobile station is to perform location via the Data Burst Message on the Forward Traffic Channel. Since 26 combinations of data burst types have been reserved for future use in the standard dedication of several combinations could be used to telemeter location related data. In cases where duplicate ranging or other information is available various supervisor techniques mentioned elsewhere in this document could be used to refine the location estimate.

Once the location estimate has been performed any number of means could be used to provide the results to the end user.

The IS 95 and J STD 008 CDMA specifications require that BSs should be synchronized to within 3 microseconds of CDMA system time and shall be synchronized to within 10 microseconds. This invention disclosure method assumes the cost of GPS receivers is relatively small thus time calibration at a more precise calibration level at each location BS is recommended to be used by using the very accurate GPS time parameters. Preferably the absolute error deviation among surrounding or neighboring base stations should be less than 800 nanoseconds however in most cases this should not be a fixed requirement but rather a preference. In cases where absolute BS timing is prohibitively expensive then the Forced Hand off method discussed below can be used to overcome the preferred or strict absolute BS timing requirements.

Three methods have been currently identified. Some of these techniques apply to other air interface types as well.

Now in the general case where three or more BSs can either determine TDOA and or the mobile station can telemeter such data to the location entity within the network repeat this method for BSand BS and BSan BS in order to determine the remaining curves thus yielding location within a 2D space. In the case of 3D geometry such as a multi story building with multi floor pico BS cells the process must be repeated a fourth time in order to determine altitude.

It is worthwhile to discuss techniques for both obtaining the initial collection of verified location data as well as how additional location data can be obtained for updating the data in this data base in a straightforward cost effective manner.

Regarding both the obtaining of the initial collection of verified location data as well as gathering data updates it is believed that some of this data can be obtained from the initial and continued engineering of the base station infrastructure by the wireless telephony service provider s in the radio coverage area. Additional verified location data can be obtained by trained technicians driving and or walking certain areas and periodically at each of a plurality of locations a determining a location estimate using for example GPS if possible and or offsets from GPS readings and b using an mobile station at the location to generate location data communication with the wireless base station infrastructure.

Alternatively it is a novel aspect of the present invention that a straightforward method and system for gathering verified location data has been discovered wherein a conventional mobile station can be used without any additional electronics or circuit modifications. One embodiment of this method and system utilizes the personnel of businesses that travel predetermined routes through the radio coverage area e.g. a delivery and or pickup service to generate such data using a conventional mobile station while traversing their routes through the radio coverage area. One example of such personnel is the postal workers and in particular the mail carriers having predetermined likely repetitive routes for mail pickup and or delivery at predetermined sites denoted hereinafter as mail pickup delivery sites or simply mail sites . By having such mail carriers each carry a conventional mobile station and periodically generate location data communication with the wireless base station infrastructure at mail sites along their routes additional verified location data can be added to a Location Data Base not shown cost effectively.

To describe how this can be performed a brief description of further features available in a typical mobile station is needed. At least some modules of mobile station have the following capabilities 

 27.2.1 a unique mobile station identification number in fact every mobile station must have such a number its telephone number 

 27.2.2 the mobile station has a display and a display memory for presenting stored data records having telephone numbers and related data to a user. Further some portion of each data record is annotation and some portion is able to be transmitted to the wireless base station network. In particular the mobile station is able to store and recall data records of sufficient size such that each data record may include the following information for a corresponding mail pickup delivery site along a mail route a an address or other textual description data e.g. an English like description of the mail pickup delivery site b a predetermined telephone number and c a numerical code denoted the site code hereinafter associated with the mail pickup delivery site wherein the site code is at least unique within a set of site codes corresponding to the mail sites on the mail route. In one embodiment the memory may store or more such data records and the display is scrollable through the data records 

 27.2.3 the mobile station can have its display memory updated from either an RS232 port residing on the mobile station or from an over the air activation capability of the wireless network 

 27.2.4 the mobile station has a pause feature wherein a telephone number can be dialed and after some predetermined number of seconds additional predetermined data can be transmitted either through additional explicit user request e.g. a hard pause or automatically e.g. a soft pause . Moreover the additional predetermined data can reside in the display memory.

Assuming these features the following steps can be performed for acquiring additional verified location data 

 27.3.1 For at least some of the postal carriers having predetermined routes of addresses or locations visited the postal carriers are each provided with an mobile station having the capabilities described in 27.2.1 through 27.2.4 above wherein the memory in each provided mobile station has a corresponding list of data records for the addresses visited on the route of the postal carrier having the mobile station. Moreover each such list has the data records in the same sequence as the postal carrier visits the corresponding mail sites and each data record includes the information as in 27.2.2 for a corresponding mail site the postal carrier visits on his her mail route. More precisely each of the data records has a a description of the address or location of its corresponding mail pickup delivery site b a telephone number for dialing a data collection system for the location center or alternatively a reference to a memory area in the mobile station having this telephone number since it is likely to be the same number for most data records and c a site code for the mail pickup delivery site that is to be transmitted after a predetermined soft pause time out. Note that the corresponding list of data records for a particular postal route may be downloaded from for example a computer at a post office via the RS232 port of the mobile station or alternatively the list may be provided to the mobile station by an over the air activation. Further there are various embodiments of over the air activation that may be utilized by the present invention. In one embodiment the postal carrier dials a particular telephone number associated with data collection system and identifies both him herself by his her personal identification number PIN and the postal route via a route identifying code . Subsequently the mail pickup and delivery sites along the identified route are downloaded into the memory of the mobile station via wireless signals to the mobile station . However additional over the air techniques are also within the scope of the present invention such as 

Regarding step iii the location estimate may also include the steps temporarily increasing the mobile station transmitter power level

Note that a similar or identical procedure to the steps immediately above may be applied with other services workers such as courier services delivery services meter readers street sweepers and bus drivers having predetermined routes.

The following modules may be provided in various embodiments of the present invention and in particular as part of the location engine . Further modules and description directed to the location center and its functionality the location engine various location enhancing techniques and various additional embodiments are provided in U.S. Provisional Patent Application having Ser. No. 60 044 821 filed Apr. 25 1997 by Dupray Karr and LeBlanc from which the present application claims priority and which is fully incorporated herein by reference.

The Path Comparison Module implements the following strategy the confidence of a particular location hypothesis is be increased decreased if it is not predicting a path that lies along a known transportation pathway and the speed of the target MS is sufficiently high . For instance if a time series of target MS location hypotheses for a given FOM is predicting a path of the target MS that lies along an interstate highway the confidence of the currently active location hypothesis for this FOM should in general be increased. Thus at a high level the following steps may be performed 

The Velocity Acceleration Calculation Module computes velocity and or acceleration estimates for the target MS using currently active location hypotheses and previous location hypothesis estimates of the target MS. In one embodiment for each FOM having a currently active location hypothesis with positive confidences and a sufficient number of previous reasonably recent target MS location hypotheses a velocity and or acceleration may be calculated. In an alternative embodiment such a velocity and or acceleration may be calculated using the currently active location hypotheses and one or more recent most likely locations of the target MS output by the Location Center. If the estimated velocity and or acceleration corresponding to a currently active location hypothesis is reasonable for the region then its confidence value is incremented if not then its confidence is decremented. The algorithm may be summarized as follows 

The Attribute Comparison Module compares attribute values for location hypotheses generated from different FOMs and determines if the confidence of certain of the currently active location hypotheses should be increased due to a similarity in related values for the attribute. That is for an attribute A an attribute value for A derived from a set S of one or more location hypotheses generated by one FOM FOM is compared with another attribute value for A derived from a set Sof one or more location hypotheses generated by a different FOM FOM for determining if these attribute values cluster i.e. are sufficiently close to one another so that a currently active location hypothesis in S and a currently active location hypothesis in Sshould have their confidences increased. For example the attribute may be a target MS path data attribute wherein a value for the attribute is an estimated target MS path derived from location hypotheses generated by a fixed FOM over some recent time period. Alternatively the attribute might be for example one of a velocity and or acceleration wherein a value for the attribute is a velocity and or acceleration derived from location hypotheses generated by a fixed FOM over some recent time period.

Note that the phrase cluster sufficiently well above may have a number of technical embodiments including performing various cluster analysis techniques wherein any clusters according to some statistic must satisfy a system set threshold for the members of the cluster being close enough to one another. Further upon determining the any location hypotheses satisfying 37.1 there are various techniques that may be used in determining a change or delta in confidences to be applied. For example in one embodiment an initial default confidence delta that may be utilized is if cf denotes the confidence of such a currently active location hypothesis satisfying 37.1 then an increased confidence that still remains in the interval 0 1.0 may be cf 1 cf 1 cf or cf 1.0 cf n 2 or cf a constant having a system tuned parameter as a factor . That is the confidence deltas for these examples are 1 cf 1 cf an additive delta and 1.0 cf a multiplicative delta and a constant. Additionally note that it is within the scope of the present invention to also provide such confidence deltas additive deltas or multiplicative deltas with factors related to the number of such location hypotheses in the cluster.

Moreover note that it is an aspect of the present invention to provide an adaptive mechanism for automatically determining performance enhancing changes in confidence adjustment values such as the confidence deltas for the present module. That is such changes are determined by applying an adaptive mechanism such as a genetic algorithm to a collection of system parameters including parameters specifying confidence adjustment values as well as system parameters in order to enhance performance of the present invention. More particularly such an adaptive mechanism may repeatedly perform the following steps 

Assuming this module adjusts confidences of currently active location hypotheses according to one or more of the attributes target MS path data target MS velocity and target MS acceleration the computation for this module may be summarized in the following steps 

Note that such confidence adjustment values are used later in the calculation of an aggregate confidence adjustment to particular currently active location hypotheses.

The Extrapolation Module works on the following premise if for a currently active location hypothesis there is sufficient previous related information regarding estimates of the target MS e.g. from the same FOM or from using a most likely previous target MS estimate output by the Location Center then an extrapolation may be performed for predicting future target MS locations that can be compared with new location hypotheses. Note that interpolation routines e.g. conventional algorithms such as Lagrange or Newton polynomials may be used to determine an equation that approximates a target MS path corresponding to a currently active location hypothesis. Subsequently such an extrapolation equation may be used to compute a future target MS location. For further information regarding such interpolation schemes the following reference is incorporated herein by reference Mathews 1992. Englewood Cliffs N.J. Prentice Hall.

Accordingly if a new currently active location hypothesis is received then the target MS location estimate of the new location hypothesis may be compared with the predicted location. Consequently a confidence adjustment value can be determined according to how well if the location hypothesis i . That is this confidence adjustment value will be larger as the new MS estimate and the predicted estimate become closer together.

Note that in one embodiment of the present invention such predictions are based solely on previous target MS location estimates output by Location Center. Thus in such an embodiment substantially every currently active location hypothesis can be provided with a confidence adjustment value by this module once a sufficient number of previous target MS location estimates have been output. Accordingly a value extrapolation chk i that represents how accurately the new currently active location hypothesis identified here by i matches the predicted location is determined.

Given one or more currently active location hypotheses for the same target MS input to a controller denoted the Analytical Reasoner Controller herein this controller activates for each such input location hypothesis the other submodules denoted hereinafter as adjustment submodules with this location hypothesis. Subsequently the Analytical Reasoner Controller receives an output confidence adjustment value computed by each adjustment submodule for adjusting the confidence of this location hypothesis. Note that each adjustment submodule determines 

Subsequently the controller uses the output from the adjustment submodules to compute an aggregate confidence adjustment for the corresponding location hypothesis. In one particular embodiment of the present invention values for the eight types of confidence adjustment values described in sections above are output to the present controller for computing an aggregate confidence adjustment value for adjusting the confidence of the currently active location hypothesis presently being analyzed. As an example of how such confidence adjustment values may be utilized assuming a currently active location hypothesis is identified by i the outputs from the above described adjustment submodules may be more fully described as 

Additionally for each of the above confidence adjustments there is a corresponding Location Center system settable parameter whose value may be determined by repeated activation of an Adaptation Engine. Accordingly for each of the confidence adjustment types T above there is a corresponding system settable parameter alpha T that is tunable by the Adaptation Engine. Accordingly the following high level program segment illustrates the aggregate confidence adjustment value computed by the Analytical Reasoner Controller.

After having determined wireless location from a base technology perspective several applications are detailed below which provide the results of the location information to a variety of users in various channels and presentation schemes for a number of useful reasons and under various conditions. The following applications are addressed 1. providing wireless location to the originator or another using either the digital air interface voice channel or a wireline channel and an automatic call distributor 2. providing wireless location to the originator or another using either the digital air interface voice channel or a wireline channel and a hunt group associated with the central office or a PBS group 3. providing wireless location to the originator or another using either the digital air interface text paging or short message service communications channel 4. providing wireless location to the originator or another using the Internet and in one embodiment using netcasting or Push technology 5. selective group multicast individualized directions with optional Conferencing 6. rental car inventory control and dispatch 7. vocalized directions and tracking 8. wireless location and court ruling criminal incarceration validation 9. flexible delivery of wireless location information to public safety answering points 10. trigger based inventory and tracking 11. group e.g. family safety and conditional notification 12. wireless location based retail merchandising services 13. location based home office vehicle security management 13. infrastructure supported wireless location using hand actuated directional finding 14. infrastructure supported intelligent traffic and highway management 15. Parametric driven intelligent agent based location services. Each of these wireless location applications is discussed in detail below.

Referring to a user the initiating caller desiring the location of a target mobile station such as a user at a telephone station which is in communication with a tandem switch or a user of an mobile station or any other telephone station user such as a computer program dials a publicly dialable telephone number which terminates on the automatic call distributor ACD associated with the location center . If the caller originated the call from a mobile station then the call is processed via a base station to a mobile switch center . The mobile switch center recognizes that the call is to be routed to the PSTN via an interoffice trunk interface . The PSTN completes the call to the ACD via a trunk group interface . Note that the initiating caller could access the ACD in any number of ways including various Inter LATA Carriers via the public switched telephone network PSTN . The ACD includes a plurality of telephone network interface cards which provide telephony channel associated signaling functions such as pulse dialing and detection automatic number identification winking flash off hook voice synthesized answer dual tone multi frequency DTMF detection system intercept tones i.e. busy no answer out of service disconnected call progress answer machine detection text to speech and automatic speech recognition. Note that some of these functions may be implemented with associated digital signal processing cards connected to the network cards via an internal bus system. An assigned telephone network interface card detects the incoming call provides an off hook answer signal to the calling party then provides a text to speech TTS message via an assigned text to speech card indicating the nature of the call to the user collects the automatic number identification information if available or optionally prompts the caller for this information then proceeds to collect the mobile identification number MIN to be located. MIN collection which is provided by the initiating caller through keypad signaling tones can be achieved in several methods. In one case the network card can request a TTS message via text to speech card which prompts the initiator to key in the MIN number by keypad DTMF signals or an automatic speech recognition system can be used to collect the MIN digits. After the MIN digits have been collected a location request message is sent to a location application . The location application in concert with location application interface more particularly L API Loc see in the location system is in communication with the location engine . Note that the location engine includes the signal processing subsystem and one or more location estimate modules i.e. DA module TOA TDOA module or HBS module . The location engine initiates a series of messages using the location application programming interface L API MSC to the mobile switch center . The location application programming interface then communicates with one or more mobile switch centers to determine whether or not the mobile station to be located can be located. Conditions affecting the locateability of the mobile station include for example the mobile station being powered off the mobile station not being in communication range the mobile station roaming state not being known the mobile station not being provisioned for service and related conditions. If the mobile station cannot be located then an appropriate error response message is provided to the initiating caller via e mail using the web server in communications with the Internet via an Internet access channel or alternatively the error response message may be sent to a text to speech card which is in communications with the initiating caller via the telephone interface card and the ACD which is in communication via telephony interface circuits to the PSTN .

Note that in cases where rendering location estimate information is required on the Internet the web server can include the provision of a digital certificate key thus enabling a secure encrypted communication channel between the location web server and the receiving client. One such digital encryption key capability is a web server provided by Netscape Communications Inc. and a digital certificate key provided by Verisign Inc. both located in the state of California U.S.A.

The PSTN completes routing of the response message to the initiating caller via routine telephony principles as one skilled in the art will understand. Otherwise the mobile station is located using methods described in greater detail elsewhere herein. At a high level the mobile switch center is in communication with the appropriate base stations and provides the location system with the necessary signal and data results to enable a location estimation to be performed by the location engine . Once the location has been determined by the location engine in terms of Latitude Longitude and optionally height if known in the form of a text string the result is provided by to the initiator by inputting the location text string to a text to speech card which in turn is in communication with the assigned telephone interface card via the automatic control distributor for completing the communication path and providing the location response back to the initiating user via the telephone interface to the PSTN and from the PSTN to the initiating user.

Alternatively the location results from the location application e.g. could be provided to the initiating caller or Internet user via a web server in communication with the Internet via an Internet access channel and a firewall e.g. . In another embodiment the location results determined by the location application may be presented in terms of street addresses neighborhood areas building names and related means familiar to human users. The alternative location result can be achieved by previously storing a relationship between location descriptors familiar to humans and Latitude and Longitude range values in a map database . During the location request the location application accesses the map database providing it with the Latitude and Longitude information in the form of a primary key which is then used to retrieve the location descriptor familiar to humans. Note that to those skilled in the art the map database and associated messaging between the map database and the location application can be implemented in any number of techniques. A straightforward approach includes defining a logical and physical data model using a relational database and designer environment such as ORACLE 2000 for the design and development using a relational database such as the ORACLE 7.3 database.

In an alternative embodiment the location application may be internal to the location system e.g. as one skilled in the art will understand.

Referring to a user the initiating caller such as a mobile station desiring the location of a mobile station signals to the primary base station in connection with the mobile switch center via transport facilities . The mobile switch center is connected to the PSTN via interoffice trunks . The initiating user dials a publicly dialable telephone number which is then routed through an end office to a telephone interface card via a telephone hunt group . The hunt group provides a telephony connection to the interface card associated with the location system . The hunt group trunk interface is provided from an end office telephone switch . Note that the initiating caller could access the telephony interface card via hunt group trunk interface in any number of ways including an InterLATA Carrier via the public switched telephone network PSTN . The hunt group trunk interface is in communication with a plurality of telephone interface cards . The interface cards provide telephony channel associated signaling functions such as pulse dialing and detection automatic number identification winking flash off hook voice synthesized answer dual tone multi frequency DTMF detection system intercept tones i.e. busy no answer out of service disconnected call progress answer machine detection text to speech and automatic speech recognition. An assigned network interface card detects the incoming call provides an off hook answer signal to the calling party then provides a text to speech TTS message indicating the nature of the call to the user collects the automatic number identification information if available or optionally prompts the caller for this information then proceeds to collect the mobile identification number MIN to be located. MIN collection can be achieved in several methods. In one case the network card can request a TTS message generated by a voice synthesizer or text to speech card which prompts the initiator to key in the MIN number by keypad tone signals or an automatic speech recognition system can be used to collect the MIN digits. After the MIN digits have been collected a location request message is sent to an application in the location system . The application in location system initiates a series of messages to the mobile switch center and optionally to the home location register to determine whether or not the mobile station to be located can be located. If the mobile station cannot be located then an appropriate error response message is provided to the initiating caller via e mail test to speech card web server in communications with the public Internet or similar means. Alternatively the last known location can be provided along with the time and date stamp of the last location including an explanation that the current location is not attainable. Otherwise the mobile station is located using methods described in greater detail elsewhere in this patent. At a high level the mobile switch center is in communication with the appropriate base stations and and provides the location system with the necessary signal and data results to enable a location estimation to be performed by the location system . Once the location has been determined by the location system in terms of Latitude Longitude and optionally height if known in the form of a text string the result is provided back to the initiator by inputting the location text string to a text to speech card in communication with the assigned telephone interface card . The interface card then provides the audible synthesized message containing the location estimate to the initiating caller. Alternatively the location results could be provided to the initiating caller via a web server in communication with the Public Internet using standard client request response Internet protocols and technology. location system access to a geographical information system or other mapping system could also be used to further enhance the user understanding of the location on a map or similar graphical display.

Referring to a user the initiating caller desiring the location of an mobile station such as a wireless user using mobile station who has text paging service provisioned dials a publicly dialable telephone number carried to the PSTN which terminates on an end office based hunt group interface which in turn is in communication with the location system . The mobile switch center local tandem and interLATA Carrier tandem are in communication with the PSTN as those skilled in the art will understand. Note that the initiating caller could also be a wireline user with an ordinary telephone station in communication with a local tandem connected to the PSTN . The initiating location request user could access the telephony interface cards via the hunt group . In other embodiments including various Inter LATA Carriers via the public switched telephone network PSTN . The hunt group interface is in communication with a plurality of telephone network interface cards which are in communication with the location application . The telephone interface cards provide telephony channel associated signaling functions such as pulse dialing and detection automatic number identification winking flash off hook voice synthesized answer dual tone multi frequency DTMF detection system intercept tones i.e. busy no answer out of service disconnected call progress answer machine detection text to speech and automatic speech recognition. Note that some of these functions may be implemented with associated digital signal processing cards connected to the network cards via an internal bus system. An assigned telephony interface card detects the incoming call provides an off hook answer signal to the calling party then provides if appropriate a text to speech TTS message indicating the nature of the call to the user collects the automatic number identification information if available or optionally prompts the caller for this information then proceeds to collect the mobile identification number MIN to be located by sending a location request message to an application in the location system . The mobile station MIN collection provided through the communications channel established is sent by the initiating caller through keypad signaling tones. This MIN collection process can be achieved in several methods. In one case the telephony interface card can request a text to speech message generated by a text to speech card which prompts the initiator to key in the MIN number by keypad tone signals. In another case an automatic speech recognition system can be used to collect the MIN digits. In either case after the MIN digits have been collected a location request message is sent to the location system . The location system initiates a series of messages to the mobile switch center via the location applications programming interface L API MSC and optionally to the home location register to determine whether or not the mobile station to be located can in fact be located. Alternatively the last known location can be provided along with the time and date stamp of the last location including an explanation that the current location is not attainable. Conditions regarding the locateability of a mobile station include for example mobile station powered off mobile station not in communication range mobile station roaming state not known mobile station not provisioned for service and related conditions. If the mobile station cannot be located then an appropriate error response message is provided to the initiating caller via the service node SN for short messaging service SMS . The service node is in communication with the location system using a common text paging interface . The service node accepts the location text paging message from the location system and communicates a request to page the initiating caller via a typical signaling system 7 link for paging purposes to the mobile switch center . The mobile switch center forwards the location text page information to the initiating caller via the appropriate base stations to the initiating mobile station caller. Otherwise the mobile station is located using methods described in greater detail elsewhere in this patent. At a high level the mobile switch center is in communication with the appropriate base stations and provides the location system with the necessary signal and data results to enable a location estimation to be performed by the location system . Once the location has been determined by the location system in terms of Latitude Longitude and optionally height if known in the form of a text string . The location result is provided to the initiator by inputting the location text string to the service node for short messaging service SMS . The service node is in communication with the location system using a common text paging interface . The service node accepts the location text paging message from the location system and communicates a request to page the initiating caller via a typical signaling system 7 link for paging purposes to the mobile switch center . The mobile switch center forwards the location text page information to the initiating caller via the appropriate base stations or not shown in to the initiating caller via a text to speech card in communication with the assigned telephone interface card .

Referring to a user the initiating user desiring the location of an mobile station who has a push technology tuner associated with the user s client workstation selects the location channel in the area and further specifies the mobile station s to be located with what frequency should the location estimate be provided and other related parameters such as billing information. The user s client workstation is in communication with the Internet optionally via an encrypted communications channel e.g. channel using for example Netscape s SSL encryption decryption technology. A push transmitter connected to the Internet via a web server detects the client workstation user s request. The transmitter requests location update information for specified mobile identification numbers through a firewall and a publisher in communication with a location channel application in the location system . The location system initiates location requests for all mobile station mobile identification numbers for which location information has been subscribed to then provides the location results to the location channel application .

The location system initiates a series of messages to the mobile switch center via the location applications programming interface L API MSC and optionally to the home location register HLR to determine whether or not the mobile station or others to be located can in fact be located. Alternatively the last known location can be provided along with the time and date stamp of the last location including an explanation that current location is not attainable. Conditions regarding the locateability of a mobile station include for example mobile station powered off mobile station not in communication range mobile station roaming state not known mobile station not provisioned for service and related conditions. If the mobile station cannot be located then an appropriate error response message is provided to the initiating client workstation via the push technology components location channel application publisher firewall transmitter web server public Internet to the client workstation . A similar communication mechanism is used to provide the client s workstation with attained location information.

Note that the location channel could in fact provide a collection of mobile station mobile identification numbers for location purposes that are grouped by a particular market and or customer organization segment. for example location channel number could provide enhanced wireless 9 1 1 service to specific public safety answering points channel number could provide periodic wireless location information of a fleet of taxi cabs belonging to a particular company to their dispatch operator channel could provide wireless location to a control center of a military organization channel could provide wireless location information of vehicles carrying hazardous materials to a control center and so forth.

The location channel application provides the location results to the publisher which provides a method of adding the new location results to the transmitter via firewall . The firewall provides protection services between certain systems and the Internet such as preventing malicious users from accessing critical computing systems.

The group multicast help with individualized directions is an application wherein for members of a group that are authorized and nearest a distressed caller these members are given text paging message instructions on how to drive or navigate to reach the initiating distressed caller. Alternatively optional voice synthesis technology could be used to aid one or more members to have spoken instruction giving directions and or instructions for each member to help them reach the distressed caller.

Referring to an individual having a mobile station desires to make a distress call for help or for some other reason. The distressed caller with mobile station dials a special telephone number received by base station which then sends the originating call setup request to the mobile switch center . The mobile switch center routes the originating call through the PSTN to an automatic call distributor ACD . The ACD selects an available telephony interface circuit which answers the call and provides introductory information to the caller such as a greeting message progress of service etc. using a voice synthesizer circuit card . Note that circuits and may be combined as voice response units. The telephony interface circuit collects the automatic number identification information if available in the call setup message or optionally prompts the caller for this information. This MIN collection process can be achieved in several methods. In one case the network telephony interface card can request a TTS text to speech message generated by a voice synthesizer card which prompts the initiator to key in their MIN number by keypad tone signals. In another case an automatic speech recognition system can be used to collect the MIN digits. In either case after the MIN digits have been collected a location request message is sent to the location system . The location system or location center LC initiates a series of messages to the mobile switch center via the location applications programming interface L API MSC to determine whether or not the mobile station to be located can in fact be located. If the mobile station cannot be located then an appropriate error response message is provided to the initiating caller. Otherwise the LC determines the caller s location via methods discussed elsewhere in this patent. While this event is proceeding an application in the LS references the initiating caller s location subscriber profile database not shown to determine if the caller allows others to locate him or her and specifically which individuals are allowed to be informed of the caller s location.

Assuming the caller allows location information to be sent out to a select group then the list of member s mobile station identification numbers MIN s are extracted from the profile database and an application in the LC initiates a series of messages to the mobile switch center via the location applications programming interface L API MSC to determine the locations of each of the users mobile station mobile identification numbers associated with the member list. Regarding those mobile station mobile identification numbers nearest the distress caller each member s mobile station is dialed via a control message sent from an application in the LC to the telephony interface card . A voice synthesizer card or text to speech circuit is also patched in the calling circuit path to announce the purpose of the automated call to each member. The ACD initiates the call request to each member via the PSTN which connects to the mobile switch center that ultimately rings the member mobile station and via base stations . An application in the LC identifies a start and finish location destination location for a member based on his her current location as being the start location and the finish location being the distress caller s location at mobile station MIN. The application in the LC initiates a http or similar Internet compatible protocol universal resource locator URL request via the web server client to the public Internet which terminates on a maps directions web server . One such URL known to the authors is Lucent Technologies http www.mapsOnUs.com which is provided for public use. The map directions server queries the map base via a directions algorithm and returns to the initiating http request the location web server with a list of instructions to enable a user to navigate between a start location and end location. Referring to the information shown in the columns labeled Turn Directions And Go and or Total Miles can then be parsed from the http response information. Referring now to this information can then be sent as a short text message to the relevant mobile station or via the service node using interface to the mobile switch center and relevant base stations assuming each member mobile station has short message service provisioned. If this is not the case the service node will inform the application within the LS which then initiates an alternative method of sending the start finish location navigation instructions information via an appropriate voice synthesizer card and associated telephony interface card . The interface card initiates an automated call to each appropriate member s mobile station and via the telephony path including components ACD in communication with the PSTN which is in communication with the mobile switch center . The mobile switch center completes the routing of the automated call to the appropriate mobile station using base stations . The above process is repeated for each nearby member s mobile station thus allowing all nearby members to be notified that the distressed caller needs help with navigation instructions to each member which enables the member to reach the distressed caller. Variations of this application include putting each relevant party in communication with each other via a conference call capability in the ACD with or without providing location information and or start finish navigation instructions.

An application in the location system utilizes periodic wireless location of appropriate rental cars control circuits and control communications within the rental car and secured transactions across the Internet or similar means in order to provide various tracking and control functions. Such functions allow rental car agencies to remotely control and operate their rental cars in order to reduce operating costs such as storage and maintenance as well as provide additional conveniences and services to rental car agency customers.

Referring to a vehicle containing various sensors and actuators not shown used to for example lock and unlock car doors sense door position keypad depressions sense the condition of the engine and various subsystems such as brakes electrical subsystems sense the amount of various fluid levels etc. is in communication with a vehicle based local area network which is in turn connected to a mobile station containing asynchronous data communications capability. The vehicle based local area network may optionally contain a computer not shown for control and interfacing functions. The mobile station is always in communication using the radio air interface with at least one base station and possibly other base stations . The base stations and are in communication with the mobile switch center via transport facilities . The mobile switch center is in communication with the location system and the public switched telephone network via interoffice trunks . In addition the mobile switch center is also in communication with the location system via the location system mobile switch center physical interface . The physical interface provides two way connections to the location applications programming interface i.e. L API MSC which is in communication with a location engine which performs wireless location estimations for the mobile station which is permanently mounted in the vehicle . The location engine represents key components within the location system which together comprise the capability to perform wireless location estimations. The rental car location application is in communications with the location engine for purposes of initiating wireless location requests regarding the mobile station as well as for receiving wireless location responses from the location engine . The application is in communications with the automatic call distributor for purposes of initiating and receiving telephone calls to and from the public switch telephone network via hunt group interface . As one skilled in the art will appreciate other interfaces not shown beyond hunt groups can alternatively be used such as ISDN interface circuits T carrier and the like. The application is in communication with a web server and client which in turn is in communication with the Internet via an Internet access interface . As those in the art will understand an Internet access interface is typically provided by an Internet service provider also there are other methods which could be used to complete the Internet connection. The rental car agency contains a workstation or personal computer with an Internet access interface to the Internet . The application requests of the location engine to perform a location request periodically regarding the mobile station with the location response information provided the web server and client . For each rental car or vehicle containing a mobile station the location as well as various information about the rental car or vehicle can be ascertained via the above described infrastructure.

An application in the location system operates in conjunction with an application in each public safety answering point PSAP that together provides various call handling functions to enable the PSAP to perform its work load efficiently and effectively toward unique emergency events unique to a given location. The application pair measures the number of emergency 9 1 1 wireless calls originating from a particular geographical area or location. Upon exceeding a provisional threshold value X the application pair traps the next incoming call from the same location and provides a call screening function via a play announcement and collect digits activity. This activity alerts the originating caller that if their call relates to an incident at a particular location then they are the X 1 th caller who has already notified the PSAP and that no further caller discussion is required. However if the caller s intent does not relate to the incident described above then the caller is requested to press or say one or some similar keypad number which then is collected and causes the caller to be re routed to the next available PSAP call taker. Alternatively if the originating caller does not respond within a short time period then the call is also re routed to the next available PSAP call taker. The voice announcement may either be synthesized by a text to speech card or an PSAP operator may store a voice message which describes the incident at the above referenced location.

