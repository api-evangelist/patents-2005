---

title: Real time estimation of rolling averages of cumulative data
abstract: The present invention is directed to techniques for determining a value of a cumulative datum during a selected time interval. The disclosed method and system for collecting contact center data includes a plurality of agent and work item queues and a workflow server for distributing work items to available agents; and an event processor, that, for a selected a base time interval for accumulating a cumulative datum, determines a the rolling window that is at least one of equal and greater than the base interval and being an integer multiple of the base interval, and, when the rolling window partly spans a prior base interval, the processor can determine a rolling average for the cumulative datum over the width of the rolling window and, when the roiling window partly spans a prior base interval, the processor can estimate a value for the cumulative datum in the partly spanned prior base interval.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07818196&OS=07818196&RS=07818196
owner: Avaya Inc.
number: 07818196
owner_city: Basking Ridge
owner_country: US
publication_date: 20050613
---
The invention relates generally to contact centers and particularly to monitoring selected contact center objects to evaluate contact center operations.

In contact centers today there is an increasing need for contact center supervisors to monitor the performance of agents in real time. This can be important not only to ensure that selected sets of customer contacts e.g. gold silver and bronze customers are receiving an appropriate level of service but also to reward and discipline agents based on their performance and to evaluate agent staffing needs by skill split at any point during the day.

To provide such monitoring there are many products on the market including Operational Analyst and Call Management System by Avaya Inc. To effectively monitor the contact center these products must track a myriad of cumulative data objects including the number of contacts handled by each agent the amount of time required by each agent to service a contact the wait time for sets of enqueued contacts and for individual contacts and the like. A cumulative datum is a sum that grows and or stays the same in magnitude over a selected measurement e.g. time interval it commonly does not decrease in magnitude over the interval. Real time monitoring of these objects is made difficult by the limited memory available to store real time event information.

To accommodate the limited memory and provide some level of meaningful object tracking ratcheting is widely used by contact centers management systems to control the magnitude of cumulative data. Referring to the basic measures are monitored continuously and reset to zero at each 30 minute time interval. In the next successive interval the measure restarts the count from zero. In this way the cumulative datum is converted into a series of summary measurements at fixed intervals of time.

First after being reset to zero following each measured time interval there is effectively no measurement available to administrators until additional events have been counted. This practice has been likened by administrators to piloting an airplane in which all of the instruments are periodically reset to zero. Administrators feel like they are flying blind until the real time data begins to increase in magnitude.

Second the problem above is magnified whenever the ratio of two cumulative measures is being computed in real time. For example if the administrator wants to monitor the average time agents are talking on a call that would be the ratio of cumulative talk time numerator to the cumulative number of calls denominator . But ratcheting resets both the numerator and denominator to zero periodically so a the ratio cannot even be computed until the denominator becomes non zero and b the ratio fluctuates wildly until both numerator and denominator accumulate sufficient counts to be representative. These spurious fluctuations severely limit the ability to set meaningful thresholds for automatic triggering of notifications or corrective actions.

It would be desirable to provide to administrators the magnitude of the measured cumulative datum in a rolling window of time rather than since the datum was last reset to zero. For example where the measured object is the number of answered phone calls it would be valuable to know not only the number of calls answered since the most recent half hour boundary but also the number of calls answered in the last thirty minutes.

These and other needs are addressed by the various embodiments and configurations of the present invention. The present invention is directed to techniques for determining a value of a cumulative datum during a selected interval.

 a selecting a base time interval for accumulating a cumulative datum and a width of a rolling window the width of the rolling window being at least one of equal to and greater than the base interval and an integer multiple of the base interval 

In one configuration the estimating step is performed according to the equation Cumulative datum value over rolling window currently accumulated value cumulative datum value s for any intermediate base interval spanned fully by the rolling window weighting factor cumulative datum value over the partly spanned prior base interval . The weighting factor is assumed to vary over the partly spanned interval in a determined manner such as linearly or quadratically. The weighting factor can produce a rolling average of cumulative data in real time from current and previous ratcheted data without having to save or use the detailed changes in the data.

The present invention can provide a number of advantages. For example the present invention can solve the problem inherent in instantaneous ratcheted data by including a weighted contribution from previous ratcheted values. The result can contain no artificial resets to zero so ratios can be computed without incurring delays or spurious fluctuations after crossing an interval boundary. This permits meaningful thresholds to be set for triggering notifications or corrective actions in real time. It also can avoid the storing of the detailed arrival times of the underlying individual events. The preferred configuration of the present invention can use only the ratcheted summary values of the current and previous time intervals without further reference to or storage of the event details. The preferred configuration can also be well suited to database environments such as used in contact center reporting products in which millions of cumulative data items are being recorded in parallel. In such cases the rolling average of the preferred embodiment can be computed using industry standard data access commands in Structured Query Language SQL by creating a single database cell containing the time dependent weighting factor as a floating real point number. The same weighting factor is then used to compute rolling averages for millions of distinct cumulative data items. The arithmetic of the preferred embodiment is simple and readily adaptable to database or third party transformation or reporting tools. No additional database is commonly required to provide up to the moment rolling averages since existing contact center databases generally already provide current and previous interval data for cumulative items. Thus the proposed invention can be ideally suited for retrofitting existing ratchet based systems to provide rolling averages.

While the ratcheting products of the prior art can provide an accurate moving average over a window completely spanning one or more intervals and not spanning only part of a prior interval they provide sums that amount to running averages over windows that grow in size from zero width up to the width of the base interval rather than the constant width of the present invention . Furthermore the varying effective width of ratcheted data solutions can result in fluctuations that thwart the use of sensitive thresholds for triggering notifications or corrective actions.

The above described embodiments and configurations are neither complete nor exhaustive. As will be appreciated other embodiments of the invention are possible utilizing alone or in combination one or more of the features set forth above or described in detail below.

As used herein at least one . . . and at least one . . . or one or more of . . . and one or more of . . . or and and or are open ended expressions that are both conjunctive and disjunctive in operation. For example each of the expressions at least one of A B and C at least one of A B or C one or more of A B and C one or more of A B or C and A B and or C means A alone B alone C alone A and B together A and C together B and C together or A B and C together.

The invention will be illustrated below in conjunction with an exemplary communication system. Although well suited for use with e.g. a system having an ACD or other similar contact processing switch the invention is not limited to use with any particular type of communication system switch or configuration of system elements. Those skilled in the art will recognize that the disclosed techniques may be used in any communication application in which it is desirable to provide improved contact processing.

The media server which preferably includes the functionality of the switch can be any converged architecture for directing circuit switched and or packet switched customer contacts to one or more communication devices. Typically the server is a stored program controlled system that conventionally includes interfaces to external communication links a communications switching fabric service circuits e.g. tone detectors and generators etc. memory for storing control programs and data and a processor i.e. a computer for executing the stored control programs to control the interfaces and the fabric and to provide automatic contact distribution functionality. Features provided by the media server typically include not only telephony features and intelligent contact routing but also localization collaboration mobility messaging system management attendant features networking and application programming interfaces. The server typically includes a network interface card not shown to provide services to the serviced telecommunication devices.

Illustratively the media server can be a modified form of the following subscriber premises equipment Avaya Inc. s Definity Private Branch Exchange PBX based ACD system Avaya Inc. s IP600 LAN based ACD system or an S8100 S8300 S8500 S8700 or S8710 media server running a modified version of Avaya Inc. s Communication Manager voice application software with call processing capabilities and contact center functions. Other types of known switches and servers are well known in the art and therefore not described in detail herein.

Referring to one possible configuration of the server is depicted. The server is in communication with a plurality of customer communication lines which are part of the packet switched network and can be one or more packet switched links and agent communication line which can be a voice and data transmission line such as LAN and or a circuit switched voice line . The server includes a contact center reporting system which is preferably a modified form of Avaya Inc. s Operational Analyst or OA with On Line Analytical Processing or OLAP technology Basic Call Management System or BCMS or Call Management System or CMS that gathers contact records and contact center statistics for use in generating contact center reports.

Referring to included among the data stored in the server is a set of logical work item queues and a separate set of physical agent queues . Each logical work item queue corresponds to a different set of agent skills as does each agent queue . Included among the control programs in the server is a work item or contact vector . Contacts incoming to the contact center are assigned by work item vector to different work item queues based upon a number of known criteria. Agents who are available for handling contacts are assigned to agent queues based upon the skills that they possess. Skills based ACD is described in further detail in U.S. Pat. Nos. 6 173 053 and 5 206 903 each of which is incorporated herein by this reference.

The packet switched network is in communication with an external customer telecommunication device via a gateway and the circuit switched network with an external customer telecommunication device .

It should be emphasized that the configuration of the switch server user telecommunication devices and other elements as shown in is for purposes of illustration only and should not be construed as limiting the invention to any particular arrangement of elements.

Referring now to the contact center reporting system includes a number of components. A reporting module provides report presentation and delivery capabilities retrieves data for historical reports directly from the database server and receives real time report data from an event processor . A management module maintains the historical summary and detail data in the historical data store persists detail and interval summary data from the event processor rolls up data into daily summaries and purges old data. The event processor which is in communication with the reporting module management module server controller and contact center predictive dialer receives one or more event feeds which provides details of activities in the contact center as they occur in real time such as actions and state changes associated with an agent or a contact maintains summaries of the reporting events in a real time data store provides access to that data for reporting and data export and forwards the data to the management module to be stored in the historical data store for further processing.

The historical and real time data stores and are preferably configured as relational databases. The real time data store contains status and summary data about the managed entities and a subset of dimensional data to allow mapping between surrogate keys and natural keys. The data store is organized around a number of base intervals with exemplary intervals being 15 30 or 60 minutes in duration. A current base interval contains tables with summary data of what has happened so far during the current interval and includes tables with current status of managed entities. A configurable number of previous base intervals is maintained. The immediately previous interval is transferred to the historical store after the interval ends.

A number of entities or objects are typically tracked. The tracked objects include for example customer contacts including both inbound contacts from customers and outbound contacts to customers generated by the predictive dialer which may be circuit switched and or packet switched calls emails instant messages text chat Short Message Service or SMS contacts and Multimedia Message Service or MMS contacts agents contact queue agent queue split skill trunk trunk group Vector Directory Number vector and jobs. Characteristics of the objects may be searched such as time duration e.g. average talk time average after call work or ACW time average speed of answer average time to abandon wait time actual or expected etc. number or count during a specified time interval e.g. staffing levels type of agents staffed queue length or membership ACD calls etc. usage levels performance status or state e.g. active or abandoned idle or busy etc. age e.g. oldest call waiting etc. and percentage of contacts handled within prescribed service limits.

The event processor is configured to provide actual and or estimated real time cumulative data over a rolling moving or sliding window. A rolling moving or sliding window refers to a measured interval of a selected width or duration that moves with the passage of time relative to a fixed or stationary scale. By way of an example a rolling window is used to monitor and or analyze behavior occurring in the last thirty minutes with the absolute time e.g. 1 00 pm 1 30 pm etc. being the fixed or stationary temporal scale.

In one configuration objects are tracked precisely over defined intervals to produce an exact moving or rolling average using known mathematical techniques i.e. the exact measure during say the most recent 30 minutes.

In another configuration objects are tracked precisely over defined intervals to produce an exponential moving average a double exponential moving average an adaptive moving average and the like using known mathematical techniques. This configuration may not fully address the problems encountered in monitoring contact center objects. The various algorithms are commonly designed for an existing time series and attempt to smooth out noise or extrapolate to predict future elements of the series. They may not address real time scales shorter than the measurement interval i.e. they may not be concerned with the moment to moment value of the accumulator that is counting during the thirty minute interval and all of the smoothing results may be for periods longer than the base interval. Using the methods to extrapolate the ratcheted data points may produce a static estimate that ignores the currently accumulating value.

A limitation of the above configurations can be the memory capacity required to effect the object tracking. In contact centers tracking objects at this level of granularity can exceed the capacity of contact center software that is already sized to track millions of separate cumulative measures.

A preferred configuration of the present invention produces an estimate of the cumulative datum value over the rolling window which in some cases is an estimate of the exact moving average by combining a ratcheted cumulative data values over base intervals if any fully spanned by the rolling window b the currently accumulated value for the cumulative datum over the present base interval and c an estimated datum value in a prior partly spanned base interval using a time dependent weighting factor. It is generally applicable whenever the width of the moving window is an integer multiple of the base interval length and can provide up to the moment results with the information at hand. Stated another way the estimate has two components. The first component includes the ratcheted values saved for each historic base interval and the current base interval accumulator value. The remainder of the moving window is approximated by taking the appropriate portion of the previous partly spanned base interval s results.

This configuration will be illustrated with reference to in which the base interval and rolling window widths are the same. In the base interval is 30 minutes. The moving window which at two different locations is represented by intervals tand t includes the current accumulator value which for window tis A 400 and for tis A 1600 or first component . Because the base interval and rolling window with are the same there is no historic base interval value. If the window width were 180 minutes for example it would completely span at any position two historic base intervals each with a corresponding final interval value. The second component is required because the depicted rolling windows each span only part of an historic base interval i.e. window tspans only part of the base interval 0 to 30 minutes and window tspans only part of the base interval 60 to 90 minutes . To estimate the value to be used from the partially spanned interval a linear or uniform rate of change of the base interval interval over the base interval are assumed. The sloping straight line is dashed for each of windows tand t. The values B and B respectively represent the saved data at the end of the prior partly spanned base intervals. The values V and V respectively represent the point of intersection between a vertical line passing through the window s starting point and the corresponding dashed line. The differences B V and B V respectively constitute the second component of the estimation in a configuration of the invention. Stated another way a weighting factor is multiplied against the final base interval value which is B 400 for window tand B 1 000 for window t . For window tthe weighting factor is 0.5 which provides a value of 200 and for window tis 0.35 which provides a value of 350 . The complete estimate both components is 600 and 2 050 respectively for tand t.

Where the widths of the base interval and rolling window are the same the following equation is employed 

This configuration will be further illustrated with reference to in which the base interval and rolling window widths are different. The base interval width 5 minutes is less than but is an integer multiple of the rolling window width 30 minutes . The moving window which at one location is represented by the interval t includes the current accumulator value which for base interval is 2 and the values in the base intervals 6 5 3 4 and 5 or a value of 25 for the first component . The second component is required because the depicted rolling window spans only part of a historic base interval i.e. window tspans only two thirds of the base interval . To estimate the value to be used from the partially spanned interval a straight line and a uniform rate of change of the base interval over the base interval are assumed. The straight line is dashed for the depicted rolling window. The value V represents the point of intersection between a vertical line passing through the window s starting point and the corresponding dashed line. Stated another way a weighting factor is multiplied against the final base interval value which is B 3 for the depicted window . For the depicted window the weighting factor is 0.667 which provides a value of 2 for the second component . The complete estimate is therefore 25 2 27.

Where the widths of the base interval and rolling window are different the following equation is employed Cumulative Datum Value over Rolling Window Current Base Interval Datum Value First Previous Base Interval Datum Value Second Previous Base Interval Datum Value . . . 1Previous Base Interval Datum Value Weighting Factor Previous Base Interval Datum Value. Again the result agrees with the exact rolling average at times that coincide with the base interval boundaries and its only approximation is in the treatment of the Nth previous interval s contribution which is generally a smaller proportion of the total hence the approximation is generally fairly accurate. In this example the 30 minute estimate at each 5 minute boundary.

The accuracy of the approximation is depicted with reference to where the rolling average is determined over a 180 minute period. are each a plot of average call length seconds against real time minutes for a rolling window of 30 minutes. In the base interval width is 30 minutes but in the base interval width is 5 minutes. The actual rolling average is denoted by mathematical relationships and while the approximation produced by the above configuration is denoted by mathematical relationships and . As can be seen from the two mathematical relationships both approximations are quite close to the actual rolling average. It also shows that the approximation improves when multiple base intervals are used is better than .

In yet another configuration approximations are further improved by using adjacent previous results i.e. the N 1th and N 1th to infer a nonuniform arrival rate for events in the Nth previous interval. For example arrival rates that grow or peak during the interval could be inferred from known interpolation and or extrapolation techniques such as polynomial interpolation or regression analysis and the inferred arrival rate could be used to alter the time dependent weighting factor. This variation of the invention could apply best to situations in which adjacent previous values are expected to be correlated.

In yet a further configuration a mathematical relationship characterizing the distribution of values over the base interval or subinterval is determined by known curve fitting mathematical techniques and a descriptor of the best fit mathematical relationship is saved along with the final value for the base interval or subinterval. This configuration can be used in connection with the prior configuration.

A number of variations and modifications of the invention can be used. It would be possible to provide for some features of the invention without providing others.

For example the server and or switch can be a software controlled system including a processing unit CPU microprocessor or other type of digital data processor executing software or an Application Specific Integrated Circuit ASIC as well as various portions or combinations of such elements. The memory may be a random access memory RAM a read only memory ROM a relational database value or combinations of these and other types of electronic memory devices.

The present invention is not limited to contact center objects but may be used to determine rolling average estimates for any situation in which cumulative data is monitored in real time. For example the present invention could be used to estimate the number of cars passing a particular traffic monitoring point assembly line production controllers financial forecasting or the number of photons counted by a microscopic light detector.

The present invention in various embodiments includes components methods processes systems and or apparatus substantially as depicted and described herein including various embodiments subcombinations and subsets thereof. Those of skill in the art will understand how to make and use the present invention after understanding the present disclosure. The present invention in various embodiments includes providing devices and processes in the absence of items not depicted and or described herein or in various embodiments hereof including in the absence of such items as may have been used in previous devices or processes e.g. for improving performance achieving ease and or reducing cost of implementation.

The foregoing discussion of the invention has been presented for purposes of illustration and description. The foregoing is not intended to limit the invention to the form or forms disclosed herein. In the foregoing Detailed Description for example various features of the invention are grouped together in one or more embodiments for the purpose of streamlining the disclosure. This method of disclosure is not to be interpreted as reflecting an intention that the claimed invention requires more features than are expressly recited in each claim. Rather as the following claims reflect inventive aspects lie in less than all features of a single foregoing disclosed embodiment. Thus the following claims are hereby incorporated into this Detailed Description with each claim standing on its own as a separate preferred embodiment of the invention.

Moreover though the description of the invention has included description of one or more embodiments and certain variations and modifications other variations and modifications are within the scope of the invention e.g. as may be within the skill and knowledge of those in the art after understanding the present disclosure. It is intended to obtain rights which include alternative embodiments to the extent permitted including alternate interchangeable and or equivalent structures functions ranges or steps to those claimed whether or not such alternate interchangeable and or equivalent structures functions ranges or steps are disclosed herein and without intending to publicly dedicate any patentable subject matter.

